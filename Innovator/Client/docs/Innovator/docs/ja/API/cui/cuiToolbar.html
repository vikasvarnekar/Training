<!DOCTYPE html><html lang="ja"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>CUI Toolbar · Aras Innovator Client Documentation</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="## Location"/><meta name="docsearch:language" content="ja"/><meta property="og:title" content="CUI Toolbar · Aras Innovator Client Documentation"/><meta property="og:type" content="website"/><meta property="og:url" content="https://www.aras.com..\..\..\../index.html"/><meta property="og:description" content="## Location"/><meta property="og:image" content="https://www.aras.com..\..\..\../img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://www.aras.com..\..\..\../img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="..\..\..\../img/favicon.ico"/><link rel="stylesheet" href="..\..\..\../css/code.css"/><script type="text/javascript" src="..\..\..\../js/lunr.min.js"></script><script type="text/javascript" src="..\..\..\../js/autocomplete.min.js"></script><script type="text/javascript" src="..\..\..\../js/search.js"></script><script src="..\..\..\../js/scrollSpy.js"></script><link rel="stylesheet" href="..\..\..\../css/main.css"/><script src="..\..\..\../js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="..\..\..\../ja"><img class="logo" src="..\..\..\../img/favicon.ico" alt="Aras Innovator Client Documentation"/></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="..\..\..\../docs/ja/index.html" target="_self">Docs</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="..\..\..\../img/language.svg" alt="Languages icon"/>日本語</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="..\..\..\../docs/en/API/cui/cuiToolbar.html">English</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>CUI</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Overview</h3><ul class=""><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/index.html">Getting started</a></li><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/general/developmentPrinciples.html">Development Principles</a></li><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/general/projectStructure.html">Project Structure</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">API</h3><ul class=""><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/API/apiIndex.html">API Overview</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">CUI</h4><ul><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/API/cui/cuiLayout.html">Layout</a></li><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/API/cui/cuiControls.html">Controls</a></li><li class="navListItem navListItemActive"><a class="navItem" href="..\..\..\../docs/ja/API/cui/cuiToolbar.html">Toolbar</a></li><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/API/cui/cuiGrid.html">Grid &amp; Plugins</a></li><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/API/cui/cuiContextMenu.html">Context Menu</a></li><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/API/cui/cuiToc.html">TOC</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Components</h4><ul><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/API/components/grid.html">Grid Component</a></li><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/API/components/toolbar.html">Toolbar Component</a></li><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/API/components/menu.html">Menu Component</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Deprecated</h3><ul class=""><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/deprecated/deprecatedNamespaces.html">Namespaces</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Aras.Client.Controls.Public</h4><ul><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/deprecated/Aras.Client.Controls.Public/Aras.Client.Controls.Public.Cell.html">Cell</a></li><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/deprecated/Aras.Client.Controls.Public/Aras.Client.Controls.Public.GridContainer.html">GridContainer</a></li><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/deprecated/Aras.Client.Controls.Public/Aras.Client.Controls.Public.HtmlEditor.html">HtmlEditor</a></li><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/deprecated/Aras.Client.Controls.Public/Aras.Client.Controls.Public.TreeGridContainer.html">TreeGridContainer</a></li><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/deprecated/Aras.Client.Controls.Public/Aras.Client.Controls.Public.ToolbarItem.html">ToolbarItem</a></li><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/deprecated/Aras.Client.Controls.Public/Aras.Client.Controls.Public.Toolbar.html">Toolbar</a></li><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/deprecated/Aras.Client.Controls.Public/Aras.Client.Controls.Public.Vault.html">Vault</a></li><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/deprecated/Aras.Client.Controls.Public/Aras.Client.Controls.Public.Utils.html">Utils</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Aras.Modules.CMF.Public</h4><ul><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/deprecated/Aras.Modules.CMF.Public/Aras.Modules.CMF.Public.CmfStyle.html">CmfStyle</a></li><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/deprecated/Aras.Modules.CMF.Public/Aras.Modules.CMF.Public.ComputeMethodResultBuilder.html">ComputeMethodResultBuilder</a></li><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/deprecated/Aras.Modules.CMF.Public/Aras.Modules.CMF.Public.Element.html">Element</a></li><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/deprecated/Aras.Modules.CMF.Public/Aras.Modules.CMF.Public.Factory.html">Factory</a></li><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/deprecated/Aras.Modules.CMF.Public/Aras.Modules.CMF.Public.PropertyItem.html">PropertyItem</a></li><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/deprecated/Aras.Modules.CMF.Public/Aras.Modules.CMF.Public.Tree.html">Tree</a></li><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/deprecated/Aras.Modules.CMF.Public/Aras.Modules.CMF.Public.MappingModel.html">MappingModel</a></li></ul></div></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">CUI Toolbar</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="location"></a><a href="#location" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Location</h2>
<p>Corresponding file: <code>Innovator/Client/Modules/cui/cuiToolbar.js</code></p>
<h2><a class="anchor" aria-hidden="true" id="purpose"></a><a href="#purpose" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Purpose</h2>
<p>CUI Toolbar associates a <a href="..\..\..\../docs/ja/API/components/toolbar.html">Toolbar</a> with CUI Data,
requesting items specified by current location and providing all the required metadata for CommandBarItems.
CommandBarItems can be fo different types, meaning that not only buttons could be
rendered within a toolbar, but also other types of controls:
static images, text, inputs, menus etc.</p>
<h2><a class="anchor" aria-hidden="true" id="public-api"></a><a href="#public-api" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Public API</h2>
<p>The module exports a single function:</p>
<pre><code class="hljs css language-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cuiToolbar</span>(<span class="hljs-params">control: Toolbar, location: String, options: Object</span>): <span class="hljs-title">Promise</span>(<span class="hljs-params">{destroy: Function, updateOptions: Function}</span>)
</span></code></pre>
<h2><a class="anchor" aria-hidden="true" id="how-it-works"></a><a href="#how-it-works" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How it works</h2>
<p>After the data is recieved, CUI Toolbar would create all the event listeners
according to provided data and also would kick off the rendering process of the toolbar.
Rendering promise would be returned as a result of <code>cuiToolbar</code> execution.</p>
<p>There are several aspects, which are implied for CUI Toolbar lifecycle:</p>
<ol>
<li><a href="#data-definition">Data definition</a></li>
<li><a href="#data-processing">Data processing</a></li>
</ol>
<p>In order to understand the underlying logic of CUI Toolbar better let's walkthrough initialization of existing toolbar.</p>
<p>For example, the process of initialization of <em>Search Commands Bar</em>:</p>
<p><img src="..\..\..\../docs/assets/images/cui-toolbar__how-it-works__search-command-bar.png" alt="Search Command Bar"></p>
<h3><a class="anchor" aria-hidden="true" id="data-definition"></a><a href="#data-definition" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Data definition</h3>
<p>It all starts with data.</p>
<p>In context of CUI, data is stored in specific containers which are divided into multiple levels of abstraction.
There are so called <em>layouts</em>, which can have nested areas.
It means that there should be a layout which includes Search Command Bar, and there is one - SearchViewLayout
(<code>Innovator/Client/cui/SearchViewCuiLayout.js</code>)</p>
<p>Section refers to the special CUI data structure, which is called <em>CommandBarSection</em>.
This kind of stucture is used for storing data of controls like toolbar.</p>
<p>So, let's find a CommandBarSection which is related to the Search Commands Bar using provided <em>location</em>:</p>
<p><img src="..\..\..\../docs/assets/images/cui-toolbar__how-it-works__command-bar-section.png" alt="Search Command Bar: commandBarSection"></p>
<p>Opening this CommandBarSection we'll see that there is a <em>CommandBarItem</em> relationship with related items.
Each of the related items represents the element on the toolbar: button, menu, menu entry and others.</p>
<p><img src="..\..\..\../docs/assets/images/cui-toolbar__how-it-works__command-bar-section-contents.png" alt="Search Command Bar: commandBarSection contents"></p>
<p>Depending on the <em>itemType</em> of the element, they would be handled in a different way.</p>
<p>For example, buttons would be renedered using toolbar formatters assuming their <em>type</em> property from <em>additional_data</em>;
dropDown controls would be rendered using toolbar's <em>select</em> formatter,
separators would be rendered as-is,
and menu elements would be turned into real menus with corresponding structure.</p>
<h3><a class="anchor" aria-hidden="true" id="data-processing"></a><a href="#data-processing" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Data processing</h3>
<p>CUI Layout is responsible for the instantiation, event subscription and initialization of controls,
so, most of the logic would happen there.
Let's take a look at these stages separately.</p>
<h3><a class="anchor" aria-hidden="true" id="instantiation-of-control"></a><a href="#instantiation-of-control" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Instantiation of control</h3>
<p>Instantiation of control happens based on two inputs:</p>
<ul>
<li>control definition (JSON-like structure from layout definition)</li>
<li>control metadata (reference to the client js-component and initialization functions)</li>
</ul>
<p>This data is used during running of CUI Layout's <code>.init</code> method and each control goes through this step.
During this step control's metadata would be retrieved, based on the hard-coded values stored in <code>Innovator/Client/Modules/cui/cuiControls.js</code>.
In order to retrieve a proper metadata, <em>control_type</em> property from the control definition is used.</p>
<p>Since for Search Commands Bar the value of <em>control_type</em> is <code>ToolbarControl</code>, the following metadata would be gotten:</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">// Innovator/Client/Modules/cui/cuiControls.js</span>

<span class="hljs-keyword">const</span> initToolbarControl = <span class="hljs-function">(<span class="hljs-params">{ component }, { componentData }, options</span>) =&gt;</span>
    cuiToolbar(component, componentData[<span class="hljs-string">'location@keyed_name'</span>], options);

<span class="hljs-keyword">const</span> cuiControls = {
    [defaultControlType]: {
        <span class="hljs-attr">constructor</span>: defaultConstructor, <span class="hljs-comment">// the function which creates a DOM node</span>
        <span class="hljs-attr">webComponentName</span>: <span class="hljs-string">'div'</span>
    },
    <span class="hljs-attr">ToolbarControl</span>: {
        <span class="hljs-attr">eventHandler</span>: cuiMethods.reinitControlItems,
        <span class="hljs-attr">initControl</span>: initToolbarControl,
        <span class="hljs-attr">webComponentName</span>: <span class="hljs-string">'aras-toolbar'</span>
    }
    <span class="hljs-comment">// other controls...</span>
};

<span class="hljs-keyword">const</span> getControlMetadata = <span class="hljs-function"><span class="hljs-params">type</span> =&gt;</span> ({
    ...cuiControls[defaultControlType],
    ...cuiControls[type]
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> getControlMetadata;
</code></pre>
<p>When CUI Layout acknowledges this data, it would create a DOM Node using provided <em>constructor</em> and <em>webComponentName</em>
(Learn more: <a href="..\..\..\../docs/ja/API/components/toolbar.html">Toolbar Component</a>).</p>
<p>The usage of <em>initControl</em> and <em>eventHandler</em> would be discussed below.</p>
<h3><a class="anchor" aria-hidden="true" id="event-subscription"></a><a href="#event-subscription" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Event subscription</h3>
<p>After the toolbar control has been created, CUI Layout would create an event subscription for it.
The purpose of this subscription is the following:
during initialization of toolbar elements some of them could be initialized with data from the external world -
subscription allows to re-init them once the state of environment has changed.</p>
<p>For example, the state of Splitscreen button in header bar (on/off) depends on the state of non-toolbar functionality,
so we need to update its state (aka re-init) once splitscreen has been toggled using other than this button controls.</p>
<p>Each toolbar element can listen to multiple events -
the list of obsreved ones for a certain element could be found in toolbar item definition:</p>
<p><img src="..\..\..\../docs/assets/images/cui-toolbar__how-it-works__command-bar-item-events.png" alt="Observed events"></p>
<p>Since the data of toolbar elements is not available at this stage, generic handler is subscribed here.
This handler would fire each time when one of the observed events happen.
It will find all the items which should respond to the event and re-init them</p>
<p>Layout can be notified about the event using <code>MyLayout.observer.notify('eventName')</code>.</p>
<h3><a class="anchor" aria-hidden="true" id="initialization-of-control"></a><a href="#initialization-of-control" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Initialization of control</h3>
<p>Using the provided in control's metadata <em>initControl</em> function (which is the <strong><em>cuiToolbar</em></strong> function),
CUI Layout initializes a particular toolbar.</p>
<p>First of all, toolbar's data would be requested using information about the itemType, current location, item and item classification.
The response is a JSON representation of the command bar items related to the <em>searchview.commandbar.default</em> section,
mentioned <a href="#data-definition">above</a>.</p>
<p>That's how pure CUI data is received. Now CUI Toolbar is to populate it with contextual data.</p>
<p>For each of the received toolbar elements additional information would be gathered
forming <em>toolbar item</em> which would be passed to the Toolbar component for rendering.
This data includes (NOTE: entries can override each other; assignment priority here: from the least to the most):</p>
<ol>
<li><p>itemType metadata allowing to map <em>commandBarItems</em> of different itemTypes to the corresponding types of toolbar elements</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">const</span> cuiItemTypes = {
    <span class="hljs-attr">CommandBarButton</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-string">'button'</span>
    },
    <span class="hljs-attr">CommandBarDropDown</span>: {
        <span class="hljs-attr">clickEventType</span>: <span class="hljs-string">'change'</span>,
        <span class="hljs-attr">type</span>: <span class="hljs-string">'select'</span>
    },
    <span class="hljs-attr">CommandBarEdit</span>: {
        <span class="hljs-attr">clickEventType</span>: <span class="hljs-string">'input'</span>,
        <span class="hljs-attr">type</span>: <span class="hljs-string">'textbox'</span>
    },
    <span class="hljs-attr">CommandBarMenu</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-string">'dropdownMenu'</span>
    },
    <span class="hljs-attr">CommandBarMenuCheckbox</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-string">'checkbox'</span>
    },
    <span class="hljs-attr">CommandBarMenuSeparator</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-string">'separator'</span>
    },
    <span class="hljs-attr">CommandBarSeparator</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-string">'separator'</span>
    }
};
</code></pre></li>
<li><p><em>additional_data</em> from the <em>commandBarItem</em> definition (replacing nested structure)</p></li>
<li><p>data, returned from the <em>init_handler</em> (if any)</p></li>
</ol>
<p>The last action done during initalization of the toolbar element is replacing <em>id</em> of item with its <em>name</em>.
It is done for convenience, so that we can identify items with meaningful names while wokring with them.</p>
<p>Please, see changes happened to the &quot;Run Search&quot; button during initialization:</p>
<pre><code class="hljs css language-json">{
    <span class="hljs-comment">// initial data</span>
    <span class="hljs-attr">"@type"</span>: <span class="hljs-string">"CommandBarButton"</span>,
    <span class="hljs-attr">"@typeId"</span>: <span class="hljs-string">"2C95B39863F346EFB224DCB85390F465"</span>,
    <span class="hljs-attr">"@id"</span>: <span class="hljs-string">"C81F2E39731D44E79A63A6DE9EC9FB92"</span>,
    <span class="hljs-attr">"additional_data"</span>: {
        <span class="hljs-attr">"cssClass"</span>: <span class="hljs-string">"aras-button_primary"</span>
    },
    <span class="hljs-attr">"id"</span>: <span class="hljs-string">"C81F2E39731D44E79A63A6DE9EC9FB92"</span>,
    <span class="hljs-attr">"image"</span>: <span class="hljs-string">"../Images/SearchWhite.svg"</span>,
    <span class="hljs-attr">"include_events"</span>: <span class="hljs-string">"SearchStateChange"</span>,
    <span class="hljs-attr">"label"</span>: <span class="hljs-string">"Search"</span>,
    <span class="hljs-attr">"on_click_handler@keyed_name"</span>: <span class="hljs-string">"cui_common_runsearch_click"</span>,
    <span class="hljs-attr">"on_click_handler@type"</span>: <span class="hljs-string">"Method"</span>,
    <span class="hljs-attr">"on_click_handler"</span>: <span class="hljs-string">"630D5DF68C9E4FCFAFDE58C2CE953131"</span>,
    <span class="hljs-attr">"on_init_handler@keyed_name"</span>: <span class="hljs-string">"cui_common_runsearch_init"</span>,
    <span class="hljs-attr">"on_init_handler@type"</span>: <span class="hljs-string">"Method"</span>,
    <span class="hljs-attr">"on_init_handler"</span>: <span class="hljs-string">"2628232E098347068EAB2C075CDB6E5B"</span>,
    <span class="hljs-attr">"tooltip_template"</span>: <span class="hljs-string">"Run Search"</span>,
    <span class="hljs-attr">"name"</span>: <span class="hljs-string">"searchview.commandbar.default.runsearch"</span>,
    <span class="hljs-attr">"itemtype"</span>: <span class="hljs-string">"2C95B39863F346EFB224DCB85390F465"</span>,
    <span class="hljs-attr">"sort_order"</span>: <span class="hljs-string">"128"</span>,
    <span class="hljs-attr">"section@keyed_name"</span>: <span class="hljs-string">"searchview.commandbar.default"</span>,
    <span class="hljs-attr">"section"</span>: <span class="hljs-string">"1F53F2A5F2EF4DB588316D1AF89764F5"</span>,
    <span class="hljs-attr">"item_classification"</span>: <span class="hljs-string">""</span>,

    <span class="hljs-comment">// after processing: all the initial data + following changes:</span>
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"button"</span>, <span class="hljs-comment">// added property</span>
    <span class="hljs-attr">"cssClass"</span>: <span class="hljs-string">"aras-button_primary"</span>, <span class="hljs-comment">// property copied from additional_data</span>
    <span class="hljs-attr">"hidden"</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// added property</span>
    <span class="hljs-attr">"disabled"</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// added property</span>
    <span class="hljs-attr">"id"</span>: <span class="hljs-string">"searchview.commandbar.default.runsearch"</span> <span class="hljs-comment">// original value was replaced with the value of "name"</span>
}
</code></pre>
<p>If there are nested items (like menu entries, which are considered &quot;children&quot; relating menu item),
the process of initialization would be run for them the same way.</p>
<p>Once all the items were initialized, they would be provided to the Toolbar control.
After the data was applied, Toolbar component would render automatically.</p>
<h3><a class="anchor" aria-hidden="true" id="after-the-initialization"></a><a href="#after-the-initialization" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>After the initialization</h3>
<p>Once <strong><em>cuiToolbar</em></strong> function finished its execution it means that corresponding toolbar is set up and running.</p>
<p>There are multiple ways to interact with the toolbar later on:</p>
<ul>
<li><strong><em>cuiToolbar</em></strong> function returns an object with two public API methods wrapped in Promise:
<ul>
<li><strong>.destroy()</strong> - removes all the subscriptions made during initialization.
Detaches handlers which were set for events listed in <em>include_events</em>.
Does nothing with Layout &lt;-&gt; Toolbar subscription.</li>
<li><strong>.updateOptions(newOptions: Object)</strong> - allows to dynamically update options, which were passed during initial call.
This method can be helpful when options' values are based on the external state and
init/click handlers of toolbar elements use these values as input data.</li>
</ul></li>
<li>You can call <code>MyLayout.observer.notify('eventName')</code> for affecting some specific items subscribed to event.
In such case, interaction logic should be specified in <em>init_handler</em>.</li>
</ul>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="..\..\..\../docs/ja/API/cui/cuiControls.html"><span class="arrow-prev">← </span><span>Previous</span></a><a class="docs-next button" href="..\..\..\../docs/ja/API/cui/cuiGrid.html"><span>Next</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#location">Location</a></li><li><a href="#purpose">Purpose</a></li><li><a href="#public-api">Public API</a></li><li><a href="#how-it-works">How it works</a><ul class="toc-headings"><li><a href="#data-definition">Data definition</a></li><li><a href="#data-processing">Data processing</a></li><li><a href="#instantiation-of-control">Instantiation of control</a></li><li><a href="#event-subscription">Event subscription</a></li><li><a href="#initialization-of-control">Initialization of control</a></li><li><a href="#after-the-initialization">After the initialization</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="..\..\..\../index.html" class="nav-home"><img src="..\..\..\../img/favicon.ico" alt="Aras Innovator Client Documentation" width="66" height="58"/></a></section><section class="copyright">Copyright © 2020 Aras.</section></footer></div></body></html>