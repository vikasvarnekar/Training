<!DOCTYPE html><html lang="ja"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>CUI Layout · Aras Innovator Client Documentation</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="## Overview"/><meta name="docsearch:language" content="ja"/><meta property="og:title" content="CUI Layout · Aras Innovator Client Documentation"/><meta property="og:type" content="website"/><meta property="og:url" content="https://www.aras.com..\..\..\../index.html"/><meta property="og:description" content="## Overview"/><meta property="og:image" content="https://www.aras.com..\..\..\../img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://www.aras.com..\..\..\../img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="..\..\..\../img/favicon.ico"/><link rel="stylesheet" href="..\..\..\../css/code.css"/><script type="text/javascript" src="..\..\..\../js/lunr.min.js"></script><script type="text/javascript" src="..\..\..\../js/autocomplete.min.js"></script><script type="text/javascript" src="..\..\..\../js/search.js"></script><script src="..\..\..\../js/scrollSpy.js"></script><link rel="stylesheet" href="..\..\..\../css/main.css"/><script src="..\..\..\../js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="..\..\..\../ja"><img class="logo" src="..\..\..\../img/favicon.ico" alt="Aras Innovator Client Documentation"/></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="..\..\..\../docs/ja/index.html" target="_self">Docs</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="..\..\..\../img/language.svg" alt="Languages icon"/>日本語</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="..\..\..\../docs/en/API/cui/cuiLayout.html">English</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>CUI</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Overview</h3><ul class=""><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/index.html">Getting started</a></li><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/general/developmentPrinciples.html">Development Principles</a></li><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/general/projectStructure.html">Project Structure</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">API</h3><ul class=""><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/API/apiIndex.html">API Overview</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">CUI</h4><ul><li class="navListItem navListItemActive"><a class="navItem" href="..\..\..\../docs/ja/API/cui/cuiLayout.html">Layout</a></li><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/API/cui/cuiControls.html">Controls</a></li><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/API/cui/cuiToolbar.html">Toolbar</a></li><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/API/cui/cuiGrid.html">Grid &amp; Plugins</a></li><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/API/cui/cuiContextMenu.html">Context Menu</a></li><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/API/cui/cuiToc.html">TOC</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Components</h4><ul><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/API/components/grid.html">Grid Component</a></li><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/API/components/toolbar.html">Toolbar Component</a></li><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/API/components/menu.html">Menu Component</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Deprecated</h3><ul class=""><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/deprecated/deprecatedNamespaces.html">Namespaces</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Aras.Client.Controls.Public</h4><ul><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/deprecated/Aras.Client.Controls.Public/Aras.Client.Controls.Public.Cell.html">Cell</a></li><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/deprecated/Aras.Client.Controls.Public/Aras.Client.Controls.Public.GridContainer.html">GridContainer</a></li><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/deprecated/Aras.Client.Controls.Public/Aras.Client.Controls.Public.HtmlEditor.html">HtmlEditor</a></li><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/deprecated/Aras.Client.Controls.Public/Aras.Client.Controls.Public.TreeGridContainer.html">TreeGridContainer</a></li><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/deprecated/Aras.Client.Controls.Public/Aras.Client.Controls.Public.ToolbarItem.html">ToolbarItem</a></li><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/deprecated/Aras.Client.Controls.Public/Aras.Client.Controls.Public.Toolbar.html">Toolbar</a></li><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/deprecated/Aras.Client.Controls.Public/Aras.Client.Controls.Public.Vault.html">Vault</a></li><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/deprecated/Aras.Client.Controls.Public/Aras.Client.Controls.Public.Utils.html">Utils</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Aras.Modules.CMF.Public</h4><ul><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/deprecated/Aras.Modules.CMF.Public/Aras.Modules.CMF.Public.CmfStyle.html">CmfStyle</a></li><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/deprecated/Aras.Modules.CMF.Public/Aras.Modules.CMF.Public.ComputeMethodResultBuilder.html">ComputeMethodResultBuilder</a></li><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/deprecated/Aras.Modules.CMF.Public/Aras.Modules.CMF.Public.Element.html">Element</a></li><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/deprecated/Aras.Modules.CMF.Public/Aras.Modules.CMF.Public.Factory.html">Factory</a></li><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/deprecated/Aras.Modules.CMF.Public/Aras.Modules.CMF.Public.PropertyItem.html">PropertyItem</a></li><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/deprecated/Aras.Modules.CMF.Public/Aras.Modules.CMF.Public.Tree.html">Tree</a></li><li class="navListItem"><a class="navItem" href="..\..\..\../docs/ja/deprecated/Aras.Modules.CMF.Public/Aras.Modules.CMF.Public.MappingModel.html">MappingModel</a></li></ul></div></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">CUI Layout</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="overview"></a><a href="#overview" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Overview</h2>
<p>The goal of CUI Layout is to accept the data structure of controls, required for a particular place,
associate each data-defined control with a client-provided implementation and render them.</p>
<p>Also CUI Layout is an entity responsible for all the cross-control interactions,
that causes &quot;awareness&quot; of the business-context in which particular layout operates.
Having this concept in mind allows to foster separation of concerns:
components and controls should be as pure as possible - while layout should handle the most of business logic.</p>
<h2><a class="anchor" aria-hidden="true" id="implementation"></a><a href="#implementation" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Implementation</h2>
<p>CUI Layout is a JS class which implements the logic of handling CUI data and initialization of corresponding controls.
The class itself is located in <code>Innovator/Client/cui/CuiLayout.js</code> and could be both used as-is and as a base class for subclasses.</p>
<h2><a class="anchor" aria-hidden="true" id="how-it-works"></a><a href="#how-it-works" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How it works</h2>
<p>Most of the layout's logic is related to its creation and initialization steps and could be represented with a diagram:</p>
<p><img src="..\..\..\../docs/assets/images/cui-layout__how-it-works__diagram.svg" alt="Working diagram"></p>
<p>After layout has been created and initialized, you can interact with it using API methods like <strong>setState</strong> and <strong>updateLayout</strong>.
See related info below.</p>
<h2><a class="anchor" aria-hidden="true" id="public-api"></a><a href="#public-api" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Public API</h2>
<ul>
<li><p><strong>new CuiLayout(dom: Node, ?location='', ?options={})</strong> - constructor.
Creates an instance and associates provided arguments with it.
Creates an <em>observer</em> function which is available via <code>this.options.notifyObserver</code> from the instance.
Step #0 on the diagram.</p></li>
<li><p><strong>.init(): Promise(void)</strong> - for usage/overriding.
This method is designed as an entry point of data handling.
Here all the logic related to CUI data retreival, its handling, starting controls up (see <a href="..\..\..\../docs/ja/API/cui/cuiControls.html">CUI Controls</a>),
initialization of event subscriptions and layout state is placed.
You can override this method in case default logic is not applicable for your custom layout.
<em>Steps ##0-19 on the diagram.</em></p></li>
<li><p><strong>.state &lt;Object[readonly]&gt;</strong> - CUI Layouts has a built-in react-component-like state -
storage which contains data to be shared across multiple controls within layout.
Since layout's purpose is to coordinate controls which belong to the same business-context,
it is highly recommended to create the state with so called &quot;interaction areas&quot;
which has a single-level set of properties to be shared across controls belonged to the current layout.
Answering the question &quot;which data should be put in state&quot; you should consider the same principle as used in react-redux:
the data should be lifted from control to state only if this data is required for multiple controls.
Also, lifting state up, you should assume which data could be considered as &quot;source&quot;
and which data could be derived from it -only &quot;source&quot; one should go to the top.</p></li>
<li><p><strong>.initializeState(initState: Object): void</strong> - this method allows to define the shape of the state
associated with current layout and connect it to redux store.
By default is called from <strong>.init()</strong> method, but could be also called manually, if you have <strong>.init()</strong> method overridden.
<em>Step #2 on the diagram.</em></p></li>
<li><p><strong>.unsusbscribeFromStore(): void</strong> - this method could be used to stop reacting on any updates
which come from the redux store.</p></li>
<li><p><strong>.setState(handler: Function)</strong> - the method for updating the state of layout.
Accepts a callback which should mutate (explicitly assign a value to) all the target properties -
&quot;immer&quot; library working under the hood will produce an immutable copy of state based on the changes.
The signature of a <em>handler</em>: <code>function(draftState): void</code>.
Created copy would be sent to redux store.
Once sent, redux will notify layout about changes,
data will be synchronized and update cycle will start for current layout -
<code>shouldLayoutUpdate(oldState)</code> would be called first,
and if <code>true</code> value is returned from it, then <code>updateLayout()</code> would be invoked.</p></li>
<li><p><strong>.shouldLayoutUpdate(oldState: Object): boolean</strong> - for overriding.
The method has an access for both old and new (via <code>this.state</code>) states and can assess,
whether made changes should cause update of the whole layout or not.</p></li>
<li><p><strong>.updateLayout(oldState: Object): void</strong> - for overriding.
Defines the reaction for each part of layout based on the made changes.
This method should be used to update the exact control and filter out exact cases when this update should happen.
Here you can access control, its data and the data from layout's state.
At this stage all the controls which relies on the shared data should be hydrated with updated values.</p></li>
<li><p><strong>._getCuiControls(): Promise(Array&lt;cuiControlDefinition: Object&gt;)</strong> - <em>#temporary, #doNotUseMe</em>, for overriding.
This method defines the way how layout would gain the knowledge of controls belonged to it.
By default retrieves the data from server (implying cached version if available),
but you can use this method to return, for example, some hard-coded layout structures.
<em>Step #3 on the diagram.</em></p></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="events-and-observer"></a><a href="#events-and-observer" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Events and Observer</h2>
<p>There is a feature of CUI Layout which allows to subscribe controls to the custom events.
This mechanism is used as a communication tool between components and the external world (including other components).
It is called <em>CUI Observer</em> (learn more about <a href="https://en.wikipedia.org/wiki/Observer_pattern">observer pattern</a>).</p>
<p>In order to subscribe to any event, on the control level, e.g. <em>commandBarItem</em>, you need to specify
<code>include_events</code> property, providing there comma-separated list of target events.
If set this way, all the items would get subscribed to these events and once the event broadcasted,
they would reinit themselves.</p>
<p>Notification could be run manually with: <code>this.observer.notify('myEventName')</code>.</p>
<h2><a class="anchor" aria-hidden="true" id="layout-examples"></a><a href="#layout-examples" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Layout examples</h2>
<ul>
<li><p>Search view layout (<code>Innovator/Client/Modules/cui/SearchViewCuiLayout.js</code>)</p>
<p>CUI Layout for the view, displayed in the search tab.</p></li>
<li><p>Search dialog layout (<code>Innovator/Client/Modules/cui/SearchDialogCuiLayout.js</code>)</p>
<p>CUI Layout for the view, shown when you look for an item in the popup dialog.</p></li>
<li><p>Relationships grid layout</p>
<p>CUI Layout for the view, shown when you look for an item in the popup dialog.
Has <code>._getCuiControls</code> method overriden, causing usage of the hardcoded descriptions of toolbars shown there.
Made so, because for now we can't describe all the visible controls in terms of CUI (like grid and pagination).</p></li>
</ul>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="..\..\..\../docs/ja/API/apiIndex.html"><span class="arrow-prev">← </span><span>API Overview</span></a><a class="docs-next button" href="..\..\..\../docs/ja/API/cui/cuiControls.html"><span>Next</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#overview">Overview</a></li><li><a href="#implementation">Implementation</a></li><li><a href="#how-it-works">How it works</a></li><li><a href="#public-api">Public API</a></li><li><a href="#events-and-observer">Events and Observer</a></li><li><a href="#layout-examples">Layout examples</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="..\..\..\../index.html" class="nav-home"><img src="..\..\..\../img/favicon.ico" alt="Aras Innovator Client Documentation" width="66" height="58"/></a></section><section class="copyright">Copyright © 2020 Aras.</section></footer></div></body></html>