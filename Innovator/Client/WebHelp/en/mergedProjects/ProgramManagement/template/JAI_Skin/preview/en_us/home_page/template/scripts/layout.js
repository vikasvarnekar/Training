(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

var _window = window,
    rh = _window.rh;
var _ = rh._;
var $ = rh.$;
var consts = rh.consts;
var model = rh.model;


var HASH_KEY_RH_SEARCH = consts('HASH_KEY_RH_SEARCH');
var HASH_KEY_TOPIC = consts('HASH_KEY_TOPIC');
var HASH_KEY_UIMODE = consts('HASH_KEY_UIMODE');
var HASH_KEY_RH_TOCID = consts('HASH_KEY_RH_TOCID');
var HASH_KEY_RH_HIGHLIGHT = consts('HASH_KEY_RH_HIGHLIGHT');
var HASH_KEY_RANDOM = consts('HASH_KEY_RANDOM');
var hashQueryKeys = [HASH_KEY_RH_HIGHLIGHT, consts('HASH_KEY_RH_SYNS'), HASH_KEY_RH_TOCID];

// Helper methods
var getMergedParamsMap = function getMergedParamsMap(topicUrl) {
  var paramsMap = _.urlParams(_.extractParamString(topicUrl));
  var hashMap = _.hashParams(_.extractHashString(topicUrl));
  return _.extend(paramsMap, hashMap);
};

var getTopicURL = function getTopicURL(newMap, topicUrl) {
  topicUrl = topicUrl;
  var filePath = _.filePath(topicUrl);
  var bookMark = _.extractHashString(topicUrl);
  if (bookMark.length > 0) {
    bookMark = '#' + bookMark;
  }

  var paramsMap = _.urlParams(_.extractParamString(topicUrl));
  var _iteratorNormalCompletion = true;
  var _didIteratorError = false;
  var _iteratorError = undefined;

  try {
    for (var _iterator = Array.from(hashQueryKeys)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
      var key = _step.value;
      if (newMap[key] != null) {
        paramsMap[key] = newMap[key];
      }
    }
  } catch (err) {
    _didIteratorError = true;
    _iteratorError = err;
  } finally {
    try {
      if (!_iteratorNormalCompletion && _iterator.return) {
        _iterator.return();
      }
    } finally {
      if (_didIteratorError) {
        throw _iteratorError;
      }
    }
  }

  if (model.get(consts('KEY_SCREEN_IOS'))) {
    paramsMap[HASH_KEY_RANDOM] = _.uniqueId();
  }
  var params = _.mapToEncodedString(paramsMap);
  if (params.length > 0) {
    params = '?' + params;
  }

  return '' + filePath + params + bookMark;
};

var queueUpdateHashMap = _.queueUpdateHashMap;


var fixHashMapForTopic = function fixHashMapForTopic(hashMap) {
  if (hashMap == null) {
    hashMap = {};
  }
  hashMap[HASH_KEY_UIMODE] = null;
  hashMap[HASH_KEY_RANDOM] = null;
  if (!hashMap[HASH_KEY_RH_TOCID]) {
    hashMap[HASH_KEY_RH_TOCID] = null;
  }
  if (!hashMap[HASH_KEY_RH_HIGHLIGHT]) {
    hashMap[HASH_KEY_RH_HIGHLIGHT] = null;
  }
  return hashMap;
};

var showTopic = function showTopic(relUrl, addToHistory) {
  relUrl = _.fixRelativeUrl(relUrl);
  var hashMap = _.urlParams(_.extractParamString(relUrl));
  hashMap[HASH_KEY_TOPIC] = _.stripParam(relUrl);
  hashMap = fixHashMapForTopic(hashMap);
  return queueUpdateHashMap(hashMap, addToHistory);
};

var showNonTopic = function showNonTopic(url, addToHistory) {
  var hashMap = {};
  hashMap[HASH_KEY_TOPIC] = url;
  hashMap = fixHashMapForTopic(hashMap);
  return queueUpdateHashMap(hashMap, addToHistory);
};

({
  isSameTopic: function isSameTopic(url1, url2) {}
});

//Event Handlers

var hashChanged = function hashChanged(obj) {
  var searchTermChanged = void 0;
  var newMap = obj.newMap;
  var oldMap = obj.oldMap;

  var oldUiMode = oldMap[HASH_KEY_UIMODE];
  var uiMode = newMap[HASH_KEY_UIMODE];

  if (HASH_KEY_RH_SEARCH in newMap) {
    var searchTerm = newMap[HASH_KEY_RH_SEARCH];
    searchTermChanged = searchTerm !== model.get(consts('KEY_SEARCHED_TERM'));
    model.publish(consts('KEY_SEARCH_TERM'), searchTerm, { sync: true });
  }

  if (uiMode === 'search') {
    if (searchTermChanged && window.gHost) {
      model.publish(consts('EVT_QUERY_SEARCH_RESULTS'), true);
    }
  }

  if (!uiMode || newMap[HASH_KEY_TOPIC]) {
    var topicUrl = void 0;
    var oldTopicUrl = model.get(consts('KEY_TOPIC_IN_IFRAME'));
    if (HASH_KEY_TOPIC in newMap) {
      topicUrl = newMap[HASH_KEY_TOPIC];
    }
    if (!topicUrl) {
      topicUrl = oldTopicUrl;
    }
    var feature = rh.model.get(rh.consts('KEY_FEATURE'));
    if (!topicUrl && (!feature || feature.showDefTopic !== false)) {
      topicUrl = window.gDefaultTopic != null ? window.gDefaultTopic.substring(1) : undefined;
    }
    var changed = topicUrl && (topicUrl !== oldTopicUrl || oldUiMode !== uiMode || oldMap[HASH_KEY_RH_HIGHLIGHT] !== newMap[HASH_KEY_RH_HIGHLIGHT] || oldMap[HASH_KEY_RH_TOCID] !== newMap[HASH_KEY_RH_TOCID]);
    if (changed) {
      if (_.stripBookmark(topicUrl) !== _.stripBookmark(oldTopicUrl)) {
        _.runTopicLoadingAnimation(true);
      }
      model.publish(consts('KEY_TOPIC_IN_IFRAME'), topicUrl);
      window.loadTopic(getTopicURL(newMap, topicUrl));
    }
  }

  return model.publish(consts('KEY_UI_MODE'), newMap[HASH_KEY_UIMODE]);
};

var topicChanged = function topicChanged(topicUrl) {
  var hashMap = _.hashParams();
  if (topicUrl && !hashMap[HASH_KEY_UIMODE]) {
    var decodedURI = decodeURI(document.location.href);
    var relUrl = window._getRelativeFileName(decodedURI, topicUrl);
    var oldUrl = hashMap[HASH_KEY_TOPIC];
    if (!oldUrl || _.filePath(relUrl) !== _.filePath(oldUrl)) {
      model.publish(consts('KEY_TOPIC_IN_IFRAME'), relUrl);
      return showTopic(relUrl, false);
    }
  }
};

var navigateToUrl = function navigateToUrl(obj) {
  var url = obj.absUrl;
  if (_.isRootUrl()) {
    if (_.isUrlAllowdInIframe(url)) {
      url = _.makeRelativeUrl(_.fixRelativeUrl(url));
      if (_.isHomeUrl(url)) {
        return document.location.href = url;
      }
      var fileName = url && _.filePath(url);
      if (fileName === consts('START_FILEPATH')) {
        url = url.substring(fileName.length); //never pass start file inside iframe
      } else if (!url) {
        url = '#ux';
      }

      if (url[0] === '#' || url[0] === '?') {
        var hashMap = _.hashParams(_.extractHashString(url));
        if (!(HASH_KEY_UIMODE in hashMap)) {
          hashMap[HASH_KEY_UIMODE] = null;
        }
        return queueUpdateHashMap(hashMap, true);
      } else if (url) {
        return showTopic(url, true);
      }
    } else {
      return showNonTopic(url, true);
    }
  } else {
    if (!_.isRootUrl(url)) {
      var params = void 0,
          relUrl = void 0;
      var rootUrl = _.getRootUrl();
      if (_.isExternalUrl(url)) {
        relUrl = url;
      } else {
        params = _.getParamsForRoot(url);
        relUrl = _.fixRelativeUrl(_.makeRelativePath(url, rootUrl));
      }
      url = '' + rootUrl + params + '#t=' + encodeURIComponent(relUrl);
    }
    return document.location.href = url;
  }
};

model.subscribe(consts('EVT_WIDGET_LOADED'), function () {
  _.addEventListener(document, 'click', _.hookClick);

  model.subscribe(consts('EVT_HASH_CHANGE'), hashChanged);

  model.subscribe(consts('KEY_TOPIC_URL'), topicChanged);

  model.subscribe(consts('EVT_NAVIGATE_TO_URL'), navigateToUrl);

  // call to update old layout specific variables
  model.subscribe(consts('KEY_TOPIC_IN_IFRAME'), function (topicUrl) {
    if ('' + window.gHost + window.gHostPath !== '/') {
      // wait to resolve gHostPath
      if (window.setTopic) {
        window.setTopic();
      }
      if (window.changeTopicLink) {
        return window.changeTopicLink(document.location.toString());
      }
    }
  });

  model.subscribe(consts('EVT_TOPIC_LOADED'), function () {
    return _.runTopicLoadingAnimation(false);
  });

  return model.subscribe(consts('EVT_INSIDE_IFRAME_DOM_CONTENTLOADED'), function () {
    return _.runTopicLoadingAnimation(false);
  });
});

},{}],2:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var _window = window,
    rh = _window.rh;
var model = rh.model;
var _ = rh._;
var consts = rh.consts;
var http = rh.http;


var GlossaryController = function () {
  var entrys = undefined;
  GlossaryController = function (_rh$NavController) {
    _inherits(GlossaryController, _rh$NavController);

    _createClass(GlossaryController, null, [{
      key: 'initClass',
      value: function initClass() {

        entrys = 'entrys';
      }
    }]);

    function GlossaryController(widget) {
      _classCallCheck(this, GlossaryController);

      var _this = _possibleConstructorReturn(this, (GlossaryController.__proto__ || Object.getPrototypeOf(GlossaryController)).call(this));

      _this.data = [];
      _this.chunkCount = 0;
      _this.count = 0;
      _this.keys = '';
      _this.alhpabet = '';
      _this.loadNavData('glo');
      _this.filter = '';
      _this.widget = widget;
      _this.widget.publish('show', {});
      return _this;
    }

    _createClass(GlossaryController, [{
      key: 'addElement',
      value: function addElement(elements, list) {
        var _this2 = this;

        return function () {
          var result = [];
          _.each(elements[entrys], function (element) {
            if (element != null) {
              if (!_this2.lookup(list, element)) {
                result.push(list.push(element));
              } else {
                result.push(undefined);
              }
            }
          }, _this2);
          return result;
        }();
      }
    }, {
      key: 'exists',
      value: function exists(name) {
        var ch = this.alphaText(name);
        if (this.alhpabet.indexOf(ch) > -1) {
          return true;
        }
        this.alhpabet += ch;
        return false;
      }
    }, {
      key: 'isFiltered',
      value: function isFiltered(name, modelKey) {
        var filter = modelKey ? model.get(modelKey) : this.filter;
        return filter && name.toLocaleLowerCase().indexOf(filter.toLocaleLowerCase()) === -1;
      }
    }, {
      key: 'alphaText',
      value: function alphaText(name) {
        return name.toUpperCase().charAt(0);
      }
    }, {
      key: 'filterGlo',
      value: function filterGlo(value) {
        this.filter = value.toLocaleLowerCase();
        this.alhpabet = '';
        return model.publish(consts('PROJECT_GLOSSARY_DATA'), model.get(consts('PROJECT_GLOSSARY_DATA')));
      }
    }]);

    return GlossaryController;
  }(rh.NavController);
  GlossaryController.initClass();
  return GlossaryController;
}();

rh.controller('GlossaryController', GlossaryController);

},{}],3:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var _window = window,
    rh = _window.rh;
var model = rh.model;
var _ = rh._;
var consts = rh.consts;
var http = rh.http;
var rhs = rh.rhs;

var topics = 'topics';

var NavController = function () {
  function NavController() {
    _classCallCheck(this, NavController);

    this.updateData = this.updateData.bind(this);
  }

  _createClass(NavController, [{
    key: 'lookup',
    value: function lookup(children, key) {
      var element = void 0;
      if (children != null && key != null) {
        _.any(children, function (child) {
          if (child != null) {
            if (key.type === child.type && key.name === child.name && _.isEqual(key.url, child.url)) {
              element = child;
            }
            return element != null;
          }
        }, this);
      }
      return element;
    }
  }, {
    key: 'sort',
    value: function sort(array) {
      return array.sort(function (first, second) {
        return window.compare(first.name, second.name);
      });
    }
  }, {
    key: 'updateData',
    value: function updateData(constKey, projectUrl) {
      var curData = model.get(consts('KEY_TEMP_DATA')) || [];
      model.publish(consts('KEY_TEMP_DATA'));
      this.addElement(curData, this.data, projectUrl, this.keys);
      if (--this.chunkCount === 0 && this.count === 0) {
        this.sort(this.data);
        return model.publish(consts(constKey), this.data);
      }
    }
  }, {
    key: 'getChunkData',
    value: function getChunkData(projectUrl, key) {
      this.count--;
      var arr = __guard__(model.get(consts('KEY_TEMP_DATA')), function (x) {
        return x['chunkinfos'];
      }) || [];
      this.chunkCount += arr.length;
      return _.each(arr, function (chunk) {
        var _this = this;

        if (projectUrl) {
          projectUrl = _.ensureSlash(projectUrl);
        }
        return _.loadScript(projectUrl + 'whxdata/' + chunk.node + '.new.js', false, function () {
          return _this.updateData(key, projectUrl);
        });
      }, this);
    }
  }, {
    key: 'loadNavData',
    value: function loadNavData(type) {
      var _this2 = this;

      return model.subscribe(consts('KEY_PROJECT_LIST'), function (list) {
        _this2.alhpabet = '';
        _this2.count += list.length;
        return _.each(list, function (projectUrl) {
          var _this3 = this;

          if (projectUrl) {
            projectUrl = _.ensureSlash(projectUrl);
          }
          return _.loadScript(projectUrl + 'whxdata/' + (type === 'ndx' ? 'idx' : 'glo') + '.new.js', false, function () {
            return _this3.getChunkData(projectUrl, type === 'ndx' ? 'PROJECT_INDEX_DATA' : 'PROJECT_GLOSSARY_DATA');
          });
        }, _this2);
      });
    }
  }]);

  return NavController;
}();

rh.NavController = NavController;

var IndexController = function () {
  var defProject = undefined;
  IndexController = function (_rh$NavController) {
    _inherits(IndexController, _rh$NavController);

    _createClass(IndexController, null, [{
      key: 'initClass',
      value: function initClass() {
        defProject = '';
      }
    }]);

    function IndexController(widget) {
      _classCallCheck(this, IndexController);

      var _this4 = _possibleConstructorReturn(this, (IndexController.__proto__ || Object.getPrototypeOf(IndexController)).call(this));

      _this4.data = [];
      _this4.chunkCount = 0;
      _this4.count = 0;
      _this4.alhpabet = '';
      _this4.filter = '';
      _this4.keys = 'keys';
      _this4.widget = widget;

      model.subscribeOnce(consts('EVT_PROJECT_LOADED'), function () {
        _this4.loadNavData('ndx');
        _this4.getIndexData();
        return model.subscribe(consts('KEY_INDEX_FILTER'), function () {
          return _this4.alhpabet = '';
        });
      });
      return _this4;
    }

    _createClass(IndexController, [{
      key: 'addElement',
      value: function addElement(element, list, projectUrl, data) {
        var _this5 = this;

        if (element[data] != null) {
          return function () {
            var result = [];
            _.each(element[data], function (child) {
              if (child != null) {
                var existing;

                if (!(existing = _this5.lookup(list, child))) {
                  var obj = { type: child.type, name: child.name };
                  if (child['data-rhtags']) {
                    obj['data-rhtags'] = child['data-rhtags'] + '+' + projectUrl;
                  }
                  if (!child.url) {
                    obj[topics] = [];
                  }
                  var relUrl = _.makeRelativeUrl('' + projectUrl, defProject);
                  if (child.url != null) {
                    obj.url = '' + encodeURI(relUrl) + child.url;
                  }
                  if (child.url == null) {
                    obj[_this5.keys] = [];
                  }
                  list.push(obj);
                  existing = list[list.length - 1];
                }
                _this5.addElement(child, existing[_this5.keys], projectUrl, _this5.keys);
                result.push(_this5.addElement(child, existing[topics], projectUrl, topics));
              }
            }, _this5);
            return result;
          }();
        }
      }
    }, {
      key: 'showItem',
      value: function showItem(name) {
        var filter = model.get(consts('KEY_INDEX_FILTER'));
        return !filter || name.toLocaleLowerCase().indexOf(filter.toLocaleLowerCase()) !== -1;
      }
    }, {
      key: 'showCategory',
      value: function showCategory(name, level) {
        if (level > 0) {
          return false;
        }
        var ch = this.alphaText(name);
        if (this.alhpabet.indexOf(ch) > -1) {
          return false;
        }
        this.alhpabet += ch;
        return true;
      }
    }, {
      key: 'showNextLevel',
      value: function showNextLevel(node) {
        var id = node.getAttribute('data-indexid');
        var old = this.widget.get('show.' + id);
        var childData = _defineProperty({}, id, !old);
        while (id) {
          id = id.substr(0, id.lastIndexOf('_'));
          childData[id] = true;
        }
        return this.widget.publish('show', childData);
      }
    }, {
      key: 'alphaText',
      value: function alphaText(name) {
        return name.toUpperCase().charAt(0);
      }
    }, {
      key: 'getIndexData',
      value: function getIndexData() {
        return model.subscribeOnce(consts('KEY_PUBLISH_BASE_URL'), function () {
          try {
            var baseUrl = model.get(consts('KEY_PUBLISH_BASE_URL'));
            var host = document.location.origin;
            var baseContext = baseUrl.substr(host.length);
            var parentPath = _.parentPath(_.filePath(_.getRootUrl()));
            if (baseContext && !_.isEmptyString(baseContext)) {
              var hashString = _.mapToEncodedString(_.extend(_.addPathNameKey({ area: rhs.area(),
                prj: rhs.project(), type: rhs.type(), agt: 'ndx', mgr: 'agm'
              })));
              return http.get(baseContext + '?' + hashString).success(function (data, status) {
                data = JSON.parse(data);
                var list = [];
                var rootPrjs = [];
                var projects = data.allProjects;
                var _data = data,
                    masterProjects = _data.masterProjects;

                if (projects.length) {
                  projects[0] = _.ensureSlash(projects[0]);
                }
                var makelist = function makelist(projectList, outList) {
                  return _.each(projectList, function (item) {
                    return outList.push(_.makeRelativeUrl(item, projects[0]));
                  });
                };
                makelist(projects, list);
                makelist(masterProjects, rootPrjs);
                var updateList = function updateList(item, index, list) {
                  if (_.isEmptyString(item)) {
                    list[index] = '.';
                  }
                };
                _.each(list, updateList);
                _.each(rootPrjs, updateList);
                model.publish(consts('KEY_PROJECT_LIST'), list);
                return model.publish(consts('KEY_MASTER_PROJECT_LIST'), rootPrjs);
              });
            }
          } catch (err) {
            if (rh._debug) {
              return rh._d('warn', err.message);
            }
          }
        });
      }
    }]);

    return IndexController;
  }(rh.NavController);
  IndexController.initClass();
  return IndexController;
}();

rh.controller('IndexController', IndexController);

function __guard__(value, transform) {
  return typeof value !== 'undefined' && value !== null ? transform(value) : undefined;
}

},{}],4:[function(require,module,exports){
"use strict";

var rh = require("../../src/lib/rh");
var _ = rh._;

_.findEditDist = function (first, second) {
  if (first == second) return 0;
  var prevDist = [];
  var dist = [];
  for (var i = 0; i < second.length + 1; i++) {
    prevDist.push(i);
    dist.push(0); //just to create a array of size second.length+1
  }

  for (var i = 0; i < first.length; i++) {
    dist[0] = i + 1;

    for (var j = 0; j < second.length; j++) {
      var curr = void 0;
      if (first[i] == second[j]) curr = 0;else curr = 1;

      dist[j + 1] = Math.min(dist[j] + 1, prevDist[j + 1] + 1, prevDist[j] + curr);
    }

    for (var j = 0; j < prevDist.length; j++) {
      prevDist[j] = dist[j];
    }
  }
  return dist[dist.length - 1];
};

},{"../../src/lib/rh":23}],5:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var bind = function bind(fn, me) {
  return function () {
    return fn.apply(me, arguments);
  };
};

var rh = require("../../src/lib/rh");
var nodeUtil = require('../../src/responsive_help/utils/node_utils');
var _ = rh._;
var $ = rh.$;
var model = rh.model;
var consts = rh.consts;
var KEY_TOC_DRILL_DOWN = consts('KEY_TOC_DRILL_DOWN');
var ANIM_TIME = 700;
var SyncToc = void 0;
var TocController = void 0;

SyncToc = function () {
  var SyncToc = function () {
    function SyncToc() {
      _classCallCheck(this, SyncToc);
    }

    _createClass(SyncToc, [{
      key: 'sync',
      value: function sync(tc, info) {
        var node = void 0;
        tc.updateActiveBookInfo(0, '_');

        node = tc.widget.node;
        //tc.updateBreadcrumbInfo(tc.widget.node);

        this.reset(info);
        return this.syncToProjectToc(tc, node.children, function (_this) {
          return function (nodes) {
            return _this.syncToTocItem(tc, nodes);
          };
        }(this));
      }
    }, {
      key: 'reset',
      value: function reset(info) {
        var idx = void 0;
        this.parseTocInfo(info);
        idx = this.order.lastIndexOf('@');
        return this.parentOrder = idx !== -1 ? this.order.substring(0, idx) : '';
      }
    }, {
      key: 'parseTocInfo',
      value: function parseTocInfo(info) {
        var path = void 0;
        this.order = info.childOrder || '';
        path = _.splitAndTrim(info.childPrefix, '.');
        this.tocPath = _.reduce(path, function (result, prefix) {
          var arr = void 0,
              bookNo = void 0;
          arr = _.splitAndTrim(prefix, '@');
          if (bookNo = arr.shift()) {
            result.push({
              bookNo: _.parseInt(bookNo, 0),
              order: arr.length > 0 ? '@' + arr.join('@') : ''
            });
          }
          return result;
        }, []);
        path = _.splitAndTrim(info.topicID || '0', '_');
        this.bookNos = _.map(path.shift().split('.'), function (item) {
          return _.parseInt(item, 0);
        });
        return this.pageNo = _.parseInt(path.shift(), 0);
      }
    }, {
      key: 'syncToProjectToc',
      value: function syncToProjectToc(tc, nodes, success) {
        var curBookNo = void 0,
            idx = void 0,
            path = void 0;
        if (this.tocPath.length > 0) {
          curBookNo = 0;
          path = this.tocPath.shift();
          idx = _.findIndex(nodes, function (child) {
            var childOrder = void 0;
            childOrder = $.dataset(child, 'childorder') || '';
            if (childOrder === path.order && tc.isBookNode(child)) {
              curBookNo++;
              if (curBookNo === path.bookNo) {
                return true;
              }
            }
            return false;
          });
          if (idx !== -1) {
            return tc.openBook(nodes[idx], true, function (_this) {
              return function () {
                return _.defer(function () {
                  var child = void 0,
                      childNodes = void 0;
                  child = nodes[idx + 1];
                  if (childNodes = child.children && child.children[0]) {
                    return _this.syncToProjectToc(tc, childNodes.children, success);
                  }
                });
              };
            }(this));
          }
        } else if (success) {
          return success(nodes);
        }
      }
    }, {
      key: 'syncToTocItem',
      value: function syncToTocItem(tc, nodes, wait) {
        var curBookNo = void 0,
            curPageNo = void 0,
            lastBookNode = void 0;
        if (wait == null) {
          wait = 1;
        }
        curPageNo = 0;
        curBookNo = 0;
        lastBookNode = null;
        return _.any(nodes, function (_this) {
          return function (child) {
            var bookNode = void 0,
                childOrder = void 0,
                hasChild = void 0,
                pageNode = void 0,
                topicNode = void 0;
            childOrder = $.dataset(child, 'childorder') || '';
            if (childOrder !== _this.order) {
              return;
            }
            if (tc.isBookNode(child)) {
              bookNode = child;
              lastBookNode = bookNode;
            }
            if (bookNode) {
              curBookNo++;
            }
            if (_this.bookNos[0] !== curBookNo) {
              return;
            }
            if (tc.isPageNode(child)) {
              pageNode = child;
            }
            if (pageNode) {
              curPageNo++;
            }
            if (_this.bookNos.length === 1) {
              if (_this.pageNo === 0) {
                topicNode = child;
                if (lastBookNode) {
                  tc.openBook(lastBookNode, true, function () {
                    return tc.updateBookInfo();
                  });
                }
              } else if (pageNode && curPageNo === _this.pageNo) {
                topicNode = child;
              }
              tc.updateBookInfo();
              if (topicNode) {
                tc.selectLink(topicNode, true, wait);
              }
            } else if (lastBookNode && (hasChild = $.hasClass(child, 'child'))) {
              _this.bookNos.shift();
              tc.openBook(lastBookNode, true, function () {
                return _.defer(function () {
                  var childNodes = void 0;
                  if (childNodes = child.children && child.children[0]) {
                    return _this.syncToTocItem(tc, childNodes.children, ANIM_TIME);
                  }
                });
              });
              return true;
            }
            return topicNode != null;
          };
        }(this));
      }
    }]);

    return SyncToc;
  }();

  return SyncToc;
}();

TocController = function () {
  var ACTIVE_CLASS = void 0,
      COLLAPSING_CLASS = void 0,
      EXPANDED_CLASS = void 0,
      EXPANDING_CLASS = void 0,
      KEY_ACTIVE_BOOKID = void 0,
      KEY_ACTIVE_BOOK_LEVEL = void 0,
      KEY_BOOKID = void 0,
      KEY_BOOK_LEVEL = void 0,
      KEY_SHOW_CHILD = void 0,
      KEY_TOC = void 0,
      LOADING_BOOK = void 0,
      SELECTED_CLASS = void 0;

  EXPANDED_CLASS = 'expanded';

  ACTIVE_CLASS = 'active';

  COLLAPSING_CLASS = 'collapsing';

  EXPANDING_CLASS = 'expanding';

  LOADING_BOOK = 'loading-book';

  SELECTED_CLASS = 'selected';

  KEY_SHOW_CHILD = 'show_child';

  KEY_BOOKID = 'bookid';

  KEY_ACTIVE_BOOKID = 'active_bookid';

  KEY_BOOK_LEVEL = 'level';

  KEY_ACTIVE_BOOK_LEVEL = 'active_level';

  KEY_TOC = '.p.toc';
  var CURRENT_TOC_KEY = 'curtoc',
      TOC_ITEM_ATTR = 'data-tocitem';

  var KEY_BREADCRUMBS = consts('KEY_TOC_BREADCRUMBS');

  var TocController = function () {
    function TocController(widget) {
      var _this2 = this;

      _classCallCheck(this, TocController);

      this.widget = widget;
      this.subscribeTopicID = bind(this.subscribeTopicID, this);

      this.onClick = bind(this.onClick, this);
      this.updateBookInfo = bind(this.updateBookInfo, this);
      this._data = {};
      this.projectAbsRef = [];
      if (this.syncToc == null) {
        this.syncToc = new SyncToc();
      }
      this.widget.publish(KEY_BOOK_LEVEL, 0);
      this.widget.publish(KEY_BOOKID, '_');
      rh.model.subscribe(KEY_TOC, function (data) {
        _this2.widget.publish(CURRENT_TOC_KEY, data);
        _this2.widget.publish('curlevel', 0);
      });
      this.widget.subscribe(consts('KEY_TOC_SELECT_ITEM'), this.selectTocItem.bind(this));
      model.subscribeOnce([consts('EVT_PROJECT_LOADED'), consts('KEY_TOC_ORDER')], function (_this) {
        return function () {
          if (model.get(consts('KEY_PUBLISH_MODE'))) {
            return _this.getTOCData();
          } else {
            return _this.loadToc(KEY_TOC, '', function () {
              _this.widget.publish(consts('EVT_TOC_LOADED'), true);
              return _.defer(function () {
                return _this.widget.subscribe(rh.consts('KEY_TOPIC_ID'), _this.subscribeTopicID);
              });
            });
          }
        };
      }(this));
    }

    _createClass(TocController, [{
      key: 'expandBook',
      value: function expandBook(level, id, node, item) {
        this.selectTocItem({ 'id': id });
        var key = $.getAttribute(node, 'data-itemkey');
        rh.model.publish('EVT_TOC_LOADED' + 'gototab', { 'tab': 0, 'key': key, 'item': item });
      }
    }, {
      key: 'updateBookInfo',
      value: function updateBookInfo() {
        var id = void 0,
            newLevel = void 0;
        id = this.widget.get(KEY_ACTIVE_BOOKID);
        if (id != null && id !== this.widget.get(KEY_BOOKID)) {
          this.widget.publish(KEY_BOOKID, id);
        }
        newLevel = this.widget.get(KEY_ACTIVE_BOOK_LEVEL);
        if (newLevel != null && newLevel !== this.widget.get(KEY_BOOK_LEVEL)) {
          return this.widget.publish(KEY_BOOK_LEVEL, newLevel);
        }
      }
    }, {
      key: 'updateActiveBookInfo',
      value: function updateActiveBookInfo(level, id) {
        this.widget.publish(KEY_ACTIVE_BOOKID, id);

        return this.widget.publish(KEY_ACTIVE_BOOK_LEVEL, level);
      }
      /*
      _addBookmark(node){
        let that = this.this;
        if(!Array.isArray(this.path) || this.path.length === 0){
          return false;
        }
        if(that.isTOCItem(node)){
          if(this.currIndex === this.path[0]){
            let index = this.path.shift();
            this.curr_path += (this.curr_path === "")? index.toString() : "_" + index.toString();
            let text = that.getText(node);
            this.bookmarks.push({text: text, path: this.curr_path });
            this.index = 0;
          }
          else{
          //traverseChild =false;
            this.currIndex += 1;
          }
        }
      }
      */

    }, {
      key: 'getText',
      value: function getText(node) {
        return node.textContent.trim();
      }
    }, {
      key: '_getPreviousItemNode',
      value: function _getPreviousItemNode(node) {
        var pid = this.pid($.getAttribute(node, 'data-itemid'));
        return $.find(this.widget.node, '[data-itemid=\"' + pid + '\"]')[0];
      }
    }, {
      key: 'updateBreadcrumbInfo',
      value: function updateBreadcrumbInfo(node) {
        var $leafnode = node;
        var $node = void 0;
        var breadcrumbs = [];
        if (!this.isTOCItem(node)) {
          return;
        }
        breadcrumbs.push(this._createBreadcrumbItem($leafnode));
        while ($node = this._getPreviousItemNode($leafnode)) {
          breadcrumbs.push(this._createBreadcrumbItem($node));
          $leafnode = $node;
        }
        breadcrumbs.reverse();
        if (breadcrumbs.length > 0) {
          breadcrumbs[breadcrumbs.length - 1].lastNode = true;
        }
        breadcrumbs.curlevel = this.widget.get("curlevel");
        this.widget.publish(KEY_BREADCRUMBS, breadcrumbs);
      }
    }, {
      key: '_createBreadcrumbItem',
      value: function _createBreadcrumbItem(node) {
        var linkNode = node;
        if (!this.hasTOCItemLink(node)) {
          linkNode = this._findFirstLink(node);
        }
        var url = linkNode && ($.getAttribute(linkNode, 'href') || $.getAttribute(linkNode, 'link')) || '#';
        return { id: $.getAttribute(node, 'data-itemid'),
          text: this.getText(node),
          url: url,
          hasUrl: this.hasTOCItemLink(node),
          lastNode: false };
      }
    }, {
      key: 'isTOCItem',
      value: function isTOCItem(node) {

        return $.nodeName(node) === 'LI' || $.getAttribute(node, TOC_ITEM_ATTR);
      }
    }, {
      key: '_findFirstLink',
      value: function _findFirstLink(bookNode) {
        var context = { that: this };

        var node = nodeUtil.parentNode(bookNode);
        context.bookid = $.getAttribute(bookNode, 'data-itemid');
        $.traverseNode(node, this._findLinkFn, null, null, context);
        return context.linkNode;
      }
    }, {
      key: '_isParentTocItem',
      value: function _isParentTocItem(node) {
        return this.bookNode !== node && this.that.isTOCItem(node);
      }
    }, {
      key: '_findLinkFn',
      value: function _findLinkFn(node) {
        var id = $.getAttribute(node, 'data-itemid');
        if (id === this.bookid) {
          this.bookFound = true;
        }
        if (this.bookFound && this.that.hasTOCItemLink(node) && this.linkNode === undefined) {
          this.linkNode = node;
          return false;
        }
        return true;
      }
    }, {
      key: 'nextLevel',
      value: function nextLevel(node) {
        var level = void 0;
        level = _.parseInt($.dataset(node, 'itemlevel'), 0);
        if ($.hasClass(node, EXPANDED_CLASS)) {
          return level;
        } else {
          return level + 1;
        }
      }
    }, {
      key: 'onClick',
      value: function onClick(event) {
        var clickNode = void 0,
            hasLink = void 0,
            node = void 0,
            topNode = void 0;
        topNode = event.currentTarget;
        clickNode = event.target;
        hasLink = this.hasLink(clickNode);
        node = this.getItemNode(clickNode, topNode);
        if (this.isBookNode(node)) {
          if (!(hasLink && this.selectedNode !== node && this.isOpenBook(node))) {
            this.toggleBook(node, false);
            this.updateBreadcrumbInfo(node);
          }
        }

        if (!(!hasLink || this.isUrlNode(node) && this.hasExternalLink(clickNode))) {
          return this.selectLink(node, false);
        }
      }
    }, {
      key: 'selectLink',
      value: function selectLink(node, scrollIntoView, wait) {
        if (wait == null) {
          wait = ANIM_TIME;
        }
        if (this.selectedNode) {
          $.removeClass(this.selectedNode, SELECTED_CLASS);
        }
        if (scrollIntoView && this.selectedNode !== node) {
          _.delay(function () {
            return node.scrollIntoView(false);
          }, wait);
        }
        this.selectedNode = node;
        if (node) {
          this.updateBreadcrumbInfo(node);
          return $.addClass(node, SELECTED_CLASS);
        }
      }
    }, {
      key: 'selectTocItem',
      value: function selectTocItem(tocObj) {
        var id = tocObj.id + '_0';
        if (id) {
          var childData = {},
              level = -1;
          while (id) {
            level++;
            childData[id] = true;
            id = id.substr(0, id.lastIndexOf('_'));
          }
          this.widget.publish("show_child", childData);
          this.widget.publish("curlevel", level);
          if (tocObj.url) rh.model.publish('EVT_TOC_LOADED' + 'gototab', { 'tab': 0, 'item': { 'url': tocObj.url } });
        }
      }
    }, {
      key: 'getItemNode',
      value: function getItemNode(node, topNode) {
        return _.findParentNode(node, topNode, this.isTOCItem);
      }
    }, {
      key: 'getChildItemNode',
      value: function getChildItemNode(node, index) {
        return $.find(node, function (node) {
          return $.nodeName(node) === 'LI' || $.getAttribute(node, TOC_ITEM_ATTR);
        });
      }
    }, {
      key: 'hasTOCItemLink',
      value: function hasTOCItemLink(node) {
        var href = $.getAttribute(node, 'data-haslink');
        return href === 'true';
      }
    }, {
      key: 'hasLink',
      value: function hasLink(node) {
        var href = void 0;
        href = $.getAttribute(node, 'href');
        return href && href !== '#';
      }
    }, {
      key: 'isBookNode',
      value: function isBookNode(node) {
        return $.hasClass(node, 'book');
      }
    }, {
      key: 'isTopicNode',
      value: function isTopicNode(node) {
        return $.hasClass(node, 'item');
      }
    }, {
      key: 'isUrlNode',
      value: function isUrlNode(node) {
        return $.hasClass(node, 'url');
      }
    }, {
      key: 'isPageNode',
      value: function isPageNode(node) {
        return this.isTopicNode(node) || this.isUrlNode(node);
      }
    }, {
      key: 'isOpenBook',
      value: function isOpenBook(node) {
        if (this.widget.get(KEY_TOC_DRILL_DOWN)) {
          return $.hasClass(node, ACTIVE_CLASS);
        } else {
          return $.hasClass(node, EXPANDED_CLASS);
        }
      }
    }, {
      key: 'hasExternalLink',
      value: function hasExternalLink(node) {
        var href = void 0;
        href = $.getAttribute(node, 'href');
        if (!(href && !_.isRelativeUrl(href))) {
          return false;
        }
        return !_.isUrlAllowdInIframe(href);
      }
    }, {
      key: 'getBookNode',
      value: function getBookNode(node, topNode) {
        var itemNode = void 0;
        itemNode = this.getItemNode(node, topNode);
        if (this.isBookNode(itemNode)) {
          return itemNode;
        } else {
          return null;
        }
      }
    }, {
      key: 'animateCollapse',
      value: function animateCollapse(bookNode) {
        return _.each([bookNode, bookNode.nextElementSibling], function (node) {
          $.addClass(node, COLLAPSING_CLASS);
          return _.delay(function () {
            return $.removeClass(node, COLLAPSING_CLASS);
          }, ANIM_TIME);
        });
      }
    }, {
      key: 'animateExpand',
      value: function animateExpand(bookNode) {
        return _.each([bookNode, bookNode.nextElementSibling], function (node) {
          $.addClass(node, EXPANDING_CLASS);
          return _.delay(function () {
            return $.removeClass(node, EXPANDING_CLASS);
          }, ANIM_TIME);
        });
      }
    }, {
      key: 'toggleBook',
      value: function toggleBook(bookNode, scrollIntoView) {
        if (scrollIntoView == null) {
          scrollIntoView = true;
        }
        if (this.isOpenBook(bookNode)) {
          return this.closeBook(bookNode);
        } else {
          return this.openBook(bookNode, scrollIntoView);
        }
      }
    }, {
      key: 'closeBook',
      value: function closeBook(node) {
        var id = void 0,
            keyShow = void 0;
        id = $.dataset(node, 'itemid');
        keyShow = '' + KEY_SHOW_CHILD + id;
        if (false !== this.widget.get(keyShow)) {
          this.widget.publish(keyShow, false);
        }
        this.updateActiveBookInfo(this.nextLevel(node), this.pid(id));
        this.updateBookInfo();
        if ($.hasClass(node, EXPANDED_CLASS)) {
          $.removeClass(node, EXPANDED_CLASS);
          return this.animateCollapse(node);
        }
      }
    }, {
      key: 'openBook',
      value: function openBook(node, scrollIntoView, success) {
        var childOrder = void 0,
            id = void 0,
            key = void 0,
            keyShow = void 0;
        if (success == null) {
          success = this.updateBookInfo;
        }
        key = $.dataset(node, 'itemkey');
        id = $.dataset(node, 'itemid');
        childOrder = $.dataset(node, 'childorder');
        keyShow = '' + KEY_SHOW_CHILD + id;
        if (true !== this.widget.get(keyShow)) {
          this.widget.publish(keyShow, true);
        }
        this.updateActiveBookInfo(this.nextLevel(node), id);
        if (this.widget.get(key)) {
          if (!$.hasClass(node, EXPANDED_CLASS)) {
            $.addClass(node, EXPANDED_CLASS);
            this.animateExpand(node);
          }
          return success();
        } else {
          $.addClass(node, LOADING_BOOK);
          if (scrollIntoView) {
            node.scrollIntoView(false);
          }
          return this.loadToc(key, childOrder, function (_this) {
            return function () {
              $.removeClass(node, LOADING_BOOK);
              $.addClass(node, EXPANDED_CLASS);
              _this.animateExpand(node);
              return success();
            };
          }(this));
        }
      }
    }, {
      key: 'extractTempData',
      value: function extractTempData() {
        var tempItems = void 0;
        tempItems = this.widget.get(rh.consts('KEY_TEMP_DATA'));
        this.widget.publish(rh.consts('KEY_TEMP_DATA'));
        return tempItems;
      }
    }, {
      key: 'loadToc',
      value: function loadToc(fullKey, parentOrder, success) {
        var absRef = void 0,
            key = void 0,
            parentPath = void 0,
            ref1 = void 0;
        ref1 = this.parseKey(fullKey), absRef = ref1.absRef, key = ref1.key;
        parentPath = absRef ? absRef + '/' : '';
        return _.loadScript(parentPath + 'whxdata/' + key + '.new.js', true, function (_this) {
          return function () {
            var tempItems = void 0;
            tempItems = _this.extractTempData() || [];
            _.each(tempItems, function (item) {
              item.absRef = absRef;
              if (parentOrder) {
                return item.childOrder = parentOrder;
              }
            });
            return _this.loadRefToc(tempItems, function (items) {
              _this.widget.publish(fullKey, items);
              if (success) {
                return success();
              }
            });
          };
        }(this));
      }
    }, {
      key: 'loadRefToc',
      value: function loadRefToc(items, success) {
        var absRef = void 0,
            index = void 0,
            item = void 0;
        if (items == null) {
          items = [];
        }
        index = _.findIndex(items, function (item) {
          if (item.ref) {
            return true;
          }
        });
        if (index !== -1) {
          item = items[index];
          absRef = item.absRef || '';
          if (absRef) {
            absRef += '/';
          }
          absRef += item.ref;
          var prjOrder = model.get(consts('KEY_TOC_ORDER'));
          var childOrder = prjOrder[absRef].order;
          return _.loadScript(absRef + '/whxdata/toc.new.js', true, function (_this) {
            return function () {
              var tempItems = void 0;
              tempItems = _this.extractTempData() || [];
              _.each(tempItems, function (item) {
                item.absRef = absRef;
                if (childOrder) {
                  return item.childOrder = childOrder;
                }
              });
              Array.prototype.splice.apply(items, [index, 1].concat(tempItems));
              return _this.loadRefToc(items, success);
            };
          }(this));
        } else if (success) {
          return success(items);
        }
      }
    }, {
      key: 'getTOCData',
      value: function getTOCData() {
        return model.subscribeOnce(consts('KEY_PUBLISH_BASE_URL'), function (_this) {
          return function () {
            var err;
            try {
              return model.subscribe(consts('KEY_PROJECT_LIST'), function (allProjects) {
                return model.subscribe(consts('KEY_MASTER_PROJECT_LIST'), function (list) {
                  var items, len;
                  len = list.length;
                  items = [];
                  return _.each(list, function (prj) {
                    prj = _.makeRelativeUrl(prj, allProjects[0]);
                    if (prj) {
                      prj = prj + "/";
                    }
                    return _.loadScript(prj + "whxdata/toc.new.js", true, function (_this) {
                      return function () {
                        var tempItems;
                        tempItems = _this.extractTempData() || [];
                        _.each(tempItems, function (item) {
                          item.absRef = prj;
                        });
                        return _this.loadRefToc(tempItems, function (resolvedItems) {
                          len--;
                          items = items.concat(resolvedItems);
                          if (len === 0) {
                            _this.widget.publish(KEY_TOC, items);
                            _this.widget.publish(consts('EVT_TOC_LOADED'), true);
                            return _this.widget.subscribe(rh.consts('KEY_TOPIC_ID'), _this.subscribeTopicID);
                          }
                        });
                      };
                    }(this));
                  }, _this);
                });
              });
            } catch (error) {
              err = error;
              if (rh._debug) {
                return rh._d('warn', err.message);
              }
            }
          };
        }(this));
      }
    }, {
      key: 'nextChildOrder',
      value: function nextChildOrder(childOrder) {
        var orders = void 0;
        orders = childOrder.split('@');
        orders[orders.length - 1] = 1 + _.parseInt(orders[orders.length - 1], 0);
        return orders.join('@');
      }
    }, {
      key: 'childOrder',
      value: function childOrder(parentOrder) {
        if (parentOrder) {
          return parentOrder + '@1';
        } else {
          return '@1';
        }
      }
    }, {
      key: 'pid',
      value: function pid(id) {
        var path = void 0;
        path = id.split('_');
        path.pop();
        return path.join('_') || '_';
      }
    }, {
      key: 'key',
      value: function key(absRef, _key) {
        var idx = void 0;
        if (absRef == null) {
          absRef = '';
        }
        idx = _.findIndex(this.projectAbsRef, function (ref) {
          return ref === absRef;
        });
        if (idx === -1) {
          idx = this.projectAbsRef.length;
          this.projectAbsRef.push(absRef);
        }
        return '.p.child_toc.' + idx + '.' + _key;
      }
    }, {
      key: 'parseKey',
      value: function parseKey(key) {
        var absRef = void 0,
            keys = void 0,
            lastKey = void 0;
        key = key.substring(3);
        keys = key.split('.');
        lastKey = keys.pop();
        absRef = this.projectAbsRef[keys.pop()] || '';
        return {
          key: lastKey,
          absRef: absRef
        };
      }
    }, {
      key: 'url',
      value: function url(item, id) {
        var bookMark = void 0,
            filePath = void 0,
            params = void 0,
            parentPath = void 0,
            url = void 0;
        if (!item.url) {
          return '#';
        }
        if (item.type === 'remoteitem') {
          return encodeURI(item.url);
        }
        parentPath = item.absRef ? _.ensureSlash(item.absRef) : '';
        url = '' + parentPath + item.url;
        bookMark = _.extractHashString(url);
        if (bookMark.length > 0) {
          bookMark = '#' + bookMark;
          filePath = _.filePath(url);
          params = _.extractParamString(url);
          if (params.length > 0) {
            params = params + '&';
          }
          params = '?' + params + 'rhtocid=' + id;
          url = '' + filePath + params + bookMark;
        }
        return encodeURI(url);
      }
    }, {
      key: 'tags',
      value: function tags(item) {
        var parentPath = void 0;
        parentPath = item.absRef ? '+' + item.absRef : '';
        if (item['data-rhtags']) {
          return item['data-rhtags'] + parentPath;
        } else {
          return '';
        }
      }
    }, {
      key: 'subscribeTopicID',
      value: function subscribeTopicID(tocInfo) {
        var _this3 = this;

        var path = void 0,
            tocid = void 0;
        if (tocInfo == null) {
          tocInfo = {};
        }
        tocid = _.hashParams()['rhtocid'];
        if (tocid) {
          path = this.getPathfromId(tocid);
          this.selectTocById(path, this.widget.node);
        } else {
          rh.model.subscribe(rh.consts('KEY_MASTER_PROJECT_LIST'), function (list) {
            if (list && list.length < 2) return _this3.syncToc.sync(_this3, tocInfo);
          });
        }
      }
    }, {
      key: 'subscribeBookId',
      value: function subscribeBookId(bookId) {
        // sukumar: TODO remove this line
        var books = void 0;
        var path = void 0;
        if (bookId) {
          path = this.getPathfromId(bookId);
          return this.selectTocById(path, this.widget.node, null, books);
        }
      }
    }, {
      key: 'getPathfromId',
      value: function getPathfromId(id) {
        var path = void 0;
        path = id.split('_');
        path.shift();
        path = _.map(path, function (item) {
          return _.parseInt(item, 0);
        });
        return path;
      }
    }, {
      key: 'selectTocById',
      value: function selectTocById(path, node, wait, books) {
        var child = void 0,
            index = void 0;
        if (wait == null) {
          wait = 1;
        }
        if (!(node && node.children)) {
          return;
        }
        index = path.shift();
        child = _.find(node.children, function (child) {
          if (this.isBookNode(child) || this.isPageNode(child)) {
            if (index === 0) {
              return true;
            }
            index--;
          }
          return false;
        }, this);
        if (!child) {
          return;
        }

        if (path.length === 0) {
          this.selectLink(child, true, wait);
        }
        if (this.isBookNode(child)) {
          return this.openBook(child, true, function (_this) {
            return function () {
              return _.defer(function () {
                var childNode = void 0,
                    parentNode = void 0;
                if (path.length === 0) {
                  return _this.updateBookInfo();
                } else {
                  childNode = child.nextElementSibling;
                  parentNode = childNode.children && childNode.children[0];
                  return _this.selectTocById(path, parentNode, ANIM_TIME);
                }
              });
            };
          }(this));
        } else {
          return this.updateBookInfo();
        }
      }
    }]);

    return TocController;
  }();

  TocController.prototype["class"] = function (item) {
    if (item.type === 'remoteitem') {
      return 'url';
    } else {
      return item.type;
    }
  };

  return TocController;
}();

rh.controller('TocController', TocController);

},{"../../src/lib/rh":23,"../../src/responsive_help/utils/node_utils":65}],6:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var rh = require("../../src/lib/rh");
var _ = rh._;
var $ = rh.$;
var model = rh.model;
var consts = rh.consts;

var TOCLevel = function () {
  function TOCLevel() {
    var _this = this;

    _classCallCheck(this, TOCLevel);

    this.data = { '': { order: '', nextChild: 0 } };
    model.subscribeOnce(consts('KEY_PROJECT_LIST'), function (allProjects) {
      _.each(allProjects, function (prj) {
        prj = _.makeRelativeUrl(_this.trimFirst(prj, '.'), allProjects[0]);
        _this.childOrder(prj);
      });
      model.publish(consts('KEY_TOC_ORDER'), _this.data);
    });
  }

  _createClass(TOCLevel, [{
    key: 'trimFirst',
    value: function trimFirst(path, char) {
      return path = path.length && path[0] === char && path[1] !== char ? path.substring(1) : path;
    }
  }, {
    key: 'childOrder',
    value: function childOrder(absRef) {
      absRef = this.trimFirst(absRef, '/');
      if (!this.data[absRef]) {
        var path = absRef;
        path = path.substring(0, path.lastIndexOf('/'));
        path = path.substring(0, path.lastIndexOf('/'));
        var parent = this.data[path];
        parent.nextChild++;
        this.data[absRef] = { order: parent.order + '@' + parent.nextChild, nextChild: 0 };
      }
      return this.data[absRef].order;
    }
  }]);

  return TOCLevel;
}();

new TOCLevel();

},{"../../src/lib/rh":23}],7:[function(require,module,exports){
'use strict';

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var _window = window,
    rh = _window.rh;
var _ = rh._;
var $ = rh.$;

var BrowseSequenceBuilder = function BrowseSequenceBuilder() {
  _classCallCheck(this, BrowseSequenceBuilder);

  var handleTopicChange = function handleTopicChange(doNotUse) {
    var brsMap = rh.model.get('t.brsmap');
    if (brsMap != null) {
      var next = brsMap['n'] && brsMap['n'][0] || '';
      var prev = brsMap['p'] && brsMap['p'][0] || '';
      var decodedURI = window.decodeURI(document.location.href);

      if (!_.isEmptyString(next)) {
        next = window._getRelativeFileName(decodedURI, next);
      }
      if (!_.isEmptyString) {
        prev = window._getRelativeFileName(decodedURI, prev);
      }

      rh.model.publish('l.brsBack', prev);
      return rh.model.publish('l.brsNext', next);
    }
  };

  var updateShowBrs = function updateShowBrs() {
    var uiMode = rh.model.get(rh.consts('KEY_UI_MODE'));
    var prev = rh.model.get('l.brsBack');
    var next = rh.model.get('l.brsNext');
    var showBrs = !uiMode && (prev || next) ? true : false;
    return rh.model.publish('l.show_brs', showBrs);
  };

  rh.model.subscribe('t.topicurl', _.debounce(handleTopicChange, 200));
  rh.model.subscribe('t.brsmap', _.debounce(handleTopicChange, 200));

  rh.model.subscribe('l.brsBack', updateShowBrs);
  rh.model.subscribe('l.brsNext', updateShowBrs);
  rh.model.subscribe(rh.consts('KEY_UI_MODE'), updateShowBrs);
};

//TODO: move it to controller


rh.widgets.BrowseSequenceBuilder = BrowseSequenceBuilder;

},{}],8:[function(require,module,exports){
'use strict';

// Generated by CoffeeScript 1.9.1
(function () {
  var $, HASH_KEY_RANDOM, HASH_KEY_RH_HIGHLIGHT, HASH_KEY_RH_SEARCH, HASH_KEY_RH_TOCID, HASH_KEY_TOPIC, HASH_KEY_UIMODE, _, consts, fixHashMapForRoot, fixHashMapForTopic, getHashMapForRoot, getMergedParamsMap, getParamsForRoot, getTopicURL, hashChanged, hashQueryKeys, model, navigateToUrl, queueUpdateHashMap, rh, showNonTopic, showTopic, topicChanged;

  rh = window.rh;

  _ = rh._;

  $ = rh.$;

  consts = rh.consts;

  model = rh.model;

  HASH_KEY_RH_SEARCH = consts('HASH_KEY_RH_SEARCH');

  HASH_KEY_TOPIC = consts('HASH_KEY_TOPIC');

  HASH_KEY_UIMODE = consts('HASH_KEY_UIMODE');

  HASH_KEY_RH_TOCID = consts('HASH_KEY_RH_TOCID');

  HASH_KEY_RH_HIGHLIGHT = consts('HASH_KEY_RH_HIGHLIGHT');

  HASH_KEY_RANDOM = consts('HASH_KEY_RANDOM');

  hashQueryKeys = [HASH_KEY_RH_HIGHLIGHT, consts('HASH_KEY_RH_SYNS'), HASH_KEY_RH_TOCID];

  getMergedParamsMap = function getMergedParamsMap(topicUrl) {
    var hashMap, paramsMap;
    paramsMap = _.urlParams(_.extractParamString(topicUrl));
    hashMap = _.hashParams(_.extractHashString(topicUrl));
    return _.extend(paramsMap, hashMap);
  };

  getTopicURL = function getTopicURL(newMap, topicUrl) {
    var bookMark, filePath, i, key, len, params, paramsMap;
    topicUrl = topicUrl;
    filePath = _.filePath(topicUrl);
    bookMark = _.extractHashString(topicUrl);
    if (bookMark.length > 0) {
      bookMark = "#" + bookMark;
    }
    paramsMap = _.urlParams(_.extractParamString(topicUrl));
    for (i = 0, len = hashQueryKeys.length; i < len; i++) {
      key = hashQueryKeys[i];
      if (newMap[key] != null) {
        paramsMap[key] = newMap[key];
      }
    }
    if (model.get(consts('KEY_SCREEN_IOS'))) {
      paramsMap[HASH_KEY_RANDOM] = _.uniqueId();
    }
    params = _.mapToEncodedString(paramsMap);
    if (params.length > 0) {
      params = "?" + params;
    }
    return "" + filePath + params + bookMark;
  };

  queueUpdateHashMap = _.queueUpdateHashMap;

  fixHashMapForTopic = function fixHashMapForTopic(hashMap) {
    if (hashMap == null) {
      hashMap = {};
    }
    hashMap[HASH_KEY_UIMODE] = null;
    hashMap[HASH_KEY_RANDOM] = null;
    if (!hashMap[HASH_KEY_RH_TOCID]) {
      hashMap[HASH_KEY_RH_TOCID] = null;
    }
    if (!hashMap[HASH_KEY_RH_HIGHLIGHT]) {
      hashMap[HASH_KEY_RH_HIGHLIGHT] = null;
    }
    return hashMap;
  };

  fixHashMapForRoot = function fixHashMapForRoot(hashMap) {
    if (hashMap == null) {
      hashMap = {};
    }
    if (!hashMap[HASH_KEY_UIMODE]) {
      hashMap[HASH_KEY_UIMODE] = null;
    }
    hashMap[HASH_KEY_RANDOM] = null;
    if (!hashMap[HASH_KEY_RH_TOCID]) {
      hashMap[HASH_KEY_RH_TOCID] = null;
    }
    if (!hashMap[HASH_KEY_RH_HIGHLIGHT]) {
      hashMap[HASH_KEY_RH_HIGHLIGHT] = null;
    }
    if (!hashMap[HASH_KEY_RH_SEARCH]) {
      hashMap[HASH_KEY_RH_SEARCH] = null;
    }
    return hashMap;
  };

  showTopic = function showTopic(relUrl, addToHistory) {
    var hashMap;
    relUrl = _.fixRelativeUrl(relUrl);
    hashMap = _.urlParams(_.extractParamString(relUrl));
    hashMap[HASH_KEY_TOPIC] = _.stripParam(relUrl);
    hashMap = fixHashMapForTopic(hashMap);
    return queueUpdateHashMap(hashMap, addToHistory);
  };

  getHashMapForRoot = function getHashMapForRoot(relUrl) {
    var hashMap;
    relUrl = _.fixRelativeUrl(relUrl);
    hashMap = _.urlParams(_.extractParamString(relUrl));
    hashMap = fixHashMapForRoot(hashMap);
    return hashMap;
  };

  getParamsForRoot = function getParamsForRoot(relUrl) {
    var queryMap;
    queryMap = getHashMapForRoot(relUrl);
    if (_.isEmptyObject(queryMap)) {
      return '';
    } else {
      return "?" + _.mapToEncodedString(queryMap);
    }
  };

  showNonTopic = function showNonTopic(url, addToHistory) {
    var hashMap;
    hashMap = {};
    hashMap[HASH_KEY_TOPIC] = url;
    hashMap = fixHashMapForTopic(hashMap);
    return queueUpdateHashMap(hashMap, addToHistory);
  };

  ({
    isSameTopic: function isSameTopic(url1, url2) {}
  });

  hashChanged = function hashChanged(obj) {
    var changed, newMap, oldMap, oldTopicUrl, oldUiMode, ref, searchTerm, searchTermChanged, topicUrl, uiMode;
    newMap = obj.newMap;
    oldMap = obj.oldMap;
    oldUiMode = oldMap[HASH_KEY_UIMODE];
    uiMode = newMap[HASH_KEY_UIMODE];
    if (HASH_KEY_RH_SEARCH in newMap) {
      searchTerm = newMap[HASH_KEY_RH_SEARCH];
      searchTermChanged = searchTerm !== model.get(consts('KEY_SEARCHED_TERM'));
      model.publish(consts('KEY_SEARCH_TERM'), searchTerm, {
        sync: true
      });
    }
    if (uiMode === 'search') {
      if (searchTermChanged && window.gHost) {
        model.publish(consts('EVT_QUERY_SEARCH_RESULTS'), true);
      }
    }
    if (!uiMode || newMap[HASH_KEY_TOPIC]) {
      oldTopicUrl = model.get(consts('KEY_TOPIC_IN_IFRAME'));
      if (HASH_KEY_TOPIC in newMap) {
        topicUrl = newMap[HASH_KEY_TOPIC];
      }
      if (!topicUrl) {
        topicUrl = oldTopicUrl;
      }
      var feature = rh.model.get(rh.consts('KEY_FEATURE'));
      if (!topicUrl && (!feature || feature.showDefTopic !== false)) {
        topicUrl = (ref = window.gDefaultTopic) != null ? ref.substring(1) : void 0;
      }
      changed = topicUrl && (topicUrl !== oldTopicUrl || oldUiMode !== uiMode || oldMap[HASH_KEY_RH_HIGHLIGHT] !== newMap[HASH_KEY_RH_HIGHLIGHT] || oldMap[HASH_KEY_RH_TOCID] !== newMap[HASH_KEY_RH_TOCID]);
      if (changed) {
        if (_.stripBookmark(topicUrl) !== _.stripBookmark(oldTopicUrl)) {
          _.runTopicLoadingAnimation(true);
        }
        model.publish(consts('KEY_TOPIC_IN_IFRAME'), topicUrl);
        window.loadTopic(getTopicURL(newMap, topicUrl));
      }
    }
    return model.publish(consts('KEY_UI_MODE'), newMap[HASH_KEY_UIMODE]);
  };

  topicChanged = function topicChanged(topicUrl) {
    var decodedURI, hashMap, oldUrl, relUrl;
    hashMap = _.hashParams();
    if (topicUrl && !hashMap[HASH_KEY_UIMODE]) {
      decodedURI = decodeURI(document.location.href);
      relUrl = window._getRelativeFileName(decodedURI, topicUrl);
      oldUrl = hashMap[HASH_KEY_TOPIC];
      if (!oldUrl || _.filePath(relUrl) !== _.filePath(oldUrl)) {
        model.publish(consts('KEY_TOPIC_IN_IFRAME'), relUrl);
        return showTopic(relUrl, false);
      }
    }
  };

  navigateToUrl = function navigateToUrl(obj) {
    var fileName, hashMap, params, relUrl, rootUrl, url;
    url = obj.absUrl;
    if (_.isRootUrl()) {
      if (_.isUrlAllowdInIframe(url)) {
        url = _.makeRelativeUrl(_.fixRelativeUrl(url));
        fileName = url && _.filePath(url);
        if (fileName === consts('START_FILEPATH')) {
          url = url.substring(fileName.length);
        } else if (!url) {
          url = '#ux';
        }
        if (url[0] === '#' || url[0] === '?') {
          hashMap = _.hashParams(_.extractHashString(url));
          if (!(HASH_KEY_UIMODE in hashMap)) {
            hashMap[HASH_KEY_UIMODE] = null;
          }
          return queueUpdateHashMap(hashMap, true);
        } else if (url) {
          return showTopic(url, true);
        }
      } else {
        return showNonTopic(url, true);
      }
    } else {
      if (!_.isRootUrl(url)) {
        rootUrl = _.getRootUrl();
        if (_.isExternalUrl(url)) {
          relUrl = url;
        } else {
          params = getParamsForRoot(url);
          relUrl = _.fixRelativeUrl(_.makeRelativePath(url, rootUrl));
        }
        url = "" + rootUrl + params + "#t=" + encodeURIComponent(relUrl);
      }
      return document.location.href = url;
    }
  };

  model.subscribe(consts('EVT_WIDGET_LOADED'), function () {
    _.addEventListener(document, 'click', _.hookClick);
    model.subscribe(consts('EVT_HASH_CHANGE'), hashChanged);
    model.subscribe(consts('KEY_TOPIC_URL'), topicChanged);
    model.subscribe(consts('EVT_NAVIGATE_TO_URL'), navigateToUrl);
    model.subscribe(consts('KEY_TOPIC_IN_IFRAME'), function (topicUrl) {
      if ("" + window.gHost + window.gHostPath !== '/') {
        if (window.setTopic) {
          window.setTopic();
        }
        if (window.changeTopicLink) {
          return window.changeTopicLink(document.location.toString());
        }
      }
    });
    model.subscribe(consts('EVT_TOPIC_LOADED'), function () {
      return _.runTopicLoadingAnimation(false);
    });
    return model.subscribe(consts('EVT_INSIDE_IFRAME_DOM_CONTENTLOADED'), function () {
      return _.runTopicLoadingAnimation(false);
    });
  });
}).call(undefined);

},{}],9:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var _window = window,
    rh = _window.rh;
var _ = rh._;
var $ = rh.$;
var consts = rh.consts;
var storage = rh.storage;

var urlFilter = rh._params.filter;

var ExpressionBuilder = function () {
  var GRP_SEPARATOR = undefined;
  var TAG_SEPARATOR = undefined;
  var ELEMENT_SEPARATOR = undefined;
  ExpressionBuilder = function () {
    _createClass(ExpressionBuilder, null, [{
      key: 'initClass',
      value: function initClass() {

        GRP_SEPARATOR = ':';
        TAG_SEPARATOR = ';';
        ELEMENT_SEPARATOR = ',';
      }
    }]);

    function ExpressionBuilder(config) {
      _classCallCheck(this, ExpressionBuilder);

      this.getUnchecked = this.getUnchecked.bind(this);
      this.handleTagStates = this.handleTagStates.bind(this);
      storage.init(consts('HELP_ID'));

      this.allTagNames = this.computeNames(rh.model.get(consts('KEY_MERGED_FILTER_KEY')));

      this.prepareTagStates();

      this.handleTagStates(rh.model.get(consts('KEY_PROJECT_TAG_STATES')));

      rh.model.subscribe(consts('KEY_PROJECT_TAG_STATES'), _.debounce(this.handleTagStates, 300), { initDone: true });
    }

    _createClass(ExpressionBuilder, [{
      key: 'computeNames',
      value: function computeNames(tags) {
        return _.reduce(tags, function (result, tag) {
          result.push(tag.children ? this.computeNames(tag.children) : tag.name);
          return result;
        }, [], this);
      }
    }, {
      key: 'getUnchecked',
      value: function getUnchecked(index, checked) {
        return _.filter(this.allTagNames[index], function (item) {
          return -1 === checked.indexOf(item);
        });
      }
    }, {
      key: 'computeExpression',
      value: function computeExpression(states) {
        if (!states || !this.allTagNames) {
          return rh.model.publish(consts('KEY_TAG_EXPRESSION'), []);
        }

        var groupExprs = _.reduce(states, function (result, value, key) {
          if (_.isString(value)) {
            result.push({ c: [value], u: [] });
          } else if (value != null) {
            var validValues = void 0;
            if ((validValues = _.compact(value)) && validValues.length > 0) {
              result.push({
                c: validValues,
                u: this.getUnchecked(key, validValues)
              });
            }
          }
          return result;
        }, [], this);

        return rh.model.publish(consts('KEY_TAG_EXPRESSION'), groupExprs);
      }
    }, {
      key: 'handleTagStates',
      value: function handleTagStates(states) {
        if (states == null) {
          states = {};
        }
        this.computeExpression(states);

        // Persist new tag state in localDB or cookies
        return storage.persist('tag_states', states);
      }
    }, {
      key: 'prepareTagStates',
      value: function prepareTagStates() {
        var _this = this;

        return rh.model.subscribe(consts('KEY_PROJECT_FILTER_TYPE'), function () {
          var tagStates = void 0;
          if (urlFilter) {
            var filter = rh.model.get(consts('KEY_MERGED_FILTER_KEY'));
            tagStates = _this.parseUrlFilter(filter, urlFilter.split(ELEMENT_SEPARATOR));
          }

          if (!tagStates) {
            tagStates = storage.fetch('tag_states');
          }

          if (!tagStates) {
            tagStates = _.clone(rh.model.get(consts('KEY_DEFAULT_FILTER')));
          }

          if (tagStates) {
            return rh.model.publish(consts('KEY_PROJECT_TAG_STATES'), tagStates);
          }
        });
      }
    }, {
      key: 'parseFilterElemnt',
      value: function parseFilterElemnt(filter, element) {
        var temp = element.split(GRP_SEPARATOR);
        var name = temp[0];
        var elements = temp[1] && temp[1].split(TAG_SEPARATOR);
        var index = _.findIndex(filter, function (item) {
          return elements != null === (item.children != null) && item.display === name;
        });
        return { index: index, elements: elements };
      }
    }, {
      key: 'parseUrlFilter',
      value: function parseUrlFilter(filter, array) {
        if (!array && !array.length) {
          return;
        }
        var radioMode = rh.model.get(consts('KEY_PROJECT_FILTER_TYPE')) === 'radio';
        var firstString = true;
        return _.reduce(array, function (result, element, index) {
          var elements = void 0;

          var _parseFilterElemnt = this.parseFilterElemnt(filter, element);

          index = _parseFilterElemnt.index;
          elements = _parseFilterElemnt.elements;

          if (index !== -1) {
            var node = filter[index];
            if (node.children) {
              result[index] = this.parseUrlFilter(node.children, elements);
            } else if (!radioMode || firstString) {
              firstString = false;
              result[index] = node.name;
            }
          }
          return result;
        }, {}, this);
      }
    }]);

    return ExpressionBuilder;
  }();
  ExpressionBuilder.initClass();
  return ExpressionBuilder;
}();

rh.widgets.ExpressionBuilder = ExpressionBuilder;

},{}],10:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var _window = window,
    rh = _window.rh;
var _ = rh._;
var $ = rh.$;
var consts = rh.consts;


var FilterController = function () {
  var GROUP_CLASS = undefined;
  var ITEM_CLASS = undefined;
  var KEY_PROJECT_FILTER_TYPE = undefined;
  FilterController = function () {
    _createClass(FilterController, null, [{
      key: 'initClass',
      value: function initClass() {

        GROUP_CLASS = 'group';
        ITEM_CLASS = 'item';
        KEY_PROJECT_FILTER_TYPE = consts('KEY_PROJECT_FILTER_TYPE');
      }
    }]);

    function FilterController(widget) {
      _classCallCheck(this, FilterController);

      this.click = this.click.bind(this);
      this.widget = widget;
    }

    _createClass(FilterController, [{
      key: 'click',
      value: function click(e) {
        var topNode = e.currentTarget;
        var clickNode = e.target;
        var node = this.getItemNode(clickNode, topNode);
        var selTagExprsPath = '' + consts('KEY_PROJECT_TAG_STATES') + this.getItemKey(node);
        var selTagExprs = this.widget.get(selTagExprsPath);
        if (this.filterType() !== 'radio') {
          this.handleCheckboxClick(node, selTagExprsPath, selTagExprs);
        } else {
          this.handleRadioClick(node, selTagExprsPath, selTagExprs);
        }
        return _.preventDefault(e);
      }
    }, {
      key: 'handleRadioClick',
      value: function handleRadioClick(node, selTagExprsPath, selTagExprs) {
        if (!this.isGroupNode(node) && !selTagExprs) {
          var _$splitKey = _.splitKey(selTagExprsPath),
              parentKey = _$splitKey.parentKey,
              key = _$splitKey.key;

          var newValue = {};
          newValue[key] = this.getItemValue(node);
          return this.widget.publish(parentKey, newValue);
        }
      }
    }, {
      key: 'handleCheckboxClick',
      value: function handleCheckboxClick(node, selTagExprsPath, selTagExprs) {
        var newValue = void 0;
        if (this.isGroupNode(node)) {
          var checked = _.any(selTagExprs, function (tagExpr) {
            return tagExpr;
          });
          newValue = checked ? undefined : this.getGroupItemExprs(node);
          return this.widget.publish(selTagExprsPath, newValue);
        } else {
          newValue = selTagExprs ? undefined : this.getItemValue(node);
          return this.widget.publish(selTagExprsPath, newValue);
        }
      }
    }, {
      key: 'getItemNode',
      value: function getItemNode(node, topNode) {
        return _.findParentNode(node, topNode, function (node) {
          return $.nodeName(node) === 'LI';
        });
      }
    }, {
      key: 'getItemValue',
      value: function getItemValue(node) {
        return $.dataset(node, 'itemvalue');
      }
    }, {
      key: 'getGroupItemExprs',
      value: function getGroupItemExprs(node) {
        var key = $.dataset(node, 'itemkey');
        var groupTag = this.widget.get('' + this.widget.key + key);
        return _.map(groupTag.children, function (tag) {
          return tag.name;
        });
      }
    }, {
      key: 'getItemKey',
      value: function getItemKey(node) {
        return $.dataset(node, 'itemkey');
      }
    }, {
      key: 'isGroupNode',
      value: function isGroupNode(node) {
        return $.hasClass(node, GROUP_CLASS);
      }
    }, {
      key: 'isItemNode',
      value: function isItemNode(node) {
        return $.hasClass(node, ITEM_CLASS);
      }
    }, {
      key: 'class',
      value: function _class(item) {
        if (item.children) {
          return GROUP_CLASS;
        } else {
          return ITEM_CLASS;
        }
      }
    }, {
      key: 'value',
      value: function value(item) {
        if (item.children) {
          return null;
        } else {
          return item.name;
        }
      }
    }, {
      key: 'filterType',
      value: function filterType() {
        return this.widget.get(KEY_PROJECT_FILTER_TYPE) || 'checkbox';
      }
    }, {
      key: 'inputType',
      value: function inputType(item) {
        var type = this.filterType();
        if (item.children && type === 'radio') {
          type = undefined;
        }
        return type;
      }
    }]);

    return FilterController;
  }();
  FilterController.initClass();
  return FilterController;
}();

rh.controller('FilterController', FilterController);

},{}],11:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var _window = window,
    rh = _window.rh;
var model = rh.model;
var _ = rh._;
var consts = rh.consts;
var http = rh.http;
var rhs = rh.rhs;


var FilterReport = function () {
  var getPostUrl = undefined;
  FilterReport = function () {
    _createClass(FilterReport, null, [{
      key: 'initClass',
      value: function initClass() {

        getPostUrl = function getPostUrl() {
          var host = document.location.origin;
          var baseContext = model.get(consts('KEY_PUBLISH_BASE_URL')).substr(host.length);
          if (baseContext && !_.isEmptyString(baseContext)) {
            var hashString = _.mapToEncodedString(_.extend(_.addPathNameKey({ area: rhs.area(),
              prj: rhs.project(), type: rhs.type(), agt: 'fltRpt', mgr: 'agm'
            })));
            return baseContext + '?' + hashString;
          }
        };
      }
    }]);

    function FilterReport() {
      _classCallCheck(this, FilterReport);

      var timer = 3000;
      model.subscribeOnce(consts('EVT_PROJECT_LOADED'), function () {
        return model.subscribeOnce(consts('KEY_PUBLISH_MODE'), function (val) {
          if (!val) {
            return;
          }
          var url = url || getPostUrl();
          var ckTags = [];
          var postToServer = _.debounce(function () {
            return http.post(url, JSON.stringify(ckTags)).error(function (data, status) {
              if (rh._debug) {
                return rh._d('error', 'Filter report status ', status);
              }
            });
          }, timer, false);

          return model.subscribe(consts('KEY_TAG_EXPRESSION'), function (expr) {
            ckTags = [];
            var filterData = rh.model.get(consts('KEY_MERGED_FILTER_KEY'));
            var _iteratorNormalCompletion = true;
            var _didIteratorError = false;
            var _iteratorError = undefined;

            try {
              for (var _iterator = Array.from(expr)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                var tags = _step.value;
                var _iteratorNormalCompletion2 = true;
                var _didIteratorError2 = false;
                var _iteratorError2 = undefined;

                try {
                  for (var _iterator2 = Array.from(tags.c)[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
                    var tag = _step2.value;

                    var tagData;
                    if (tagData = rh.filterObject.lookup(filterData, tag, false)) {
                      ckTags.push(tagData.display);
                    }
                  }
                } catch (err) {
                  _didIteratorError2 = true;
                  _iteratorError2 = err;
                } finally {
                  try {
                    if (!_iteratorNormalCompletion2 && _iterator2.return) {
                      _iterator2.return();
                    }
                  } finally {
                    if (_didIteratorError2) {
                      throw _iteratorError2;
                    }
                  }
                }
              }
            } catch (err) {
              _didIteratorError = true;
              _iteratorError = err;
            } finally {
              try {
                if (!_iteratorNormalCompletion && _iterator.return) {
                  _iterator.return();
                }
              } finally {
                if (_didIteratorError) {
                  throw _iteratorError;
                }
              }
            }

            if (ckTags.length > 0) {
              return postToServer();
            }
          });
        });
      });
    }

    return FilterReport;
  }();
  FilterReport.initClass();
  return FilterReport;
}();

new FilterReport();

},{}],12:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var _window = window,
    rh = _window.rh;
var model = rh.model;
var _ = rh._;
var consts = rh.consts;
var http = rh.http;


var GlossaryController = function () {
  var entrys = undefined;
  GlossaryController = function (_rh$NavController) {
    _inherits(GlossaryController, _rh$NavController);

    _createClass(GlossaryController, null, [{
      key: 'initClass',
      value: function initClass() {

        entrys = 'entrys';
      }
    }]);

    function GlossaryController(widget) {
      _classCallCheck(this, GlossaryController);

      var _this = _possibleConstructorReturn(this, (GlossaryController.__proto__ || Object.getPrototypeOf(GlossaryController)).call(this));

      _this.data = [];
      _this.chunkCount = 0;
      _this.count = 0;
      _this.keys = '';
      _this.alhpabet = '';
      _this.loadNavData('glo');
      _this.filter = '';
      _this.widget = widget;
      _this.widget.publish('show', {});
      return _this;
    }

    _createClass(GlossaryController, [{
      key: 'addElement',
      value: function addElement(elements, list) {
        var _this2 = this;

        return function () {
          var result = [];
          var _iteratorNormalCompletion = true;
          var _didIteratorError = false;
          var _iteratorError = undefined;

          try {
            for (var _iterator = Array.from(elements[entrys])[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
              var element = _step.value;

              if (element != null) {
                if (!_this2.lookup(list, element)) {
                  result.push(list.push(element));
                } else {
                  result.push(undefined);
                }
              }
            }
          } catch (err) {
            _didIteratorError = true;
            _iteratorError = err;
          } finally {
            try {
              if (!_iteratorNormalCompletion && _iterator.return) {
                _iterator.return();
              }
            } finally {
              if (_didIteratorError) {
                throw _iteratorError;
              }
            }
          }

          return result;
        }();
      }
    }, {
      key: 'exists',
      value: function exists(name) {
        var ch = this.alphaText(name);
        if (this.alhpabet.indexOf(ch) > -1) {
          return true;
        }
        this.alhpabet += ch;
        return false;
      }
    }, {
      key: 'isFiltered',
      value: function isFiltered(name) {
        return this.filter && name.toLocaleLowerCase().indexOf(this.filter) === -1;
      }
    }, {
      key: 'alphaText',
      value: function alphaText(name) {
        return name.toUpperCase().charAt(0);
      }
    }, {
      key: 'filterGlo',
      value: function filterGlo(value) {
        this.filter = value.toLocaleLowerCase();
        this.alhpabet = '';
        return model.publish(consts('PROJECT_GLOSSARY_DATA'), model.get(consts('PROJECT_GLOSSARY_DATA')));
      }
    }]);

    return GlossaryController;
  }(rh.NavController);
  GlossaryController.initClass();
  return GlossaryController;
}();

rh.controller('GlossaryController', GlossaryController);

},{}],13:[function(require,module,exports){
'use strict';

// Generated by CoffeeScript 1.9.1
(function () {
  var IndexController,
      NavController,
      _,
      consts,
      http,
      model,
      rh,
      rhs,
      topics,
      bind = function bind(fn, me) {
    return function () {
      return fn.apply(me, arguments);
    };
  },
      extend = function extend(child, parent) {
    for (var key in parent) {
      if (hasProp.call(parent, key)) child[key] = parent[key];
    }function ctor() {
      this.constructor = child;
    }ctor.prototype = parent.prototype;child.prototype = new ctor();child.__super__ = parent.prototype;return child;
  },
      hasProp = {}.hasOwnProperty;

  rh = window.rh;

  model = rh.model;

  _ = rh._;

  consts = rh.consts;

  http = rh.http;

  rhs = rh.rhs;

  topics = 'topics';

  NavController = function () {
    function NavController() {
      this.updateData = bind(this.updateData, this);
    }

    NavController.prototype.lookup = function (children, key) {
      var child, element, i, len;
      if (children != null && key != null) {
        for (i = 0, len = children.length; i < len; i++) {
          child = children[i];
          if (!(child != null)) {
            continue;
          }
          if (key.type === child.type && key.name === child.name && _.isEqual(key.url, child.url) && _.isEqual(key[topics], child[topics])) {
            element = child;
          }
          if (element != null) {
            break;
          }
        }
      }
      return element;
    };

    NavController.prototype.sort = function (array) {
      return array.sort(function (first, second) {
        return window.compare(first.name, second.name);
      });
    };

    NavController.prototype.updateData = function (constKey, projectUrl) {
      var curData;
      curData = model.get(consts('KEY_TEMP_DATA')) || [];
      model.publish(consts('KEY_TEMP_DATA'));
      this.addElement(curData, this.data, projectUrl, this.keys);
      if (--this.chunkCount === 0 && this.count === 0) {
        this.sort(this.data);
        return model.publish(consts(constKey), this.data);
      }
    };

    NavController.prototype.getChunkData = function (projectUrl, key) {
      var arr, ref;
      this.count--;
      arr = ((ref = model.get(consts('KEY_TEMP_DATA'))) != null ? ref['chunkinfos'] : void 0) || [];
      this.chunkCount += arr.length;
      return _.each(arr, function (chunk) {
        if (projectUrl) {
          projectUrl = _.ensureSlash(projectUrl);
        }
        return _.loadScript(projectUrl + "whxdata/" + chunk.node + ".new.js", false, function (_this) {
          return function () {
            return _this.updateData(key, projectUrl);
          };
        }(this));
      }, this);
    };

    NavController.prototype.loadNavData = function (type) {
      return model.subscribe(consts('KEY_PROJECT_LIST'), function (_this) {
        return function (list) {
          _this.alhpabet = '';
          _this.count += list.length;
          return _.each(list, function (projectUrl) {
            if (projectUrl) {
              projectUrl = _.ensureSlash(projectUrl);
            }
            return _.loadScript(projectUrl + "whxdata/" + (type === 'ndx' ? 'idx' : 'glo') + ".new.js", false, function (_this) {
              return function () {
                return _this.getChunkData(projectUrl, type === 'ndx' ? 'PROJECT_INDEX_DATA' : 'PROJECT_GLOSSARY_DATA');
              };
            }(this));
          }, _this);
        };
      }(this));
    };

    return NavController;
  }();

  rh.NavController = NavController;

  IndexController = function (superClass) {
    var defProject;

    extend(IndexController, superClass);

    defProject = '';

    function IndexController(widget) {
      this.data = [];
      this.chunkCount = 0;
      this.count = 0;
      this.alhpabet = '';
      this.filter = '';
      this.keys = 'keys';
      this.widget = widget;
      model.subscribeOnce(consts('EVT_PROJECT_LOADED'), function (_this) {
        return function () {
          _this.loadNavData('ndx');
          _this.getIndexData();
          return model.subscribe(consts('KEY_INDEX_FILTER'), function () {
            _this.alhpabet = '';
            return model.publish(consts('PROJECT_INDEX_DATA'), model.get(consts('PROJECT_INDEX_DATA')));
          });
        };
      }(this));
    }

    IndexController.prototype.addElement = function (element, list, projectUrl, data) {
      var child, existing, i, len, obj, ref, relUrl, results;
      if (element[data] != null) {
        ref = element[data];
        results = [];
        for (i = 0, len = ref.length; i < len; i++) {
          child = ref[i];
          if (!(child != null)) {
            continue;
          }
          if (!(existing = this.lookup(list, child))) {
            obj = {
              type: child.type,
              name: child.name
            };
            if (child['data-rhtags']) {
              obj['data-rhtags'] = child['data-rhtags'] + "+" + projectUrl;
            }
            if (!child.url) {
              obj[topics] = [];
            }
            relUrl = _.makeRelativeUrl("" + projectUrl, defProject);
            if (child.url != null) {
              obj.url = "" + encodeURI(relUrl) + child.url;
            }
            if (child.url == null) {
              obj[this.keys] = [];
            }
            list.push(obj);
            existing = list[list.length - 1];
          }
          this.addElement(child, existing[this.keys], projectUrl, this.keys);
          results.push(this.addElement(child, existing[topics], projectUrl, topics));
        }
        return results;
      }
    };

    IndexController.prototype.showItem = function (name) {
      var filter;
      filter = model.get(consts('KEY_INDEX_FILTER'));
      return !filter || name.toLocaleLowerCase().indexOf(filter.toLocaleLowerCase()) !== -1;
    };

    IndexController.prototype.showCategory = function (name, level) {
      var ch;
      if (level > 0) {
        return false;
      }
      ch = this.alphaText(name);
      if (this.alhpabet.indexOf(ch) > -1) {
        return false;
      }
      this.alhpabet += ch;
      return true;
    };

    IndexController.prototype.showNextLevel = function (node) {
      var childData, id, obj1, old;
      id = node.getAttribute('data-indexid');
      old = this.widget.get('show.' + id);
      childData = (obj1 = {}, obj1["" + id] = !old, obj1);
      while (id) {
        id = id.substr(0, id.lastIndexOf('_'));
        childData[id] = true;
      }
      return this.widget.publish('show', childData);
    };

    IndexController.prototype.alphaText = function (name) {
      return name.toUpperCase().charAt(0);
    };

    IndexController.prototype.getIndexData = function () {
      return model.subscribeOnce(consts('KEY_PUBLISH_BASE_URL'), function () {
        var baseContext, baseUrl, err, hashString, host, parentPath;
        try {
          baseUrl = model.get(consts('KEY_PUBLISH_BASE_URL'));
          host = document.location.origin;
          baseContext = baseUrl.substr(host.length);
          parentPath = _.parentPath(_.filePath(_.getRootUrl()));
          if (baseContext && !_.isEmptyString(baseContext)) {
            hashString = _.mapToEncodedString(_.extend({
              area: rhs.area(),
              prj: rhs.project(),
              type: rhs.type(),
              agt: 'ndx',
              mgr: 'agm'
            }));
            return http.get(baseContext + "?" + hashString).success(function (data, status) {
              var list;
              data = JSON.parse(data);
              list = [];
              _.each(data, function (item) {
                data[0] = _.ensureSlash(data[0]);
                return list.push(_.makeRelativeUrl(item, data[0]));
              });
              return model.publish(consts('KEY_PROJECT_LIST'), list);
            });
          }
        } catch (_error) {
          err = _error;
          if (rh._debug) {
            return rh._d('warn', err.message);
          }
        }
      });
    };

    return IndexController;
  }(rh.NavController);

  rh.controller('IndexController', IndexController);
}).call(undefined);

},{}],14:[function(require,module,exports){
'use strict';

var _window = window,
    rh = _window.rh;
var _ = rh._;
var $ = rh.$;
var consts = rh.consts;
var model = rh.model;


model.publish(consts('KEY_SHOW_TAGS'), rh._params.showtags === 'true');
model.publish(consts('KEY_IFRAME_EVENTS'), { click: true });

var oldHashMap = {};
var hashChanged = function hashChanged() {
  var newHashMap = _.hashParams();
  model.publish(consts('EVT_HASH_CHANGE'), { oldMap: oldHashMap, newMap: newHashMap }, { sync: true });
  return oldHashMap = newHashMap;
};

var redirectToDefaultTopic = function redirectToDefaultTopic() {
  var paramsStr = _.extractParamString(document.location.href);
  var paramsMap = _.urlParams(paramsStr);
  var hashStr = _.extractHashString(document.location.href);
  var hashMap = _.hashParams(hashStr);
  var mapnoattr = consts('RHMAPNO');
  var topicKey = consts('HASH_KEY_TOPIC');
  if (!(mapnoattr in paramsMap) && !(topicKey in hashMap)) {
    return document.location = consts('DEFAULT_TOPIC');
  }
};

_.addEventListener(window, 'hashchange', hashChanged);

_.addEventListener(window, 'orientationchange', function (e) {
  model.publish(consts('EVT_ORIENTATION_CHANGE'), null);
  if (model.get(consts('KEY_SCREEN_IPAD'))) {
    var topicFrame = void 0;
    if (topicFrame = _.getTopicFrame()) {
      var display = topicFrame.style.display;

      topicFrame.style.display = 'none';
      topicFrame.offsetHeight;
      return _.defer(function () {
        topicFrame.style.display = display;
        return _.delay(function () {
          topicFrame.offsetHeight;
          return _.delay(function () {
            return (// Let try once more
              topicFrame.offsetHeight
            );
          }, 500);
        }, 200);
      });
    }
  }
});

// TODO
//model.subscribe consts('EVT_ORIENTATION_CHANGE'), _.debounce ->
//  meta = $('meta[name=viewport]', 0)
//  meta.content = "width=#{window.innerWidth}, initial-scale=1,
//  maximum-scale=3, user-scalable=yes"
//  if model.get consts 'KEY_SCREEN_IOS'
//    model.publish consts('EVT_RELOAD_TOPIC'), null
//, 250

model.subscribe(consts('EVT_WIDGET_LOADED'), function () {
  // Create ExpressionBuilder widget on every page
  var topicFrame = void 0;
  model.subscribe(consts('KEY_MERGED_FILTER_KEY'), function () {
    return new rh.widgets.ExpressionBuilder();
  });

  // Create BrowseSequenceBuilder widget on every page
  new rh.widgets.BrowseSequenceBuilder();

  hashChanged();

  // replace default print method to support iFrame
  rh.layoutPrint = window.print;
  window.print = function () {
    return (
      // publish it with null value, to stop the autmatic subscribe calls
      model.publish(consts('EVT_PRINT_TOPIC'), null)
    );
  };

  var topicFileName = _.getFileName(document.location.href);
  if (topicFileName === consts('TOPIC_FILE')) {
    var redirectUrl = redirectToDefaultTopic();
    if (redirectUrl) {
      return redirectUrl;
    }
  }

  if (topicFrame = _.getTopicFrame()) {
    return topicFrame.onload = function () {
      return model.publish(consts('EVT_TOPIC_LOADED'), null);
    };
  } else {
    var paramsStr = _.extractParamString(document.location.href);
    var paramsMap = _.urlParams(paramsStr);
    var mapnoattr = consts('RHMAPNO');
    if (mapnoattr in paramsMap) {
      return document.location = consts('TOPIC_FILE') + "?" + paramsStr;
    }
  }
});
model.subscribe(consts('EVT_BOOKMARK') + '#content_top_placeholder', function () {
  return (
    // Hack #content_top_link clicks and send them to content iframe
    model.publish(consts('EVT_SCROLL_TO_TOP'), null)
  );
});

model.subscribe(consts('KEY_PROJECT_LIST'), function () {
  return rh.filterObject = new rh.MergeProj();
});

model.subscribe(consts('EVT_PROJECT_LOADED'), function () {
  var deviceReady = "deviceready";
  return document.addEventListener(deviceReady, function () {
    if (window.cordova != null) {
      return model.publish(consts('KEY_MOBILE_APP_MODE'), true);
    }
  });
});

},{}],15:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var JsLoadingController = function () {
  var rh = undefined;
  var $ = undefined;
  var _ = undefined;
  JsLoadingController = function () {
    _createClass(JsLoadingController, null, [{
      key: 'initClass',
      value: function initClass() {
        var _window = window;
        rh = _window.rh;
        var _rh = rh;
        $ = _rh.$;
        var _rh2 = rh;
        _ = _rh2._;
      }
    }]);

    function JsLoadingController(widget, opts) {
      _classCallCheck(this, JsLoadingController);

      var removeClasses = (opts != null ? opts.removeClasses : undefined) || ['hide-children', 'loading'];
      _.each(removeClasses, function (className) {
        return $.removeClass(widget.node, className);
      });
      _.each(opts != null ? opts.addClasses : undefined, function (className) {
        return $.addClass(widget.node, className);
      });
    }

    return JsLoadingController;
  }();
  JsLoadingController.initClass();
  return JsLoadingController;
}();

window.rh.controller('JsLoadingController', JsLoadingController);

},{}],16:[function(require,module,exports){
'use strict';

var _window = window,
    rh = _window.rh;
var _ = rh._;
var $ = rh.$;
var consts = rh.consts;


rh.model.subscribe(consts('EVT_WIDGET_BEFORELOAD'), function () {
  if ($('a.wShow', 0) !== null) {
    var contentDiv = $('.contenttopic', 0);
    $.setAttribute(contentDiv, 'data-rhwidget', 'Basic');
    return $.setAttribute(contentDiv, 'data-class', 'govt_csh:@.l.csh_mode;govt_nocsh:!@.l.csh_mode');
  }
});

},{}],17:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var _window = window,
    rh = _window.rh;
var _ = rh._;
var model = rh.model;
var consts = rh.consts;


var Projects = function () {
  var projectList = undefined;
  var projectQueue = undefined;
  var projDataFile = undefined;
  var REMOTENODE = undefined;
  var PROJNODE = undefined;
  var URL = undefined;
  var loaded = undefined;
  var loadProjectFile = undefined;
  var getProjectList = undefined;
  Projects = function () {
    _createClass(Projects, null, [{
      key: 'initClass',
      value: function initClass() {
        projectList = [];
        projectQueue = [];
        projDataFile = 'projectdata.js';
        REMOTENODE = 'remote';
        PROJNODE = 'project';
        URL = 'url';
        loaded = 0;

        loadProjectFile = function loadProjectFile(curProjPath) {
          var curProjDataFile = curProjPath + '/' + projDataFile;
          return window.xmlJsReader.loadFile(curProjDataFile, function (xmlDoc, curProjPath) {
            var remoteNodes = void 0;
            var len = 0;
            loaded++;
            if (xmlDoc != null) {
              var projXmlNode = xmlDoc.getElementsByTagName(PROJNODE)[0];
              remoteNodes = projXmlNode.getElementsByTagName(REMOTENODE);
              len = remoteNodes.length;
            }
            _.each(remoteNodes, function (remoteNode) {
              var path = curProjPath + '/' + remoteNode.getAttribute(URL);
              projectList.push(path);
              return projectQueue.push(path);
            });
            getProjectList();
            if (projectQueue.length === 0 && loaded === projectList.length) {
              model.publish(consts('KEY_PROJECT_LIST'), projectList);
              return model.publish(consts('KEY_MASTER_PROJECT_LIST'), ["."]);
            }
          }, curProjPath);
        };

        getProjectList = function getProjectList() {
          return function () {
            var result = [];
            while (projectQueue.length > 0) {
              var project = projectQueue.splice(0, 1);
              result.push(loadProjectFile(project));
            }
            return result;
          }();
        };
      }
    }]);

    function Projects() {
      _classCallCheck(this, Projects);

      projectList.push('.');
      projectQueue.push('.');
      getProjectList();
    }

    return Projects;
  }();
  Projects.initClass();
  return Projects;
}();

model.subscribe(consts('EVT_PROJECT_LOADED'), function () {
  return _.defer(function () {
    if (!model.get(consts('KEY_PUBLISH_MODE')) && !window.gbPreviewMode) {
      return new Projects();
    }
  });
});

},{}],18:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var ModernLayoutController = function () {
  var rh = undefined;
  var _ = undefined;
  var $ = undefined;
  var consts = undefined;
  var KEY_FEATURE = undefined;
  var KEY_FILTER_LOCATION = undefined;
  var KEY_SEARCH_LOCATION = undefined;
  var KEY_ACTIVE_TAB = undefined;
  var KEY_UI_MODE = undefined;
  var KEY_MOBILE_TOC_DRILL_DOWN = undefined;
  var KEY_TOC_DRILL_DOWN = undefined;
  var DESKTOP = undefined;
  var TABLET = undefined;
  var PHONE = undefined;
  var SHOW_FILTER_UI = undefined;
  var tabs = undefined;
  var sideBarTabs = undefined;
  var delayLoadTabs = undefined;
  ModernLayoutController = function () {
    _createClass(ModernLayoutController, null, [{
      key: 'initClass',
      value: function initClass() {
        var _window = window;
        rh = _window.rh;
        var _rh = rh;
        _ = _rh._;
        var _rh2 = rh;
        $ = _rh2.$;
        var _rh3 = rh;
        consts = _rh3.consts;

        KEY_FEATURE = consts('KEY_FEATURE');
        KEY_FILTER_LOCATION = consts('KEY_FILTER_LOCATION');
        KEY_SEARCH_LOCATION = consts('KEY_SEARCH_LOCATION');
        KEY_ACTIVE_TAB = consts('KEY_ACTIVE_TAB');
        KEY_UI_MODE = consts('KEY_UI_MODE');
        KEY_MOBILE_TOC_DRILL_DOWN = consts('KEY_MOBILE_TOC_DRILL_DOWN');
        KEY_TOC_DRILL_DOWN = consts('KEY_TOC_DRILL_DOWN');
        DESKTOP = 'desktop';
        TABLET = 'tablet';
        PHONE = 'phone';
        SHOW_FILTER_UI = rh._params.hideUI !== 'filter';
        tabs = {
          desktop: ['toc', 'idx', 'glo', 'filter', 'fts'],
          tablet: ['toc', 'idx', 'glo', 'filter', 'fts'],
          phone: ['toc', 'idx', 'glo', 'filter', 'fts']
        };

        sideBarTabs = {
          desktop: ['toc', 'idx', 'glo', 'filter', 'fts'],
          tablet: ['toc', 'idx', 'glo', 'filter', 'fts'],
          phone: ['toc', 'idx', 'glo']
        };
        delayLoadTabs = {
          'idx': { evt: 'EVT_LOAD_IDX', f_key: 'delay_load_idx' },
          'glo': { evt: 'EVT_LOAD_GLO', f_key: 'delay_load_glo' }
        };
      }
    }]);

    function ModernLayoutController(widget) {
      var _this = this;

      _classCallCheck(this, ModernLayoutController);

      this.triggerDelayLoadWidgets = this.triggerDelayLoadWidgets.bind(this);
      this.widget = widget;
      this.init();
      this.subscribeActiveTab();
      this.subscribeToLocations();
      this.subscribeScreens();

      this.widget.subscribe(consts('EVT_PROJECT_LOADED'), function () {
        _this.subscribeUIMode();
        _this.subscribeMergedFilter();
        _this.subscribeTopicClick();
        _this.subscribeTopicScroll();
        _this.subscribForSearchResult();
        _this.subscribeTopicNavigate();
        _this.subscribeToDelayLoadEvents();
        return _this.widget.publish(consts('KEY_IFRAME_EVENTS'), { click: true, scroll: false });
      });
    }

    _createClass(ModernLayoutController, [{
      key: 'init',
      value: function init() {
        this.screens = this.widget.get(consts('KEY_SCREEN_NAMES'));
        rh.storage.init(consts('HELP_ID'));
        this.activeScreen = _.find(this.screens, function (screen) {
          return this.widget.get(consts('KEY_SCREEN') + '.' + screen + '.attached');
        }, this);
        if (this.activeScreen == null) {
          this.activeScreen = this.widget.get(consts('KEY_DEFAULT_SCREEN'));
        }

        this.assureLocations(this.activeScreen);

        this.initDefauls();

        return this.initActiveTab();
      }
    }, {
      key: 'initDefauls',
      value: function initDefauls() {
        var defaultTab = this.widget.get(consts('KEY_DEFAULT_TAB'));
        if (!this.hasFeature(defaultTab)) {
          defaultTab = null;
        }

        this.defaultTabs = {};

        return _.each(this.screens, function (screen) {
          tabs[screen] = _.filter(tabs[screen], function (tab) {
            return this.hasFeature(tab);
          }, this);

          sideBarTabs[screen] = _.filter(sideBarTabs[screen], function (tab) {
            return this.hasFeature(tab);
          }, this);

          return this.defaultTabs[screen] = defaultTab && -1 !== tabs[screen].indexOf(defaultTab) ? defaultTab : tabs[screen][0];
        }, this);
      }
    }, {
      key: 'initActiveTab',
      value: function initActiveTab() {
        var activeTab = rh.storage.fetch('activetab');
        if (activeTab !== undefined && activeTab && this.hasFeature(activeTab)) {
          return this.widget.publish(KEY_ACTIVE_TAB, activeTab);
        }
      }
    }, {
      key: 'isValidTab',
      value: function isValidTab(tab, screen) {
        if (screen == null) {
          screen = this.activeScreen;
        }
        if (!tab || !this.hasFeature(tab)) {
          return false;
        }

        if (screen === DESKTOP) {
          if (tab === 'filter' && 'content' === this.widget.get(KEY_FILTER_LOCATION) || tab === 'fts' && 'content' === this.widget.get(KEY_SEARCH_LOCATION)) {
            return false;
          }
        }

        return -1 !== tabs[screen].indexOf(tab);
      }
    }, {
      key: 'defaultTab',
      value: function defaultTab(screen) {
        if (screen == null) {
          screen = this.activeScreen;
        }
        var defaultTab = this.defaultTabs[screen];
        if (!this.isValidTab(defaultTab)) {
          defaultTab = _.find(tabs[screen], function (tab) {
            return this.isValidTab(tab);
          }, this);
        }
        return defaultTab;
      }
    }, {
      key: 'assureValidActiveTab',
      value: function assureValidActiveTab(screen) {
        if (screen == null) {
          screen = this.activeScreen;
        }
        var activetab = this.widget.get(KEY_ACTIVE_TAB);
        if (screen === DESKTOP || activetab) {
          if (!this.isValidTab(activetab)) {
            activetab = this.defaultTab();
          }
          return this.widget.publish(KEY_ACTIVE_TAB, activetab);
        }
      }
    }, {
      key: 'toggleSideBar',
      value: function toggleSideBar() {
        if (this.widget.get(KEY_ACTIVE_TAB)) {
          return this.widget.publish(KEY_ACTIVE_TAB, null);
        } else {
          return this.widget.publish(KEY_ACTIVE_TAB, this.lastMobileTab || this.defaultTab());
        }
      }
    }, {
      key: 'toggleActiveTab',
      value: function toggleActiveTab(tab) {
        return this.widget.publish(KEY_ACTIVE_TAB, !this.isDesktopScreen() && tab === this.widget.get(KEY_ACTIVE_TAB) ? null : tab);
      }
    }, {
      key: 'triggerDelayLoadWidgets',
      value: function triggerDelayLoadWidgets(tab) {
        var tabObj = delayLoadTabs[tab];
        if (tabObj && this.hasFeature(tabObj.f_key)) {
          return this.widget.publish(consts(tabObj.evt), true);
        }
      }
    }, {
      key: 'subscribeToDelayLoadEvents',
      value: function subscribeToDelayLoadEvents() {
        return this.widget.subscribe(KEY_ACTIVE_TAB, this.triggerDelayLoadWidgets);
      }
    }, {
      key: 'filterDone',
      value: function filterDone() {
        return this.widget.publish(KEY_ACTIVE_TAB, this.searchMode ? 'fts' : null);
      }
    }, {
      key: 'hasFeature',
      value: function hasFeature(feature) {
        return feature === undefined || false !== this.widget.get(KEY_FEATURE + '.' + feature);
      }
    }, {
      key: 'subscribeUIMode',
      value: function subscribeUIMode() {
        var _this2 = this;

        var setSearchTab = function setSearchTab() {
          if (!_this2.isValidTab('fts')) {
            return;
          }
          if (!_this2.isDesktopScreen() || 'tabbar' === _this2.widget.get(KEY_SEARCH_LOCATION)) {
            return _this2.widget.publish(KEY_ACTIVE_TAB, 'fts');
          }
        };

        this.widget.subscribe(KEY_UI_MODE, function (mode) {
          return _this2.widget.publish('active_content', mode);
        });

        this.widget.subscribe('active_content', function (mode) {
          if (_this2.isMobileScreen() && !mode) {
            return _this2.widget.publish(KEY_ACTIVE_TAB, null);
          } else if ('search' === mode) {
            return setSearchTab();
          }
        }, { initDone: true });
        if ('search' === this.widget.get('active_content')) {
          return setSearchTab();
        }
      }
    }, {
      key: 'subscribeMergedFilter',
      value: function subscribeMergedFilter() {
        var _this3 = this;

        var featureFilterKey = void 0;
        if (this.widget.get(featureFilterKey = KEY_FEATURE + '.filter')) {
          return this.widget.subscribe(consts('KEY_MERGED_FILTER_KEY'), function (tags) {
            _this3.widget.publish(featureFilterKey, tags && tags.length && SHOW_FILTER_UI ? true : false);
            return _this3.assureValidActiveTab();
          });
        }
      }
    }, {
      key: 'subscribeTopicClick',
      value: function subscribeTopicClick() {
        var _this4 = this;

        return this.widget.subscribe(consts('EVT_CLICK_INSIDE_IFRAME'), function () {
          if (_this4.activeScreen === PHONE && _this4.widget.get(KEY_ACTIVE_TAB)) {
            return _this4.toggleSideBar();
          }
        });
      }
    }, {
      key: 'subscribeTopicNavigate',
      value: function subscribeTopicNavigate() {
        var _this5 = this;

        return this.widget.subscribe(consts('EVT_NAVIGATE_TO_URL'), function (obj) {
          if (obj.absUrl && _.isUrlAllowdInIframe(obj.absUrl)) {
            return _this5.widget.publish('active_content', null);
          }
        });
      }
    }, {
      key: 'subscribeTopicScroll',
      value: function subscribeTopicScroll() {
        var _this6 = this;

        return this.widget.subscribe(consts('EVT_SCROLL_INSIDE_IFRAME'), function (info) {
          var hide_header = info.dir === 'down' || info.scrollTop > 10;
          _this6.widget.publish('hide_header', hide_header);

          var hide_mobile_functions = info.dir === 'down' && info.scrollTop > 10;
          return _this6.widget.publish('hide_mobile_functions', hide_mobile_functions);
        });
      }
    }, {
      key: 'subscribeActiveTab',
      value: function subscribeActiveTab() {
        var _this7 = this;

        return this.widget.subscribe(KEY_ACTIVE_TAB, function (activeTab) {
          rh.storage.persist('activetab', activeTab);
          if (_this7.isMobileScreen()) {
            if (_this7.isSidebarTab(activeTab)) {
              _this7.lastMobileTab = activeTab;
            }
            return _this7.searchMode = activeTab === 'fts' || _this7.searchMode && activeTab === 'filter';
          } else {
            return _this7.searchMode = false;
          }
        });
      }
    }, {
      key: 'subscribeScreens',
      value: function subscribeScreens() {
        return _.each(this.screens, function (screen) {
          var _this8 = this;

          var key = consts('KEY_SCREEN') + '.' + screen + '.attached';
          if (this.widget.get(key)) {
            this.handleScreen(true, screen);
          }
          return this.widget.subscribe(key, function (attached) {
            return _this8.handleScreen(attached, screen);
          }, { initDone: true });
        }, this);
      }
    }, {
      key: 'subscribeToLocations',
      value: function subscribeToLocations() {
        var _this9 = this;

        this.widget.subscribe(KEY_SEARCH_LOCATION, function () {
          return _this9.assureValidActiveTab(_this9.activeScreen);
        });

        return this.widget.subscribe(KEY_FILTER_LOCATION, function () {
          return _this9.assureValidActiveTab(_this9.activeScreen);
        });
      }
    }, {
      key: 'subscribForSearchResult',
      value: function subscribForSearchResult() {
        var _this10 = this;

        var updateSearchResults = function updateSearchResults() {
          var tagExpr = _this10.widget.get(consts('KEY_TAG_EXPRESSION'));
          var searchTagExpr = _this10.widget.get(consts('KEY_ONSEARCH_TAG_EXPR'));
          if (searchTagExpr && searchTagExpr !== JSON.stringify(tagExpr)) {
            return _this10.widget.publish(consts('EVT_SEARCH_TERM'), true);
          }
        };

        this.widget.subscribe(consts('KEY_TAG_EXPRESSION'), _.debounce(function () {
          if (_this10.isValidTab('fts') && 'fts' !== _this10.widget.get(KEY_ACTIVE_TAB)) {
            return;
          }
          if (!_this10.isSearchMode(_this10.widget.get(KEY_ACTIVE_TAB))) {
            return;
          }

          return updateSearchResults();
        }, 300));

        return this.widget.subscribe(KEY_ACTIVE_TAB, function (tab) {
          if (tab === 'fts') {
            return updateSearchResults();
          }
        });
      }
    }, {
      key: 'isMobileScreen',
      value: function isMobileScreen() {
        return this.activeScreen === PHONE;
      }
    }, {
      key: 'isDesktopScreen',
      value: function isDesktopScreen() {
        return this.activeScreen === DESKTOP;
      }
    }, {
      key: 'isTabletScreen',
      value: function isTabletScreen() {
        return this.activeScreen === TABLET;
      }
    }, {
      key: 'isSidebarTab',
      value: function isSidebarTab(tab) {
        return tab && -1 !== sideBarTabs[this.activeScreen].indexOf(tab);
      }
    }, {
      key: 'isSearchMode',
      value: function isSearchMode(tab) {
        var topicTab = this.widget.get('active_content');
        return tab === 'fts' || topicTab === 'search' && this.isDesktopScreen() && 'content' === this.widget.get(KEY_SEARCH_LOCATION);
      }
    }, {
      key: 'handleScreen',
      value: function handleScreen(attached, screen) {
        if (attached) {
          this.activeScreen = screen;
          return this.handleAttached(screen);
        } else {
          return this.handleDetached(screen);
        }
      }
    }, {
      key: 'handleDetached',
      value: function handleDetached(screen) {
        var _this11 = this;

        return _.defer(function () {
          if (screen === DESKTOP) {
            return _this11.widget.publish(KEY_ACTIVE_TAB, 'search' === _this11.widget.get('active_content') && _this11.isValidTab('fts') ? 'fts' : null);
          }
        });
      }
    }, {
      key: 'handleAttached',
      value: function handleAttached(screen) {
        this.assureLocations(screen);
        this.assureValidActiveTab(screen);
        return this.assureTOCMode(screen);
      }
    }, {
      key: 'assureLocations',
      value: function assureLocations(screen) {
        if (screen == null) {
          screen = this.activeScreen;
        }
        this.widget.publish(KEY_SEARCH_LOCATION, screen === DESKTOP ? this.widget.get(consts('KEY_DEFAULT_SEARCH_LOCATION')) : screen === TABLET ? 'tabbar' : 'content');
        return this.widget.publish(KEY_FILTER_LOCATION, screen === DESKTOP || screen === TABLET ? 'tabbar' : 'content');
      }
    }, {
      key: 'assureTOCMode',
      value: function assureTOCMode(screen) {
        if (screen == null) {
          screen = this.activeScreen;
        }
        return this.widget.publish(KEY_TOC_DRILL_DOWN, screen !== DESKTOP && this.widget.get(KEY_MOBILE_TOC_DRILL_DOWN));
      }
    }, {
      key: 'newSearch',
      value: function newSearch(text, keyCode, event) {
        if (keyCode === 13) {
          var oldText = this.widget.get(consts('KEY_SEARCH_TERM'));
          if (oldText !== text) {
            this.widget.publish(consts('KEY_SEARCH_TERM'), text);
          }
          this.widget.publish(consts('EVT_SEARCH_TERM'), true);
          if (event != null ? event.target : undefined) {
            return event.target.blur();
          }
        }
      }
    }, {
      key: 'isTagStatesChanged',
      value: function isTagStatesChanged() {
        var currentState = _.compactObject(this.widget.get(consts('KEY_PROJECT_TAG_STATES')));
        var defaultState = _.compactObject(this.widget.get(consts('KEY_DEFAULT_FILTER')));
        return !_.isEqual(currentState, defaultState);
      }
    }, {
      key: 'setDefaultTagStates',
      value: function setDefaultTagStates() {
        var defaultState = this.widget.get(consts('KEY_DEFAULT_FILTER'));
        return this.widget.publish(consts('KEY_PROJECT_TAG_STATES'), _.clone(defaultState));
      }
    }]);

    return ModernLayoutController;
  }();
  ModernLayoutController.initClass();
  return ModernLayoutController;
}();

window.rh.controller('ModernLayoutController', ModernLayoutController);

},{}],19:[function(require,module,exports){
'use strict';

// Generated by CoffeeScript 1.9.1
(function () {
  var MergeProj, _, consts, model, rh;

  rh = window.rh;

  model = rh.model;

  _ = rh._;

  consts = rh.consts;

  MergeProj = function () {
    var group, onLoadScipt;

    function MergeProj() {
      this.tagCombs = [];
      this.idmap = {};
      this.filter = [];
      this.grpType = 'group';
      this.dataLoaded = false;
      this.loadTagData(model.get(consts('KEY_PROJECT_LIST')));
      this.caption = this.type = this.defFilter = void 0;
    }

    MergeProj.prototype.updateTagCombs = function (project) {
      var base, combs;
      combs = model.get(consts('KEY_PROJECT_TAG_COMBINATIONS'));
      if (combs != null) {
        project = _.parseProjectName(project);
        return (base = this.idmap)[project] != null ? base[project] : base[project] = combs;
      }
    };

    MergeProj.prototype.lookup = function (children, key, isGrpType) {
      var child, compKey, element, i, len;
      if (isGrpType == null) {
        isGrpType = true;
      }
      if (children != null && key != null) {
        for (i = 0, len = children.length; i < len; i++) {
          child = children[i];
          if (!(child != null)) {
            continue;
          }
          compKey = child.name || child.display;
          if (isGrpType === (child.children != null) && compKey === key) {
            element = child;
          } else if (child.children != null && !isGrpType) {
            element = this.lookup(child.children, key, isGrpType);
          }
          if (element != null) {
            break;
          }
        }
      }
      return element;
    };

    group = function group(disp) {
      var object;
      return object = {
        type: 'group',
        display: disp,
        children: []
      };
    };

    MergeProj.prototype.addTag = function (childArr, tagElement) {
      var tag;
      if (this.lookup(this.filter, tagElement.name, false) == null) {
        tag = {
          display: tagElement.display,
          name: tagElement.name
        };
        return childArr.push(tag);
      }
    };

    MergeProj.prototype.addGroup = function (grpElement) {
      var element, grp, i, len, ref;
      grp = this.lookup(this.filter, grpElement.display);
      if (grp == null) {
        grp = group(grpElement.display);
        this.filter.push(grp);
      }
      ref = grpElement.children;
      for (i = 0, len = ref.length; i < len; i++) {
        element = ref[i];
        if (element != null) {
          if (element.children == null) {
            this.addTag(grp.children, element);
          }
        }
      }
      if (grp.children.length === 0 && this.filter.indexOf(grp) > -1) {
        return this.filter.splice(this.filter.indexOf(grp), 1);
      }
    };

    MergeProj.prototype.updateFilter = function () {
      var curfilter, element, i, len, results;
      curfilter = model.get(consts('KEY_TEMP_DATA')) || [];
      if (!this.caption) {
        this.caption = curfilter['caption'];
      }
      if (!this.type) {
        this.type = curfilter['type'];
      }
      if (typeof this.defFilter === 'undefined') {
        this.defFilter = curfilter['default'];
      }
      curfilter = curfilter['tags'] || [];
      model.publish(consts('KEY_TEMP_DATA'));
      results = [];
      for (i = 0, len = curfilter.length; i < len; i++) {
        element = curfilter[i];
        if (element != null) {
          if (element.children != null) {
            results.push(this.addGroup(element));
          } else {
            results.push(this.addTag(this.filter, element));
          }
        }
      }
      return results;
    };

    onLoadScipt = function onLoadScipt(project, count) {
      this.updateTagCombs(project);
      this.updateFilter();
      if (!count) {
        model.publish(consts('KEY_MERGED_FILTER_KEY'), this.filter);
        model.publish(consts('KEY_MERGED_PROJECT_MAP'), this.idmap);
        model.publish(consts('KEY_PROJECT_FILTER_CAPTION'), this.caption);
        model.publish(consts('KEY_PROJECT_FILTER_TYPE'), this.type);
        model.publish(consts('KEY_DEFAULT_FILTER'), this.defFilter);
        return this.dataLoaded = true;
      }
    };

    MergeProj.prototype.loadTagData = function (projList) {
      var count, i, len, project, results;
      if (!this.dataLoaded) {
        count = projList.length;
        results = [];
        for (i = 0, len = projList.length; i < len; i++) {
          project = projList[i];
          if (project != null) {
            if (project) {
              project = project + "/";
            }
            results.push(_.loadScript("" + project + consts('PATH_PROJECT_TAGDATA_FILE'), false, onLoadScipt.bind(this, project, --count)));
          } else {
            results.push(void 0);
          }
        }
        return results;
      }
    };

    return MergeProj;
  }();

  rh.MergeProj = MergeProj;
}).call(undefined);

},{}],20:[function(require,module,exports){
'use strict';

var _window = window,
    rh = _window.rh;
var _ = rh._;
var $ = rh.$;
var consts = rh.consts;
var model = rh.model;
var rhs = rh.rhs;

var unsub = null;

unsub = model.subscribe(consts('KEY_TAG_EXPRESSION'), function () {
  var done = false;
  return function () {
    if (unsub) {
      unsub();
    }
    if (done) {
      return;
    }
    done = true;
    return model.subscribe(consts('KEY_SEARCHED_TERM'), function () {
      return model.publish(consts('KEY_ONSEARCH_TAG_EXPR'), JSON.stringify(model.get(consts('KEY_TAG_EXPRESSION'))));
    });
  };
}());

model.subscribe(consts('EVT_SEARCH_TERM'), function () {
  var canHandleSearch = model.get(consts('KEY_CAN_HANDLE_SEARCH'));
  var searchTerm = model.get(consts('KEY_SEARCH_TERM')) || null;
  var newMap = {};
  newMap[consts('HASH_KEY_RH_SEARCH')] = searchTerm;
  newMap[consts('HASH_KEY_UIMODE')] = 'search';

  if (canHandleSearch !== true) {
    return document.location = window.gRootRelPath + '/' + ('' + (window.gSearchPageFilePath || consts('START_FILEPATH'))) + ('?#' + _.mapToEncodedString(newMap));
  } else {
    model.publish(consts('EVT_QUERY_SEARCH_RESULTS'), true);
    return _.defer(function () {
      return _.updateHashMap(newMap, true);
    });
  }
});

model.subscribe(consts('EVT_PROJECT_LOADED'), function () {
  if (window.readSetting) {
    window.readSetting(RHANDSEARCH, function (state) {
      return model.publish(consts('KEY_AND_SEARCH'), state);
    });
  }

  return model.subscribe(consts('KEY_AND_SEARCH'), function (state) {
    return saveSetting(RHANDSEARCH, state === '1' ? '1' : '0', true);
  });
});

model.subscribe(consts('EVT_QUERY_SEARCH_RESULTS'), function () {
  if (!rhs.doSearch()) {
    return window.doSearch();
  }
});

},{}],21:[function(require,module,exports){
'use strict';

var _window = window,
    rh = _window.rh;
var _ = rh._;
var $ = rh.$;
var consts = rh.consts;
var model = rh.model;


_.getRootUrl = function () {
  var rootUrl = null;
  return function () {
    return rootUrl != null ? rootUrl : rootUrl = '' + _.getHostFolder() + consts('START_FILEPATH');
  };
}();

_.runTopicLoadingAnimation = function () {
  var runAnimation = null;
  var topicLoading = false;
  return function (flag) {
    topicLoading = flag;
    if (flag) {
      if (runAnimation == null) {
        runAnimation = _.debounce(function () {
          return model.publish(consts('EVT_TOPIC_LOADING'), topicLoading);
        }, 700);
      }
      return runAnimation();
    } else {
      runAnimation = null;
      return model.publish(consts('EVT_TOPIC_LOADING'), false);
    }
  };
}();

_.getTopicFrame = function () {
  var topicFrameName = window.gTopicFrameName || 'rh_default_topic_frame_name';
  return $('[name=' + topicFrameName + ']', 0);
};

},{}],22:[function(require,module,exports){
/**
 * lunr - http://lunrjs.com - A bit like Solr, but much smaller and not as bright - 2.1.6
 * Copyright (C) 2018 Oliver Nightingale
 * @license MIT
 */

;(function(){

/**
 * A convenience function for configuring and constructing
 * a new lunr Index.
 *
 * A lunr.Builder instance is created and the pipeline setup
 * with a trimmer, stop word filter and stemmer.
 *
 * This builder object is yielded to the configuration function
 * that is passed as a parameter, allowing the list of fields
 * and other builder parameters to be customised.
 *
 * All documents _must_ be added within the passed config function.
 *
 * @example
 * var idx = lunr(function () {
 *   this.field('title')
 *   this.field('body')
 *   this.ref('id')
 *
 *   documents.forEach(function (doc) {
 *     this.add(doc)
 *   }, this)
 * })
 *
 * @see {@link lunr.Builder}
 * @see {@link lunr.Pipeline}
 * @see {@link lunr.trimmer}
 * @see {@link lunr.stopWordFilter}
 * @see {@link lunr.stemmer}
 * @namespace {function} lunr
 */
var lunr = function (config) {
  var builder = new lunr.Builder

  builder.pipeline.add(
    lunr.trimmer,
    lunr.stopWordFilter,
    lunr.stemmer
  )

  builder.searchPipeline.add(
    lunr.stemmer
  )

  config.call(builder, builder)
  return builder.build()
}

lunr.version = "2.1.6"
/*!
 * lunr.utils
 * Copyright (C) 2018 Oliver Nightingale
 */

/**
 * A namespace containing utils for the rest of the lunr library
 */
lunr.utils = {}

/**
 * Print a warning message to the console.
 *
 * @param {String} message The message to be printed.
 * @memberOf Utils
 */
lunr.utils.warn = (function (global) {
  /* eslint-disable no-console */
  return function (message) {
    if (global.console && console.warn) {
      console.warn(message)
    }
  }
  /* eslint-enable no-console */
})(this)

/**
 * Convert an object to a string.
 *
 * In the case of `null` and `undefined` the function returns
 * the empty string, in all other cases the result of calling
 * `toString` on the passed object is returned.
 *
 * @param {Any} obj The object to convert to a string.
 * @return {String} string representation of the passed object.
 * @memberOf Utils
 */
lunr.utils.asString = function (obj) {
  if (obj === void 0 || obj === null) {
    return ""
  } else {
    return obj.toString()
  }
}
lunr.FieldRef = function (docRef, fieldName, stringValue) {
  this.docRef = docRef
  this.fieldName = fieldName
  this._stringValue = stringValue
}

lunr.FieldRef.joiner = "/"

lunr.FieldRef.fromString = function (s) {
  var n = s.indexOf(lunr.FieldRef.joiner)

  if (n === -1) {
    throw "malformed field ref string"
  }

  var fieldRef = s.slice(0, n),
      docRef = s.slice(n + 1)

  return new lunr.FieldRef (docRef, fieldRef, s)
}

lunr.FieldRef.prototype.toString = function () {
  if (this._stringValue == undefined) {
    this._stringValue = this.fieldName + lunr.FieldRef.joiner + this.docRef
  }

  return this._stringValue
}
/**
 * A function to calculate the inverse document frequency for
 * a posting. This is shared between the builder and the index
 *
 * @private
 * @param {object} posting - The posting for a given term
 * @param {number} documentCount - The total number of documents.
 */
lunr.idf = function (posting, documentCount) {
  var documentsWithTerm = 0

  for (var fieldName in posting) {
    if (fieldName == '_index') continue // Ignore the term index, its not a field
    documentsWithTerm += Object.keys(posting[fieldName]).length
  }

  var x = (documentCount - documentsWithTerm + 0.5) / (documentsWithTerm + 0.5)

  return Math.log(1 + Math.abs(x))
}

/**
 * A token wraps a string representation of a token
 * as it is passed through the text processing pipeline.
 *
 * @constructor
 * @param {string} [str=''] - The string token being wrapped.
 * @param {object} [metadata={}] - Metadata associated with this token.
 */
lunr.Token = function (str, metadata) {
  this.str = str || ""
  this.metadata = metadata || {}
}

/**
 * Returns the token string that is being wrapped by this object.
 *
 * @returns {string}
 */
lunr.Token.prototype.toString = function () {
  return this.str
}

/**
 * A token update function is used when updating or optionally
 * when cloning a token.
 *
 * @callback lunr.Token~updateFunction
 * @param {string} str - The string representation of the token.
 * @param {Object} metadata - All metadata associated with this token.
 */

/**
 * Applies the given function to the wrapped string token.
 *
 * @example
 * token.update(function (str, metadata) {
 *   return str.toUpperCase()
 * })
 *
 * @param {lunr.Token~updateFunction} fn - A function to apply to the token string.
 * @returns {lunr.Token}
 */
lunr.Token.prototype.update = function (fn) {
  this.str = fn(this.str, this.metadata)
  return this
}

/**
 * Creates a clone of this token. Optionally a function can be
 * applied to the cloned token.
 *
 * @param {lunr.Token~updateFunction} [fn] - An optional function to apply to the cloned token.
 * @returns {lunr.Token}
 */
lunr.Token.prototype.clone = function (fn) {
  fn = fn || function (s) { return s }
  return new lunr.Token (fn(this.str, this.metadata), this.metadata)
}
/*!
 * lunr.tokenizer
 * Copyright (C) 2018 Oliver Nightingale
 */

/**
 * A function for splitting a string into tokens ready to be inserted into
 * the search index. Uses `lunr.tokenizer.separator` to split strings, change
 * the value of this property to change how strings are split into tokens.
 *
 * This tokenizer will convert its parameter to a string by calling `toString` and
 * then will split this string on the character in `lunr.tokenizer.separator`.
 * Arrays will have their elements converted to strings and wrapped in a lunr.Token.
 *
 * @static
 * @param {?(string|object|object[])} obj - The object to convert into tokens
 * @returns {lunr.Token[]}
 */
lunr.tokenizer = function (obj) {
  if (obj == null || obj == undefined) {
    return []
  }

  if (Array.isArray(obj)) {
    return obj.map(function (t) {
      return new lunr.Token(lunr.utils.asString(t).toLowerCase())
    })
  }

  var str = obj.toString().trim().toLowerCase(),
      len = str.length,
      tokens = []

  for (var sliceEnd = 0, sliceStart = 0; sliceEnd <= len; sliceEnd++) {
    var char = str.charAt(sliceEnd),
        sliceLength = sliceEnd - sliceStart

    if ((char.match(lunr.tokenizer.separator) || sliceEnd == len)) {

      if (sliceLength > 0) {
        tokens.push(
          new lunr.Token (str.slice(sliceStart, sliceEnd), {
            position: [sliceStart, sliceLength],
            index: tokens.length
          })
        )
      }

      sliceStart = sliceEnd + 1
    }

  }

  return tokens
}

/**
 * The separator used to split a string into tokens. Override this property to change the behaviour of
 * `lunr.tokenizer` behaviour when tokenizing strings. By default this splits on whitespace and hyphens.
 *
 * @static
 * @see lunr.tokenizer
 */
lunr.tokenizer.separator = /[\s\-]+/
/*!
 * lunr.Pipeline
 * Copyright (C) 2018 Oliver Nightingale
 */

/**
 * lunr.Pipelines maintain an ordered list of functions to be applied to all
 * tokens in documents entering the search index and queries being ran against
 * the index.
 *
 * An instance of lunr.Index created with the lunr shortcut will contain a
 * pipeline with a stop word filter and an English language stemmer. Extra
 * functions can be added before or after either of these functions or these
 * default functions can be removed.
 *
 * When run the pipeline will call each function in turn, passing a token, the
 * index of that token in the original list of all tokens and finally a list of
 * all the original tokens.
 *
 * The output of functions in the pipeline will be passed to the next function
 * in the pipeline. To exclude a token from entering the index the function
 * should return undefined, the rest of the pipeline will not be called with
 * this token.
 *
 * For serialisation of pipelines to work, all functions used in an instance of
 * a pipeline should be registered with lunr.Pipeline. Registered functions can
 * then be loaded. If trying to load a serialised pipeline that uses functions
 * that are not registered an error will be thrown.
 *
 * If not planning on serialising the pipeline then registering pipeline functions
 * is not necessary.
 *
 * @constructor
 */
lunr.Pipeline = function () {
  this._stack = []
}

lunr.Pipeline.registeredFunctions = Object.create(null)

/**
 * A pipeline function maps lunr.Token to lunr.Token. A lunr.Token contains the token
 * string as well as all known metadata. A pipeline function can mutate the token string
 * or mutate (or add) metadata for a given token.
 *
 * A pipeline function can indicate that the passed token should be discarded by returning
 * null. This token will not be passed to any downstream pipeline functions and will not be
 * added to the index.
 *
 * Multiple tokens can be returned by returning an array of tokens. Each token will be passed
 * to any downstream pipeline functions and all will returned tokens will be added to the index.
 *
 * Any number of pipeline functions may be chained together using a lunr.Pipeline.
 *
 * @interface lunr.PipelineFunction
 * @param {lunr.Token} token - A token from the document being processed.
 * @param {number} i - The index of this token in the complete list of tokens for this document/field.
 * @param {lunr.Token[]} tokens - All tokens for this document/field.
 * @returns {(?lunr.Token|lunr.Token[])}
 */

/**
 * Register a function with the pipeline.
 *
 * Functions that are used in the pipeline should be registered if the pipeline
 * needs to be serialised, or a serialised pipeline needs to be loaded.
 *
 * Registering a function does not add it to a pipeline, functions must still be
 * added to instances of the pipeline for them to be used when running a pipeline.
 *
 * @param {lunr.PipelineFunction} fn - The function to check for.
 * @param {String} label - The label to register this function with
 */
lunr.Pipeline.registerFunction = function (fn, label) {
  if (label in this.registeredFunctions) {
    lunr.utils.warn('Overwriting existing registered function: ' + label)
  }

  fn.label = label
  lunr.Pipeline.registeredFunctions[fn.label] = fn
}

/**
 * Warns if the function is not registered as a Pipeline function.
 *
 * @param {lunr.PipelineFunction} fn - The function to check for.
 * @private
 */
lunr.Pipeline.warnIfFunctionNotRegistered = function (fn) {
  var isRegistered = fn.label && (fn.label in this.registeredFunctions)

  if (!isRegistered) {
    lunr.utils.warn('Function is not registered with pipeline. This may cause problems when serialising the index.\n', fn)
  }
}

/**
 * Loads a previously serialised pipeline.
 *
 * All functions to be loaded must already be registered with lunr.Pipeline.
 * If any function from the serialised data has not been registered then an
 * error will be thrown.
 *
 * @param {Object} serialised - The serialised pipeline to load.
 * @returns {lunr.Pipeline}
 */
lunr.Pipeline.load = function (serialised) {
  var pipeline = new lunr.Pipeline

  serialised.forEach(function (fnName) {
    var fn = lunr.Pipeline.registeredFunctions[fnName]

    if (fn) {
      pipeline.add(fn)
    } else {
      throw new Error('Cannot load unregistered function: ' + fnName)
    }
  })

  return pipeline
}

/**
 * Adds new functions to the end of the pipeline.
 *
 * Logs a warning if the function has not been registered.
 *
 * @param {lunr.PipelineFunction[]} functions - Any number of functions to add to the pipeline.
 */
lunr.Pipeline.prototype.add = function () {
  var fns = Array.prototype.slice.call(arguments)

  fns.forEach(function (fn) {
    lunr.Pipeline.warnIfFunctionNotRegistered(fn)
    this._stack.push(fn)
  }, this)
}

/**
 * Adds a single function after a function that already exists in the
 * pipeline.
 *
 * Logs a warning if the function has not been registered.
 *
 * @param {lunr.PipelineFunction} existingFn - A function that already exists in the pipeline.
 * @param {lunr.PipelineFunction} newFn - The new function to add to the pipeline.
 */
lunr.Pipeline.prototype.after = function (existingFn, newFn) {
  lunr.Pipeline.warnIfFunctionNotRegistered(newFn)

  var pos = this._stack.indexOf(existingFn)
  if (pos == -1) {
    throw new Error('Cannot find existingFn')
  }

  pos = pos + 1
  this._stack.splice(pos, 0, newFn)
}

/**
 * Adds a single function before a function that already exists in the
 * pipeline.
 *
 * Logs a warning if the function has not been registered.
 *
 * @param {lunr.PipelineFunction} existingFn - A function that already exists in the pipeline.
 * @param {lunr.PipelineFunction} newFn - The new function to add to the pipeline.
 */
lunr.Pipeline.prototype.before = function (existingFn, newFn) {
  lunr.Pipeline.warnIfFunctionNotRegistered(newFn)

  var pos = this._stack.indexOf(existingFn)
  if (pos == -1) {
    throw new Error('Cannot find existingFn')
  }

  this._stack.splice(pos, 0, newFn)
}

/**
 * Removes a function from the pipeline.
 *
 * @param {lunr.PipelineFunction} fn The function to remove from the pipeline.
 */
lunr.Pipeline.prototype.remove = function (fn) {
  var pos = this._stack.indexOf(fn)
  if (pos == -1) {
    return
  }

  this._stack.splice(pos, 1)
}

/**
 * Runs the current list of functions that make up the pipeline against the
 * passed tokens.
 *
 * @param {Array} tokens The tokens to run through the pipeline.
 * @returns {Array}
 */
lunr.Pipeline.prototype.run = function (tokens) {
  var stackLength = this._stack.length

  for (var i = 0; i < stackLength; i++) {
    var fn = this._stack[i]
    var memo = []

    for (var j = 0; j < tokens.length; j++) {
      var result = fn(tokens[j], j, tokens)

      if (result === void 0 || result === '') continue

      if (result instanceof Array) {
        for (var k = 0; k < result.length; k++) {
          memo.push(result[k])
        }
      } else {
        memo.push(result)
      }
    }

    tokens = memo
  }

  return tokens
}

/**
 * Convenience method for passing a string through a pipeline and getting
 * strings out. This method takes care of wrapping the passed string in a
 * token and mapping the resulting tokens back to strings.
 *
 * @param {string} str - The string to pass through the pipeline.
 * @returns {string[]}
 */
lunr.Pipeline.prototype.runString = function (str) {
  var token = new lunr.Token (str)

  return this.run([token]).map(function (t) {
    return t.toString()
  })
}

/**
 * Resets the pipeline by removing any existing processors.
 *
 */
lunr.Pipeline.prototype.reset = function () {
  this._stack = []
}

/**
 * Returns a representation of the pipeline ready for serialisation.
 *
 * Logs a warning if the function has not been registered.
 *
 * @returns {Array}
 */
lunr.Pipeline.prototype.toJSON = function () {
  return this._stack.map(function (fn) {
    lunr.Pipeline.warnIfFunctionNotRegistered(fn)

    return fn.label
  })
}
/*!
 * lunr.Vector
 * Copyright (C) 2018 Oliver Nightingale
 */

/**
 * A vector is used to construct the vector space of documents and queries. These
 * vectors support operations to determine the similarity between two documents or
 * a document and a query.
 *
 * Normally no parameters are required for initializing a vector, but in the case of
 * loading a previously dumped vector the raw elements can be provided to the constructor.
 *
 * For performance reasons vectors are implemented with a flat array, where an elements
 * index is immediately followed by its value. E.g. [index, value, index, value]. This
 * allows the underlying array to be as sparse as possible and still offer decent
 * performance when being used for vector calculations.
 *
 * @constructor
 * @param {Number[]} [elements] - The flat list of element index and element value pairs.
 */
lunr.Vector = function (elements) {
  this._magnitude = 0
  this.elements = elements || []
}


/**
 * Calculates the position within the vector to insert a given index.
 *
 * This is used internally by insert and upsert. If there are duplicate indexes then
 * the position is returned as if the value for that index were to be updated, but it
 * is the callers responsibility to check whether there is a duplicate at that index
 *
 * @param {Number} insertIdx - The index at which the element should be inserted.
 * @returns {Number}
 */
lunr.Vector.prototype.positionForIndex = function (index) {
  // For an empty vector the tuple can be inserted at the beginning
  if (this.elements.length == 0) {
    return 0
  }

  var start = 0,
      end = this.elements.length / 2,
      sliceLength = end - start,
      pivotPoint = Math.floor(sliceLength / 2),
      pivotIndex = this.elements[pivotPoint * 2]

  while (sliceLength > 1) {
    if (pivotIndex < index) {
      start = pivotPoint
    }

    if (pivotIndex > index) {
      end = pivotPoint
    }

    if (pivotIndex == index) {
      break
    }

    sliceLength = end - start
    pivotPoint = start + Math.floor(sliceLength / 2)
    pivotIndex = this.elements[pivotPoint * 2]
  }

  if (pivotIndex == index) {
    return pivotPoint * 2
  }

  if (pivotIndex > index) {
    return pivotPoint * 2
  }

  if (pivotIndex < index) {
    return (pivotPoint + 1) * 2
  }
}

/**
 * Inserts an element at an index within the vector.
 *
 * Does not allow duplicates, will throw an error if there is already an entry
 * for this index.
 *
 * @param {Number} insertIdx - The index at which the element should be inserted.
 * @param {Number} val - The value to be inserted into the vector.
 */
lunr.Vector.prototype.insert = function (insertIdx, val) {
  this.upsert(insertIdx, val, function () {
    throw "duplicate index"
  })
}

/**
 * Inserts or updates an existing index within the vector.
 *
 * @param {Number} insertIdx - The index at which the element should be inserted.
 * @param {Number} val - The value to be inserted into the vector.
 * @param {function} fn - A function that is called for updates, the existing value and the
 * requested value are passed as arguments
 */
lunr.Vector.prototype.upsert = function (insertIdx, val, fn) {
  this._magnitude = 0
  var position = this.positionForIndex(insertIdx)

  if (this.elements[position] == insertIdx) {
    this.elements[position + 1] = fn(this.elements[position + 1], val)
  } else {
    this.elements.splice(position, 0, insertIdx, val)
  }
}

/**
 * Calculates the magnitude of this vector.
 *
 * @returns {Number}
 */
lunr.Vector.prototype.magnitude = function () {
  if (this._magnitude) return this._magnitude

  var sumOfSquares = 0,
      elementsLength = this.elements.length

  for (var i = 1; i < elementsLength; i += 2) {
    var val = this.elements[i]
    sumOfSquares += val * val
  }

  return this._magnitude = Math.sqrt(sumOfSquares)
}

/**
 * Calculates the dot product of this vector and another vector.
 *
 * @param {lunr.Vector} otherVector - The vector to compute the dot product with.
 * @returns {Number}
 */
lunr.Vector.prototype.dot = function (otherVector) {
  var dotProduct = 0,
      a = this.elements, b = otherVector.elements,
      aLen = a.length, bLen = b.length,
      aVal = 0, bVal = 0,
      i = 0, j = 0

  while (i < aLen && j < bLen) {
    aVal = a[i], bVal = b[j]
    if (aVal < bVal) {
      i += 2
    } else if (aVal > bVal) {
      j += 2
    } else if (aVal == bVal) {
      dotProduct += a[i + 1] * b[j + 1]
      i += 2
      j += 2
    }
  }

  return dotProduct
}

/**
 * Calculates the cosine similarity between this vector and another
 * vector.
 *
 * @param {lunr.Vector} otherVector - The other vector to calculate the
 * similarity with.
 * @returns {Number}
 */
lunr.Vector.prototype.similarity = function (otherVector) {
  return this.dot(otherVector) / (this.magnitude() * otherVector.magnitude())
}

/**
 * Converts the vector to an array of the elements within the vector.
 *
 * @returns {Number[]}
 */
lunr.Vector.prototype.toArray = function () {
  var output = new Array (this.elements.length / 2)

  for (var i = 1, j = 0; i < this.elements.length; i += 2, j++) {
    output[j] = this.elements[i]
  }

  return output
}

/**
 * A JSON serializable representation of the vector.
 *
 * @returns {Number[]}
 */
lunr.Vector.prototype.toJSON = function () {
  return this.elements
}
/* eslint-disable */
/*!
 * lunr.stemmer
 * Copyright (C) 2018 Oliver Nightingale
 * Includes code from - http://tartarus.org/~martin/PorterStemmer/js.txt
 */

/**
 * lunr.stemmer is an english language stemmer, this is a JavaScript
 * implementation of the PorterStemmer taken from http://tartarus.org/~martin
 *
 * @static
 * @implements {lunr.PipelineFunction}
 * @param {lunr.Token} token - The string to stem
 * @returns {lunr.Token}
 * @see {@link lunr.Pipeline}
 */
lunr.stemmer = (function(){
  var step2list = {
      "ational" : "ate",
      "tional" : "tion",
      "enci" : "ence",
      "anci" : "ance",
      "izer" : "ize",
      "bli" : "ble",
      "alli" : "al",
      "entli" : "ent",
      "eli" : "e",
      "ousli" : "ous",
      "ization" : "ize",
      "ation" : "ate",
      "ator" : "ate",
      "alism" : "al",
      "iveness" : "ive",
      "fulness" : "ful",
      "ousness" : "ous",
      "aliti" : "al",
      "iviti" : "ive",
      "biliti" : "ble",
      "logi" : "log"
    },

    step3list = {
      "icate" : "ic",
      "ative" : "",
      "alize" : "al",
      "iciti" : "ic",
      "ical" : "ic",
      "ful" : "",
      "ness" : ""
    },

    c = "[^aeiou]",          // consonant
    v = "[aeiouy]",          // vowel
    C = c + "[^aeiouy]*",    // consonant sequence
    V = v + "[aeiou]*",      // vowel sequence

    mgr0 = "^(" + C + ")?" + V + C,               // [C]VC... is m>0
    meq1 = "^(" + C + ")?" + V + C + "(" + V + ")?$",  // [C]VC[V] is m=1
    mgr1 = "^(" + C + ")?" + V + C + V + C,       // [C]VCVC... is m>1
    s_v = "^(" + C + ")?" + v;                   // vowel in stem

  var re_mgr0 = new RegExp(mgr0);
  var re_mgr1 = new RegExp(mgr1);
  var re_meq1 = new RegExp(meq1);
  var re_s_v = new RegExp(s_v);

  var re_1a = /^(.+?)(ss|i)es$/;
  var re2_1a = /^(.+?)([^s])s$/;
  var re_1b = /^(.+?)eed$/;
  var re2_1b = /^(.+?)(ed|ing)$/;
  var re_1b_2 = /.$/;
  var re2_1b_2 = /(at|bl|iz)$/;
  var re3_1b_2 = new RegExp("([^aeiouylsz])\\1$");
  var re4_1b_2 = new RegExp("^" + C + v + "[^aeiouwxy]$");

  var re_1c = /^(.+?[^aeiou])y$/;
  var re_2 = /^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/;

  var re_3 = /^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/;

  var re_4 = /^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/;
  var re2_4 = /^(.+?)(s|t)(ion)$/;

  var re_5 = /^(.+?)e$/;
  var re_5_1 = /ll$/;
  var re3_5 = new RegExp("^" + C + v + "[^aeiouwxy]$");

  var porterStemmer = function porterStemmer(w) {
    var stem,
      suffix,
      firstch,
      re,
      re2,
      re3,
      re4;

    if (w.length < 3) { return w; }

    firstch = w.substr(0,1);
    if (firstch == "y") {
      w = firstch.toUpperCase() + w.substr(1);
    }

    // Step 1a
    re = re_1a
    re2 = re2_1a;

    if (re.test(w)) { w = w.replace(re,"$1$2"); }
    else if (re2.test(w)) { w = w.replace(re2,"$1$2"); }

    // Step 1b
    re = re_1b;
    re2 = re2_1b;
    if (re.test(w)) {
      var fp = re.exec(w);
      re = re_mgr0;
      if (re.test(fp[1])) {
        re = re_1b_2;
        w = w.replace(re,"");
      }
    } else if (re2.test(w)) {
      var fp = re2.exec(w);
      stem = fp[1];
      re2 = re_s_v;
      if (re2.test(stem)) {
        w = stem;
        re2 = re2_1b_2;
        re3 = re3_1b_2;
        re4 = re4_1b_2;
        if (re2.test(w)) { w = w + "e"; }
        else if (re3.test(w)) { re = re_1b_2; w = w.replace(re,""); }
        else if (re4.test(w)) { w = w + "e"; }
      }
    }

    // Step 1c - replace suffix y or Y by i if preceded by a non-vowel which is not the first letter of the word (so cry -> cri, by -> by, say -> say)
    re = re_1c;
    if (re.test(w)) {
      var fp = re.exec(w);
      stem = fp[1];
      w = stem + "i";
    }

    // Step 2
    re = re_2;
    if (re.test(w)) {
      var fp = re.exec(w);
      stem = fp[1];
      suffix = fp[2];
      re = re_mgr0;
      if (re.test(stem)) {
        w = stem + step2list[suffix];
      }
    }

    // Step 3
    re = re_3;
    if (re.test(w)) {
      var fp = re.exec(w);
      stem = fp[1];
      suffix = fp[2];
      re = re_mgr0;
      if (re.test(stem)) {
        w = stem + step3list[suffix];
      }
    }

    // Step 4
    re = re_4;
    re2 = re2_4;
    if (re.test(w)) {
      var fp = re.exec(w);
      stem = fp[1];
      re = re_mgr1;
      if (re.test(stem)) {
        w = stem;
      }
    } else if (re2.test(w)) {
      var fp = re2.exec(w);
      stem = fp[1] + fp[2];
      re2 = re_mgr1;
      if (re2.test(stem)) {
        w = stem;
      }
    }

    // Step 5
    re = re_5;
    if (re.test(w)) {
      var fp = re.exec(w);
      stem = fp[1];
      re = re_mgr1;
      re2 = re_meq1;
      re3 = re3_5;
      if (re.test(stem) || (re2.test(stem) && !(re3.test(stem)))) {
        w = stem;
      }
    }

    re = re_5_1;
    re2 = re_mgr1;
    if (re.test(w) && re2.test(w)) {
      re = re_1b_2;
      w = w.replace(re,"");
    }

    // and turn initial Y back to y

    if (firstch == "y") {
      w = firstch.toLowerCase() + w.substr(1);
    }

    return w;
  };

  return function (token) {
    return token.update(porterStemmer);
  }
})();

lunr.Pipeline.registerFunction(lunr.stemmer, 'stemmer')
/*!
 * lunr.stopWordFilter
 * Copyright (C) 2018 Oliver Nightingale
 */

/**
 * lunr.generateStopWordFilter builds a stopWordFilter function from the provided
 * list of stop words.
 *
 * The built in lunr.stopWordFilter is built using this generator and can be used
 * to generate custom stopWordFilters for applications or non English languages.
 *
 * @param {Array} token The token to pass through the filter
 * @returns {lunr.PipelineFunction}
 * @see lunr.Pipeline
 * @see lunr.stopWordFilter
 */
lunr.generateStopWordFilter = function (stopWords) {
  var words = stopWords.reduce(function (memo, stopWord) {
    memo[stopWord] = stopWord
    return memo
  }, {})

  return function (token) {
    if (token && words[token.toString()] !== token.toString()) return token
  }
}

/**
 * lunr.stopWordFilter is an English language stop word list filter, any words
 * contained in the list will not be passed through the filter.
 *
 * This is intended to be used in the Pipeline. If the token does not pass the
 * filter then undefined will be returned.
 *
 * @implements {lunr.PipelineFunction}
 * @params {lunr.Token} token - A token to check for being a stop word.
 * @returns {lunr.Token}
 * @see {@link lunr.Pipeline}
 */
lunr.stopWordFilter = lunr.generateStopWordFilter([
  'a',
  'able',
  'about',
  'across',
  'after',
  'all',
  'almost',
  'also',
  'am',
  'among',
  'an',
  'and',
  'any',
  'are',
  'as',
  'at',
  'be',
  'because',
  'been',
  'but',
  'by',
  'can',
  'cannot',
  'could',
  'dear',
  'did',
  'do',
  'does',
  'either',
  'else',
  'ever',
  'every',
  'for',
  'from',
  'get',
  'got',
  'had',
  'has',
  'have',
  'he',
  'her',
  'hers',
  'him',
  'his',
  'how',
  'however',
  'i',
  'if',
  'in',
  'into',
  'is',
  'it',
  'its',
  'just',
  'least',
  'let',
  'like',
  'likely',
  'may',
  'me',
  'might',
  'most',
  'must',
  'my',
  'neither',
  'no',
  'nor',
  'not',
  'of',
  'off',
  'often',
  'on',
  'only',
  'or',
  'other',
  'our',
  'own',
  'rather',
  'said',
  'say',
  'says',
  'she',
  'should',
  'since',
  'so',
  'some',
  'than',
  'that',
  'the',
  'their',
  'them',
  'then',
  'there',
  'these',
  'they',
  'this',
  'tis',
  'to',
  'too',
  'twas',
  'us',
  'wants',
  'was',
  'we',
  'were',
  'what',
  'when',
  'where',
  'which',
  'while',
  'who',
  'whom',
  'why',
  'will',
  'with',
  'would',
  'yet',
  'you',
  'your'
])

lunr.Pipeline.registerFunction(lunr.stopWordFilter, 'stopWordFilter')
/*!
 * lunr.trimmer
 * Copyright (C) 2018 Oliver Nightingale
 */

/**
 * lunr.trimmer is a pipeline function for trimming non word
 * characters from the beginning and end of tokens before they
 * enter the index.
 *
 * This implementation may not work correctly for non latin
 * characters and should either be removed or adapted for use
 * with languages with non-latin characters.
 *
 * @static
 * @implements {lunr.PipelineFunction}
 * @param {lunr.Token} token The token to pass through the filter
 * @returns {lunr.Token}
 * @see lunr.Pipeline
 */
lunr.trimmer = function (token) {
  return token.update(function (s) {
    return s.replace(/^\W+/, '').replace(/\W+$/, '')
  })
}

lunr.Pipeline.registerFunction(lunr.trimmer, 'trimmer')
/*!
 * lunr.TokenSet
 * Copyright (C) 2018 Oliver Nightingale
 */

/**
 * A token set is used to store the unique list of all tokens
 * within an index. Token sets are also used to represent an
 * incoming query to the index, this query token set and index
 * token set are then intersected to find which tokens to look
 * up in the inverted index.
 *
 * A token set can hold multiple tokens, as in the case of the
 * index token set, or it can hold a single token as in the
 * case of a simple query token set.
 *
 * Additionally token sets are used to perform wildcard matching.
 * Leading, contained and trailing wildcards are supported, and
 * from this edit distance matching can also be provided.
 *
 * Token sets are implemented as a minimal finite state automata,
 * where both common prefixes and suffixes are shared between tokens.
 * This helps to reduce the space used for storing the token set.
 *
 * @constructor
 */
lunr.TokenSet = function () {
  this.final = false
  this.edges = {}
  this.id = lunr.TokenSet._nextId
  lunr.TokenSet._nextId += 1
}

/**
 * Keeps track of the next, auto increment, identifier to assign
 * to a new tokenSet.
 *
 * TokenSets require a unique identifier to be correctly minimised.
 *
 * @private
 */
lunr.TokenSet._nextId = 1

/**
 * Creates a TokenSet instance from the given sorted array of words.
 *
 * @param {String[]} arr - A sorted array of strings to create the set from.
 * @returns {lunr.TokenSet}
 * @throws Will throw an error if the input array is not sorted.
 */
lunr.TokenSet.fromArray = function (arr) {
  var builder = new lunr.TokenSet.Builder

  for (var i = 0, len = arr.length; i < len; i++) {
    builder.insert(arr[i])
  }

  builder.finish()
  return builder.root
}

/**
 * Creates a token set from a query clause.
 *
 * @private
 * @param {Object} clause - A single clause from lunr.Query.
 * @param {string} clause.term - The query clause term.
 * @param {number} [clause.editDistance] - The optional edit distance for the term.
 * @returns {lunr.TokenSet}
 */
lunr.TokenSet.fromClause = function (clause) {
  if ('editDistance' in clause) {
    return lunr.TokenSet.fromFuzzyString(clause.term, clause.editDistance)
  } else {
    return lunr.TokenSet.fromString(clause.term)
  }
}

/**
 * Creates a token set representing a single string with a specified
 * edit distance.
 *
 * Insertions, deletions, substitutions and transpositions are each
 * treated as an edit distance of 1.
 *
 * Increasing the allowed edit distance will have a dramatic impact
 * on the performance of both creating and intersecting these TokenSets.
 * It is advised to keep the edit distance less than 3.
 *
 * @param {string} str - The string to create the token set from.
 * @param {number} editDistance - The allowed edit distance to match.
 * @returns {lunr.Vector}
 */
lunr.TokenSet.fromFuzzyString = function (str, editDistance) {
  var root = new lunr.TokenSet

  var stack = [{
    node: root,
    editsRemaining: editDistance,
    str: str
  }]

  while (stack.length) {
    var frame = stack.pop()

    // no edit
    if (frame.str.length > 0) {
      var char = frame.str.charAt(0),
          noEditNode

      if (char in frame.node.edges) {
        noEditNode = frame.node.edges[char]
      } else {
        noEditNode = new lunr.TokenSet
        frame.node.edges[char] = noEditNode
      }

      if (frame.str.length == 1) {
        noEditNode.final = true
      } else {
        stack.push({
          node: noEditNode,
          editsRemaining: frame.editsRemaining,
          str: frame.str.slice(1)
        })
      }
    }

    // deletion
    // can only do a deletion if we have enough edits remaining
    // and if there are characters left to delete in the string
    if (frame.editsRemaining > 0 && frame.str.length > 1) {
      var char = frame.str.charAt(1),
          deletionNode

      if (char in frame.node.edges) {
        deletionNode = frame.node.edges[char]
      } else {
        deletionNode = new lunr.TokenSet
        frame.node.edges[char] = deletionNode
      }

      if (frame.str.length <= 2) {
        deletionNode.final = true
      } else {
        stack.push({
          node: deletionNode,
          editsRemaining: frame.editsRemaining - 1,
          str: frame.str.slice(2)
        })
      }
    }

    // deletion
    // just removing the last character from the str
    if (frame.editsRemaining > 0 && frame.str.length == 1) {
      frame.node.final = true
    }

    // substitution
    // can only do a substitution if we have enough edits remaining
    // and if there are characters left to substitute
    if (frame.editsRemaining > 0 && frame.str.length >= 1) {
      if ("*" in frame.node.edges) {
        var substitutionNode = frame.node.edges["*"]
      } else {
        var substitutionNode = new lunr.TokenSet
        frame.node.edges["*"] = substitutionNode
      }

      if (frame.str.length == 1) {
        substitutionNode.final = true
      } else {
        stack.push({
          node: substitutionNode,
          editsRemaining: frame.editsRemaining - 1,
          str: frame.str.slice(1)
        })
      }
    }

    // insertion
    // can only do insertion if there are edits remaining
    if (frame.editsRemaining > 0) {
      if ("*" in frame.node.edges) {
        var insertionNode = frame.node.edges["*"]
      } else {
        var insertionNode = new lunr.TokenSet
        frame.node.edges["*"] = insertionNode
      }

      if (frame.str.length == 0) {
        insertionNode.final = true
      } else {
        stack.push({
          node: insertionNode,
          editsRemaining: frame.editsRemaining - 1,
          str: frame.str
        })
      }
    }

    // transposition
    // can only do a transposition if there are edits remaining
    // and there are enough characters to transpose
    if (frame.editsRemaining > 0 && frame.str.length > 1) {
      var charA = frame.str.charAt(0),
          charB = frame.str.charAt(1),
          transposeNode

      if (charB in frame.node.edges) {
        transposeNode = frame.node.edges[charB]
      } else {
        transposeNode = new lunr.TokenSet
        frame.node.edges[charB] = transposeNode
      }

      if (frame.str.length == 1) {
        transposeNode.final = true
      } else {
        stack.push({
          node: transposeNode,
          editsRemaining: frame.editsRemaining - 1,
          str: charA + frame.str.slice(2)
        })
      }
    }
  }

  return root
}

/**
 * Creates a TokenSet from a string.
 *
 * The string may contain one or more wildcard characters (*)
 * that will allow wildcard matching when intersecting with
 * another TokenSet.
 *
 * @param {string} str - The string to create a TokenSet from.
 * @returns {lunr.TokenSet}
 */
lunr.TokenSet.fromString = function (str) {
  var node = new lunr.TokenSet,
      root = node,
      wildcardFound = false

  /*
   * Iterates through all characters within the passed string
   * appending a node for each character.
   *
   * As soon as a wildcard character is found then a self
   * referencing edge is introduced to continually match
   * any number of any characters.
   */
  for (var i = 0, len = str.length; i < len; i++) {
    var char = str[i],
        final = (i == len - 1)

    if (char == "*") {
      wildcardFound = true
      node.edges[char] = node
      node.final = final

    } else {
      var next = new lunr.TokenSet
      next.final = final

      node.edges[char] = next
      node = next

      // TODO: is this needed anymore?
      if (wildcardFound) {
        node.edges["*"] = root
      }
    }
  }

  return root
}

/**
 * Converts this TokenSet into an array of strings
 * contained within the TokenSet.
 *
 * @returns {string[]}
 */
lunr.TokenSet.prototype.toArray = function () {
  var words = []

  var stack = [{
    prefix: "",
    node: this
  }]

  while (stack.length) {
    var frame = stack.pop(),
        edges = Object.keys(frame.node.edges),
        len = edges.length

    if (frame.node.final) {
      words.push(frame.prefix)
    }

    for (var i = 0; i < len; i++) {
      var edge = edges[i]

      stack.push({
        prefix: frame.prefix.concat(edge),
        node: frame.node.edges[edge]
      })
    }
  }

  return words
}

/**
 * Generates a string representation of a TokenSet.
 *
 * This is intended to allow TokenSets to be used as keys
 * in objects, largely to aid the construction and minimisation
 * of a TokenSet. As such it is not designed to be a human
 * friendly representation of the TokenSet.
 *
 * @returns {string}
 */
lunr.TokenSet.prototype.toString = function () {
  // NOTE: Using Object.keys here as this.edges is very likely
  // to enter 'hash-mode' with many keys being added
  //
  // avoiding a for-in loop here as it leads to the function
  // being de-optimised (at least in V8). From some simple
  // benchmarks the performance is comparable, but allowing
  // V8 to optimize may mean easy performance wins in the future.

  if (this._str) {
    return this._str
  }

  var str = this.final ? '1' : '0',
      labels = Object.keys(this.edges).sort(),
      len = labels.length

  for (var i = 0; i < len; i++) {
    var label = labels[i],
        node = this.edges[label]

    str = str + label + node.id
  }

  return str
}

/**
 * Returns a new TokenSet that is the intersection of
 * this TokenSet and the passed TokenSet.
 *
 * This intersection will take into account any wildcards
 * contained within the TokenSet.
 *
 * @param {lunr.TokenSet} b - An other TokenSet to intersect with.
 * @returns {lunr.TokenSet}
 */
lunr.TokenSet.prototype.intersect = function (b) {
  var output = new lunr.TokenSet,
      frame = undefined

  var stack = [{
    qNode: b,
    output: output,
    node: this
  }]

  while (stack.length) {
    frame = stack.pop()

    // NOTE: As with the #toString method, we are using
    // Object.keys and a for loop instead of a for-in loop
    // as both of these objects enter 'hash' mode, causing
    // the function to be de-optimised in V8
    var qEdges = Object.keys(frame.qNode.edges),
        qLen = qEdges.length,
        nEdges = Object.keys(frame.node.edges),
        nLen = nEdges.length

    for (var q = 0; q < qLen; q++) {
      var qEdge = qEdges[q]

      for (var n = 0; n < nLen; n++) {
        var nEdge = nEdges[n]

        if (nEdge == qEdge || qEdge == '*') {
          var node = frame.node.edges[nEdge],
              qNode = frame.qNode.edges[qEdge],
              final = node.final && qNode.final,
              next = undefined

          if (nEdge in frame.output.edges) {
            // an edge already exists for this character
            // no need to create a new node, just set the finality
            // bit unless this node is already final
            next = frame.output.edges[nEdge]
            next.final = next.final || final

          } else {
            // no edge exists yet, must create one
            // set the finality bit and insert it
            // into the output
            next = new lunr.TokenSet
            next.final = final
            frame.output.edges[nEdge] = next
          }

          stack.push({
            qNode: qNode,
            output: next,
            node: node
          })
        }
      }
    }
  }

  return output
}
lunr.TokenSet.Builder = function () {
  this.previousWord = ""
  this.root = new lunr.TokenSet
  this.uncheckedNodes = []
  this.minimizedNodes = {}
}

lunr.TokenSet.Builder.prototype.insert = function (word) {
  var node,
      commonPrefix = 0

  if (word < this.previousWord) {
    throw new Error ("Out of order word insertion")
  }

  for (var i = 0; i < word.length && i < this.previousWord.length; i++) {
    if (word[i] != this.previousWord[i]) break
    commonPrefix++
  }

  this.minimize(commonPrefix)

  if (this.uncheckedNodes.length == 0) {
    node = this.root
  } else {
    node = this.uncheckedNodes[this.uncheckedNodes.length - 1].child
  }

  for (var i = commonPrefix; i < word.length; i++) {
    var nextNode = new lunr.TokenSet,
        char = word[i]

    node.edges[char] = nextNode

    this.uncheckedNodes.push({
      parent: node,
      char: char,
      child: nextNode
    })

    node = nextNode
  }

  node.final = true
  this.previousWord = word
}

lunr.TokenSet.Builder.prototype.finish = function () {
  this.minimize(0)
}

lunr.TokenSet.Builder.prototype.minimize = function (downTo) {
  for (var i = this.uncheckedNodes.length - 1; i >= downTo; i--) {
    var node = this.uncheckedNodes[i],
        childKey = node.child.toString()

    if (childKey in this.minimizedNodes) {
      node.parent.edges[node.char] = this.minimizedNodes[childKey]
    } else {
      // Cache the key for this node since
      // we know it can't change anymore
      node.child._str = childKey

      this.minimizedNodes[childKey] = node.child
    }

    this.uncheckedNodes.pop()
  }
}
/*!
 * lunr.Index
 * Copyright (C) 2018 Oliver Nightingale
 */

/**
 * An index contains the built index of all documents and provides a query interface
 * to the index.
 *
 * Usually instances of lunr.Index will not be created using this constructor, instead
 * lunr.Builder should be used to construct new indexes, or lunr.Index.load should be
 * used to load previously built and serialized indexes.
 *
 * @constructor
 * @param {Object} attrs - The attributes of the built search index.
 * @param {Object} attrs.invertedIndex - An index of term/field to document reference.
 * @param {Object<string, lunr.Vector>} attrs.documentVectors - Document vectors keyed by document reference.
 * @param {lunr.TokenSet} attrs.tokenSet - An set of all corpus tokens.
 * @param {string[]} attrs.fields - The names of indexed document fields.
 * @param {lunr.Pipeline} attrs.pipeline - The pipeline to use for search terms.
 */
lunr.Index = function (attrs) {
  this.invertedIndex = attrs.invertedIndex
  this.fieldVectors = attrs.fieldVectors
  this.tokenSet = attrs.tokenSet
  this.fields = attrs.fields
  this.pipeline = attrs.pipeline
}

/**
 * A result contains details of a document matching a search query.
 * @typedef {Object} lunr.Index~Result
 * @property {string} ref - The reference of the document this result represents.
 * @property {number} score - A number between 0 and 1 representing how similar this document is to the query.
 * @property {lunr.MatchData} matchData - Contains metadata about this match including which term(s) caused the match.
 */

/**
 * Although lunr provides the ability to create queries using lunr.Query, it also provides a simple
 * query language which itself is parsed into an instance of lunr.Query.
 *
 * For programmatically building queries it is advised to directly use lunr.Query, the query language
 * is best used for human entered text rather than program generated text.
 *
 * At its simplest queries can just be a single term, e.g. `hello`, multiple terms are also supported
 * and will be combined with OR, e.g `hello world` will match documents that contain either 'hello'
 * or 'world', though those that contain both will rank higher in the results.
 *
 * Wildcards can be included in terms to match one or more unspecified characters, these wildcards can
 * be inserted anywhere within the term, and more than one wildcard can exist in a single term. Adding
 * wildcards will increase the number of documents that will be found but can also have a negative
 * impact on query performance, especially with wildcards at the beginning of a term.
 *
 * Terms can be restricted to specific fields, e.g. `title:hello`, only documents with the term
 * hello in the title field will match this query. Using a field not present in the index will lead
 * to an error being thrown.
 *
 * Modifiers can also be added to terms, lunr supports edit distance and boost modifiers on terms. A term
 * boost will make documents matching that term score higher, e.g. `foo^5`. Edit distance is also supported
 * to provide fuzzy matching, e.g. 'hello~2' will match documents with hello with an edit distance of 2.
 * Avoid large values for edit distance to improve query performance.
 *
 * To escape special characters the backslash character '\' can be used, this allows searches to include
 * characters that would normally be considered modifiers, e.g. `foo\~2` will search for a term "foo~2" instead
 * of attempting to apply a boost of 2 to the search term "foo".
 *
 * @typedef {string} lunr.Index~QueryString
 * @example <caption>Simple single term query</caption>
 * hello
 * @example <caption>Multiple term query</caption>
 * hello world
 * @example <caption>term scoped to a field</caption>
 * title:hello
 * @example <caption>term with a boost of 10</caption>
 * hello^10
 * @example <caption>term with an edit distance of 2</caption>
 * hello~2
 */

/**
 * Performs a search against the index using lunr query syntax.
 *
 * Results will be returned sorted by their score, the most relevant results
 * will be returned first.
 *
 * For more programmatic querying use lunr.Index#query.
 *
 * @param {lunr.Index~QueryString} queryString - A string containing a lunr query.
 * @throws {lunr.QueryParseError} If the passed query string cannot be parsed.
 * @returns {lunr.Index~Result[]}
 */
lunr.Index.prototype.search = function (queryString) {
  return this.query(function (query) {
    var parser = new lunr.QueryParser(queryString, query)
    parser.parse()
  })
}

/**
 * A query builder callback provides a query object to be used to express
 * the query to perform on the index.
 *
 * @callback lunr.Index~queryBuilder
 * @param {lunr.Query} query - The query object to build up.
 * @this lunr.Query
 */

/**
 * Performs a query against the index using the yielded lunr.Query object.
 *
 * If performing programmatic queries against the index, this method is preferred
 * over lunr.Index#search so as to avoid the additional query parsing overhead.
 *
 * A query object is yielded to the supplied function which should be used to
 * express the query to be run against the index.
 *
 * Note that although this function takes a callback parameter it is _not_ an
 * asynchronous operation, the callback is just yielded a query object to be
 * customized.
 *
 * @param {lunr.Index~queryBuilder} fn - A function that is used to build the query.
 * @returns {lunr.Index~Result[]}
 */
lunr.Index.prototype.query = function (fn) {
  // for each query clause
  // * process terms
  // * expand terms from token set
  // * find matching documents and metadata
  // * get document vectors
  // * score documents

  var query = new lunr.Query(this.fields),
      matchingFields = Object.create(null),
      queryVectors = Object.create(null),
      termFieldCache = Object.create(null)

  fn.call(query, query)

  for (var i = 0; i < query.clauses.length; i++) {
    /*
     * Unless the pipeline has been disabled for this term, which is
     * the case for terms with wildcards, we need to pass the clause
     * term through the search pipeline. A pipeline returns an array
     * of processed terms. Pipeline functions may expand the passed
     * term, which means we may end up performing multiple index lookups
     * for a single query term.
     */
    var clause = query.clauses[i],
        terms = null

    if (clause.usePipeline) {
      terms = this.pipeline.runString(clause.term)
    } else {
      terms = [clause.term]
    }

    for (var m = 0; m < terms.length; m++) {
      var term = terms[m]

      /*
       * Each term returned from the pipeline needs to use the same query
       * clause object, e.g. the same boost and or edit distance. The
       * simplest way to do this is to re-use the clause object but mutate
       * its term property.
       */
      clause.term = term

      /*
       * From the term in the clause we create a token set which will then
       * be used to intersect the indexes token set to get a list of terms
       * to lookup in the inverted index
       */
      var termTokenSet = lunr.TokenSet.fromClause(clause),
          expandedTerms = this.tokenSet.intersect(termTokenSet).toArray()

      for (var j = 0; j < expandedTerms.length; j++) {
        /*
         * For each term get the posting and termIndex, this is required for
         * building the query vector.
         */
        var expandedTerm = expandedTerms[j],
            posting = this.invertedIndex[expandedTerm],
            termIndex = posting._index

        for (var k = 0; k < clause.fields.length; k++) {
          /*
           * For each field that this query term is scoped by (by default
           * all fields are in scope) we need to get all the document refs
           * that have this term in that field.
           *
           * The posting is the entry in the invertedIndex for the matching
           * term from above.
           */
          var field = clause.fields[k],
              fieldPosting = posting[field],
              matchingDocumentRefs = Object.keys(fieldPosting),
              termField = expandedTerm + "/" + field

          /*
           * To support field level boosts a query vector is created per
           * field. This vector is populated using the termIndex found for
           * the term and a unit value with the appropriate boost applied.
           *
           * If the query vector for this field does not exist yet it needs
           * to be created.
           */
          if (queryVectors[field] === undefined) {
            queryVectors[field] = new lunr.Vector
          }

          /*
           * Using upsert because there could already be an entry in the vector
           * for the term we are working with. In that case we just add the scores
           * together.
           */
          queryVectors[field].upsert(termIndex, 1 * clause.boost, function (a, b) { return a + b })

          /**
           * If we've already seen this term, field combo then we've already collected
           * the matching documents and metadata, no need to go through all that again
           */
          if (termFieldCache[termField]) {
            continue
          }

          for (var l = 0; l < matchingDocumentRefs.length; l++) {
            /*
             * All metadata for this term/field/document triple
             * are then extracted and collected into an instance
             * of lunr.MatchData ready to be returned in the query
             * results
             */
            var matchingDocumentRef = matchingDocumentRefs[l],
                matchingFieldRef = new lunr.FieldRef (matchingDocumentRef, field),
                metadata = fieldPosting[matchingDocumentRef],
                fieldMatch

            if ((fieldMatch = matchingFields[matchingFieldRef]) === undefined) {
              matchingFields[matchingFieldRef] = new lunr.MatchData (expandedTerm, field, metadata)
            } else {
              fieldMatch.add(expandedTerm, field, metadata)
            }

          }

          termFieldCache[termField] = true
        }
      }
    }
  }

  var matchingFieldRefs = Object.keys(matchingFields),
      results = [],
      matches = Object.create(null)

  for (var i = 0; i < matchingFieldRefs.length; i++) {
    /*
     * Currently we have document fields that match the query, but we
     * need to return documents. The matchData and scores are combined
     * from multiple fields belonging to the same document.
     *
     * Scores are calculated by field, using the query vectors created
     * above, and combined into a final document score using addition.
     */
    var fieldRef = lunr.FieldRef.fromString(matchingFieldRefs[i]),
        docRef = fieldRef.docRef,
        fieldVector = this.fieldVectors[fieldRef],
        score = queryVectors[fieldRef.fieldName].similarity(fieldVector),
        docMatch

    if ((docMatch = matches[docRef]) !== undefined) {
      docMatch.score += score
      docMatch.matchData.combine(matchingFields[fieldRef])
    } else {
      var match = {
        ref: docRef,
        score: score,
        matchData: matchingFields[fieldRef]
      }
      matches[docRef] = match
      results.push(match)
    }
  }

  /*
   * Sort the results objects by score, highest first.
   */
  return results.sort(function (a, b) {
    return b.score - a.score
  })
}

/**
 * Prepares the index for JSON serialization.
 *
 * The schema for this JSON blob will be described in a
 * separate JSON schema file.
 *
 * @returns {Object}
 */
lunr.Index.prototype.toJSON = function () {
  var invertedIndex = Object.keys(this.invertedIndex)
    .sort()
    .map(function (term) {
      return [term, this.invertedIndex[term]]
    }, this)

  var fieldVectors = Object.keys(this.fieldVectors)
    .map(function (ref) {
      return [ref, this.fieldVectors[ref].toJSON()]
    }, this)

  return {
    version: lunr.version,
    fields: this.fields,
    fieldVectors: fieldVectors,
    invertedIndex: invertedIndex,
    pipeline: this.pipeline.toJSON()
  }
}

/**
 * Loads a previously serialized lunr.Index
 *
 * @param {Object} serializedIndex - A previously serialized lunr.Index
 * @returns {lunr.Index}
 */
lunr.Index.load = function (serializedIndex) {
  var attrs = {},
      fieldVectors = {},
      serializedVectors = serializedIndex.fieldVectors,
      invertedIndex = {},
      serializedInvertedIndex = serializedIndex.invertedIndex,
      tokenSetBuilder = new lunr.TokenSet.Builder,
      pipeline = lunr.Pipeline.load(serializedIndex.pipeline)

  if (serializedIndex.version != lunr.version) {
    lunr.utils.warn("Version mismatch when loading serialised index. Current version of lunr '" + lunr.version + "' does not match serialized index '" + serializedIndex.version + "'")
  }

  for (var i = 0; i < serializedVectors.length; i++) {
    var tuple = serializedVectors[i],
        ref = tuple[0],
        elements = tuple[1]

    fieldVectors[ref] = new lunr.Vector(elements)
  }

  for (var i = 0; i < serializedInvertedIndex.length; i++) {
    var tuple = serializedInvertedIndex[i],
        term = tuple[0],
        posting = tuple[1]

    tokenSetBuilder.insert(term)
    invertedIndex[term] = posting
  }

  tokenSetBuilder.finish()

  attrs.fields = serializedIndex.fields

  attrs.fieldVectors = fieldVectors
  attrs.invertedIndex = invertedIndex
  attrs.tokenSet = tokenSetBuilder.root
  attrs.pipeline = pipeline

  return new lunr.Index(attrs)
}
/*!
 * lunr.Builder
 * Copyright (C) 2018 Oliver Nightingale
 */

/**
 * lunr.Builder performs indexing on a set of documents and
 * returns instances of lunr.Index ready for querying.
 *
 * All configuration of the index is done via the builder, the
 * fields to index, the document reference, the text processing
 * pipeline and document scoring parameters are all set on the
 * builder before indexing.
 *
 * @constructor
 * @property {string} _ref - Internal reference to the document reference field.
 * @property {string[]} _fields - Internal reference to the document fields to index.
 * @property {object} invertedIndex - The inverted index maps terms to document fields.
 * @property {object} documentTermFrequencies - Keeps track of document term frequencies.
 * @property {object} documentLengths - Keeps track of the length of documents added to the index.
 * @property {lunr.tokenizer} tokenizer - Function for splitting strings into tokens for indexing.
 * @property {lunr.Pipeline} pipeline - The pipeline performs text processing on tokens before indexing.
 * @property {lunr.Pipeline} searchPipeline - A pipeline for processing search terms before querying the index.
 * @property {number} documentCount - Keeps track of the total number of documents indexed.
 * @property {number} _b - A parameter to control field length normalization, setting this to 0 disabled normalization, 1 fully normalizes field lengths, the default value is 0.75.
 * @property {number} _k1 - A parameter to control how quickly an increase in term frequency results in term frequency saturation, the default value is 1.2.
 * @property {number} termIndex - A counter incremented for each unique term, used to identify a terms position in the vector space.
 * @property {array} metadataWhitelist - A list of metadata keys that have been whitelisted for entry in the index.
 */
lunr.Builder = function () {
  this._ref = "id"
  this._fields = []
  this.invertedIndex = Object.create(null)
  this.fieldTermFrequencies = {}
  this.fieldLengths = {}
  this.tokenizer = lunr.tokenizer
  this.pipeline = new lunr.Pipeline
  this.searchPipeline = new lunr.Pipeline
  this.documentCount = 0
  this._b = 0.75
  this._k1 = 1.2
  this.termIndex = 0
  this.metadataWhitelist = []
}

/**
 * Sets the document field used as the document reference. Every document must have this field.
 * The type of this field in the document should be a string, if it is not a string it will be
 * coerced into a string by calling toString.
 *
 * The default ref is 'id'.
 *
 * The ref should _not_ be changed during indexing, it should be set before any documents are
 * added to the index. Changing it during indexing can lead to inconsistent results.
 *
 * @param {string} ref - The name of the reference field in the document.
 */
lunr.Builder.prototype.ref = function (ref) {
  this._ref = ref
}

/**
 * Adds a field to the list of document fields that will be indexed. Every document being
 * indexed should have this field. Null values for this field in indexed documents will
 * not cause errors but will limit the chance of that document being retrieved by searches.
 *
 * All fields should be added before adding documents to the index. Adding fields after
 * a document has been indexed will have no effect on already indexed documents.
 *
 * @param {string} field - The name of a field to index in all documents.
 */
lunr.Builder.prototype.field = function (field) {
  this._fields.push(field)
}

/**
 * A parameter to tune the amount of field length normalisation that is applied when
 * calculating relevance scores. A value of 0 will completely disable any normalisation
 * and a value of 1 will fully normalise field lengths. The default is 0.75. Values of b
 * will be clamped to the range 0 - 1.
 *
 * @param {number} number - The value to set for this tuning parameter.
 */
lunr.Builder.prototype.b = function (number) {
  if (number < 0) {
    this._b = 0
  } else if (number > 1) {
    this._b = 1
  } else {
    this._b = number
  }
}

/**
 * A parameter that controls the speed at which a rise in term frequency results in term
 * frequency saturation. The default value is 1.2. Setting this to a higher value will give
 * slower saturation levels, a lower value will result in quicker saturation.
 *
 * @param {number} number - The value to set for this tuning parameter.
 */
lunr.Builder.prototype.k1 = function (number) {
  this._k1 = number
}

/**
 * Adds a document to the index.
 *
 * Before adding fields to the index the index should have been fully setup, with the document
 * ref and all fields to index already having been specified.
 *
 * The document must have a field name as specified by the ref (by default this is 'id') and
 * it should have all fields defined for indexing, though null or undefined values will not
 * cause errors.
 *
 * @param {object} doc - The document to add to the index.
 */
lunr.Builder.prototype.add = function (doc) {
  var docRef = doc[this._ref]

  this.documentCount += 1

  for (var i = 0; i < this._fields.length; i++) {
    var fieldName = this._fields[i],
        field = doc[fieldName],
        tokens = this.tokenizer(field),
        terms = this.pipeline.run(tokens),
        fieldRef = new lunr.FieldRef (docRef, fieldName),
        fieldTerms = Object.create(null)

    this.fieldTermFrequencies[fieldRef] = fieldTerms
    this.fieldLengths[fieldRef] = 0

    // store the length of this field for this document
    this.fieldLengths[fieldRef] += terms.length

    // calculate term frequencies for this field
    for (var j = 0; j < terms.length; j++) {
      var term = terms[j]

      if (fieldTerms[term] == undefined) {
        fieldTerms[term] = 0
      }

      fieldTerms[term] += 1

      // add to inverted index
      // create an initial posting if one doesn't exist
      if (this.invertedIndex[term] == undefined) {
        var posting = Object.create(null)
        posting["_index"] = this.termIndex
        this.termIndex += 1

        for (var k = 0; k < this._fields.length; k++) {
          posting[this._fields[k]] = Object.create(null)
        }

        this.invertedIndex[term] = posting
      }

      // add an entry for this term/fieldName/docRef to the invertedIndex
      if (this.invertedIndex[term][fieldName][docRef] == undefined) {
        this.invertedIndex[term][fieldName][docRef] = Object.create(null)
      }

      // store all whitelisted metadata about this token in the
      // inverted index
      for (var l = 0; l < this.metadataWhitelist.length; l++) {
        var metadataKey = this.metadataWhitelist[l],
            metadata = term.metadata[metadataKey]

        if (this.invertedIndex[term][fieldName][docRef][metadataKey] == undefined) {
          this.invertedIndex[term][fieldName][docRef][metadataKey] = []
        }

        this.invertedIndex[term][fieldName][docRef][metadataKey].push(metadata)
      }
    }

  }
}

/**
 * Calculates the average document length for this index
 *
 * @private
 */
lunr.Builder.prototype.calculateAverageFieldLengths = function () {

  var fieldRefs = Object.keys(this.fieldLengths),
      numberOfFields = fieldRefs.length,
      accumulator = {},
      documentsWithField = {}

  for (var i = 0; i < numberOfFields; i++) {
    var fieldRef = lunr.FieldRef.fromString(fieldRefs[i]),
        field = fieldRef.fieldName

    documentsWithField[field] || (documentsWithField[field] = 0)
    documentsWithField[field] += 1

    accumulator[field] || (accumulator[field] = 0)
    accumulator[field] += this.fieldLengths[fieldRef]
  }

  for (var i = 0; i < this._fields.length; i++) {
    var field = this._fields[i]
    accumulator[field] = accumulator[field] / documentsWithField[field]
  }

  this.averageFieldLength = accumulator
}

/**
 * Builds a vector space model of every document using lunr.Vector
 *
 * @private
 */
lunr.Builder.prototype.createFieldVectors = function () {
  var fieldVectors = {},
      fieldRefs = Object.keys(this.fieldTermFrequencies),
      fieldRefsLength = fieldRefs.length,
      termIdfCache = Object.create(null)

  for (var i = 0; i < fieldRefsLength; i++) {
    var fieldRef = lunr.FieldRef.fromString(fieldRefs[i]),
        field = fieldRef.fieldName,
        fieldLength = this.fieldLengths[fieldRef],
        fieldVector = new lunr.Vector,
        termFrequencies = this.fieldTermFrequencies[fieldRef],
        terms = Object.keys(termFrequencies),
        termsLength = terms.length

    for (var j = 0; j < termsLength; j++) {
      var term = terms[j],
          tf = termFrequencies[term],
          termIndex = this.invertedIndex[term]._index,
          idf, score, scoreWithPrecision

      if (termIdfCache[term] === undefined) {
        idf = lunr.idf(this.invertedIndex[term], this.documentCount)
        termIdfCache[term] = idf
      } else {
        idf = termIdfCache[term]
      }

      score = idf * ((this._k1 + 1) * tf) / (this._k1 * (1 - this._b + this._b * (fieldLength / this.averageFieldLength[field])) + tf)
      scoreWithPrecision = Math.round(score * 1000) / 1000
      // Converts 1.23456789 to 1.234.
      // Reducing the precision so that the vectors take up less
      // space when serialised. Doing it now so that they behave
      // the same before and after serialisation. Also, this is
      // the fastest approach to reducing a number's precision in
      // JavaScript.

      fieldVector.insert(termIndex, scoreWithPrecision)
    }

    fieldVectors[fieldRef] = fieldVector
  }

  this.fieldVectors = fieldVectors
}

/**
 * Creates a token set of all tokens in the index using lunr.TokenSet
 *
 * @private
 */
lunr.Builder.prototype.createTokenSet = function () {
  this.tokenSet = lunr.TokenSet.fromArray(
    Object.keys(this.invertedIndex).sort()
  )
}

/**
 * Builds the index, creating an instance of lunr.Index.
 *
 * This completes the indexing process and should only be called
 * once all documents have been added to the index.
 *
 * @returns {lunr.Index}
 */
lunr.Builder.prototype.build = function () {
  this.calculateAverageFieldLengths()
  this.createFieldVectors()
  this.createTokenSet()

  return new lunr.Index({
    invertedIndex: this.invertedIndex,
    fieldVectors: this.fieldVectors,
    tokenSet: this.tokenSet,
    fields: this._fields,
    pipeline: this.searchPipeline
  })
}

/**
 * Applies a plugin to the index builder.
 *
 * A plugin is a function that is called with the index builder as its context.
 * Plugins can be used to customise or extend the behaviour of the index
 * in some way. A plugin is just a function, that encapsulated the custom
 * behaviour that should be applied when building the index.
 *
 * The plugin function will be called with the index builder as its argument, additional
 * arguments can also be passed when calling use. The function will be called
 * with the index builder as its context.
 *
 * @param {Function} plugin The plugin to apply.
 */
lunr.Builder.prototype.use = function (fn) {
  var args = Array.prototype.slice.call(arguments, 1)
  args.unshift(this)
  fn.apply(this, args)
}
/**
 * Contains and collects metadata about a matching document.
 * A single instance of lunr.MatchData is returned as part of every
 * lunr.Index~Result.
 *
 * @constructor
 * @param {string} term - The term this match data is associated with
 * @param {string} field - The field in which the term was found
 * @param {object} metadata - The metadata recorded about this term in this field
 * @property {object} metadata - A cloned collection of metadata associated with this document.
 * @see {@link lunr.Index~Result}
 */
lunr.MatchData = function (term, field, metadata) {
  var clonedMetadata = Object.create(null),
      metadataKeys = Object.keys(metadata)

  // Cloning the metadata to prevent the original
  // being mutated during match data combination.
  // Metadata is kept in an array within the inverted
  // index so cloning the data can be done with
  // Array#slice
  for (var i = 0; i < metadataKeys.length; i++) {
    var key = metadataKeys[i]
    clonedMetadata[key] = metadata[key].slice()
  }

  this.metadata = Object.create(null)
  this.metadata[term] = Object.create(null)
  this.metadata[term][field] = clonedMetadata
}

/**
 * An instance of lunr.MatchData will be created for every term that matches a
 * document. However only one instance is required in a lunr.Index~Result. This
 * method combines metadata from another instance of lunr.MatchData with this
 * objects metadata.
 *
 * @param {lunr.MatchData} otherMatchData - Another instance of match data to merge with this one.
 * @see {@link lunr.Index~Result}
 */
lunr.MatchData.prototype.combine = function (otherMatchData) {
  var terms = Object.keys(otherMatchData.metadata)

  for (var i = 0; i < terms.length; i++) {
    var term = terms[i],
        fields = Object.keys(otherMatchData.metadata[term])

    if (this.metadata[term] == undefined) {
      this.metadata[term] = Object.create(null)
    }

    for (var j = 0; j < fields.length; j++) {
      var field = fields[j],
          keys = Object.keys(otherMatchData.metadata[term][field])

      if (this.metadata[term][field] == undefined) {
        this.metadata[term][field] = Object.create(null)
      }

      for (var k = 0; k < keys.length; k++) {
        var key = keys[k]

        if (this.metadata[term][field][key] == undefined) {
          this.metadata[term][field][key] = otherMatchData.metadata[term][field][key]
        } else {
          this.metadata[term][field][key] = this.metadata[term][field][key].concat(otherMatchData.metadata[term][field][key])
        }

      }
    }
  }
}

/**
 * Add metadata for a term/field pair to this instance of match data.
 *
 * @param {string} term - The term this match data is associated with
 * @param {string} field - The field in which the term was found
 * @param {object} metadata - The metadata recorded about this term in this field
 */
lunr.MatchData.prototype.add = function (term, field, metadata) {
  if (!(term in this.metadata)) {
    this.metadata[term] = Object.create(null)
    this.metadata[term][field] = metadata
    return
  }

  if (!(field in this.metadata[term])) {
    this.metadata[term][field] = metadata
    return
  }

  var metadataKeys = Object.keys(metadata)

  for (var i = 0; i < metadataKeys.length; i++) {
    var key = metadataKeys[i]

    if (key in this.metadata[term][field]) {
      this.metadata[term][field][key] = this.metadata[term][field][key].concat(metadata[key])
    } else {
      this.metadata[term][field][key] = metadata[key]
    }
  }
}
/**
 * A lunr.Query provides a programmatic way of defining queries to be performed
 * against a {@link lunr.Index}.
 *
 * Prefer constructing a lunr.Query using the {@link lunr.Index#query} method
 * so the query object is pre-initialized with the right index fields.
 *
 * @constructor
 * @property {lunr.Query~Clause[]} clauses - An array of query clauses.
 * @property {string[]} allFields - An array of all available fields in a lunr.Index.
 */
lunr.Query = function (allFields) {
  this.clauses = []
  this.allFields = allFields
}

/**
 * Constants for indicating what kind of automatic wildcard insertion will be used when constructing a query clause.
 *
 * This allows wildcards to be added to the beginning and end of a term without having to manually do any string
 * concatenation.
 *
 * The wildcard constants can be bitwise combined to select both leading and trailing wildcards.
 *
 * @constant
 * @default
 * @property {number} wildcard.NONE - The term will have no wildcards inserted, this is the default behaviour
 * @property {number} wildcard.LEADING - Prepend the term with a wildcard, unless a leading wildcard already exists
 * @property {number} wildcard.TRAILING - Append a wildcard to the term, unless a trailing wildcard already exists
 * @see lunr.Query~Clause
 * @see lunr.Query#clause
 * @see lunr.Query#term
 * @example <caption>query term with trailing wildcard</caption>
 * query.term('foo', { wildcard: lunr.Query.wildcard.TRAILING })
 * @example <caption>query term with leading and trailing wildcard</caption>
 * query.term('foo', {
 *   wildcard: lunr.Query.wildcard.LEADING | lunr.Query.wildcard.TRAILING
 * })
 */
lunr.Query.wildcard = new String ("*")
lunr.Query.wildcard.NONE = 0
lunr.Query.wildcard.LEADING = 1
lunr.Query.wildcard.TRAILING = 2

/**
 * A single clause in a {@link lunr.Query} contains a term and details on how to
 * match that term against a {@link lunr.Index}.
 *
 * @typedef {Object} lunr.Query~Clause
 * @property {string[]} fields - The fields in an index this clause should be matched against.
 * @property {number} [boost=1] - Any boost that should be applied when matching this clause.
 * @property {number} [editDistance] - Whether the term should have fuzzy matching applied, and how fuzzy the match should be.
 * @property {boolean} [usePipeline] - Whether the term should be passed through the search pipeline.
 * @property {number} [wildcard=0] - Whether the term should have wildcards appended or prepended.
 */

/**
 * Adds a {@link lunr.Query~Clause} to this query.
 *
 * Unless the clause contains the fields to be matched all fields will be matched. In addition
 * a default boost of 1 is applied to the clause.
 *
 * @param {lunr.Query~Clause} clause - The clause to add to this query.
 * @see lunr.Query~Clause
 * @returns {lunr.Query}
 */
lunr.Query.prototype.clause = function (clause) {
  if (!('fields' in clause)) {
    clause.fields = this.allFields
  }

  if (!('boost' in clause)) {
    clause.boost = 1
  }

  if (!('usePipeline' in clause)) {
    clause.usePipeline = true
  }

  if (!('wildcard' in clause)) {
    clause.wildcard = lunr.Query.wildcard.NONE
  }

  if ((clause.wildcard & lunr.Query.wildcard.LEADING) && (clause.term.charAt(0) != lunr.Query.wildcard)) {
    clause.term = "*" + clause.term
  }

  if ((clause.wildcard & lunr.Query.wildcard.TRAILING) && (clause.term.slice(-1) != lunr.Query.wildcard)) {
    clause.term = "" + clause.term + "*"
  }

  this.clauses.push(clause)

  return this
}

/**
 * Adds a term to the current query, under the covers this will create a {@link lunr.Query~Clause}
 * to the list of clauses that make up this query.
 *
 * @param {string} term - The term to add to the query.
 * @param {Object} [options] - Any additional properties to add to the query clause.
 * @returns {lunr.Query}
 * @see lunr.Query#clause
 * @see lunr.Query~Clause
 * @example <caption>adding a single term to a query</caption>
 * query.term("foo")
 * @example <caption>adding a single term to a query and specifying search fields, term boost and automatic trailing wildcard</caption>
 * query.term("foo", {
 *   fields: ["title"],
 *   boost: 10,
 *   wildcard: lunr.Query.wildcard.TRAILING
 * })
 */
lunr.Query.prototype.term = function (term, options) {
  var clause = options || {}
  clause.term = term

  this.clause(clause)

  return this
}
lunr.QueryParseError = function (message, start, end) {
  this.name = "QueryParseError"
  this.message = message
  this.start = start
  this.end = end
}

lunr.QueryParseError.prototype = new Error
lunr.QueryLexer = function (str) {
  this.lexemes = []
  this.str = str
  this.length = str.length
  this.pos = 0
  this.start = 0
  this.escapeCharPositions = []
}

lunr.QueryLexer.prototype.run = function () {
  var state = lunr.QueryLexer.lexText

  while (state) {
    state = state(this)
  }
}

lunr.QueryLexer.prototype.sliceString = function () {
  var subSlices = [],
      sliceStart = this.start,
      sliceEnd = this.pos

  for (var i = 0; i < this.escapeCharPositions.length; i++) {
    sliceEnd = this.escapeCharPositions[i]
    subSlices.push(this.str.slice(sliceStart, sliceEnd))
    sliceStart = sliceEnd + 1
  }

  subSlices.push(this.str.slice(sliceStart, this.pos))
  this.escapeCharPositions.length = 0

  return subSlices.join('')
}

lunr.QueryLexer.prototype.emit = function (type) {
  this.lexemes.push({
    type: type,
    str: this.sliceString(),
    start: this.start,
    end: this.pos
  })

  this.start = this.pos
}

lunr.QueryLexer.prototype.escapeCharacter = function () {
  this.escapeCharPositions.push(this.pos - 1)
  this.pos += 1
}

lunr.QueryLexer.prototype.next = function () {
  if (this.pos >= this.length) {
    return lunr.QueryLexer.EOS
  }

  var char = this.str.charAt(this.pos)
  this.pos += 1
  return char
}

lunr.QueryLexer.prototype.width = function () {
  return this.pos - this.start
}

lunr.QueryLexer.prototype.ignore = function () {
  if (this.start == this.pos) {
    this.pos += 1
  }

  this.start = this.pos
}

lunr.QueryLexer.prototype.backup = function () {
  this.pos -= 1
}

lunr.QueryLexer.prototype.acceptDigitRun = function () {
  var char, charCode

  do {
    char = this.next()
    charCode = char.charCodeAt(0)
  } while (charCode > 47 && charCode < 58)

  if (char != lunr.QueryLexer.EOS) {
    this.backup()
  }
}

lunr.QueryLexer.prototype.more = function () {
  return this.pos < this.length
}

lunr.QueryLexer.EOS = 'EOS'
lunr.QueryLexer.FIELD = 'FIELD'
lunr.QueryLexer.TERM = 'TERM'
lunr.QueryLexer.EDIT_DISTANCE = 'EDIT_DISTANCE'
lunr.QueryLexer.BOOST = 'BOOST'

lunr.QueryLexer.lexField = function (lexer) {
  lexer.backup()
  lexer.emit(lunr.QueryLexer.FIELD)
  lexer.ignore()
  return lunr.QueryLexer.lexText
}

lunr.QueryLexer.lexTerm = function (lexer) {
  if (lexer.width() > 1) {
    lexer.backup()
    lexer.emit(lunr.QueryLexer.TERM)
  }

  lexer.ignore()

  if (lexer.more()) {
    return lunr.QueryLexer.lexText
  }
}

lunr.QueryLexer.lexEditDistance = function (lexer) {
  lexer.ignore()
  lexer.acceptDigitRun()
  lexer.emit(lunr.QueryLexer.EDIT_DISTANCE)
  return lunr.QueryLexer.lexText
}

lunr.QueryLexer.lexBoost = function (lexer) {
  lexer.ignore()
  lexer.acceptDigitRun()
  lexer.emit(lunr.QueryLexer.BOOST)
  return lunr.QueryLexer.lexText
}

lunr.QueryLexer.lexEOS = function (lexer) {
  if (lexer.width() > 0) {
    lexer.emit(lunr.QueryLexer.TERM)
  }
}

// This matches the separator used when tokenising fields
// within a document. These should match otherwise it is
// not possible to search for some tokens within a document.
//
// It is possible for the user to change the separator on the
// tokenizer so it _might_ clash with any other of the special
// characters already used within the search string, e.g. :.
//
// This means that it is possible to change the separator in
// such a way that makes some words unsearchable using a search
// string.
lunr.QueryLexer.termSeparator = lunr.tokenizer.separator

lunr.QueryLexer.lexText = function (lexer) {
  while (true) {
    var char = lexer.next()

    if (char == lunr.QueryLexer.EOS) {
      return lunr.QueryLexer.lexEOS
    }

    // Escape character is '\'
    if (char.charCodeAt(0) == 92) {
      lexer.escapeCharacter()
      continue
    }

    if (char == ":") {
      return lunr.QueryLexer.lexField
    }

    if (char == "~") {
      lexer.backup()
      if (lexer.width() > 0) {
        lexer.emit(lunr.QueryLexer.TERM)
      }
      return lunr.QueryLexer.lexEditDistance
    }

    if (char == "^") {
      lexer.backup()
      if (lexer.width() > 0) {
        lexer.emit(lunr.QueryLexer.TERM)
      }
      return lunr.QueryLexer.lexBoost
    }

    if (char.match(lunr.QueryLexer.termSeparator)) {
      return lunr.QueryLexer.lexTerm
    }
  }
}

lunr.QueryParser = function (str, query) {
  this.lexer = new lunr.QueryLexer (str)
  this.query = query
  this.currentClause = {}
  this.lexemeIdx = 0
}

lunr.QueryParser.prototype.parse = function () {
  this.lexer.run()
  this.lexemes = this.lexer.lexemes

  var state = lunr.QueryParser.parseFieldOrTerm

  while (state) {
    state = state(this)
  }

  return this.query
}

lunr.QueryParser.prototype.peekLexeme = function () {
  return this.lexemes[this.lexemeIdx]
}

lunr.QueryParser.prototype.consumeLexeme = function () {
  var lexeme = this.peekLexeme()
  this.lexemeIdx += 1
  return lexeme
}

lunr.QueryParser.prototype.nextClause = function () {
  var completedClause = this.currentClause
  this.query.clause(completedClause)
  this.currentClause = {}
}

lunr.QueryParser.parseFieldOrTerm = function (parser) {
  var lexeme = parser.peekLexeme()

  if (lexeme == undefined) {
    return
  }

  switch (lexeme.type) {
    case lunr.QueryLexer.FIELD:
      return lunr.QueryParser.parseField
    case lunr.QueryLexer.TERM:
      return lunr.QueryParser.parseTerm
    default:
      var errorMessage = "expected either a field or a term, found " + lexeme.type

      if (lexeme.str.length >= 1) {
        errorMessage += " with value '" + lexeme.str + "'"
      }

      throw new lunr.QueryParseError (errorMessage, lexeme.start, lexeme.end)
  }
}

lunr.QueryParser.parseField = function (parser) {
  var lexeme = parser.consumeLexeme()

  if (lexeme == undefined) {
    return
  }

  if (parser.query.allFields.indexOf(lexeme.str) == -1) {
    var possibleFields = parser.query.allFields.map(function (f) { return "'" + f + "'" }).join(', '),
        errorMessage = "unrecognised field '" + lexeme.str + "', possible fields: " + possibleFields

    throw new lunr.QueryParseError (errorMessage, lexeme.start, lexeme.end)
  }

  parser.currentClause.fields = [lexeme.str]

  var nextLexeme = parser.peekLexeme()

  if (nextLexeme == undefined) {
    var errorMessage = "expecting term, found nothing"
    throw new lunr.QueryParseError (errorMessage, lexeme.start, lexeme.end)
  }

  switch (nextLexeme.type) {
    case lunr.QueryLexer.TERM:
      return lunr.QueryParser.parseTerm
    default:
      var errorMessage = "expecting term, found '" + nextLexeme.type + "'"
      throw new lunr.QueryParseError (errorMessage, nextLexeme.start, nextLexeme.end)
  }
}

lunr.QueryParser.parseTerm = function (parser) {
  var lexeme = parser.consumeLexeme()

  if (lexeme == undefined) {
    return
  }

  parser.currentClause.term = lexeme.str.toLowerCase()

  if (lexeme.str.indexOf("*") != -1) {
    parser.currentClause.usePipeline = false
  }

  var nextLexeme = parser.peekLexeme()

  if (nextLexeme == undefined) {
    parser.nextClause()
    return
  }

  switch (nextLexeme.type) {
    case lunr.QueryLexer.TERM:
      parser.nextClause()
      return lunr.QueryParser.parseTerm
    case lunr.QueryLexer.FIELD:
      parser.nextClause()
      return lunr.QueryParser.parseField
    case lunr.QueryLexer.EDIT_DISTANCE:
      return lunr.QueryParser.parseEditDistance
    case lunr.QueryLexer.BOOST:
      return lunr.QueryParser.parseBoost
    default:
      var errorMessage = "Unexpected lexeme type '" + nextLexeme.type + "'"
      throw new lunr.QueryParseError (errorMessage, nextLexeme.start, nextLexeme.end)
  }
}

lunr.QueryParser.parseEditDistance = function (parser) {
  var lexeme = parser.consumeLexeme()

  if (lexeme == undefined) {
    return
  }

  var editDistance = parseInt(lexeme.str, 10)

  if (isNaN(editDistance)) {
    var errorMessage = "edit distance must be numeric"
    throw new lunr.QueryParseError (errorMessage, lexeme.start, lexeme.end)
  }

  parser.currentClause.editDistance = editDistance

  var nextLexeme = parser.peekLexeme()

  if (nextLexeme == undefined) {
    parser.nextClause()
    return
  }

  switch (nextLexeme.type) {
    case lunr.QueryLexer.TERM:
      parser.nextClause()
      return lunr.QueryParser.parseTerm
    case lunr.QueryLexer.FIELD:
      parser.nextClause()
      return lunr.QueryParser.parseField
    case lunr.QueryLexer.EDIT_DISTANCE:
      return lunr.QueryParser.parseEditDistance
    case lunr.QueryLexer.BOOST:
      return lunr.QueryParser.parseBoost
    default:
      var errorMessage = "Unexpected lexeme type '" + nextLexeme.type + "'"
      throw new lunr.QueryParseError (errorMessage, nextLexeme.start, nextLexeme.end)
  }
}

lunr.QueryParser.parseBoost = function (parser) {
  var lexeme = parser.consumeLexeme()

  if (lexeme == undefined) {
    return
  }

  var boost = parseInt(lexeme.str, 10)

  if (isNaN(boost)) {
    var errorMessage = "boost must be numeric"
    throw new lunr.QueryParseError (errorMessage, lexeme.start, lexeme.end)
  }

  parser.currentClause.boost = boost

  var nextLexeme = parser.peekLexeme()

  if (nextLexeme == undefined) {
    parser.nextClause()
    return
  }

  switch (nextLexeme.type) {
    case lunr.QueryLexer.TERM:
      parser.nextClause()
      return lunr.QueryParser.parseTerm
    case lunr.QueryLexer.FIELD:
      parser.nextClause()
      return lunr.QueryParser.parseField
    case lunr.QueryLexer.EDIT_DISTANCE:
      return lunr.QueryParser.parseEditDistance
    case lunr.QueryLexer.BOOST:
      return lunr.QueryParser.parseBoost
    default:
      var errorMessage = "Unexpected lexeme type '" + nextLexeme.type + "'"
      throw new lunr.QueryParseError (errorMessage, nextLexeme.start, nextLexeme.end)
  }
}

  /**
   * export the module via AMD, CommonJS or as a browser global
   * Export code from https://github.com/umdjs/umd/blob/master/returnExports.js
   */
  ;(function (root, factory) {
    if (typeof define === 'function' && define.amd) {
      // AMD. Register as an anonymous module.
      define(factory)
    } else if (typeof exports === 'object') {
      /**
       * Node. Does not work with strict CommonJS, but
       * only CommonJS-like enviroments that support module.exports,
       * like Node.
       */
      module.exports = factory()
    } else {
      // Browser globals (root is window)
      root.lunr = factory()
    }
  }(this, function () {
    /**
     * Just return a value to define the module export.
     * This example returns an object, but the module
     * can return a function as the exported value.
     */
    return lunr
  }))
})();

},{}],23:[function(require,module,exports){
(function (global){
"use strict";

//Gunjan
if (global.rh === undefined) {
  global.rh = {};
}

module.exports = global.rh;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],24:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var CountingSeamaphore = function () {
  function CountingSeamaphore(callback) {
    _classCallCheck(this, CountingSeamaphore);

    this._callback = callback;
    this._count = 0;
  }

  _createClass(CountingSeamaphore, [{
    key: "signal",
    value: function signal() {
      this._count++;
      if (this._count >= 0 && this._callback) {
        this._callback();
      }
    }
  }, {
    key: "wait",
    value: function wait(count) {
      var dec_count = count || 1;
      this._count -= dec_count;
    }
  }]);

  return CountingSeamaphore;
}();

module.exports = CountingSeamaphore;

},{}],25:[function(require,module,exports){
"use strict";

require("../lib/rh");
require("../../lenient_src/robohelp/layout/url_utils");
require("../../lenient_src/robohelp/layout/init");
require("../../lenient_src/robohelp/layout/mp");
require("../../lenient_src/robohelp/layout/expression_builder");
require("../../lenient_src/robohelp/layout/browsesequence_builder");
require("../../lenient_src/robohelp/layout/event_handlers");
require("../../lenient_src/robohelp/layout/search_filed");
require("../../lenient_src/robohelp/layout/layoutfix");
require("../../lenient_src/robohelp/layout/filter_controller");
require("../../lenient_src/robohelp/layout/modern_layout_controller");
require("../../lenient_src/robohelp/layout/js_loading_controller");
require("../../lenient_src/robohelp/layout/index_controller");
require("../../lenient_src/robohelp/layout/glossary_controller");
require("../../lenient_src/robohelp/layout/filter_handler");
require("../../lenient_src/robohelp/layout/load_projects");
require("./layout/ui/carousel");
require("./layout/home_controller");
require("../../lenient_src/layout/search_util");
require("./layout/search/suggestion/search_controller");
require("./layout/favorites_controller");
require("./layout/toc_breadcrumbs_controller.js");
require("../../lenient_src/layout/toc_order");
require("../../lenient_src/layout/toc_controller");
require("../../lenient_src/layout/index_controller");
require("../../lenient_src/layout/glossary_controller");
require("../../lenient_src/layout/event_handlers");
require("./layout/rh2017layoutcontroller");
require("./layout/modal_dialog");
require("./layout/search_result_controller.js");
require("../../lenient_src/robohelp/layout/filter_handler");
require("./layout/custom_buttons");
require("./layout/expand_all");

},{"../../lenient_src/layout/event_handlers":1,"../../lenient_src/layout/glossary_controller":2,"../../lenient_src/layout/index_controller":3,"../../lenient_src/layout/search_util":4,"../../lenient_src/layout/toc_controller":5,"../../lenient_src/layout/toc_order":6,"../../lenient_src/robohelp/layout/browsesequence_builder":7,"../../lenient_src/robohelp/layout/event_handlers":8,"../../lenient_src/robohelp/layout/expression_builder":9,"../../lenient_src/robohelp/layout/filter_controller":10,"../../lenient_src/robohelp/layout/filter_handler":11,"../../lenient_src/robohelp/layout/glossary_controller":12,"../../lenient_src/robohelp/layout/index_controller":13,"../../lenient_src/robohelp/layout/init":14,"../../lenient_src/robohelp/layout/js_loading_controller":15,"../../lenient_src/robohelp/layout/layoutfix":16,"../../lenient_src/robohelp/layout/load_projects":17,"../../lenient_src/robohelp/layout/modern_layout_controller":18,"../../lenient_src/robohelp/layout/mp":19,"../../lenient_src/robohelp/layout/search_filed":20,"../../lenient_src/robohelp/layout/url_utils":21,"../lib/rh":23,"./layout/custom_buttons":26,"./layout/expand_all":27,"./layout/favorites_controller":28,"./layout/home_controller":29,"./layout/modal_dialog":30,"./layout/rh2017layoutcontroller":31,"./layout/search/suggestion/search_controller":48,"./layout/search_result_controller.js":62,"./layout/toc_breadcrumbs_controller.js":63,"./layout/ui/carousel":64}],26:[function(require,module,exports){
'use strict';

var rh = require("../../lib/rh"),
    consts = rh.consts,
    model = rh.model,
    _ = rh._;

model.subscribe(consts('KEY_CUSTOM_BUTTONS_CONFIG'), function (config) {
  var buttons = _.map(config, function (item, index) {
    return _.extend({ class: 'custom-button-' + index }, item);
  });
  model.publish(consts('KEY_CUSTOM_BUTTONS'), buttons);
});

},{"../../lib/rh":23}],27:[function(require,module,exports){
'use strict';

var rh = require("../../lib/rh");

rh.model.csubscribe('EVT_EXPAND_COLLAPSE_ALL', function () {
  var currentState = rh.model.cget('ALL_ARE_EXPANDED');
  if (currentState) {
    rh.model.cpublish('EVT_COLLAPSE_ALL');
  } else {
    rh.model.cpublish('EVT_EXPAND_ALL');
  }
});

rh.model.csubscribe('EVT_COLLAPSE_ALL', function () {
  rh.model.cpublish('ALL_ARE_EXPANDED', false);
});

rh.model.csubscribe('EVT_EXPAND_ALL', function () {
  rh.model.cpublish('ALL_ARE_EXPANDED', true);
});

},{"../../lib/rh":23}],28:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var rh = require("../../lib/rh");
var consts = rh.consts;

var FavoritesController = function () {
  function FavoritesController(widget) {
    var _this = this;

    _classCallCheck(this, FavoritesController);

    this.widget = widget;
    this.favStorage = new rh.Storage();
    /* Internal functions and variables */
    this._loadFromStorage = false; /* Favorites already loaded from storage? */

    this._favMemoryStore = undefined; /* Variable to hold favorites object */
    rh.model.subscribeOnce(consts('EVT_PROJECT_LOADED'), function () {
      _this.init();
    });
  }

  _createClass(FavoritesController, [{
    key: "_getUniqueId",
    value: function _getUniqueId() {
      function _p8(s) {
        var p = (Math.random().toString(16) + "000000000").substr(2, 8);
        return s ? "-" + p.substr(0, 4) + "-" + p.substr(4, 4) : p;
      }
      return _p8() + _p8(true) + _p8(true) + _p8();
    }
  }, {
    key: "numberOfItems",
    value: function numberOfItems(JSON) {
      /* Count the number of items in an object */
      return Object.keys(JSON).length;
    }
  }, {
    key: "_getFavHTMLElements",
    value: function _getFavHTMLElements(type) {
      /* Find all elements in the HTML that can hold a favorite widget */

      var allElements = document.getElementsByTagName("div"); /* Only divs can be favorite holders */
      var elements = [];

      for (var i = 0; i < allElements.length; i++) {
        if (allElements[i].getAttribute(rh.consts('FAVATTRIBUTE')) === type) {
          elements.push(allElements[i]);
        }
      }

      return elements;
    }
  }, {
    key: "getLinkTitle",
    value: function getLinkTitle(isFavorite) {
      var lng = rh.model.get(consts('KEY_LNG'));
      if (isFavorite) {
        return lng && lng.unsetAsFavorite || '';
      } else {
        return lng && lng.setAsFavorite || '';
      }
    }
  }, {
    key: "_loadFavoritesFromStorage",
    value: function _loadFavoritesFromStorage() {
      /* Load setting from storage */
      var storageObject = void 0;
      var loadString = this.favStorage.fetch(consts('FAVSTORAGE'));

      if (typeof loadString === "undefined" || loadString === null) {
        /* No settings yet, create new object. */
        storageObject = {};
      } else {
        storageObject = JSON.parse(loadString); /* Parse string to object */
      }
      return storageObject;
    }
  }, {
    key: "_loadFavorites",
    value: function _loadFavorites() {
      if (this._loadFromStorage === false) {
        /* Only load once, then use object in memory. Saves a few parsings. */
        this._favMemoryStore = this._loadFavoritesFromStorage();
      }
      return this._favMemoryStore;
    }
  }, {
    key: "_saveFavorites",
    value: function _saveFavorites() {
      var favoritesString = void 0;
      favoritesString = JSON.stringify(this._favMemoryStore);
      this.favStorage.persist(rh.consts('FAVSTORAGE'), favoritesString);
    }
  }, {
    key: "_unFavoriteTopic",
    value: function _unFavoriteTopic(topic) {
      for (var i in this._favMemoryStore) {
        var current = this._favMemoryStore[i];
        if (current.topic === topic) {
          delete this._favMemoryStore[i];
          break;
        }
      }
      this._saveFavorites();
      rh.model.publish(rh.consts('EVENTFAVCHANGE'), null); /* Publish so favorites subscribers are notified of changes */
    }
  }, {
    key: "_favoriteTopic",
    value: function _favoriteTopic(url, title) {
      //let id;
      this._favMemoryStore[this._getUniqueId()] = { "topic": url, "title": title };
      this._saveFavorites();
      rh.model.publish(rh.consts('EVENTFAVCHANGE'), null); /* Publish so favorites subscribers are notified of changes */
    }

    /* Public functions: for use in other scripts */

  }, {
    key: "getStorageId",
    value: function getStorageId() {
      return "fav-" + rh._.getHostFolder();
    }
  }, {
    key: "getTopicURL",
    value: function getTopicURL() {
      /* Get the URL of the current topic */
      return rh.model.get(rh.consts('KEY_TOPIC_URL'));
    }
  }, {
    key: "getTopicTitle",
    value: function getTopicTitle() {
      /* Get title of currently opened topic */
      return rh.model.get(rh.consts('KEY_TOPIC_TITLE'));
    }
  }, {
    key: "isTopicFavorite",
    value: function isTopicFavorite(topic) {
      /* Is the current topic a favorite topic? */
      var favorites = void 0;
      var isFavorite = void 0;
      if (!topic) {
        topic = this.getTopicURL();
      }
      favorites = this._loadFavorites();

      isFavorite = false;
      for (var i in favorites) {
        var current = favorites[i];
        if (current.topic === topic) {
          isFavorite = true;
          break;
        }
      }

      return isFavorite;
    }
  }, {
    key: "setfavoritesTitle",
    value: function setfavoritesTitle(isFavorite) {
      var title = this.getLinkTitle(isFavorite);
      rh.model.publish(consts('FAVORITES_BUTTON_TITLE'), title);
    }
  }, {
    key: "setTopicFavoriteState",
    value: function setTopicFavoriteState() {
      rh.model.publish(consts('TOPIC_FAVORITE'), this.isTopicFavorite());
    }
  }, {
    key: "setFavoritesList",
    value: function setFavoritesList() {
      /* Write the favorites list */
      //let favholders;
      var favorites = [];
      var id = void 0;
      var favorites_map = this._loadFavorites();
      for (id in favorites_map) {
        favorites.push(favorites_map[id]);
      }
      rh.model.publish(consts('KEY_FAVORITES'), favorites);
    }
  }, {
    key: "toggleFavorite",
    value: function toggleFavorite(topicURL) {
      /* Toggle whether the page is a favorite */
      if (!topicURL) {
        topicURL = this.getTopicURL();
      }
      if (this.isTopicFavorite(topicURL)) {
        this._unFavoriteTopic(topicURL); /* Because the favorites list can remove topics, removing a topic can be a different URL than the current topic. */
      } else {
        this._favoriteTopic(topicURL, this.getTopicTitle()); /* This can only be the current topic */
      }
      this.setTopicFavoriteState();
    }
  }, {
    key: "init",
    value: function init() {
      /* Initialise the favorites */

      this.favStorage.init(rh._.getRootUrl()

      /* Subscribe to topic events */
      );rh.model.subscribe(rh.consts('KEY_TOPIC_URL'), this.setTopicFavoriteState.bind(this));
      rh.model.subscribe(rh.consts('EVENTFAVCHANGE'), this.setFavoritesList.bind(this));
      rh.model.subscribe(rh.consts('TOPIC_FAVORITE'), this.setfavoritesTitle.bind(this));

      this.setFavoritesList();
      rh.model.publish(consts('TOPIC_FAVORITE'), this.isTopicFavorite());
    }
  }]);

  return FavoritesController;
}();

rh.controller('FavoritesController', FavoritesController);

},{"../../lib/rh":23}],29:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var rh = require("../../lib/rh");
var _ = rh._;

var HomeController = function () {
  function HomeController(widget) {
    _classCallCheck(this, HomeController);

    this.widget = widget;
  }

  _createClass(HomeController, [{
    key: 'goToHome',
    value: function goToHome(tocId) {
      if (rh.consts('HOME_FILEPATH') === rh._.getFileName()) {
        return this.changeToDefaultTopic(tocId);
      }
      var hashMap = void 0;
      if (tocId !== undefined && tocId !== '') {
        hashMap = { rhtocid: tocId };
      }
      _.goToHome(hashMap);
      return true;
    }
  }, {
    key: 'changeToDefaultTopic',
    value: function changeToDefaultTopic(tocId) {
      var hashMap = { t: window.gDefaultTopic.substring(1) };
      if (tocId !== undefined && tocId !== '') {
        hashMap.rhtocid = tocId;
      }
      _.queueUpdateHashMap(hashMap, true);
      return true;
    }
  }]);

  return HomeController;
}();

rh.controller('HomeController', HomeController);

},{"../../lib/rh":23}],30:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var rh = require("../../lib/rh");
var nodeUtils = require("../utils/node_utils");
var $ = rh.$;
var _ = rh._;

var ModalDialog = function () {
  function ModalDialog() {
    _classCallCheck(this, ModalDialog);
  }

  _createClass(ModalDialog, [{
    key: "createChildWidget",
    value: function createChildWidget() {
      this.node = $.createElement('div', this.template);
      nodeUtils.appendChild(document.body, this.node);
      this.widget = new rh.Widget({ node: this.node });
      this.widget.init();
    }
  }, {
    key: "setOnImageLoad",
    value: function setOnImageLoad() {
      var modalContent = $.find(this.node, '.rh-modal-content')[0];
      if (!modalContent) {
        return;
      }
      this.modalContent = modalContent;
      var img = $.find(modalContent, 'img')[0];
      if (img) {
        this.img = img;
        img.addEventListener('load', this.setModalSize.bind(this));
        img.addEventListener('error', this.setModalSize.bind(this));
      }
    }
  }, {
    key: "setModalSize",
    value: function setModalSize() {
      this.imageWidth = this.img.naturalWidth;
      this.imageHeight = this.img.naturalHeight;
      var position = this.calculatePosition(this.imageWidth, this.imageHeight);
      var modalContainer = $.find(this.node, '.rh-modal-container')[0];
      if (modalContainer) {
        this.setContainerStyle(modalContainer, position);
      }
    }
  }, {
    key: "setContainerStyle",
    value: function setContainerStyle(modalContainer, position) {
      var top = Math.round(position.top);
      var left = Math.round(position.left);

      $.css(modalContainer, 'left', left.toString() + 'px');
      $.css(modalContainer, 'top', top.toString() + 'px');

      if (this.modalContent) {
        this.setImageSize(position.width, position.height);
      }
      $.css(modalContainer, 'display', "block");
    }
  }, {
    key: "calculateImageSize",
    value: function calculateImageSize(size) {
      var aspect = size.imageWidth / size.imageHeight;
      if (size.imageWidth < size.pageWidth && size.imageHeight < size.pageHeight) {
        return { width: size.imageWidth, height: size.imageHeight };
      }

      if (size.imageWidth >= size.pageWidth && size.imageHeight <= size.pageHeight) {
        return { height: size.pageWidth / aspect, width: size.pageWidth };
      }
      if (size.imageWidth <= size.pageWidth && size.imageHeight >= size.pageHeight) {
        return { height: size.pageHeight, width: size.pageHeight * aspect
        };
      }
      if (size.imageWidth >= size.pageWidth && size.imageHeight >= size.pageHeight) {
        return this._calculateFullyExceedSize(size, aspect);
      }
    }
  }, {
    key: "_calculateFullyExceedSize",
    value: function _calculateFullyExceedSize(size, aspect) {
      var pageAspect = size.pageWidth / size.pageHeight;
      if (aspect < pageAspect) {
        return { height: size.pageHeight, width: size.pageHeight * aspect };
      } else {
        return { height: size.pageWidth / aspect, width: size.pageWidth };
      }
    }
  }, {
    key: "calculatePosition",
    value: function calculatePosition(imageWidth, imageHeight) {
      var pageWidth = window.innerWidth || document.body.clientWidth;
      var pageHeight = window.innerHeight || document.body.clientHeight;
      pageWidth -= 70;
      pageHeight -= 70;
      pageWidth = pageWidth >= 0 ? pageWidth : 0;
      pageHeight = pageHeight >= 0 ? pageHeight : 0;

      var size = { imageWidth: imageWidth, imageHeight: imageHeight, pageWidth: pageWidth, pageHeight: pageHeight };
      var image_size = this.calculateImageSize(size);
      imageWidth = image_size.width;
      imageHeight = image_size.height;
      var left = Math.max(5, (pageWidth - imageWidth) / 2);
      var top = Math.max(5, (pageHeight - imageHeight) / 2);

      return {
        left: left,
        top: top,
        width: imageWidth,
        height: imageHeight,
        pageWidth: pageWidth,
        pageHeight: pageHeight
      };
    }
  }, {
    key: "initialStyle",
    value: function initialStyle() {
      return this.isImage ? "style=\"display:none\"" : '';
    }
  }, {
    key: "ShowModal",
    value: function ShowModal(config) {
      this.isImage = config.isImage;
      this.createChildWidget();
      this.widget.subscribe('close', this._close.bind(this));
      this.widget.publish('content', config.content);
      _.defer(this.setOnImageLoad.bind(this));
    }
  }, {
    key: "setImageSize",
    value: function setImageSize(maxWidth, maxHeight) {
      if (this.imageWidth > maxWidth) {
        $.css(this.img, 'width', Math.round(maxWidth) + "px");
      }
      if (this.imageHeight > maxHeight) {
        $.css(this.img, 'height', Math.round(maxHeight) + "px");
      }
    }
  }, {
    key: "_close",
    value: function _close() {
      this.widget.destruct();
      this.widget = undefined;
      nodeUtils.removeChild(this.node);
      this.node = undefined;
    }
  }, {
    key: "template",
    get: function get() {
      var initialStyle = this.initialStyle();

      return "\n    <div class=\"rh-modal\">\n        <div class=\"rh-modal-container\" " + initialStyle + ">\n          <div class=\"rh-modal-content\" data-html=\"content\"></div>\n          <div class=\"rh-modal-close\" data-click=\"@close(true)\"> </div>\n        </div>\n    </div>";
    }
  }]);

  return ModalDialog;
}();

rh.model.csubscribe('SHOW_MODAL', function (config) {
  var model = new ModalDialog();
  model.ShowModal(config);
});

},{"../../lib/rh":23,"../utils/node_utils":65}],31:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var rh = require("../../lib/rh");
var $ = rh.$;
var _ = rh._;
var consts = rh.consts;

var RH2017LayoutController = function () {
  function RH2017LayoutController(widget) {
    _classCallCheck(this, RH2017LayoutController);

    this.widget = widget;
    this.topicFrame = '.topic-container iframe';
    this.initLayout();
    this.initModal();
  }

  _createClass(RH2017LayoutController, [{
    key: 'isLayoutMode',
    value: function isLayoutMode(hashMap) {
      var hash = hashMap || _.hashParams();
      var topicMode = hash[rh.consts('HASH_KEY_TOPIC')];
      return hash[rh.consts('HASH_KEY_UIMODE')] !== consts('HELP_SEARCH_MODE') && (!topicMode || hash[rh.consts('HASH_HOMEPAGE_MODE')] === 'true' || hash[rh.consts('HASH_KEY_RH_TOCID')]);
    }
  }, {
    key: 'initLayout',
    value: function initLayout() {
      var _this = this;

      rh.model.subscribe(consts('EVT_HASH_CHANGE'), function (obj) {
        var hashMap = obj.newMap,
            oldHashMap = obj.oldMap;
        if (_this.isLayoutMode()) {
          _this.widget.publish(rh.consts('KEY_VIEW_MODE'), rh.consts('HELP_LAYOUT_MODE'));
        } else if (hashMap[rh.consts('HASH_KEY_UIMODE')] === 'search') {
          _this.widget.publish(rh.consts('KEY_VIEW_MODE'), rh.consts('HELP_SEARCH_MODE'));
          _.queueUpdateHashMap(_defineProperty({}, consts('HASH_HOMEPAGE_MODE'), false), false);
        } else {
          _this.widget.publish(rh.consts('KEY_VIEW_MODE'), rh.consts('HELP_TOPIC_MODE'));
        }

        var feature = rh.model.get(rh.consts('KEY_FEATURE'));
        if (feature && feature.showDefTopic === false && !hashMap[rh.consts('HASH_KEY_RH_TOCID')] && !oldHashMap[rh.consts('HASH_KEY_TOPIC')] && hashMap[rh.consts('HASH_KEY_TOPIC')]) {
          _.queueUpdateHashMap(_defineProperty({}, consts('HASH_HOMEPAGE_MODE'), 'false'), false);
        } else if (oldHashMap[rh.consts('HASH_KEY_TOPIC')] && !hashMap[rh.consts('HASH_KEY_RH_TOCID')] && oldHashMap[rh.consts('HASH_KEY_TOPIC')] !== hashMap[rh.consts('HASH_KEY_TOPIC')] && hashMap[rh.consts('HASH_HOMEPAGE_MODE')] === 'true' && oldHashMap[rh.consts('HASH_HOMEPAGE_MODE')] === hashMap[rh.consts('HASH_HOMEPAGE_MODE')]) {
          _.queueUpdateHashMap(_defineProperty({}, consts('HASH_HOMEPAGE_MODE'), 'false'), false);
        }
      });

      var hashMap = _.hashParams();
      if (this.isLayoutMode() && hashMap[rh.consts('HASH_HOMEPAGE_MODE')] !== 'true') {
        _.queueUpdateHashMap(_defineProperty({}, consts('HASH_HOMEPAGE_MODE'), true), false);
      }
      rh.model.subscribe('EVT_TOC_LOADEDgototab', function (bookData) {
        if (bookData.key) {
          rh.model.subscribe(bookData.key, function (bookTOC, key, unsub) {
            unsub();
            if (bookData.item && bookData.item.url && !bookTOC[0].added) {
              bookTOC.unshift({ 'type': 'item', 'url': bookData.item.url,
                'name': bookData.item.name, 'added': true });
              rh.model.publish(bookData.key, bookTOC);
            }
          });
        }
        if (bookData.item.url) {
          _this.viewTopicInLayoutMode(bookData.item.url);
        }
      });
    }
  }, {
    key: 'viewTopicInLayoutMode',
    value: function viewTopicInLayoutMode(topicUrl) {
      var paramMap = _defineProperty({ 'homepage': 'true'
      }, rh.consts('HASH_KEY_RH_TOCID'), true);
      if (topicUrl && topicUrl !== '#') {
        paramMap.t = topicUrl;
      }
      _.queueUpdateHashMap(paramMap, false);
    }
  }, {
    key: 'initModal',
    value: function initModal() {
      var bHandled = false;
      document.addEventListener("keydown", function (e) {
        if (e.keyCode === 27) {
          // ESC
          rh._.each($.find('.modal'), function (item) {
            $.addClass(item, 'rh-hide');
          });
        }
      }, false);
      document.addEventListener('click', function () {
        if (!bHandled) {
          rh._.each($.find('.modal'), function (item) {
            $.addClass(item, 'rh-hide');
          });
        }
        bHandled = false;
      });
      rh._.each($.find('.modal-content'), function (item) {
        _.addEventListener(item, 'click', function () {
          bHandled = true;
        });
      });
    }
  }]);

  return RH2017LayoutController;
}();

rh.controller('RH2017LayoutController', RH2017LayoutController);

},{"../../lib/rh":23}],32:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var rh = require("../../../../lib/rh");
var _ = rh._;

var Merger = function () {
  function Merger(items) {
    var max_items = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 20;

    _classCallCheck(this, Merger);

    this._items = items;
    this._max_items = max_items;
  }

  _createClass(Merger, [{
    key: "merge",
    value: function merge(newItems) {
      var _this = this;

      _.each(newItems, function (item) {
        _this.mergeItem(item);
      });
      this._sort();
      this._purge();
    }
  }, {
    key: "clear",
    value: function clear() {
      this._items = [];
    }
  }, {
    key: "_purge",
    value: function _purge() {
      if (this._items.length > this._max_items) {
        this._items.splice(this._max_items);
      }
    }
  }, {
    key: "mergeItem",
    value: function mergeItem(item) {
      var existing_item = this.find_item(item);
      if (existing_item) {
        existing_item.merge(item);
      } else {
        this._items.push(item);
      }
    }
  }, {
    key: "find_item",
    value: function find_item(match_item) {
      return _.find(this._items, function (item) {
        return item.match(match_item);
      });
    }
  }, {
    key: "merge_item",
    value: function merge_item(existing_item, new_item) {
      existing_item.probability += new_item.probability;
      existing_item.count = Math.max(existing_item.count, new_item.count);
    }
  }, {
    key: "_sort",
    value: function _sort() {
      this.items.sort(this.compare_items);
    }
  }, {
    key: "compare_items",
    value: function compare_items(p1, p2) {
      return p1.compare(p2);
    }
  }, {
    key: "items",
    get: function get() {
      return this._items;
    }
  }]);

  return Merger;
}();

module.exports = Merger;

},{"../../../../lib/rh":23}],33:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var rh = require("../../../../lib/rh");
var consts = rh.consts;

var Paths = function () {
  function Paths(path) {
    _classCallCheck(this, Paths);

    this._path = path || "";
    this.initPath();
  }

  _createClass(Paths, [{
    key: "initPath",
    value: function initPath() {
      if (this._path === ".") {
        this._path = "";
      }
      if (this._path[0] === '.' && this._path[1] === '/') {
        this._path = this._path.slice(2);
      }
    }
  }, {
    key: "_getModelFileName",
    value: function _getModelFileName(fileNo) {
      return consts("SEARCH_MODEL_ADDR") + fileNo.toString() + ".js";
    }
  }, {
    key: "getModelFilePath",
    value: function getModelFilePath(fileno) {
      var fileName = this._getModelFileName(fileno);
      return this._getRelativePath(fileName);
    }
  }, {
    key: "_getRelativePath",
    value: function _getRelativePath(filepath) {
      var path = this._path === "" ? filepath : this._path + '/' + filepath;

      return path;
    }
  }, {
    key: "_getPathKey",
    value: function _getPathKey() {
      return this._path === "" ? "" : '_' + this._path + '_';
    }
  }, {
    key: "getModelKey",
    value: function getModelKey(fileNo) {
      return consts('SEARCH_MODEL_KEY') + this._getPathKey() + fileNo.toString();
    }
  }, {
    key: "_getMapFileName",
    value: function _getMapFileName() {
      return consts("SEARCH_MAP_ADDR");
    }
  }, {
    key: "getMapFilePath",
    value: function getMapFilePath() {
      var fileName = this._getMapFileName();
      return this._getRelativePath(fileName);
    }
  }, {
    key: "getIndexFilePath",
    value: function getIndexFilePath() {
      var fileName = consts("SEARCH_INDEX_FILE");
      return this._getRelativePath(fileName);
    }
  }, {
    key: "getTopicUrl",
    value: function getTopicUrl(url) {
      return this._getRelativePath(url);
    }
  }, {
    key: "getSearchDbFilePath",
    value: function getSearchDbFilePath() {
      var fileName = consts("SEARCH_DB_FILE");
      return this._getRelativePath(fileName);
    }
  }, {
    key: "getMetadataFilePath",
    value: function getMetadataFilePath() {
      var fileName = consts("SEARCH_METADATA_FILE");
      return this._getRelativePath(fileName);
    }
  }, {
    key: "getTextFilePath",
    value: function getTextFilePath(id) {
      var folderPath = consts("SEARCH_TEXT_FILE");
      var relFolderPath = this._getRelativePath(folderPath);
      return relFolderPath + "/" + id + ".js";
    }
  }]);

  return Paths;
}();

module.exports = Paths;

},{"../../../../lib/rh":23}],34:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var rh = require("../../../../lib/rh");
var _ = rh._;
module.exports = function () {
  function Synonymns(synonymns) {
    _classCallCheck(this, Synonymns);

    this.synonymns = synonymns || [];
    this.rootWords = {};
    this.merge();
  }

  _createClass(Synonymns, [{
    key: "merge",
    value: function merge() {
      var _this = this;

      this.rootWords = {};
      _.each(this.synonymns, function (item) {
        var synonymns = item.words;
        var word = item.name;
        _.each(synonymns, function (syn) {
          _this._add(word, syn);
        });
      });
    }
  }, {
    key: "_add",
    value: function _add(word, syn) {
      syn = syn.toLowerCase();
      word = word.toLowerCase();
      this.rootWords[syn] = this.rootWords[word] || word;
    }
  }, {
    key: "getRoot",
    value: function getRoot(word) {
      return this.rootWords[word] || word;
    }
  }]);

  return Synonymns;
}();

},{"../../../../lib/rh":23}],35:[function(require,module,exports){
"use strict";

var _exports = {
  minPreviousThreshold: 0.2,
  previousnGram: 1,
  max_predictions: 5,
  PREDICTOR_SOURCE_ID: {
    HISTORY_PREDICTOR: 0,
    NGRAM_PREDICTOR: 1,
    GENERAL_PREDICTOR: 2,
    CORRECTOR: 3
  }
};

module.exports = _exports;

},{}],36:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var INDEX = require('./indices');
var rh = require("../../../../lib/rh");
var _ = rh._;
var Prediction = require('./prediction');
var search_consts = require('./consts');
var search_utils = require('./utils');
var PredictionList = require('./prediction_list');

var Corrector = function () {
  function Corrector(loader, callback) {
    var max_predictions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 20;

    _classCallCheck(this, Corrector);

    this._loader = loader;
    this.predictions = [];
    this.max_predictions = max_predictions;
    this._callback = callback;
  }

  _createClass(Corrector, [{
    key: 'getCorrections',
    value: function getCorrections(parsed_input) {
      this._parsed_input = parsed_input;
      this.predictions = [];
      this._computePredictions();
      var hashes = this._loader.getHashes(this._parsed_input._partial);
      if (hashes) {
        var hash_count = hashes.length;
        for (var i = 0; i < hash_count && this.predictions.length < this.max_predictions; i++) {
          var hash = hashes[i];
          this._addCorrection(hash);
        }
      }
      this.onResultCalculated();
    }
  }, {
    key: 'clear',
    value: function clear() {
      this.predictions = [];
    }
  }, {
    key: '_computePredictions',
    value: function _computePredictions() {

      var word_hashes = this._loader.getHashes(this._parsed_input._partial);
      if (word_hashes) {
        this._addCorrection(word_hashes);
      }
    }
  }, {
    key: 'onResultCalculated',
    value: function onResultCalculated() {
      if (this._callback) {
        this._callback(new PredictionList(this.predictions, this._parsed_input), this._loader);
      }
    }
  }, {
    key: '_matchCorrection',
    value: function _matchCorrection(word) {
      this._hamming_dist = this._getDistance(word);
      if (this._hamming_dist <= 2 && !this._loader.isStopWord(word)) {
        return true;
      }
      return false;
    }
  }, {
    key: '_addCorrection',
    value: function _addCorrection(word_hash) {
      if (!word_hash) {
        return;
      }
      var word = search_utils.getSafeElement(word_hash, INDEX.MAP.WORD);
      if (!word) {
        return;
      }

      if (this._matchCorrection(word)) {
        var complete_word = this._parsed_input.replaceLastWord(word);
        var term = this._parsed_input.completeSuggestion(complete_word);
        var prediction = new Prediction(term, 1 / this._hamming_dist, 2, search_consts.PREDICTOR_SOURCE_ID.CORRECTOR);
        this.predictions.push(prediction);
      }
    }
  }, {
    key: '_getDistance',
    value: function _getDistance(word) {
      return _.findEditDist(this._parsed_input._partial, word);
    }
  }]);

  return Corrector;
}();

module.exports = Corrector;

},{"../../../../lib/rh":23,"./consts":35,"./indices":40,"./prediction":44,"./prediction_list":46,"./utils":51}],37:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var PredictionList = require('./prediction_list');
var PredictonCreator = require('./prediction_creator');
var search_consts = require('./consts');
var INDEX = require('./indices');
var rh = require("../../../../lib/rh");
var _ = rh._;
var PredictonMerger = require('../common/merger');

var GeneralPredictor = function () {
  function GeneralPredictor(callback, loader) {
    var max_predictions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 20;

    _classCallCheck(this, GeneralPredictor);

    this._max_predictions = max_predictions;
    this._loader = loader;
    this.total_count = this._loader.getTotalCount();
    this._callback = callback;
    this._source = search_consts.PREDICTOR_SOURCE_ID.GENERAL_PREDICTOR;
    this.prediction_merger = new PredictonMerger([], this.total_count * 5);
  }

  _createClass(GeneralPredictor, [{
    key: 'clear',
    value: function clear() {
      this.prediction_merger.clear();
      this.parsed_input = undefined;
    }
  }, {
    key: 'getPredictions',
    value: function getPredictions(parsed_input) {

      this._init(parsed_input);
      this._computePredictions();

      this._onResultComputed();
    }
  }, {
    key: '_computePredictions',
    value: function _computePredictions() {

      var word_hashes = this._getWordHashes();
      if (word_hashes) {
        this._addPredictions(word_hashes);
      }
    }
  }, {
    key: '_isWholeWordInput',
    value: function _isWholeWordInput() {
      return this.parsed_input.isWholeWord;
    }
  }, {
    key: '_getWordHashes',
    value: function _getWordHashes() {
      return this.parsed_input.isWholeWord ? this._loader.top_words : this._loader.getHashes(this.parsed_input._partial);
    }
  }, {
    key: '_init',
    value: function _init(parsed_input) {
      this.prediction_merger = new PredictonMerger([], this.total_count * 5);
      this.parsed_input = parsed_input;
    }
  }, {
    key: '_onResultComputed',
    value: function _onResultComputed() {
      if (this._callback) {
        this._callback(new PredictionList(this.predictions, this.parsed_input), this._loader);
      }
    }
  }, {
    key: '_addPredictions',
    value: function _addPredictions(hashes) {
      if (!hashes) {
        return;
      }

      var hash_count = hashes.length;
      for (var i = 0; i < hash_count && this.predictions.length < this.max_predictions; i++) {
        var hash = hashes[i];
        this._addWordPrediction(hash);
      }
    }
  }, {
    key: '_addWordPrediction',
    value: function _addWordPrediction(word_hash, matchFn) {
      matchFn = matchFn || this._matches_partially.bind(this);
      var model_data = this._loader.getModelData(word_hash);
      var total_count = this._loader.total_count;
      if (matchFn(word_hash)) {
        var word = word_hash[INDEX.MAP.WORD];
        if (this._should_add_prediction(word)) {
          this._create_predictions(word_hash, total_count, model_data);
        }
      }
    }
  }, {
    key: '_continueFn',
    value: function _continueFn() {
      return true;
    }
  }, {
    key: '_should_add_prediction',
    value: function _should_add_prediction(word) {
      return !this._loader.isStopWord(word) && !this.parsed_input.equalLastWord(word);
    }
  }, {
    key: '_matches_partially',
    value: function _matches_partially(word_hash) {
      if (this.parsed_input.isWholeWord) {
        return true;
      }

      var word = word_hash[INDEX.MAP.WORD];
      return this.parsed_input.comparePartial(word);
    }
  }, {
    key: '_create_predictions',
    value: function _create_predictions(word_hash, model_count, model_item) {
      var _this = this;

      var creator = new PredictonCreator({ loader: this._loader, model_item: model_item, total_count: model_count, parsed_input: this.parsed_input, continueFn: this._continueFn });
      var predictions = creator.getMultiPredictions(word_hash, true, undefined, this._source);
      _.each(predictions, function (prediction) {
        if (prediction !== undefined) {
          _this.prediction_merger.mergeItem(prediction);
        }
      });
    }
  }, {
    key: '_calculate_probability',
    value: function _calculate_probability(count) {
      return count / this.total_count;
    }
  }, {
    key: 'predictions',
    get: function get() {
      return this.prediction_merger.items;
    }
  }, {
    key: 'max_predictions',
    set: function set(newValue) {
      this._max_predictions = newValue;
    },
    get: function get() {
      return this._max_predictions;
    }
  }]);

  return GeneralPredictor;
}();

module.exports = GeneralPredictor;

},{"../../../../lib/rh":23,"../common/merger":32,"./consts":35,"./indices":40,"./prediction_creator":45,"./prediction_list":46}],38:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var rh = require("../../../../lib/rh");
var _ = rh._;
var Prediction = require('./prediction');
var Parser = require('./input_parser');
var PredictionList = require('./prediction_list');
var search_consts = require('./consts');

var HistoryPredictor = function () {
  function HistoryPredictor(reader, callback) {
    _classCallCheck(this, HistoryPredictor);

    this._reader = reader;
    this._predictions = [];
    this._callback = callback;
    this._source = search_consts.PREDICTOR_SOURCE_ID.HISTORY_PREDICTOR;
    this._max_predictions = search_consts._max_history_predictions === undefined ? 2 : search_consts._max_history_predictions;
  }

  _createClass(HistoryPredictor, [{
    key: 'getPredictions',
    value: function getPredictions(parsed_input) {
      this._predictions = [];
      this._parsed_input = parsed_input;
      this._computePredictions();
      if (this._callback) {
        this._callback(new PredictionList(this._predictions, this._parsed_input));
      }
      return this._predictions;
    }
  }, {
    key: 'init',
    value: function init() {}
  }, {
    key: 'clear',
    value: function clear() {
      this._predictions = [];
    }
  }, {
    key: '_computePredictions',
    value: function _computePredictions() {
      var _this = this;

      if (this._parsed_input.trimmedText !== "") {
        _.each(this._reader._list, function (item) {
          if (_this._match(item.text)) {
            _this._predictions.push(_this._createPrediction(item));
          }
        });
        this._purge();
      }
    }
  }, {
    key: '_purge',
    value: function _purge() {
      this._predictions.splice(this._max_predictions);
    }
  }, {
    key: '_createPrediction',
    value: function _createPrediction(item) {
      var newPrediction = new Prediction(item.text, 1, item.count, this._source);
      return newPrediction;
    }
  }, {
    key: '_match',
    value: function _match(text) {
      if (this._parsed_input.original_text.length > text.length) {
        return false;
      }
      var parsed_text = new Parser(text, true);
      return this._parsed_input.compare(parsed_text);
    }
  }]);

  return HistoryPredictor;
}();

module.exports = HistoryPredictor;

},{"../../../../lib/rh":23,"./consts":35,"./input_parser":41,"./prediction":44,"./prediction_list":46}],39:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var rh = require("../../../../lib/rh");
var _ = rh._;
var search_utils = require('./utils');

var HistoryReader = function () {
  function HistoryReader() {
    _classCallCheck(this, HistoryReader);
  }

  _createClass(HistoryReader, [{
    key: "initHistory",
    value: function initHistory(list) {
      if (this._list === undefined) {
        this._list = list || [];
      }
    }
  }, {
    key: "getHistory",
    value: function getHistory() {
      return this._list || [];
    }
  }, {
    key: "_updateText",
    value: function _updateText(text, index) {
      this.getHistory().splice(index, 1);
      this.getHistory().unshift(text);
    }
  }, {
    key: "_addNewText",
    value: function _addNewText(newText) {
      this.getHistory().push(newText);
    }
  }, {
    key: "add",
    value: function add(newText) {
      var nIndex = _.findIndex(this.getHistory(), function (item) {
        return search_utils.compareNoCase(newText.text, item.text) === 0;
      });
      if (nIndex >= 0) {
        this._updateText(newText, nIndex);
      } else {
        this._addNewText(newText);
      }
    }
  }, {
    key: "delete",
    value: function _delete(searchText) {
      var nIndex = _.findIndex(this.getHistory(), function (item) {
        return search_utils.compareNoCase(searchText, item.text) === 0;
      });
      if (nIndex >= 0) {
        this.getHistory().splice(nIndex);
      }
    }
  }]);

  return HistoryReader;
}();

module.exports = new HistoryReader();

},{"../../../../lib/rh":23,"./utils":51}],40:[function(require,module,exports){
"use strict";

var _exports = {
  MAP: {
    WORD: 0,
    HASH: 1,
    COUNT: 2,
    MODEL_FILE_NO: 3,
    MODEL_INDEX: 4,
    TOPICS: 5
  },

  MODEL: {
    WORD_HASH: 0,
    COUNT: 1,
    NEXT_MODEL: 2
  },

  FIRST_PREDICTION: {
    NEXT: 0,
    PREVIOUS: 1
  }
};

module.exports = _exports;

},{}],41:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var search_utils = require('./utils');
var rh = require("../../../../../src/lib/rh");
var _ = rh._;

var InputParser = function () {
  function InputParser(text, isWholeWord, selection, isPrevious) {
    _classCallCheck(this, InputParser);

    this.isPrevious = isPrevious;
    this.selection = selection === undefined ? text.length : selection;
    var separator = this._calculateSeparator(text);
    if (!this.isPrevious) {
      this.isWholeWord = isWholeWord || this._isWholeWord(text, separator);
    }
    this.initText(text, separator);
  }

  _createClass(InputParser, [{
    key: "initText",
    value: function initText(text, separator) {
      this._computeText(text, separator);
      this.trimmedText = this.original_text.trim();
      this.words = _.compact(this.trimmedText.split(" ") || []);
      this._reverseIfPrevious();
      if (!this.isWholeWord && this.words.length > 0) {
        this._partial = this.words.splice(-1)[0];
      }
    }
  }, {
    key: "_computeText",
    value: function _computeText(text, separator) {
      this._right_text = "";
      this._left_text = "";

      if (separator === undefined) {
        separator = text.length;
      }
      this.isSplitText = !(separator === 0 || separator === text.length);
      var left_text = text.substring(0, separator);
      var right_text = text.substring(separator);

      if (this.isPrevious) {
        this.original_text = right_text;
        this._left_text = left_text.trim();
      } else {
        this.original_text = left_text;
        this._right_text = right_text.trim();
      }
    }
  }, {
    key: "equalRemaingWord",
    value: function equalRemaingWord(word) {
      if (this._left_text !== "" || this._right_text !== "") {
        var remainingWord = this._getRemainigWord();
        if (remainingWord) {
          return search_utils.compareNoCase(remainingWord, word) === 0;
        }
      }
      return false;
    }
  }, {
    key: "_getRemainigWord",
    value: function _getRemainigWord() {
      var words = this.isPrevious ? this._left_text.split(" ") : this._right_text.split(" ");

      words = words || [];
      words = _.compact(words);
      if (words.length > 0) {
        return this.isPrevious ? words[words.length - 1] : words[0];
      }
    }
  }, {
    key: "completeSuggestion",
    value: function completeSuggestion(text) {
      if (this.isPrevious) {
        return this._left_text.length === 0 ? text : this._left_text + " " + text;
      } else {
        return this._right_text.length === 0 ? text : text + " " + this._right_text;
      }
    }
  }, {
    key: "_calculateSeparator",
    value: function _calculateSeparator(text) {

      if (this.isPrevious) {
        if (this.selection === 0) {
          this.isWholeWord = true;
          return 0;
        }
        if (text.length > this.selection && text[this.selection - 1] !== " ") {
          var previousSpaceIndex = text.lastIndexOf(" ", this.selection - 1);
          this.isWholeWord = false;
          return previousSpaceIndex >= 0 ? previousSpaceIndex + 1 : 0;
        }
        this.isWholeWord = true;
      }
      return this.selection;
    }
  }, {
    key: "_reverseIfPrevious",
    value: function _reverseIfPrevious() {
      if (this.isPrevious) {
        this.words.reverse();
      }
    }
  }, {
    key: "_isWholeWord",
    value: function _isWholeWord(text, separator) {
      if (this.isPrevious) {
        if (separator === 0) {
          return true;
        }
        return text.length > separator && text[separator - 1] === " ";
      }

      return separator > 0 && text[separator - 1] === " ";
    }
  }, {
    key: "compare",
    value: function compare(other_input) {
      var start = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
      var end = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;

      end = end === undefined ? this.words.length - 1 : end;
      if (this.words.length > other_input.words.length) {
        return false;
      }
      var i = start;
      for (; i <= end; i++) {
        var word1 = this.words[i];
        var word2 = other_input.words[i];
        if (search_utils.compareNoCase(word1, word2) !== 0) {
          return false;
        }
      }
      return this.matchPartial(other_input, i);
    }
  }, {
    key: "matchPartial",
    value: function matchPartial(other_input, index) {
      if (this._partial === undefined) {
        return true;
      }
      if (other_input.words.length <= index) {
        return false;
      }
      var other_word = other_input.words[index];
      return this.comparePartial(other_word);
    }
  }, {
    key: "comparePartial",
    value: function comparePartial(word) {
      this._matchExp = new RegExp('^' + this._partial, 'i');
      return this._matchExp.test(word);
    }
  }, {
    key: "completeWord",
    value: function completeWord(next_word) {
      if (this.isWholeWord || this._partial === undefined || this._partial.length === 0) {
        return this.getTermForCompleteWord(next_word, this.trimmedText);
      } else {
        return this.getTermForPartialText(next_word);
      }
    }
  }, {
    key: "getTermForPartialText",
    value: function getTermForPartialText(next_word) {
      var partial_next_word = next_word.substring(this._partial.length, next_word.length);
      if (this.isPrevious) {
        var trimmedText = "";
        var firstSpaceIndex = this.trimmedText.indexOf(' ');
        if (firstSpaceIndex >= 0) {
          trimmedText = this.trimmedText.substring(firstSpaceIndex);
        }
        return this._partial + partial_next_word + trimmedText;
      } else {
        return this.trimmedText + partial_next_word;
      }
    }
  }, {
    key: "getTermForCompleteWord",
    value: function getTermForCompleteWord(next_word) {
      if (this.isPrevious) {
        return next_word + " " + this.trimmedText;
      } else {
        return this.trimmedText + " " + next_word;
      }
    }
  }, {
    key: "replaceLastWord",
    value: function replaceLastWord(next_word) {
      var text = this.trimmedText;
      if (this._partial !== undefined && !this.isWholeWord) {
        var index = this.trimmedText.length - this._partial.length;
        text = this.trimmedText.substring(0, index);
        text = text.trim();
      }
      return text + " " + next_word;
    }
  }, {
    key: "equalLastWord",
    value: function equalLastWord(word) {
      if (this.words.length === 0) {
        return false;
      }
      var last_word = this.words[this.words.length - 1];
      return search_utils.compareNoCase(last_word, word) === 0;
    }
  }]);

  return InputParser;
}();

module.exports = InputParser;

},{"../../../../../src/lib/rh":23,"./utils":51}],42:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var rh = require("../../../../lib/rh");
var _ = rh._;
var model = rh.model;
var search_utils = require('./utils');
var INDEX = require('./indices');
var SEARCH_CONSTS = require('./consts');
var Paths = require('../common/paths');

var Loader = function () {
  function Loader() {
    var path = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "";

    _classCallCheck(this, Loader);

    this._paths = new Paths(path);
  }

  _createClass(Loader, [{
    key: 'init',
    value: function init(callbackFn) {
      this.loadIndex(callbackFn);
      this.loadMap(callbackFn);
    }
  }, {
    key: '_isIndexLoaded',
    value: function _isIndexLoaded() {
      return this.index_data !== undefined;
    }
  }, {
    key: 'getModelCount',
    value: function getModelCount() {
      return this.index_data.Model.length;
    }
  }, {
    key: 'getMapHash',
    value: function getMapHash(hash_key) {
      return this._hash_to_word[hash_key];
    }
  }, {
    key: 'getHashes',
    value: function getHashes(input) {
      if (input !== undefined && input.length > 0) {
        return this.getAplhabetHashes(input[0]);
      }
    }
  }, {
    key: 'getAplhabetHashes',
    value: function getAplhabetHashes(alphabet) {
      if (this.map_data && alphabet.length === 1) {
        var lalphabet = alphabet.toLowerCase();
        return this.map_data[lalphabet];
      }
    }
  }, {
    key: 'getWordModel',
    value: function getWordModel(word, model_data) {
      var word_model = void 0;
      var word_hash = this._getHashForWord(word);
      if (word_hash && model_data) {
        word_model = model_data[word_hash[INDEX.MAP.MODEL_INDEX]];
      }
      return word_model;
    }
  }, {
    key: 'getCount',
    value: function getCount(word) {
      var word_hash = this._getHashForWord(word);
      if (word_hash) {
        return word_hash[INDEX.MAP.COUNT];
      }
    }
  }, {
    key: 'getModelData',
    value: function getModelData(word_hash) {
      // async call if not loaded return empty array
      var fileno = word_hash[INDEX.MAP.MODEL_FILE_NO];
      var model_index = word_hash[INDEX.MAP.MODEL_INDEX];
      var data = model.get(this._paths.getModelKey(fileno));
      if (!data) {
        this.loadModel(fileno);
      }
      return data && data[model_index];
    }
  }, {
    key: '_compareWordCount',
    value: function _compareWordCount(hash_item1, hash_item2) {
      var count1 = search_utils.getSafeElement(hash_item1, INDEX.MAP.COUNT);
      var count2 = search_utils.getSafeElement(hash_item2, INDEX.MAP.COUNT);
      if (count1 && count2) {
        return count2 - count1;
      }
      return 0;
    }
  }, {
    key: '_buildTopWords',
    value: function _buildTopWords(words) {
      words.sort(this._compareWordCount);
      words.splice(SEARCH_CONSTS.max_predictions * 100);
      this._top_words = words;
    }
  }, {
    key: 'getModelFileNo',
    value: function getModelFileNo(word) {
      var word_hash = this._getHashForWord(word);
      if (word_hash) {
        return word_hash[INDEX.MAP.MODEL_FILE_NO];
      }
    }
  }, {
    key: '_getHashForWord',
    value: function _getHashForWord(word) {
      var hash = void 0;
      var word_key = this.getHashKey(word);
      if (word_key) {
        hash = this._hash_to_word[word_key];
      }
      return hash;
    }
  }, {
    key: 'getHashKey',
    value: function getHashKey(word) {
      if (word && word.length > 0) {
        var lWord = word.toLowerCase();
        return this._word_hash[lWord];
      }
    }
  }, {
    key: 'loadIndex',
    value: function loadIndex(callbackFn) {
      var _this = this;

      if (this._isIndexLoaded() === false) {
        _.loadScript(this._paths.getIndexFilePath(), true, function () {
          _this.index_data = _.exports();
          _this.onIndexLoaded(callbackFn);
        }, true);
      } else {
        this.onIndexLoaded(callbackFn);
      }
    }
  }, {
    key: 'loadModel',
    value: function loadModel(fileNo, callbackFn) {
      var data = [];
      if (fileNo !== undefined) {
        var key = this._paths.getModelKey(fileNo);
        var _data = model.get(key);
        if (_data === undefined) {
          model.publish(key, null);

          var filepath = this._paths.getModelFilePath(fileNo);
          _.loadScript(filepath, true, this.getOnModelLoadFn(fileNo, callbackFn), true);
        } else if (_data === null && callbackFn !== undefined) {

          model.subscribe(key, callbackFn);
        } else {
          this.doCallback(callbackFn, _data, fileNo);
        }
      } else {
        this.doCallback(callbackFn, data, fileNo);
      }
    }
  }, {
    key: 'doCallback',
    value: function doCallback(callbackFn, data, fileno) {
      if (callbackFn) {
        callbackFn(data, fileno);
      }
    }
  }, {
    key: 'getOnModelLoadFn',
    value: function getOnModelLoadFn(fileNo, callbackFn) {
      var _this2 = this;

      return function () {
        var data = _.exports();
        model.publish(_this2._paths.getModelKey(fileNo), data);
        if (callbackFn) {
          callbackFn(data, fileNo);
        }
      };
    }
  }, {
    key: 'onMapLoaded',
    value: function onMapLoaded(callbackFn) {
      this.parseMap();
      if (this.index_data && callbackFn) {
        callbackFn(this);
      }
    }
  }, {
    key: 'onIndexLoaded',
    value: function onIndexLoaded(callbackFn) {
      if (this.map_data && callbackFn) {
        callbackFn(this);
      }
    }
  }, {
    key: 'parseMap',
    value: function parseMap() {
      var data = this.map_data;
      this._word_hash = {};
      this._hash_to_word = {};
      var words = [];
      for (var letter in data) {
        var words_data = data[letter];
        this._parseWordsData(words_data);
        words = words.concat(words_data);
      }
      this._buildTopWords(words);
    }
  }, {
    key: '_parseWordsData',
    value: function _parseWordsData(words_data) {
      var _this3 = this;

      _.each(words_data, function (word_data) {
        var hash_key = parseInt(word_data[INDEX.MAP.HASH]);
        if (word_data[INDEX.MAP.WORD]) {
          var word = word_data[INDEX.MAP.WORD].toString();
          _this3._word_hash[word] = hash_key;
        }
        _this3._hash_to_word[hash_key] = word_data;
      });
    }
  }, {
    key: 'isStopWord',
    value: function isStopWord(word) {
      var index = _.find(this.index_data.stopWords, function (stop_word) {
        return search_utils.compareNoCase(word, stop_word) === 0;
      });
      return index !== undefined;
    }
  }, {
    key: 'getTotalCount',
    value: function getTotalCount() {
      return this.index_data.totalCount;
    }
  }, {
    key: 'wordHashfromIndexKey',
    value: function wordHashfromIndexKey(index_key, fileno) {
      return _.find(this._hash_to_word, function (map_item) {
        return map_item[INDEX.MAP.MODEL_INDEX] === index_key && map_item[INDEX.MAP.MODEL_FILE_NO] === fileno;
      });
    }
  }, {
    key: 'loadMap',
    value: function loadMap(callbackFn) {
      var _this4 = this;

      if (this.map_data === undefined) {
        _.loadScript(this._paths.getMapFilePath(), true, function () {
          _this4.map_data = _.exports();
          _this4.onMapLoaded(callbackFn);
        }, true);
      } else {
        this.onMapLoaded(callbackFn);
      }
    }
  }, {
    key: 'top_words',
    get: function get() {
      return this._top_words;
    }
  }, {
    key: 'nGram',
    get: function get() {
      return this.index_data.nGram;
    }
  }, {
    key: 'search_model',
    get: function get() {
      return this.index_data.Model;
    }
  }, {
    key: 'search_map',
    get: function get() {
      return this.index_data.Map;
    }
  }, {
    key: 'total_count',
    get: function get() {
      return this.index_data.totalCount;
    }
  }, {
    key: 'stop_words',
    get: function get() {
      return this.index_data.stopWords;
    }
  }]);

  return Loader;
}();

module.exports = Loader;

},{"../../../../lib/rh":23,"../common/paths":33,"./consts":35,"./indices":40,"./utils":51}],43:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var rh = require("../../../../lib/rh");
var _ = rh._;
var PredictonCreator = require('./prediction_creator');
//let search_utils = require('./utils');
//let Prediction = require('./prediction');
var PredictionList = require('./prediction_list');
var search_consts = require('./consts');
var INDEX = require('./indices');

var NGramPredictor = function () {
  function NGramPredictor(_ref) {
    var loader = _ref.loader,
        level = _ref.level,
        callback = _ref.callback,
        previous = _ref.previous,
        _ref$max_predictions = _ref.max_predictions,
        max_predictions = _ref$max_predictions === undefined ? 20 : _ref$max_predictions;

    _classCallCheck(this, NGramPredictor);

    this.level = level;
    this.previous = previous;
    this._max_predictions = max_predictions;
    this.predictions = [];
    this._callback = callback;
    this._loader = loader;
    this._source = search_consts.PREDICTOR_SOURCE_ID.NGRAM_PREDICTOR;
  }

  _createClass(NGramPredictor, [{
    key: 'init',
    value: function init() {}
  }, {
    key: 'clear',
    value: function clear() {
      this._word_model = undefined;
      this._prediction_array = undefined;
      this.parsed_input = undefined;
      this.predictions = [];
    }
  }, {
    key: 'getPredictions',
    value: function getPredictions(parsed_input) {
      this.parsed_input = parsed_input;
      this.predictions = [];
      if (parsed_input !== undefined && parsed_input.words.length >= this.level) {
        this.word_index = parsed_input.words.length - this.level;
        this._word = parsed_input.words[this.word_index];
        this._loadInputModel(this._word, this._compute_word_predictions.bind(this));
      } else {
        this._onResultsComputed();
      }
    }
  }, {
    key: '_compute_word_predictions',
    value: function _compute_word_predictions(model_data) {
      this.predictions = [];
      var level = this.level;
      var word = this._word;
      var total_count = this._loader.getCount(word);
      this._word_model = this._loader.getWordModel(word, model_data);
      if (this._word_model) {
        this._prediction_array = this._get_prediction_array();
        this._compute_prediction_from_model(word, level, total_count);
      }
      this._onResultsComputed();
    }
  }, {
    key: '_onResultsComputed',
    value: function _onResultsComputed() {
      if (this._callback) {
        this._callback(new PredictionList(this.predictions, this.parsed_input), this._loader);
      }
    }
  }, {
    key: '_compute_prediction_from_model',
    value: function _compute_prediction_from_model(word, level, total_count) {
      if (this._prediction_array === undefined) {
        return;
      }

      if (this._is_my_level(level)) {
        this._compute_next_words(total_count);
      } else {
        level--;
        var next_index = this._get_word_index(level);
        var next_word = this.parsed_input.words[next_index];
        var next_word_key = this._loader.getHashKey(next_word);
        var next_word_model = this._get_next_model(this._prediction_array, next_word_key);
        if (next_word_model) {
          total_count = next_word_model[INDEX.MODEL.COUNT];
          this._prediction_array = next_word_model[INDEX.MODEL.NEXT_MODEL];
          this._compute_prediction_from_model(next_word, level, total_count);
        }
      }
    }
  }, {
    key: '_get_next_model',
    value: function _get_next_model(model_data, word_hash_key) {
      if (!word_hash_key) {
        return undefined;
      }
      var next_word_prediction = _.find(model_data, function (item) {
        return item.length > 1 && item[INDEX.MODEL.WORD_HASH] === word_hash_key;
      });
      if (next_word_prediction && next_word_prediction.length > INDEX.MODEL.NEXT_MODEL && Array.isArray(next_word_prediction)) {
        return next_word_prediction; // TODO may be needs a fix
      }
    }
  }, {
    key: '_get_word_index',
    value: function _get_word_index(level) {
      return this.parsed_input.words.length - level;
    }
  }, {
    key: '_is_my_level',
    value: function _is_my_level(level) {
      return level === 1;
    }
  }, {
    key: '_continueFn',
    value: function _continueFn() {
      return true;
    }
  }, {
    key: '_compute_next_words',
    value: function _compute_next_words(total_count) {
      var prediction_array = this._prediction_array;
      if (!(prediction_array && prediction_array.length > 0)) {
        return;
      }

      for (var i = 0; this.predictions.length < this.max_predictions && i < prediction_array.length && prediction_array[i].length > 1; i++) {
        if (!this._matches_partially(prediction_array[i])) {
          continue;
        }
        var predictions = this._create_predictions(prediction_array[i], total_count);
        this._compute_next_multi_words(predictions);
      }
    }
  }, {
    key: '_compute_next_multi_words',
    value: function _compute_next_multi_words(predictions) {
      var _this = this;

      _.each(predictions, function (prediction) {
        if (prediction !== undefined) {
          _this.predictions.push(prediction);
        }
      });
    }
  }, {
    key: '_get_word_hash',
    value: function _get_word_hash(model_item) {
      return this._loader.getMapHash(model_item[INDEX.MODEL.WORD_HASH]);
    }
  }, {
    key: '_matches_partially',
    value: function _matches_partially(prediction) {
      if (this.parsed_input.isWholeWord) {
        return true;
      }
      var word_hash = this._loader.getMapHash(prediction[INDEX.MODEL.WORD_HASH]);
      // TODO what if not a word hash ?
      if (!word_hash) {
        return false;
      }
      var word = word_hash[INDEX.MAP.WORD];
      return this.parsed_input.comparePartial(word);
    }
  }, {
    key: '_create_predictions',
    value: function _create_predictions(next_array, total_count) {
      var creator = new PredictonCreator({ loader: this._loader, model_item: next_array, total_count: total_count, parsed_input: this.parsed_input, continueFn: this._continueFn });
      return creator.getMultiPredictions(undefined, undefined, undefined, this._source);
    }
  }, {
    key: '_get_prediction_array',
    value: function _get_prediction_array() {
      // returns an array from which predictions are to be calculates
      if (this.parsed_input.isPrevious && this._word_model.length > 1) {
        return this._word_model[1];
      } else {
        return this._word_model[0];
      }
    }
  }, {
    key: '_loadInputModel',
    value: function _loadInputModel(word, callbackFn) {
      var nFileIndex = this._findFileIndex(word);
      this._loader.loadModel(nFileIndex, callbackFn);
    }
  }, {
    key: '_findFileIndex',
    value: function _findFileIndex(word) {
      return this._loader.getModelFileNo(word);
    }
  }, {
    key: 'max_predictions',
    set: function set(newValue) {
      this.max_predictions = newValue;
    },
    get: function get() {
      return this._max_predictions;
    }
  }]);

  return NGramPredictor;
}();

module.exports = NGramPredictor;

},{"../../../../lib/rh":23,"./consts":35,"./indices":40,"./prediction_creator":45,"./prediction_list":46}],44:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _utils = require('./utils');

var _utils2 = _interopRequireDefault(_utils);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Prediction = function () {
  function Prediction(term, probability, count, source) {
    _classCallCheck(this, Prediction);

    this.probability = probability;
    this.term = term;
    this.count = count;
    this.source = source;
  }

  _createClass(Prediction, [{
    key: 'merge',
    value: function merge(new_item) {
      this.probability += new_item.probability;
      this.count = Math.max(this.count, new_item.count);
    }
  }, {
    key: 'compare',
    value: function compare(other) {
      return other.probability - this.probability;
    }
  }, {
    key: 'match',
    value: function match(other) {
      return _utils2.default.compareNoCase(other.term, this.term) === 0;
    }
  }]);

  return Prediction;
}();

module.exports = Prediction;

},{"./utils":51}],45:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Prediction = require('./prediction');
var search_utils = require('./utils');
var INDEX = require('./indices');
var InputParser = require('./input_parser');
var search_consts = require('./consts');

var PredictonCreator = function () {
  function PredictonCreator(_ref) {
    var loader = _ref.loader,
        model_item = _ref.model_item,
        total_count = _ref.total_count,
        parsed_input = _ref.parsed_input,
        continueFn = _ref.continueFn;

    _classCallCheck(this, PredictonCreator);

    this._model_item = model_item;
    this.parsed_input = parsed_input || new InputParser("");
    this._init();
    this._total_count = total_count;
    this._continueFn = continueFn || this._isStopWord;
    this._nextModelFn = this._nextModel;
    this._predictions = [];
    this._multi_prediction = false;
    this._loader = loader;
  }

  _createClass(PredictonCreator, [{
    key: '_init',
    value: function _init() {
      this.term = "";
      this.probability = 1;
      this._first_word = true;
      this.isFirstLevel = false;
      this._level = 0;
    }
  }, {
    key: 'getPrediction',
    value: function getPrediction(word_hash, isFirstLevel, previous, source) {
      this.word_hash = word_hash;
      this.isFirstLevel = isFirstLevel;
      this.previous = previous;
      this.source = source;
      if (this.isFirstLevel) {
        this._appendPreviousPredictions(this._model_item);
      }
      this._appendPrediction(this._model_item, word_hash);
      return this._createPrediction();
    }
  }, {
    key: 'getMultiPredictions',
    value: function getMultiPredictions(word_hash, isFirstLevel, previous, source) {
      this._multi_prediction = true;
      this.word_hash = word_hash;
      this.isFirstLevel = isFirstLevel;
      this.previous = previous;
      this.source = source;
      if (this.isFirstLevel) {
        this._appendPreviousPredictions(this._model_item);
      }
      this._appendPrediction(this._model_item, word_hash);
      return this._predictions;
    }
  }, {
    key: 'equalRemaingWord',
    value: function equalRemaingWord(model_item) {
      var word = this._getword(model_item, this.word_hash);
      if (word) {
        if (this.parsed_input.equalRemaingWord(word)) {
          return true;
        }
      }
      return false;
    }
  }, {
    key: '_appendPreviousPredictions',
    value: function _appendPreviousPredictions(model_item) {
      var previous_item = this._getPreviousItem(model_item);
      if (!previous_item) {
        return;
      }
      var previous_probaility = this._getPreviousProbability(previous_item);
      if (previous_probaility > search_consts.minPreviousThreshold) {
        this._appendPreviousTerm(previous_item);
      }
    }
  }, {
    key: '_getPreviousItem',
    value: function _getPreviousItem(model_item) {
      var previous_items = search_utils.getFirstLevelNextModel(model_item, true);
      if (previous_items) {
        var previous_item = search_utils.getSafeElement(previous_items, 0);
        return previous_item;
      }
    }
  }, {
    key: '_appendPreviousTerm',
    value: function _appendPreviousTerm(model_item) {
      var word = this._getword(model_item);
      if (word) {
        if (this.parsed_input.equalLastWord(word)) {
          return;
        }
        this.term = this.parsed_input.replaceLastWord(word);
        this._first_word = false;
      }
    }
  }, {
    key: '_createPrediction',
    value: function _createPrediction() {
      if (this.term !== "") {
        var suggestion_text = this.parsed_input.completeSuggestion(this.term);
        return new Prediction(suggestion_text, this.probability, 1, this.source);
      }
    }
  }, {
    key: '_appendPrediction',
    value: function _appendPrediction(model_item) {
      this.probability = this.probability * this._calculateProbability(model_item);
      this._update_term(model_item);
      if (this._shouldCreatePrediction(model_item)) {
        this._predictions.push(this._createPrediction());
      }
      if (this._continueFn(model_item)) {
        var next_model = this._nextModel(model_item);
        this._total_count = this._getCount(model_item);
        this._level++;
        this._first_word = false;
        this.isFirstLevel = false;
        this.word_hash = undefined;
        if (next_model) {
          this._appendPrediction(next_model);
        }
      }
    }
  }, {
    key: '_getPreviousProbability',
    value: function _getPreviousProbability(previous_item) {
      var total_count = this._getCount(this.model_item);
      var count = search_utils.getCountfromModel(previous_item);
      return count / total_count;
    }
  }, {
    key: '_update_term',
    value: function _update_term(model_item) {
      if (this.parsed_input.isPrevious) {
        this.term = this._nextTerm(model_item) + this.term;
      } else {
        this.term = this.term + this._nextTerm(model_item);
      }
    }
  }, {
    key: '_getword',
    value: function _getword(model_item, word_hash) {
      word_hash = word_hash || this._get_word_hash(model_item);
      return search_utils.getSafeElement(word_hash, INDEX.MAP.WORD);
    }
  }, {
    key: '_get_word_hash',
    value: function _get_word_hash(model_item) {
      return this._loader.getMapHash(model_item[INDEX.MODEL.WORD_HASH]);
    }
  }, {
    key: '_nextModel',
    value: function _nextModel(model_item) {
      var next_model = void 0;
      if (this.isFirstLevel) {
        next_model = search_utils.getFirstLevelNextModel(model_item, this.previous);
      } else {
        next_model = search_utils.getNextModel(model_item);
      }
      if (next_model && next_model.length > 0) {
        return search_utils.getFirstPrediction(next_model);
      }
    }
  }, {
    key: '_nextTerm',
    value: function _nextTerm(model_item) {
      var word = this._getword(model_item, this.word_hash);
      if (word) {
        return this._first_word ? this.parsed_input.completeWord(word) : " " + word;
      }
      return "";
    }
  }, {
    key: '_calculateProbability',
    value: function _calculateProbability(model_item) {
      var count = this._getCount(model_item);
      return count / this._total_count;
    }
  }, {
    key: '_getCount',
    value: function _getCount(model_item) {
      if (this.word_hash) {
        return search_utils.getCountfromWordHash(this.word_hash);
      } else {
        return search_utils.getCountfromModel(model_item);
      }
    }
  }, {
    key: '_shouldCreatePrediction',
    value: function _shouldCreatePrediction(model_item) {

      return this._multi_prediction && !this._isStopWord(model_item) && !this.equalRemaingWord(model_item);
    }
  }, {
    key: '_isStopWord',
    value: function _isStopWord(model_item) {
      var word = this._getword(model_item, this.word_hash);
      if (!word) {
        return false;
      }
      return this._loader.isStopWord(word);
    }
  }]);

  return PredictonCreator;
}();

module.exports = PredictonCreator;

},{"./consts":35,"./indices":40,"./input_parser":41,"./prediction":44,"./utils":51}],46:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var PredictionList = function () {
  function PredictionList(list, parsed_input) {
    _classCallCheck(this, PredictionList);

    this.parsed_input = parsed_input;
    this._list = list || [];
  }

  _createClass(PredictionList, [{
    key: "isForInput",
    value: function isForInput(input, previous_input) {
      if (this.parsed_input.isPrevious) {
        return previous_input !== undefined && this.parsed_input.original_text === previous_input.original_text;
      } else {
        return this.parsed_input.original_text === input.original_text;
      }
    }
  }, {
    key: "isEmpty",
    value: function isEmpty() {
      return this._list.length === 0;
    }
  }, {
    key: "predictions",
    get: function get() {
      return this._list;
    }
  }]);

  return PredictionList;
}();

module.exports = PredictionList;

},{}],47:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Loader = require('./loader');
var rh = require("../../../../lib/rh");
var _ = rh._;
var HistoryPredictor = require('./history_predictor');
var NgramPredictor = require('./ngram_predictor');
var GeneralPredictor = require('./general_predictor');
var Corrector = require('./corrector');
var search_consts = require('./consts');

//this.processResult.bind(this)

var PredictorsCreator = function () {
  function PredictorsCreator(history_reader, processResultFn) {
    _classCallCheck(this, PredictorsCreator);

    this._history_reader = history_reader;
    this._processResultFn = processResultFn;
  }

  _createClass(PredictorsCreator, [{
    key: '_createLoaders',
    value: function _createLoaders() {
      return _.map(this.projectPaths, function (path) {
        return new Loader(path);
      });
    }
  }, {
    key: 'createPredictors',
    value: function createPredictors(addFn, prevAddFn, addCorrectorFn) {
      var _this = this;

      this._addFn = addFn;
      this._prevaddFn = prevAddFn;
      this._addCorrectorFn = addCorrectorFn;
      var history_predictor = new HistoryPredictor(this._history_reader, this._processResultFn);
      this._addFn(history_predictor);

      var loaders = this._createLoaders();
      _.each(loaders, function (loader) {
        loader.init(_this.addPredictors.bind(_this));
      });
    }
  }, {
    key: 'addPredictors',
    value: function addPredictors(loader) {
      for (var i = 1; i <= loader.nGram; i++) {

        var ngp = new NgramPredictor({ loader: loader, level: i, callback: this._processResultFn });
        ngp.init();
        this._addFn(ngp);
      }
      for (var _i = 1; _i <= search_consts.previousnGram; _i++) {
        var _ngp = new NgramPredictor({ loader: loader, level: _i, callback: this._processResultFn, previous: true });
        _ngp.init();
        this._prevaddFn(_ngp);
      }

      var general_predictor = new GeneralPredictor(this._processResultFn, loader);
      this._addFn(general_predictor);

      var corrector = new Corrector(loader, this._processResultFn);
      this._addCorrectorFn(corrector);
    }
  }, {
    key: 'projectPaths',
    get: function get() {
      return rh.model.get(rh.consts('KEY_PROJECT_LIST'));
    }
  }]);

  return PredictorsCreator;
}();

module.exports = PredictorsCreator;

},{"../../../../lib/rh":23,"./consts":35,"./corrector":36,"./general_predictor":37,"./history_predictor":38,"./loader":42,"./ngram_predictor":43}],48:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var rh = require("../../../../lib/rh");
var _ = rh._;
var consts = rh.consts;
var history_reader = require('./history_reader');
var InputParser = require('./input_parser');
var PredictonMerger = require('../common/merger');
var TopicCounter = require('./topic_counter');
var search_utils = require('./utils');
var search_consts = require('./consts');
var Seamaphore = require('./../../../common/counting_seamaphore');
var PredictorCreator = require('./predictors_creator');
var SearchHandler = require('../topic/handler');

var max_predictions = 5;

var SearchController = function () {
  function SearchController(widget) {
    var _this = this;

    _classCallCheck(this, SearchController);

    this.widget = widget;
    this._predictors = [];
    this._correctors = [];
    this._previous_predictors = [];
    this.initHandleKeyHash();
    this.max_predictions = max_predictions;
    this.predicton_merger = new PredictonMerger([]);
    widget.model.subscribe(consts('KEY_PROJECT_LIST'), function () {
      _this.init();
    });
    this.search_handler = new SearchHandler(widget);
  }

  _createClass(SearchController, [{
    key: 'init',
    value: function init() {
      var history_list = rh.storage.fetch(consts('PREV_SEARCH_KEY'));
      history_reader.initHistory(history_list);
      this.create_predictors();
      this.widget.model.csubscribe('EVT_CLOSE_SEARCH_SUGGESTION', this.closeSuggestions.bind(this));
      this.widget.model.csubscribe('EVT_SEARCH_TERM', this.search.bind(this));
    }
  }, {
    key: 'search',
    value: function search() {
      var text = this.widget.get(consts('KEY_SEARCH_TERM'));
      this.search_handler.showSearchResults(text);
    }
  }, {
    key: 'create_predictors',
    value: function create_predictors() {
      this._predictors = [];
      var predictor_creator = new PredictorCreator(history_reader, this.processResult.bind(this));
      predictor_creator.createPredictors(this.addPredictor.bind(this), this.addPrevPredictor.bind(this), this.addCorrector.bind(this));
    }
  }, {
    key: 'addPredictor',
    value: function addPredictor(predictor) {
      this._predictors.push(predictor);
    }
  }, {
    key: 'addPrevPredictor',
    value: function addPrevPredictor(predictor) {
      this._previous_predictors.push(predictor);
    }
  }, {
    key: 'addCorrector',
    value: function addCorrector(corrector) {
      this._correctors.push(corrector);
    }
  }, {
    key: 'showSuggestions',
    value: function showSuggestions(keyEvt) {
      this._initSuggestions(keyEvt);
      this._calculateSugguestions();
    }
  }, {
    key: '_initSuggestions',
    value: function _initSuggestions(keyEvt) {
      this._initResult();
      this._initInputs(keyEvt);
      this._resutSeamaphore = new Seamaphore(this.onResultComplete.bind(this));
    }
  }, {
    key: '_initInputs',
    value: function _initInputs(keyEvt) {
      this.parsed_input = new InputParser(keyEvt.text, false, keyEvt.selStart, false);
      if (search_utils.isPrevious(keyEvt)) {
        this._previous_input = new InputParser(keyEvt.text, false, keyEvt.selStart, true);
      }
    }
  }, {
    key: '_calculateSugguestions',
    value: function _calculateSugguestions() {
      var _this2 = this;

      this._resutSeamaphore.wait(this._predictorCount());
      _.each(this._predictors, function (predictor) {
        predictor.getPredictions(_this2.parsed_input);
      });
      if (this._previous_input) {
        _.each(this._previous_predictors, function (predictor) {
          predictor.getPredictions(_this2._previous_input);
        });
      }
    }
  }, {
    key: '_clearPredictors',
    value: function _clearPredictors() {
      _.each(this._predictors, function (predictor) {
        predictor.clear();
      });
      _.each(this._previous_predictors, function (predictor) {
        predictor.clear();
      });
      _.each(this._correctors, function (corrector) {
        corrector.clear();
      });
    }
  }, {
    key: '_predictorCount',
    value: function _predictorCount() {
      var count = this._predictors.length;
      if (this._previous_input) {
        count += this._previous_predictors.length;
      }
      return count;
    }
  }, {
    key: '_initResult',
    value: function _initResult() {
      if (this.predicton_merger) {
        this.predicton_merger.clear();
      }
      this.widget.publish("selected", undefined);
      this._previous_input = undefined;
      this._computing_correction = false;
    }
  }, {
    key: '_clearResult',
    value: function _clearResult() {
      this._resetMovement();
      this._previous_input = undefined;
      this.parsed_input = undefined;
      this._resutSeamaphore = undefined;
      this._clearPredictors();
    }
  }, {
    key: 'isSuggestionsOpen',
    value: function isSuggestionsOpen() {
      var predictions = this.widget.get(consts("SEARCH_RESULTS_KEY"));
      return predictions && predictions.length > 0;
    }
  }, {
    key: 'processResult',
    value: function processResult(predictionList, loader) {
      if (!predictionList.isForInput(this.parsed_input, this._previous_input)) {
        return;
      }
      if (!predictionList.isEmpty()) {
        this.predicton_merger.merge(predictionList.predictions);
        var counter = new TopicCounter(loader);
        this.predictions = counter.computeCounts(this.predictions, this.parsed_input);
      }
      this._resutSeamaphore.signal();
    }
  }, {
    key: 'onResultComplete',
    value: function onResultComplete() {
      if (this.needCorrection()) {
        this.doCorrection();
      } else {
        this.predictions.splice(this.max_predictions);
        this.widget.publish(consts("SEARCH_RESULTS_KEY"), this.predictions);
        this._clearResult();
      }
    }
  }, {
    key: 'needCorrection',
    value: function needCorrection() {
      return !this._computing_correction && this.predictions.length === 0 && this.parsed_input.trimmedText !== "";
    }
  }, {
    key: 'doCorrection',
    value: function doCorrection() {
      var _this3 = this;

      this._computing_correction = true;
      this._resutSeamaphore = new Seamaphore(this.onResultComplete.bind(this));
      this._resutSeamaphore.wait(this._correctors.length);
      _.each(this._correctors, function (corrector) {
        corrector.getCorrections(_this3.parsed_input);
      });
    }
  }, {
    key: 'canDelete',
    value: function canDelete(id) {
      var prediction = this.predictions[id];
      if (prediction === undefined) {
        return false;
      }
      return prediction.source === search_consts.PREDICTOR_SOURCE_ID.HISTORY_PREDICTOR;
    }
  }, {
    key: 'handleDelete',
    value: function handleDelete(id) {
      var prediction = this.predictions[id];
      this._deleteFromHistory(prediction.term);
      this._removePrediction(id);
      this.widget.publish("history_deleted", true);
    }
  }, {
    key: '_removePrediction',
    value: function _removePrediction(id) {
      this.predictions.splice(id, 1);
      this.widget.publish(consts("SEARCH_RESULTS_KEY"), this.predictions);
    }
  }, {
    key: 'handleClick',
    value: function handleClick(id) {
      var history_deleted = this.widget.get("history_deleted");
      if (history_deleted) {
        return;
      }
      var prediction = this.predictions[id];
      if (prediction === undefined) {
        return;
      }

      var new_text = prediction.term;
      this._addToHistory(new_text);
      this.widget.publish(consts('KEY_SEARCH_TERM'), new_text);
      this.widget.publish(rh.consts('EVT_SEARCH_TERM'), true);
    }
  }, {
    key: 'handleFocusOut',
    value: function handleFocusOut(key, focus_key) {
      var history_deleted = this.widget.get("history_deleted");
      if (!history_deleted) {
        this.widget.publish(key, false);
      } else {
        this.widget.publish("history_deleted", false);
        this.widget.publish(focus_key, true);
      }
    }
  }, {
    key: 'getFirstSuggestionIndex',
    value: function getFirstSuggestionIndex(length, down) {
      return down ? 0 : length - 1;
    }
  }, {
    key: 'getNextSuggestionIndex',
    value: function getNextSuggestionIndex(curr_selected, length, down) {
      var move = down ? 1 : length - 1;
      curr_selected = curr_selected === undefined ? 0 : curr_selected;
      curr_selected = (curr_selected + move) % length;
      return curr_selected;
    }
  }, {
    key: 'handleArrowKey',
    value: function handleArrowKey(keyEvt) {
      var curr_selected = this.widget.get("selected");
      var down = keyEvt.keyCode === 40;
      var length = this.getPredictionsLength();
      if (length > 0) {
        if (curr_selected === undefined) {
          curr_selected = this.getFirstSuggestionIndex(length, down);
        } else {
          curr_selected = this.getNextSuggestionIndex(curr_selected, length, down);
        }
        this.widget.publish("selected", curr_selected);
        var new_text = this.getNewInputText(this.results[curr_selected]);
        this.widget.publish(consts('KEY_SEARCH_TERM'), new_text);
      }
    }
  }, {
    key: 'getNewInputText',
    value: function getNewInputText(prediction) {
      return prediction.term;
    }
  }, {
    key: 'getPredictionsLength',
    value: function getPredictionsLength() {
      var length = void 0;
      this.results = this.widget.get(consts("SEARCH_RESULTS_KEY"));
      if (this.results) {
        length = this.results.length;
      }
      return length;
    }
  }, {
    key: 'closeSuggestions',
    value: function closeSuggestions() {
      this._clearResult();
      this.widget.publish("selected", undefined);
      this.original_parsed_input = undefined;
      this.widget.publish(consts("SEARCH_RESULTS_KEY"), []);
    }
  }, {
    key: '_deleteFromHistory',
    value: function _deleteFromHistory(text) {
      history_reader.delete(text);
      this._saveHistory();
    }
  }, {
    key: '_addToHistory',
    value: function _addToHistory(text) {
      if (text && text !== "") {
        history_reader.add({
          text: text.trim(),
          count: 10
        }); // TODO change
        this._saveHistory();
      }
    }
  }, {
    key: '_saveHistory',
    value: function _saveHistory() {
      rh.storage.persist(consts('PREV_SEARCH_KEY'), history_reader.getHistory());
    }
  }, {
    key: 'handleShowSuggestion',
    value: function handleShowSuggestion(keyEvt) {
      if (keyEvt.text === "" || search_utils.shouldShowSuggestion(keyEvt) === false) {
        this.closeSuggestions();
      } else {
        this.showSuggestions(keyEvt);
      }
    }
  }, {
    key: 'handleReturn',
    value: function handleReturn(keyEvt) {
      if (keyEvt.text !== "") {
        this._addToHistory(keyEvt.text);
        this.closeSuggestions();
        this.widget.publish(consts('KEY_SEARCH_TERM'), keyEvt.text);
        this.widget.publish(consts('EVT_SEARCH_TERM'), true);
      }
    }
  }, {
    key: '_isMovementKey',
    value: function _isMovementKey(keyCode) {
      return [38, 39, 40].indexOf(keyCode) >= 0;
    }
  }, {
    key: '_resetMovement',
    value: function _resetMovement() {
      this.original_parsed_input = undefined;
      this.widget.publish("selected", undefined);
    }
  }, {
    key: '_isHandlingCursorMove',
    value: function _isHandlingCursorMove() {
      var curr_selected = this.widget.get("selected");
      return curr_selected !== undefined;
    }
  }, {
    key: 'initHandleKeyHash',
    value: function initHandleKeyHash() {
      this.handle_key_hash = {
        up: this.handleArrowKey.bind(this),
        down: this.handleArrowKey.bind(this),
        backspace: this.handleBackSpace.bind(this),
        return: this.handleReturn.bind(this),
        default: this.handleShowSuggestion.bind(this),
        escape: this.handleEscape.bind(this),
        right: this.handleRight.bind(this)
      };
    }
  }, {
    key: 'handleRight',
    value: function handleRight(keyEvt) {
      if (!this._isHandlingCursorMove()) {
        this._resetMovement();
        return this.handleShowSuggestion(keyEvt);
      }
      if (search_utils.shouldAppendSpace(keyEvt)) {
        keyEvt.text += " ";
        keyEvt.selStart += 1;
        this.widget.publish(consts('KEY_SEARCH_TERM'), keyEvt.text);
      }
      this._resetMovement();
      this.handleShowSuggestion(keyEvt);
      return false;
    }
  }, {
    key: 'handleBackSpace',
    value: function handleBackSpace(keyEvt) {
      return this.handleShowSuggestion(keyEvt);
    }
  }, {
    key: 'handleEscape',
    value: function handleEscape() {
      this.closeSuggestions();
    }
  }, {
    key: 'handleKey',
    value: function handleKey(event) {

      var keyCode = event.keyCode;
      var keyEvt = {
        keyCode: keyCode,
        selStart: event.target.selectionStart,
        text: event.target.value
      };
      if (!this._isMovementKey(keyCode)) {
        this._resetMovement();
      }
      var index = _.getKeyIndex(keyCode);

      if (index === undefined) {
        return true;
      }
      var handleFn = this.handle_key_hash[index];
      if (handleFn) {
        return handleFn(keyEvt);
      }
    }
  }, {
    key: 'predictions',
    get: function get() {
      return this.predicton_merger.items;
    },
    set: function set(predictions) {
      this.predicton_merger = new PredictonMerger(predictions);
    }
  }]);

  return SearchController;
}();

rh.controller('SearchController', SearchController);

},{"../../../../lib/rh":23,"../common/merger":32,"../topic/handler":52,"./../../../common/counting_seamaphore":24,"./consts":35,"./history_reader":39,"./input_parser":41,"./predictors_creator":47,"./topic_counter":50,"./utils":51}],49:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var SortedSet = function () {
  function SortedSet(set) {
    _classCallCheck(this, SortedSet);

    this._set = set || [];
    this._initialised = false;
  }

  _createClass(SortedSet, [{
    key: "intersect",
    value: function intersect(other) {
      if (!Array.isArray(other)) {
        other = other.set;
      }
      var new_set = [];
      var count = 0;
      var i = 0;var j = 0;
      for (; i < this._set.length && j < other.length;) {
        if (this._set[i] < other[j]) {
          i++;
        } else if (this._set[i] > other[j]) {
          j++;
        } else {
          new_set[count++] = this._set[i];
          i++;j++;
        }
      }
      this._set = new_set;
    }
  }, {
    key: "intersectOrSet",
    value: function intersectOrSet(other) {
      if (this._initialised) {
        this.intersect(other);
      } else {
        if (!Array.isArray(other)) {
          other = other.set;
        }
        this.set = other;
        this._initialised = true;
      }
    }
  }, {
    key: "intersectCount",
    value: function intersectCount(other) {
      if (!Array.isArray(other)) {
        other = other.set;
      }
      var count = 0;
      var i = 0;
      var j = 0;
      for (; i < this._set.length && j < other.length;) {
        if (this._set[i] < other[j]) {
          i++;
        } else if (this._set[i] > other[j]) {
          j++;
        } else {
          count++;
          i++;j++;
        }
      }
      return count;
    }
  }, {
    key: "set",
    set: function set(_set) {
      this._set = _set || [];
    },
    get: function get() {
      return this._set;
    }
  }, {
    key: "length",
    get: function get() {
      return this._set.length;
    }
  }]);

  return SortedSet;
}();

module.exports = SortedSet;

},{}],50:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var SortedSet = require('./sorted_set');
var Parser = require('./input_parser');
var Prediction = require('./prediction');
var rh = require("../../../../lib/rh");
var _ = rh._;
var INDEX = require("./indices");

var TopicCounter = function () {
  function TopicCounter(loader) {
    _classCallCheck(this, TopicCounter);

    this.newPredictions = [];
    this.predictionSet = new SortedSet();
    this.inputSet = new SortedSet();
    this._loader = loader;
  }

  _createClass(TopicCounter, [{
    key: 'computeCounts',
    value: function computeCounts(predictions, parsed_input) {
      var _this = this;

      this.newPrediction = [];
      this.parsed_input = parsed_input;
      _.each(predictions, function (prediction) {
        _this.addUpdatedPrediction(prediction);
      });
      return this.newPredictions;
    }
  }, {
    key: 'addUpdatedPrediction',
    value: function addUpdatedPrediction(prediction) {
      var count = 1;
      if (this._loader !== undefined) {
        this.createPredictionSet(prediction);
        count = this.computeTopicCount();
      }
      if (count > 0) {
        var newPrdiction = new Prediction(prediction.term, prediction.probability, count, prediction.source);
        this.newPredictions.push(newPrdiction);
      }
    }
  }, {
    key: 'computeTopicCount',
    value: function computeTopicCount() {
      return this.predictionSet.set.length;
    }
  }, {
    key: 'createPredictionSet',
    value: function createPredictionSet(prediction) {
      var _this2 = this;

      this.predictionSet = new SortedSet();
      var parsed_prediction = new Parser(prediction.term, true);
      _.each(parsed_prediction.words, function (word, index) {
        _this2._addWordToSet(word, _this2.predictionSet, index);
      });
    }
  }, {
    key: 'initInput',
    value: function initInput(parsed_input) {
      var _this3 = this;

      this.inputSet = new SortedSet();
      _.each(parsed_input.words, function (word) {
        _this3._addWordToSet(word, _this3.inputSet);
      });
    }
  }, {
    key: '_addWordToSet',
    value: function _addWordToSet(word, set) {
      if (this._loader.isStopWord(word)) {
        return;
      }
      var wordHash = this._loader._getHashForWord(word);
      if (wordHash && wordHash.length > INDEX.MAP.TOPICS) {
        set.intersectOrSet(wordHash[INDEX.MAP.TOPICS]);
      }
    }
  }]);

  return TopicCounter;
}();

module.exports = TopicCounter;

},{"../../../../lib/rh":23,"./indices":40,"./input_parser":41,"./prediction":44,"./sorted_set":49}],51:[function(require,module,exports){
(function (global){
'use strict';

var INDEX = require('./indices');

var _exports = {
  getNextModel: function getNextModel(model_item) {

    if (model_item && Array.isArray(model_item) && model_item.length > INDEX.MODEL.NEXT_MODEL) {
      return model_item[INDEX.MODEL.NEXT_MODEL];
    }
  },
  getFirstLevelNextModel: function getFirstLevelNextModel(model_item, bprevious) {
    if (model_item && Array.isArray(model_item)) {
      if (!bprevious && model_item.length > INDEX.FIRST_PREDICTION.NEXT) {
        return model_item[INDEX.FIRST_PREDICTION.NEXT];
      }
      if (bprevious && model_item.length > INDEX.FIRST_PREDICTION.PREVIOUS) {
        return model_item[INDEX.FIRST_PREDICTION.PREVIOUS];
      }
    }
  },

  getFirstPrediction: function getFirstPrediction(model_item) {
    if (model_item && Array.isArray(model_item) && model_item.length > 0 && Array.isArray(model_item[0])) {
      return model_item[0];
    }
  },
  compareNoCase: function compareNoCase(word1, word2) {
    if (global.compare !== undefined) {
      return global.compare(word1, word2);
    } else {
      return word1 === word2 ? 0 : -1;
    }
  },
  hammingDistance: function hammingDistance(word1, word2) {
    var minLength = Math.min(word1.length, word2.length);
    var hammingDistance = 0;
    for (var i = 0; i < minLength; i++) {
      if (word1[i] !== word2[i]) {
        hammingDistance++;
      }
    }
    if (word1.length > minLength) {
      hammingDistance += word1.length - minLength;
    }
    return hammingDistance;
  },
  isPrevious: function isPrevious(keyEvt) {
    return keyEvt.selStart < keyEvt.text.length;
  },
  shouldShowSuggestion: function shouldShowSuggestion(keyEvt) {
    var text = keyEvt.text;
    var selStart = keyEvt.selStart;
    if (selStart === 0 || selStart === text.length) {
      return true;
    }
    if (text.length > 0) {
      // if cursor is before the end
      return text[selStart] === ' ' || text[selStart - 1] === ' ';
    }
    return false;
  },
  shouldAppendSpace: function shouldAppendSpace(keyEvt) {
    var text = keyEvt.text;
    var selStart = keyEvt.selStart;
    if (text.length > 0 && selStart === text.length) {
      //cusror at last
      return text[text.length - 1] !== " ";
    }
    return false;
  },
  getSafeElement: function getSafeElement(arr, index) {
    if (arr && Array.isArray(arr) && arr.length > index) {
      return arr[index];
    }
  },
  getCountfromModel: function getCountfromModel(model_item) {
    if (Array.isArray(model_item) && model_item.length > INDEX.MODEL.COUNT) {
      return model_item[INDEX.MODEL.COUNT];
    }
    return 0;
  },
  getCountfromWordHash: function getCountfromWordHash(word_hash) {
    if (Array.isArray(word_hash) && word_hash.length > INDEX.MAP.COUNT) {
      return word_hash[INDEX.MAP.COUNT];
    }
    return 0;
  }
};

module.exports = _exports;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./indices":40}],52:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var QueryProcessor = require('./query/processor');
var rh = require("../../../../lib/rh");
var _ = rh._;
var consts = rh.consts;
var Loader = require('./query/loader');
var ResultMerger = require('../common/merger');
var Seamaphore = require('../../../common/counting_seamaphore');
var SearchResult = require('./result');

module.exports = function () {
  function SearchHandler(widget) {
    var _this = this;

    var max_results = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 20;

    _classCallCheck(this, SearchHandler);

    this.widget = widget;
    this.initDone = false;
    this.max_results = max_results;
    this.queryProcessors = [];
    this.merger = new ResultMerger([]);
    this._resutSeamaphore = new Seamaphore(this.onResultComplete.bind(this));
    this.widget.model.subscribe(consts('KEY_PROJECT_LIST'), function () {
      _this.init();
    });
  }

  _createClass(SearchHandler, [{
    key: 'init',
    value: function init() {
      var _this2 = this;

      if (!this.initDone) {
        var loaders = this._createLoaders();
        _.each(loaders, function (loader, id) {
          loader.init(id, _this2.addProcessors.bind(_this2));
        });
        this.initDone = true;
      }
    }
  }, {
    key: 'addProcessors',
    value: function addProcessors(loader) {
      this.queryProcessors.push(new QueryProcessor(loader));
    }
  }, {
    key: '_createLoaders',
    value: function _createLoaders() {
      return _.map(this.projectPaths, function (path) {
        return new Loader(path);
      });
    }
  }, {
    key: 'showSearchResults',
    value: function showSearchResults(text) {
      var _this3 = this;

      var isNewQuery = _.find(this.queryProcessors, function (processor) {
        return processor.isNewQuery(text, _this3.searchOpts);
      });
      if (isNewQuery) {
        this.merger = new ResultMerger([]);
        this._resutSeamaphore = new Seamaphore(this.onResultComplete.bind(this));
        this._resutSeamaphore.wait(this.processorCount
        //rh.model.publish(rh.consts('EVT_SEARCH_IN_PROGRESS'), true, {sync: true});
        //rh.model.publish(rh.consts('KEY_SEARCH_PROGRESS'), 0, {sync: true});
        );_.each(this.queryProcessors, function (processor) {
          processor.search(text, _this3.searchOpts, _this3.topicCallback.bind(_this3), _this3.onSearchResults.bind(_this3));
          var glossaryResult = processor.searchGlossary(text);
          _this3.processGlossaryResults(text, glossaryResult);
        });
      }
    }
  }, {
    key: 'onSearchResults',
    value: function onSearchResults(text, searchResult) {
      this.processTopicsResults(text, searchResult);
      this._resutSeamaphore.signal();
    }
  }, {
    key: 'onResultComplete',
    value: function onResultComplete() {
      this.widget.publish(rh.consts('EVT_SEARCH_IN_PROGRESS'), false, {
        sync: true
      });
      var resultsParams = _.mapToEncodedString(_.extend({
        rhsearch: this.text /*, { rhsyns: searchResults.syns }*/ }));
      this.widget.publish(consts('KEY_SEARCH_RESULT_PARAMS'), resultsParams);
      this.widget.publish('.p.searchresults', this.merger.items);
    }
  }, {
    key: 'topicCallback',
    value: function topicCallback(id, summary, url) {
      this.widget.publish('.p.searchsummary' + id, summary);
      this.widget.publish('.p.searchurl' + id, url);
    }
  }, {
    key: 'processGlossaryResults',
    value: function processGlossaryResults(text, glossary_result) {
      var term = glossary_result && Object.keys(glossary_result)[0];
      this.widget.publish(consts('KEY_GLOSSARY_RESULT_TERM'), term);
      this.widget.publish(consts('KEY_GLOSSARY_RESULT'), glossary_result[term]);
    }
  }, {
    key: 'processTopicsResults',
    value: function processTopicsResults(text, topicResults) {
      this.text = text;
      var processedResult = _.map(topicResults, function (result) {
        return new SearchResult(result);
      });
      this.merger.merge(processedResult);
    }
  }, {
    key: 'projectPaths',
    get: function get() {
      return rh.model.get(rh.consts('KEY_PROJECT_LIST'));
    }
  }, {
    key: 'processorCount',
    get: function get() {
      return this.queryProcessors.length;
    }
  }, {
    key: 'searchOpts',
    get: function get() {
      return {
        andSearch: rh.model.get(rh.consts('KEY_AND_SEARCH')) === '1',
        cbt: rh.model.cget('KEY_TAG_EXPRESSION'),
        origin: rh.model.cget('KEY_TOPIC_ORIGIN')
      };
    }
  }]);

  return SearchHandler;
}();

},{"../../../../lib/rh":23,"../../../common/counting_seamaphore":24,"../common/merger":32,"./query/loader":56,"./query/processor":57,"./result":60}],53:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

module.exports = function () {
  function SearchMetadata(data) {
    _classCallCheck(this, SearchMetadata);

    this.data = JSON.parse(data);
  }

  _createClass(SearchMetadata, [{
    key: "getTopicData",
    value: function getTopicData(id) {
      return this.topicData[id];
    }
  }, {
    key: "getTopicSummary",
    value: function getTopicSummary(id) {
      return this.topicData[id] && this.topicData[id].summary;
    }
  }, {
    key: "getTopicNextId",
    value: function getTopicNextId(id) {
      return this.topicData[id] && this.topicData[id].next;
    }
  }, {
    key: "settings",
    get: function get() {
      return this.data.settings;
    }
  }, {
    key: "topicData",
    get: function get() {
      return this.data.metadata;
    }
  }, {
    key: "context",
    get: function get() {
      return this.settings.context;
    }
  }, {
    key: "fields",
    get: function get() {
      return this.settings.fields;
    }
  }]);

  return SearchMetadata;
}();

},{}],54:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var rh = require("../../../../../lib/rh");
var _ = rh._;

module.exports = function () {
  function CbtFilter(fields, origin, tagExprs) {
    _classCallCheck(this, CbtFilter);

    this.fileds = fields;
    this.origin = origin;
    this.tagExprs = tagExprs;
  }

  _createClass(CbtFilter, [{
    key: "filter",
    value: function filter(itemList) {
      var _this = this;

      return _.reduce(itemList, function (filtered, item) {
        return filtered || _this._isFilterd(item);
      }, false);
    }
  }, {
    key: "_isFilterd",
    value: function _isFilterd(item) {
      var cbt = this.getCbt(item);
      return cbt && this._isFilteredCbt(cbt);
    }
  }, {
    key: "_isFilteredCbt",
    value: function _isFilteredCbt(cbt) {
      var _this2 = this;

      var ids = cbt.split(';');
      return !_.any(ids, function (id) {
        return _.evalTagExpression(id, _this2.tagExprs, _this2.origin);
      });
    }
  }, {
    key: "getCbt",
    value: function getCbt(item) {
      return item && item.attributes && item.attributes.length > 0 && _.map(item.attributes, function (attr) {
        return attr.value;
      }).join(";");
    }
  }]);

  return CbtFilter;
}();

},{"../../../../../lib/rh":23}],55:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var lunr = require('lunr');
var Synonymns = require('../../common/synonymns');
var rh = require("../../../../../lib/rh");
var _ = rh._;

module.exports = function () {
  function SearchDb(content, settings) {
    _classCallCheck(this, SearchDb);

    this.init(content, settings);
  }

  _createClass(SearchDb, [{
    key: 'init',
    value: function init(content) {
      var settings = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

      this.settings = settings;
      this.processSyn();
      this.registerFunctions();
      this.setTokenizer();
      this.db = lunr.Index.load(content);
    }
  }, {
    key: 'registerFunctions',
    value: function registerFunctions() {
      var pipelineFunction = this.replaceSynonymn.bind(this);
      var addQueryFunction = this.addQuery.bind(this);

      lunr.Pipeline.registerFunction(pipelineFunction, 'replaceSynonymn');
      lunr.Pipeline.registerFunction(addQueryFunction, 'addQuery');
    }
  }, {
    key: 'setTokenizer',
    value: function setTokenizer() {
      lunr.tokenizer.separator = /[\s\.\-\'\,\n;\:\\\/\"]+/;
    }
  }, {
    key: 'processSyn',
    value: function processSyn() {
      var synonymns_words = this.settings && this.settings.synonyms || {};
      var synonyms = new Synonymns(synonymns_words);
      this.settings.rootWords = synonyms.rootWords;
    }
  }, {
    key: 'addQuery',
    value: function addQuery(token) {
      var word = token.toString();
      this.queryWords.push(word);
      this.queryWords = _.unique(this.queryWords);
      return token;
    }
  }, {
    key: 'replaceSynonymn',
    value: function replaceSynonymn(token) {
      var _this = this;

      var word = token.toString();
      var root = this.settings && this.settings.rootWords && this.settings.rootWords[word];
      if (root && root !== word) {
        return token.update(function () {
          return _this.settings.rootWords[word];
        });
      } else {
        return token;
      }
    }
  }, {
    key: 'addStopWords',
    value: function addStopWords(index, stopWords) {
      if (stopWords) {
        var stopWordFilter = lunr.generateStopWordFilter(stopWords);
        index.pipeline.before(lunr.stopWordFilter, stopWordFilter);
        index.pipeline.remove(lunr.stopWordFilter);
      }
    }
  }, {
    key: 'search',
    value: function search(query) {
      var _this2 = this;

      this.queryWords = [];
      var params = query.getParams(this.isStopWord.bind(this)).trim();
      var search_results = rh._.isEmptyString(params) ? [] : this.db.search(params);
      return query.opts ? _.filter(search_results, function (result) {
        return _this2.match(result, query.opts);
      }) : search_results;
    }
  }, {
    key: 'match',
    value: function match(result, opts) {
      var _this3 = this;

      var retVal = true;
      if (opts.andSearch) {
        var matchingWords = result && result.matchData.metadata || [];
        _.each(this.queryWords, function (word) {
          if (!matchingWords[word] && !_this3.isStopWord(word)) {
            retVal = false;
          }
        });
      }
      return retVal;
    }
  }, {
    key: 'isStopWord',
    value: function isStopWord(word) {
      return this.settings.stopWords.indexOf(word.toLowerCase()) !== -1;
    }
  }, {
    key: 'searchGlossary',
    value: function searchGlossary(query) {
      var _this4 = this;

      var glossary = this.settings && this.settings.glossary || {};
      var queryTokens = this.getRootTokens(query);
      var gossaryResults = _.reduce(glossary, function (result, definition, term) {
        var gloTokens = _this4.getRootTokens(term);
        if (queryTokens.length === gloTokens.length && _this4.matchTokens(queryTokens, gloTokens)) {
          result[term] = definition;
        }
        return result;
      }, {});
      return gossaryResults;
    }
  }, {
    key: 'matchTokens',
    value: function matchTokens(set1, set2) {
      var matched = true;
      _.each(set1, function (term1, index) {
        if (term1 !== set2[index]) {
          matched = false;
        }
      });
      return matched;
    }
  }, {
    key: 'getRootTokens',
    value: function getRootTokens(text) {
      var _this5 = this;

      var tokens = lunr.tokenizer(text);
      return _.map(tokens, function (token) {
        var word = token.toString();
        return _this5.settings.rootWords[word] || word;
      });
    }
  }, {
    key: 'export',
    value: function _export() {
      return this.db.toJSON();
    }
  }]);

  return SearchDb;
}();

},{"../../../../../lib/rh":23,"../../common/synonymns":34,"lunr":22}],56:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var rh = require("../../../../../lib/rh");
var _ = rh._;
var Paths = require('../../common/paths');
module.exports = function () {
  function SearchLoader() {
    var path = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "";

    _classCallCheck(this, SearchLoader);

    this._paths = new Paths(path);
  }

  _createClass(SearchLoader, [{
    key: "init",
    value: function init(id, callbackFn) {
      this.id = id;
      callbackFn(this);
    }
  }, {
    key: "loadDB",
    value: function loadDB(callbackFn) {
      var path = this._paths.getSearchDbFilePath();
      _.loadScript(path, true, function () {
        var data = _.exports();
        if (callbackFn) {
          callbackFn(data);
        }
      }, true);
    }
  }, {
    key: "getId",
    value: function getId(id) {
      return this.id + "_" + id;
    }
  }, {
    key: "getUrl",
    value: function getUrl(url) {
      return this._paths._getRelativePath(url);
    }
  }, {
    key: "loadMetaData",
    value: function loadMetaData(callbackFn) {
      var path = this._paths.getMetadataFilePath();
      _.loadScript(path, true, function () {
        var data = _.exports();
        if (callbackFn) {
          callbackFn(data);
        }
      }, true);
    }
  }, {
    key: "loadTextData",
    value: function loadTextData(query, id, callbackFn) {
      var path = this._paths.getTextFilePath(id);
      _.loadScript(path, true, function () {
        var data = _.exports();
        if (callbackFn) {
          callbackFn(query, id, data);
        }
      }, true);
    }
  }]);

  return SearchLoader;
}();

},{"../../../../../lib/rh":23,"../../common/paths":33}],57:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var SearchDb = require('./db');
var Query = require('./query');
var Summary = require('./summary');
var rh = require("../../../../../lib/rh");
var _ = rh._;
var Seamaphore = require('../../../../common/counting_seamaphore');
var TextMerger = require('../text_merger');
var SearchMetadata = require('../metadata');
var CbtFilter = require("./cbt");

module.exports = function () {
  function SearchProcessor(loader) {
    var _this = this;

    _classCallCheck(this, SearchProcessor);

    this.loader = loader;
    this.metadataLoaded = this.dbLoaded = false;
    this.loader.loadDB(function (dbContent) {
      _this.initDB(dbContent);
    });
    this.loader.loadMetaData(function (metadata) {
      _this.initMetadata(metadata);
    });
  }

  _createClass(SearchProcessor, [{
    key: 'initMetadata',
    value: function initMetadata(metadata) {
      this.metadataLoaded = true;
      this.metadata = new SearchMetadata(metadata);

      if (!this.init && this.dbContent) {
        this.initDB(this.dbContent);
        this.dbContent = null;
      }
    }
  }, {
    key: 'initDB',
    value: function initDB(dbContent) {
      if (this.metadataLoaded) {
        this.db = new SearchDb(dbContent, this.metadata.settings);
        this.init = true;
        if (this.waiting) {
          this.waiting = false;
          this.getResults();
        }
      } else {
        this.dbContent = dbContent;
      }
    }
  }, {
    key: 'topicsLoaded',
    value: function topicsLoaded() {
      if (this.exactSearch) {
        this.filter();
      }
    }
  }, {
    key: 'isNewQuery',
    value: function isNewQuery(text, opts) {
      var query = this.buildQuery(text, opts);
      return !this.query || !this.query.isEqual(query);
    }
  }, {
    key: 'search',
    value: function search(text, opts, callback, resultsCallback) {
      var query = this.buildQuery(text, opts);
      if (this.isNewQuery(text, opts)) {
        this.text = text;
        this.seamaphore = new Seamaphore(this.topicsLoaded.bind(this));
        this.query = query;
        this.topicCallback = callback;
        this.opts = opts;
        this.summaries = {};
        this.resultsCallback = resultsCallback;
        this.exactSearch = this.query.exactMatch;
        this.getResults();
      }
    }
  }, {
    key: 'filter',
    value: function filter() {
      var _this2 = this;

      var terms = this.query.exaxctTerms;
      this.results = _.filter(this.results, function (result) {
        var topicText = _this2.resultsMetadata[result.id].topicText;
        return _this2.matchesExact(terms, topicText, result.id);
      });
      this.resultsCallback(this.query.text, this.results);
      this.processSummary();
    }
  }, {
    key: 'processSummary',
    value: function processSummary() {
      var _this3 = this;

      _.each(this.results, function (result) {
        var id = result.id;
        _this3.topicCallback(_this3.loader.getId(id), _this3.summaries[id], _this3.createUrl(id, _this3.query.exaxctTerms));
      });
    }
  }, {
    key: 'matchesExact',
    value: function matchesExact(terms, text, id) {
      var _this4 = this;

      var found = false;
      _.each(terms, function (term) {
        var idx = text.toLowerCase().indexOf(term);
        if (idx !== -1) {
          _this4.addSummary(id, text, idx, term);
          found = true;
        }
      });
      return found;
    }
  }, {
    key: 'addSummary',
    value: function addSummary(id, text, idx, term) {
      var summary = this.metadata.getTopicSummary(id);
      if (this.metadata.context && summary) {
        this.summaries[id] = summary;
      } else {
        var summaryExtractor = new Summary(this.metadata.topicData, this.metadata.context);
        this.summaries[id] = summaryExtractor.getSummaryText(text, idx, term.length, term);
      }
    }
  }, {
    key: 'getResults',
    value: function getResults() {
      if (!this.init) {
        this.waiting = true;
        return;
      }
      this.results = this.process();
      if (this.needsCorrection) {
        this.doCorrection();
      }

      if (!this.exactSearch) {
        this.resultsCallback(this.query.text, this.results);
      }
      if (this.exactSearch && this.results.length === 0) {
        this.resultsCallback(this.query.text, this.results);
      }
    }
  }, {
    key: 'doCorrection',
    value: function doCorrection() {
      this.query = this.buildQuery(this.query.text, _.extend(this.opts, { fuzzy: true }));
      this.results = this.process();
    }
  }, {
    key: 'searchGlossary',
    value: function searchGlossary(text) {
      var query = this.buildQuery(text);
      return this.processGlossary(query);
    }
  }, {
    key: 'buildQuery',
    value: function buildQuery(text, opts) {
      return new Query(text, this.metadata.settings, opts, this.filterItem.bind(this));
    }
  }, {
    key: 'process',
    value: function process() {
      var _this5 = this;

      this.resultsMetadata = {};
      var searchResults = this.db.search(this.query);
      this.seamaphore.wait(searchResults.length);
      _.each(searchResults, function (result) {
        var topicData = _this5.metadata.getTopicData(result.ref);
        _this5.resultsMetadata[result.ref] = result.matchData.metadata;
        _this5.loader.loadTextData(_this5.query, result.ref, _this5.processTopicData.bind(_this5));
        _.extend(result, topicData);
        result.id = result.ref;
        result.ref = _this5.loader.getId(result.ref);
      });
      return searchResults;
    }
  }, {
    key: 'processGlossary',
    value: function processGlossary(query) {
      return this.db.searchGlossary(query.text);
    }
  }, {
    key: 'processTopicData',
    value: function processTopicData(query, id, data) {
      if (!this.query.isEqual(query)) {
        return;
      }
      var matchResult = this.resultsMetadata[id];
      if (matchResult) {
        var wordlist = [];
        var summaryExtractor = new Summary(this.metadata.topicData, this.metadata.context);
        var summary = summaryExtractor.getSummary(id, matchResult, wordlist, data);
        summary = summary.replace(/\t+/gi, ' ').trim();
        this.resultsMetadata[id].topicText = this.createText(id, data);
        if (!this.exactSearch) {
          this.topicCallback(this.getId(id), summary, this.createUrl(id, wordlist));
        }
      }
      this.seamaphore.signal();
    }
  }, {
    key: 'createText',
    value: function createText(topicId, texts) {
      var nextTexts = this.metadata.getTopicNextId(topicId);
      var merger = new TextMerger(nextTexts, texts, this.filterId.bind(this));
      return merger.getText();
    }
  }, {
    key: 'filterId',
    value: function filterId(id) {
      var fields = this.metadata.fields;
      var fieldItem = fields[id];
      return this.filterItem(fieldItem);
    }
  }, {
    key: 'filterItem',
    value: function filterItem(fieldItem) {
      var fields = this.metadata.fields;
      var filter = new CbtFilter(fields, this.opts.origin, this.opts.cbt);
      return fieldItem && filter.filter(fieldItem);
    }
  }, {
    key: 'getId',
    value: function getId(id) {
      return this.loader.getId(id);
    }
  }, {
    key: 'createUrl',
    value: function createUrl(id, wordlist) {
      var data = this.metadata.getTopicData(id);
      var hlTerm = this.exactSearch ? '"' + wordlist[0] + '"' : wordlist;
      if (data) {
        var resultsParams = '?' + _.mapToEncodedString({
          rhsearch: this.query.originalText,
          rhhlterm: hlTerm
        });
        return '' + this.loader.getUrl(data.relUrl) + resultsParams;
      }
    }
  }, {
    key: 'needsCorrection',
    get: function get() {
      return this.results.length === 0 && this.metadata.settings.fuzzy && !this.query.exactMatch;
    }
  }]);

  return SearchProcessor;
}();

},{"../../../../../lib/rh":23,"../../../../common/counting_seamaphore":24,"../metadata":53,"../text_merger":61,"./cbt":54,"./db":55,"./query":58,"./summary":59}],58:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var rh = require("../../../../../lib/rh");
var _ = rh._;
var CbtFilter = require("./cbt");
var lunr = require("lunr");
module.exports = function () {
  function SearchQuery(text, settings, opts) {
    _classCallCheck(this, SearchQuery);

    this.originalText = text.trim();
    this.text = this.originalText.toLowerCase();
    this.settings = settings || {};
    this.opts = opts || {};
    this.checkExactMatch();
  }

  _createClass(SearchQuery, [{
    key: "filter",
    value: function filter(itemList) {
      var filter = new CbtFilter(this.settings.fields, this.opts.origin, this.opts.cbt);
      return filter.filter(itemList);
    }
  }, {
    key: "getParams",
    value: function getParams(isStopWordFn) {
      this.isStopWord = isStopWordFn;
      return "" + this.fieldsParam;
    }
  }, {
    key: "isEqual",
    value: function isEqual(other) {
      if (this.text !== other.text || this._bExactMatch !== other._bExactMatch) {
        return false;
      }
      return _.isEqual(this.opts, other.opts);
    }
  }, {
    key: "getFuzzyText",
    value: function getFuzzyText(id, token, boost) {
      if (this.isStopWord(token)) {
        return '';
      }
      return this.opts.fuzzy ? id + ":" + token + "~1^" + boost : id + ":" + token + "^" + boost;
    }
  }, {
    key: "checkExactMatch",
    value: function checkExactMatch() {
      if (this._isExactMatch) {
        this._bExactMatch = true;
        this.text = this.text.substring(1, this.text.length - 1);
      }
    }
  }, {
    key: "getFieldBoost",
    value: function getFieldBoost(field) {
      return _.reduce(field, function (max, rule) {
        return rule && rule.boost && rule.boost > max ? rule.boost : max;
      }, 1);
    }
  }, {
    key: "_isExactMatch",
    get: function get() {
      return this.text.length > 2 && this.quotesChar.indexOf(this.text[0]) !== -1 && this.quotesChar.indexOf(this.text[this.text.length - 1]) !== -1;
    }
  }, {
    key: "exactMatch",
    get: function get() {
      return this._bExactMatch;
    }
  }, {
    key: "exaxctTerms",
    get: function get() {
      return [this.text];
    }
  }, {
    key: "quotesChar",
    get: function get() {
      return ["\"", "\'"];
    }
  }, {
    key: "fieldsParam",
    get: function get() {
      var _this = this;

      var fieldquery = '';
      _.each(this.settings.fields, function (item, id) {
        if (!_this.filter(item)) {
          var tokens = _.map(lunr.tokenizer(_this.text), function (token) {
            return token.str;
          });
          var boost = _this.getFieldBoost(item);
          _.each(tokens, function (token) {
            fieldquery = fieldquery + " " + _this.getFuzzyText(id, token, boost);
          });
        }
      });
      return fieldquery;
    }
  }]);

  return SearchQuery;
}();

},{"../../../../../lib/rh":23,"./cbt":54,"lunr":22}],59:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var rh = require("../../../../../lib/rh");
var TextMerger = require('../text_merger');
var _ = rh._;
module.exports = function () {
  function SearchSummary(topicData, context) {
    _classCallCheck(this, SearchSummary);

    this.topicData = topicData;
    this.context = context;
  }

  _createClass(SearchSummary, [{
    key: 'minDistance',
    value: function minDistance() {
      //_.each()
    }
  }, {
    key: 'getSummary',
    value: function getSummary(id, matchResult, wordlist, data) {
      var _this = this;

      if (this.context) {
        var _summary = this.topicData[id] && this.topicData[id].summary;
        if (_summary) {
          return _summary;
        }
      }
      var summaries = _.map(matchResult, function (metadata) {
        return _.union(metadata, function (posData, fieldId) {
          return _.union(posData.position, function (fistrPos) {
            var texts = data[fieldId];
            var merger = new TextMerger();
            var text = merger.getIndexText(texts);
            var word = text.substring(fistrPos[0], fistrPos[0] + fistrPos[1]);
            word = word.toLowerCase();
            if (wordlist.indexOf(word) === -1) {
              wordlist.push(word);
            }
            return _this.getSummaryText(text, fistrPos[0], fistrPos[1], word);
          });
        });
      });
      var summary = '';
      _.each(summaries[0] || [], function (s) {
        if (s.length > summary.length) {
          summary = s;
        }
      });
      return summary;
    }
  }, {
    key: 'getSummaryText',
    value: function getSummaryText(text, idx, length, word) {
      var leftText = text.substring(0, idx);
      var rightText = text.substring(idx + length);

      return this.trimLeft(leftText) + '<b>' + word + '</b>\n              ' + this.trimRight(rightText);
    }
  }, {
    key: 'trimLeft',
    value: function trimLeft(leftText) {
      var leftIdx = leftText.indexOf(" ", leftText.length - 30);
      leftText = leftText.substring(leftIdx, leftText.length);
      return leftText.trimStart();
    }
  }, {
    key: 'trimRight',
    value: function trimRight(rightText) {
      var rightIdx = rightText.indexOf(" ", 70);
      rightIdx = rightIdx === -1 ? rightText.length : rightIdx;
      rightText = rightText.substring(0, rightIdx);
      return rightText.trimEnd();
    }
  }]);

  return SearchSummary;
}();

},{"../../../../../lib/rh":23,"../text_merger":61}],60:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _utils = require('../suggestion/utils');

var _utils2 = _interopRequireDefault(_utils);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

module.exports = function () {
  function SearchResult(result) {
    _classCallCheck(this, SearchResult);

    this.fRanking = result.score;
    this.nIndex = 1;
    this.strSummary = '.p.searchsummary' + result.ref;
    this.strTitle = result.title;
    this.strUrl = '.p.searchurl' + result.ref;
    this.strBreadcrumbs = result.relUrl;
  }

  _createClass(SearchResult, [{
    key: 'merge',
    value: function merge(new_item) {
      this.fRanking += new_item.fRanking;
    }
  }, {
    key: 'compare',
    value: function compare(other) {
      return other.fRanking - this.fRanking;
    }
  }, {
    key: 'match',
    value: function match(other) {
      return _utils2.default.compareNoCase(other.strUrl, this.strUrl) === 0;
    }
  }]);

  return SearchResult;
}();

},{"../suggestion/utils":51}],61:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var rh = require("../../../../lib/rh");
var _ = rh._;
module.exports = function () {
  function SearchTextMerger(nextTexts, texts, filter) {
    _classCallCheck(this, SearchTextMerger);

    this.nextTexts = nextTexts;
    this.texts = texts;
    this.separator = " ";
    this.filter = filter || this.defaultFilter;
  }

  _createClass(SearchTextMerger, [{
    key: "join",
    value: function join(id, start, end) {
      var texts = [];
      for (var i = start; i <= end; i++) {
        if (this.texts[id][i]) {
          texts.push(this.texts[id][i]);
        }
      }
      return texts.join(this.separator);
    }
  }, {
    key: "defaultFilter",
    value: function defaultFilter() {
      return false;
    }
  }, {
    key: "getIndexText",
    value: function getIndexText(texts) {
      return texts.join(this.separator).replace(/\n/gi, this.separator).trim();
    }
  }, {
    key: "getText",
    value: function getText() {
      var _this = this;

      var texts = [];
      _.each(this.nextTexts, function (item) {
        if (!_this.filter(item[0])) {
          texts.push(_this.join(item[0], item[1], item[2]));
        }
      });
      return texts.join(this.separator);
    }
  }]);

  return SearchTextMerger;
}();

},{"../../../../lib/rh":23}],62:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var rh = require("../../lib/rh");
var _ = rh._;
var consts = rh.consts;

var SearchResultController = function () {
  function SearchResultController(widget) {
    _classCallCheck(this, SearchResultController);

    this.widget = widget;
  }

  _createClass(SearchResultController, [{
    key: 'getLink',
    value: function getLink(url) {
      var searchUrl = url;
      var highlightParam = this.widget.get(consts('KEY_SEARCH_RESULT_PARAMS'));
      var searchTerm = this.widget.get(consts('KEY_SEARCH_TERM'));
      var searchTermParam = '';
      if (searchTerm && searchTerm !== '') {
        var key = consts('HASH_KEY_RH_SEARCH');
        var searchTermMap = {};
        searchTermMap[key] = searchTerm;
        searchTermParam = _.mapToEncodedString(searchTermMap);
      }
      if (highlightParam !== undefined && highlightParam !== '') {
        searchUrl = searchUrl + highlightParam + '&' + searchTermParam;
      } else if (searchTermParam !== '') {
        searchUrl = searchUrl + '?' + searchTermParam;
      }
      return searchUrl;
    }
  }]);

  return SearchResultController;
}();

rh.controller('SearchResultController', SearchResultController);

},{"../../lib/rh":23}],63:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var rh = require("../../lib/rh");
var _ = rh._;
var consts = rh.consts;
//const KEY_ACTIVE_BOOKID = 'active_bookid';

var TocBreadcrumbsController = function () {
  function TocBreadcrumbsController(widget) {
    _classCallCheck(this, TocBreadcrumbsController);

    this.widget = widget;
    //this.widget.model.subscribe(KEY_ACTIVE_BOOKID, this.updateBreadcrumbs)
  }

  _createClass(TocBreadcrumbsController, [{
    key: 'select',
    value: function select(id, url) {
      this.widget.publish(consts('KEY_TOC_SELECT_ITEM'), { 'id': id, 'url': url });
    }
  }, {
    key: 'getLink',
    value: function getLink(id) {
      if (id) {
        var breadcrumbs = this.widget.get(consts('KEY_TOC_BREADCRUMBS'));
        var item = breadcrumbs[id];
        if (item && item.hasUrl) {
          return item.url;
        }
      }
    }
  }, {
    key: 'goToHome',
    value: function goToHome(index) {
      if (index) {
        var breadcrumbs = this.widget.get(consts('KEY_TOC_BREADCRUMBS'));
        var item = breadcrumbs[index];
        if (item && !item.hasUrl) {
          _.goToHome({ rhtocid: item.id });
        }
      }
    }
  }]);

  return TocBreadcrumbsController;
}();

rh.controller('TocBreadcrumbsController', TocBreadcrumbsController);

},{"../../lib/rh":23}],64:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var rh = require("../../../lib/rh");
var $ = rh.$;
var CAROUSEL_CHANGE = 'change';
var CAROUSEL_ITEM = '.carousel-item:not(.hide):not(.rh-hide)';

var Carousel = function () {
  function Carousel(widget, opts) {
    var _this = this;

    _classCallCheck(this, Carousel);

    this.widget = widget;
    this.node = this.widget.node;
    this.tab = 0;
    rh.model.subscribeOnce(rh.consts(opts.key), function () {
      _this.widget.publish(CAROUSEL_CHANGE, true);
    });
    rh.model.subscribe(rh.consts('KEY_SCREEN'), function () {
      _this.goto(_this.tab, 0);
    });
    rh.model.subscribe(opts.key + 'gototab', function (bookData) {
      _this.goto(_this.pagecount(), bookData.tab);
    });
  }

  _createClass(Carousel, [{
    key: 'goto',
    value: function goto(from, to) {
      var _this2 = this;

      this.tab = to;
      this.carouselnode = $.find(this.node, '.carousel')[0];
      this.animateLeft(from);
      rh._.delay(function () {
        _this2.widget.publish(CAROUSEL_CHANGE, true);
      }, 1000);
    }
  }, {
    key: 'hasNext',
    value: function hasNext() {
      this.carouselnode = $.find(this.node, '.carousel')[0];
      var lastItem = $.find($.find(this.node, '.carousel')[0], CAROUSEL_ITEM);
      lastItem = lastItem && lastItem.length > 0 ? lastItem[lastItem.length - 1] : null;
      return lastItem.offsetLeft + this.carouselnode.offsetLeft > this.carouselnode.offsetWidth;
    }
  }, {
    key: 'animateLeft',
    value: function animateLeft() {
      var leftVal = 'calc(-' + this.tab * 14 + 'px - ' + this.tab * 100 + '%)';
      $.css(this.carouselnode, 'left', leftVal);
    }
  }, {
    key: 'next',
    value: function next() {
      this.goto(this.tab, this.tab + 1);
    }
  }, {
    key: 'pagecount',
    value: function pagecount() {
      return this.tab;
    }
  }, {
    key: 'previous',
    value: function previous() {
      this.goto(this.tab, this.tab - 1);
    }
  }, {
    key: 'ensureVisible',
    value: function ensureVisible() {}
  }]);

  return Carousel;
}();

rh.controller('Carousel', Carousel);

},{"../../../lib/rh":23}],65:[function(require,module,exports){
'use strict';

var rh = require("../../lib/rh");
var $ = rh.$;
module.exports = {

  nodeType: {
    ELEMENT_NODE: 1,
    ATTRIBUTE_NODE: 2,
    TEXT_NODE: 3,
    CDATA_SECTION_NODE: 4,
    ENTITY_REFERENCE_NODE: 5,
    ENTITY_NODE: 6,
    PROCESSING_INSTRUCTION_NODE: 7,
    COMMENT_NODE: 8,
    DOCUMENT_NODE: 9,
    DOCUMENT_TYPE_NODE: 10,
    DOCUMENT_FRAGMENT_NODE: 11,
    NOTATION_NODE: 12
  },

  removeChild: function removeChild(node) {
    var parent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.parentNode(node);

    return parent && parent.removeChild && parent.removeChild(node);
  },
  appendChild: function appendChild(parent, newNode) {
    return parent && parent.appendChild && parent.appendChild(newNode);
  },
  parentNode: function parentNode(node) {
    return node && node.parentNode;
  },
  childNodes: function childNodes(node) {
    return node && node.childNodes || [];
  },
  toHtmlNode: function toHtmlNode(html) {
    return this.childNodes($.createElement('div', html));
  },
  outerHTML: function outerHTML(node) {
    return node && node.outerHTML || '';
  },
  insertAfter: function insertAfter(node, newNode) {
    return node.parentNode.insertBefore(newNode, node.nextSibling);
  },
  value: function value(node) {
    return node && node.nodeValue;
  },
  name: function name(node) {
    return node && node.nodeName;
  },
  type: function type(node) {
    return node && node.nodeType;
  },
  isElementNode: function isElementNode(node) {
    return this.type(node) === this.nodeType.ELEMENT_NODE;
  },
  isTextNode: function isTextNode(node) {
    return this.type(node) === this.nodeType.TEXT_NODE;
  }
};

},{"../../lib/rh":23}]},{},[25])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJsZW5pZW50X3NyY1xcbGF5b3V0XFxldmVudF9oYW5kbGVycy5qcyIsImxlbmllbnRfc3JjXFxsYXlvdXRcXGdsb3NzYXJ5X2NvbnRyb2xsZXIuanMiLCJsZW5pZW50X3NyY1xcbGF5b3V0XFxpbmRleF9jb250cm9sbGVyLmpzIiwibGVuaWVudF9zcmNcXGxheW91dFxcc2VhcmNoX3V0aWwuanMiLCJsZW5pZW50X3NyY1xcbGF5b3V0XFx0b2NfY29udHJvbGxlci5qcyIsImxlbmllbnRfc3JjXFxsYXlvdXRcXHRvY19vcmRlci5qcyIsImxlbmllbnRfc3JjXFxyb2JvaGVscFxcbGF5b3V0XFxicm93c2VzZXF1ZW5jZV9idWlsZGVyLmpzIiwibGVuaWVudF9zcmNcXHJvYm9oZWxwXFxsYXlvdXRcXGV2ZW50X2hhbmRsZXJzLmpzIiwibGVuaWVudF9zcmNcXHJvYm9oZWxwXFxsYXlvdXRcXGV4cHJlc3Npb25fYnVpbGRlci5qcyIsImxlbmllbnRfc3JjXFxyb2JvaGVscFxcbGF5b3V0XFxmaWx0ZXJfY29udHJvbGxlci5qcyIsImxlbmllbnRfc3JjXFxyb2JvaGVscFxcbGF5b3V0XFxmaWx0ZXJfaGFuZGxlci5qcyIsImxlbmllbnRfc3JjXFxyb2JvaGVscFxcbGF5b3V0XFxnbG9zc2FyeV9jb250cm9sbGVyLmpzIiwibGVuaWVudF9zcmNcXHJvYm9oZWxwXFxsYXlvdXRcXGluZGV4X2NvbnRyb2xsZXIuanMiLCJsZW5pZW50X3NyY1xccm9ib2hlbHBcXGxheW91dFxcaW5pdC5qcyIsImxlbmllbnRfc3JjXFxyb2JvaGVscFxcbGF5b3V0XFxqc19sb2FkaW5nX2NvbnRyb2xsZXIuanMiLCJsZW5pZW50X3NyY1xccm9ib2hlbHBcXGxheW91dFxcbGF5b3V0Zml4LmpzIiwibGVuaWVudF9zcmNcXHJvYm9oZWxwXFxsYXlvdXRcXGxvYWRfcHJvamVjdHMuanMiLCJsZW5pZW50X3NyY1xccm9ib2hlbHBcXGxheW91dFxcbW9kZXJuX2xheW91dF9jb250cm9sbGVyLmpzIiwibGVuaWVudF9zcmNcXHJvYm9oZWxwXFxsYXlvdXRcXG1wLmpzIiwibGVuaWVudF9zcmNcXHJvYm9oZWxwXFxsYXlvdXRcXHNlYXJjaF9maWxlZC5qcyIsImxlbmllbnRfc3JjXFxyb2JvaGVscFxcbGF5b3V0XFx1cmxfdXRpbHMuanMiLCJub2RlX21vZHVsZXMvbHVuci9sdW5yLmpzIiwic3JjXFxsaWJcXHNyY1xcbGliXFxyaC5qcyIsInNyY1xccmVzcG9uc2l2ZV9oZWxwXFxjb21tb25cXGNvdW50aW5nX3NlYW1hcGhvcmUuanMiLCJzcmNcXHJlc3BvbnNpdmVfaGVscFxcbGF5b3V0LmpzIiwic3JjXFxyZXNwb25zaXZlX2hlbHBcXGxheW91dFxcY3VzdG9tX2J1dHRvbnMuanMiLCJzcmNcXHJlc3BvbnNpdmVfaGVscFxcbGF5b3V0XFxleHBhbmRfYWxsLmpzIiwic3JjXFxyZXNwb25zaXZlX2hlbHBcXGxheW91dFxcZmF2b3JpdGVzX2NvbnRyb2xsZXIuanMiLCJzcmNcXHJlc3BvbnNpdmVfaGVscFxcbGF5b3V0XFxob21lX2NvbnRyb2xsZXIuanMiLCJzcmNcXHJlc3BvbnNpdmVfaGVscFxcbGF5b3V0XFxtb2RhbF9kaWFsb2cuanMiLCJzcmNcXHJlc3BvbnNpdmVfaGVscFxcbGF5b3V0XFxyaDIwMTdsYXlvdXRjb250cm9sbGVyLmpzIiwic3JjXFxyZXNwb25zaXZlX2hlbHBcXGxheW91dFxcc2VhcmNoXFxjb21tb25cXG1lcmdlci5qcyIsInNyY1xccmVzcG9uc2l2ZV9oZWxwXFxsYXlvdXRcXHNlYXJjaFxcY29tbW9uXFxwYXRocy5qcyIsInNyY1xccmVzcG9uc2l2ZV9oZWxwXFxsYXlvdXRcXHNlYXJjaFxcY29tbW9uXFxzeW5vbnltbnMuanMiLCJzcmNcXHJlc3BvbnNpdmVfaGVscFxcbGF5b3V0XFxzZWFyY2hcXHN1Z2dlc3Rpb25cXGNvbnN0cy5qcyIsInNyY1xccmVzcG9uc2l2ZV9oZWxwXFxsYXlvdXRcXHNlYXJjaFxcc3VnZ2VzdGlvblxcY29ycmVjdG9yLmpzIiwic3JjXFxyZXNwb25zaXZlX2hlbHBcXGxheW91dFxcc2VhcmNoXFxzdWdnZXN0aW9uXFxnZW5lcmFsX3ByZWRpY3Rvci5qcyIsInNyY1xccmVzcG9uc2l2ZV9oZWxwXFxsYXlvdXRcXHNlYXJjaFxcc3VnZ2VzdGlvblxcaGlzdG9yeV9wcmVkaWN0b3IuanMiLCJzcmNcXHJlc3BvbnNpdmVfaGVscFxcbGF5b3V0XFxzZWFyY2hcXHN1Z2dlc3Rpb25cXGhpc3RvcnlfcmVhZGVyLmpzIiwic3JjXFxyZXNwb25zaXZlX2hlbHBcXGxheW91dFxcc2VhcmNoXFxzdWdnZXN0aW9uXFxpbmRpY2VzLmpzIiwic3JjXFxyZXNwb25zaXZlX2hlbHBcXGxheW91dFxcc2VhcmNoXFxzdWdnZXN0aW9uXFxpbnB1dF9wYXJzZXIuanMiLCJzcmNcXHJlc3BvbnNpdmVfaGVscFxcbGF5b3V0XFxzZWFyY2hcXHN1Z2dlc3Rpb25cXGxvYWRlci5qcyIsInNyY1xccmVzcG9uc2l2ZV9oZWxwXFxsYXlvdXRcXHNlYXJjaFxcc3VnZ2VzdGlvblxcbmdyYW1fcHJlZGljdG9yLmpzIiwic3JjXFxyZXNwb25zaXZlX2hlbHBcXGxheW91dFxcc2VhcmNoXFxzdWdnZXN0aW9uXFxwcmVkaWN0aW9uLmpzIiwic3JjXFxyZXNwb25zaXZlX2hlbHBcXGxheW91dFxcc2VhcmNoXFxzdWdnZXN0aW9uXFxwcmVkaWN0aW9uX2NyZWF0b3IuanMiLCJzcmNcXHJlc3BvbnNpdmVfaGVscFxcbGF5b3V0XFxzZWFyY2hcXHN1Z2dlc3Rpb25cXHByZWRpY3Rpb25fbGlzdC5qcyIsInNyY1xccmVzcG9uc2l2ZV9oZWxwXFxsYXlvdXRcXHNlYXJjaFxcc3VnZ2VzdGlvblxccHJlZGljdG9yc19jcmVhdG9yLmpzIiwic3JjXFxyZXNwb25zaXZlX2hlbHBcXGxheW91dFxcc2VhcmNoXFxzdWdnZXN0aW9uXFxzZWFyY2hfY29udHJvbGxlci5qcyIsInNyY1xccmVzcG9uc2l2ZV9oZWxwXFxsYXlvdXRcXHNlYXJjaFxcc3VnZ2VzdGlvblxcc29ydGVkX3NldC5qcyIsInNyY1xccmVzcG9uc2l2ZV9oZWxwXFxsYXlvdXRcXHNlYXJjaFxcc3VnZ2VzdGlvblxcdG9waWNfY291bnRlci5qcyIsInNyY1xccmVzcG9uc2l2ZV9oZWxwXFxsYXlvdXRcXHNlYXJjaFxcc3VnZ2VzdGlvblxcc3JjXFxyZXNwb25zaXZlX2hlbHBcXGxheW91dFxcc2VhcmNoXFxzdWdnZXN0aW9uXFx1dGlscy5qcyIsInNyY1xccmVzcG9uc2l2ZV9oZWxwXFxsYXlvdXRcXHNlYXJjaFxcdG9waWNcXGhhbmRsZXIuanMiLCJzcmNcXHJlc3BvbnNpdmVfaGVscFxcbGF5b3V0XFxzZWFyY2hcXHRvcGljXFxtZXRhZGF0YS5qcyIsInNyY1xccmVzcG9uc2l2ZV9oZWxwXFxsYXlvdXRcXHNlYXJjaFxcdG9waWNcXHF1ZXJ5XFxjYnQuanMiLCJzcmNcXHJlc3BvbnNpdmVfaGVscFxcbGF5b3V0XFxzZWFyY2hcXHRvcGljXFxxdWVyeVxcZGIuanMiLCJzcmNcXHJlc3BvbnNpdmVfaGVscFxcbGF5b3V0XFxzZWFyY2hcXHRvcGljXFxxdWVyeVxcbG9hZGVyLmpzIiwic3JjXFxyZXNwb25zaXZlX2hlbHBcXGxheW91dFxcc2VhcmNoXFx0b3BpY1xccXVlcnlcXHByb2Nlc3Nvci5qcyIsInNyY1xccmVzcG9uc2l2ZV9oZWxwXFxsYXlvdXRcXHNlYXJjaFxcdG9waWNcXHF1ZXJ5XFxxdWVyeS5qcyIsInNyY1xccmVzcG9uc2l2ZV9oZWxwXFxsYXlvdXRcXHNlYXJjaFxcdG9waWNcXHF1ZXJ5XFxzdW1tYXJ5LmpzIiwic3JjXFxyZXNwb25zaXZlX2hlbHBcXGxheW91dFxcc2VhcmNoXFx0b3BpY1xccmVzdWx0LmpzIiwic3JjXFxyZXNwb25zaXZlX2hlbHBcXGxheW91dFxcc2VhcmNoXFx0b3BpY1xcdGV4dF9tZXJnZXIuanMiLCJzcmNcXHJlc3BvbnNpdmVfaGVscFxcbGF5b3V0XFxzZWFyY2hfcmVzdWx0X2NvbnRyb2xsZXIuanMiLCJzcmNcXHJlc3BvbnNpdmVfaGVscFxcbGF5b3V0XFx0b2NfYnJlYWRjcnVtYnNfY29udHJvbGxlci5qcyIsInNyY1xccmVzcG9uc2l2ZV9oZWxwXFxsYXlvdXRcXHVpXFxjYXJvdXNlbC5qcyIsInNyY1xccmVzcG9uc2l2ZV9oZWxwXFx1dGlsc1xcbm9kZV91dGlscy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O2NDQWUsTTtJQUFQLEUsV0FBQSxFO0lBQ0EsQyxHQUFNLEUsQ0FBTixDO0lBQ0EsQyxHQUFNLEUsQ0FBTixDO0lBQ0EsTSxHQUFXLEUsQ0FBWCxNO0lBQ0EsSyxHQUFVLEUsQ0FBVixLOzs7QUFFUixJQUFNLHFCQUFxQixPQUFPLG9CQUFQLENBQTNCO0FBQ0EsSUFBTSxpQkFBaUIsT0FBTyxnQkFBUCxDQUF2QjtBQUNBLElBQU0sa0JBQWtCLE9BQU8saUJBQVAsQ0FBeEI7QUFDQSxJQUFNLG9CQUFvQixPQUFPLG1CQUFQLENBQTFCO0FBQ0EsSUFBTSx3QkFBd0IsT0FBTyx1QkFBUCxDQUE5QjtBQUNBLElBQU0sa0JBQWtCLE9BQU8saUJBQVAsQ0FBeEI7QUFDQSxJQUFNLGdCQUFnQixDQUNwQixxQkFEb0IsRUFFcEIsT0FBTyxrQkFBUCxDQUZvQixFQUdwQixpQkFIb0IsQ0FBdEI7O0FBTUE7QUFDQSxJQUFNLHFCQUFxQixTQUFyQixrQkFBcUIsQ0FBUyxRQUFULEVBQW1CO0FBQzVDLE1BQU0sWUFBWSxFQUFFLFNBQUYsQ0FBWSxFQUFFLGtCQUFGLENBQXFCLFFBQXJCLENBQVosQ0FBbEI7QUFDQSxNQUFNLFVBQVcsRUFBRSxVQUFGLENBQWEsRUFBRSxpQkFBRixDQUFvQixRQUFwQixDQUFiLENBQWpCO0FBQ0EsU0FBTyxFQUFFLE1BQUYsQ0FBUyxTQUFULEVBQW9CLE9BQXBCLENBQVA7QUFDRCxDQUpEOztBQU1BLElBQU0sY0FBYyxTQUFkLFdBQWMsQ0FBUyxNQUFULEVBQWlCLFFBQWpCLEVBQTJCO0FBQzdDLGFBQVcsUUFBWDtBQUNBLE1BQU0sV0FBVyxFQUFFLFFBQUYsQ0FB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QjtBQUNELEdBeENjO0FBeUNmLE1BekNlLGdCQXlDVixJQXpDVSxFQXlDSjtBQUNULFdBQU8sUUFBUSxLQUFLLFFBQXBCO0FBQ0QsR0EzQ2M7QUE0Q2YsTUE1Q2UsZ0JBNENWLElBNUNVLEVBNENKO0FBQ1QsV0FBTyxRQUFRLEtBQUssUUFBcEI7QUFDRCxHQTlDYztBQStDZixlQS9DZSx5QkErQ0QsSUEvQ0MsRUErQ0s7QUFDbEIsV0FBTyxLQUFLLElBQUwsQ0FBVSxJQUFWLE1BQW9CLEtBQUssUUFBTCxDQUFjLFlBQXpDO0FBQ0QsR0FqRGM7QUFrRGYsWUFsRGUsc0JBa0RKLElBbERJLEVBa0RFO0FBQ2YsV0FBTyxLQUFLLElBQUwsQ0FBVSxJQUFWLE1BQW9CLEtBQUssUUFBTCxDQUFjLFNBQXpDO0FBQ0Q7QUFwRGMsQ0FBakIiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiY29uc3QgeyByaCB9ID0gd2luZG93O1xyXG5jb25zdCB7IF8gfSA9IHJoO1xyXG5jb25zdCB7ICQgfSA9IHJoO1xyXG5jb25zdCB7IGNvbnN0cyB9ID0gcmg7XHJcbmNvbnN0IHsgbW9kZWwgfSA9IHJoO1xyXG5cclxuY29uc3QgSEFTSF9LRVlfUkhfU0VBUkNIID0gY29uc3RzKCdIQVNIX0tFWV9SSF9TRUFSQ0gnKTtcclxuY29uc3QgSEFTSF9LRVlfVE9QSUMgPSBjb25zdHMoJ0hBU0hfS0VZX1RPUElDJyk7XHJcbmNvbnN0IEhBU0hfS0VZX1VJTU9ERSA9IGNvbnN0cygnSEFTSF9LRVlfVUlNT0RFJyk7XHJcbmNvbnN0IEhBU0hfS0VZX1JIX1RPQ0lEID0gY29uc3RzKCdIQVNIX0tFWV9SSF9UT0NJRCcpO1xyXG5jb25zdCBIQVNIX0tFWV9SSF9ISUdITElHSFQgPSBjb25zdHMoJ0hBU0hfS0VZX1JIX0hJR0hMSUdIVCcpO1xyXG5jb25zdCBIQVNIX0tFWV9SQU5ET00gPSBjb25zdHMoJ0hBU0hfS0VZX1JBTkRPTScpO1xyXG5jb25zdCBoYXNoUXVlcnlLZXlzID0gW1xyXG4gIEhBU0hfS0VZX1JIX0hJR0hMSUdIVCxcclxuICBjb25zdHMoJ0hBU0hfS0VZX1JIX1NZTlMnKSxcclxuICBIQVNIX0tFWV9SSF9UT0NJRFxyXG4gIF07XHJcblxyXG4vLyBIZWxwZXIgbWV0aG9kc1xyXG5jb25zdCBnZXRNZXJnZWRQYXJhbXNNYXAgPSBmdW5jdGlvbih0b3BpY1VybCkge1xyXG4gIGNvbnN0IHBhcmFtc01hcCA9IF8udXJsUGFyYW1zKF8uZXh0cmFjdFBhcmFtU3RyaW5nKHRvcGljVXJsKSk7XHJcbiAgY29uc3QgaGFzaE1hcCAgPSBfLmhhc2hQYXJhbXMoXy5leHRyYWN0SGFzaFN0cmluZyh0b3BpY1VybCkpO1xyXG4gIHJldHVybiBfLmV4dGVuZChwYXJhbXNNYXAsIGhhc2hNYXApO1xyXG59O1xyXG5cclxuY29uc3QgZ2V0VG9waWNVUkwgPSBmdW5jdGlvbihuZXdNYXAsIHRvcGljVXJsKSB7XHJcbiAgdG9waWNVcmwgPSB0b3BpY1VybDtcclxuICBjb25zdCBmaWxlUGF0aCA9IF8uZmlsZVBhdGgodG9waWNVcmwpO1xyXG4gIGxldCBib29rTWFyayA9IF8uZXh0cmFjdEhhc2hTdHJpbmcodG9waWNVcmwpO1xyXG4gIGlmIChib29rTWFyay5sZW5ndGggPiAwKSB7IGJvb2tNYXJrID0gYCMke2Jvb2tNYXJrfWA7IH1cclxuXHJcbiAgY29uc3QgcGFyYW1zTWFwID0gXy51cmxQYXJhbXMoXy5leHRyYWN0UGFyYW1TdHJpbmcodG9waWNVcmwpKTtcclxuICBmb3IgKGxldCBrZXkgb2YgQXJyYXkuZnJvbShoYXNoUXVlcnlLZXlzKSkgeyBpZiAobmV3TWFwW2tleV0gIT0gbnVsbCkgeyBwYXJhbXNNYXBba2V5XSA9IG5ld01hcFtrZXldOyB9IH1cclxuICBpZiAobW9kZWwuZ2V0KGNvbnN0cygnS0VZX1NDUkVFTl9JT1MnKSkpIHtcclxuICAgIHBhcmFtc01hcFtIQVNIX0tFWV9SQU5ET01dID0gKF8udW5pcXVlSWQpKCk7XHJcbiAgfVxyXG4gIGxldCBwYXJhbXMgPSBfLm1hcFRvRW5jb2RlZFN0cmluZyhwYXJhbXNNYXApO1xyXG4gIGlmIChwYXJhbXMubGVuZ3RoID4gMCkgeyBwYXJhbXMgPSBgPyR7cGFyYW1zfWA7IH1cclxuXHJcbiAgcmV0dXJuIGAke2ZpbGVQYXRofSR7cGFyYW1zfSR7Ym9va01hcmt9YDtcclxufTtcclxuXHJcbmNvbnN0IHsgcXVldWVVcGRhdGVIYXNoTWFwIH0gPSBfO1xyXG5cclxuY29uc3QgZml4SGFzaE1hcEZvclRvcGljID0gZnVuY3Rpb24oaGFzaE1hcCkge1xyXG4gIGlmIChoYXNoTWFwID09IG51bGwpIHsgaGFzaE1hcCA9IHt9OyB9XHJcbiAgaGFzaE1hcFtIQVNIX0tFWV9VSU1PREVdID0gbnVsbDtcclxuICBoYXNoTWFwW0hBU0hfS0VZX1JBTkRPTV0gPSBudWxsO1xyXG4gIGlmICghaGFzaE1hcFtIQVNIX0tFWV9SSF9UT0NJRF0pIHsgaGFzaE1hcFtIQVNIX0tFWV9SSF9UT0NJRF0gPSBudWxsOyB9XHJcbiAgaWYgKCFoYXNoTWFwW0hBU0hfS0VZX1JIX0hJR0hMSUdIVF0pIHsgaGFzaE1hcFtIQVNIX0tFWV9SSF9ISUdITElHSFRdID0gbnVsbDsgfVxyXG4gIHJldHVybiBoYXNoTWFwO1xyXG59O1xyXG5cclxuXHJcblxyXG5jb25zdCBzaG93VG9waWMgPSBmdW5jdGlvbihyZWxVcmwsIGFkZFRvSGlzdG9yeSkge1xyXG4gIHJlbFVybCA9IF8uZml4UmVsYXRpdmVVcmwocmVsVXJsKTtcclxuICBsZXQgaGFzaE1hcCA9IF8udXJsUGFyYW1zKF8uZXh0cmFjdFBhcmFtU3RyaW5nKHJlbFVybCkpO1xyXG4gIGhhc2hNYXBbSEFTSF9LRVlfVE9QSUNdID0gXy5zdHJpcFBhcmFtKHJlbFVybCk7XHJcbiAgaGFzaE1hcCA9IGZpeEhhc2hNYXBGb3JUb3BpYyhoYXNoTWFwKTtcclxuICByZXR1cm4gcXVldWVVcGRhdGVIYXNoTWFwKGhhc2hNYXAsIGFkZFRvSGlzdG9yeSk7XHJcbn07XHJcblxyXG5cclxuY29uc3Qgc2hvd05vblRvcGljID0gZnVuY3Rpb24odXJsLCBhZGRUb0hpc3RvcnkpIHtcclxuICBsZXQgaGFzaE1hcCA9IHt9O1xyXG4gIGhhc2hNYXBbSEFTSF9LRVlfVE9QSUNdID0gIHVybDtcclxuICBoYXNoTWFwID0gZml4SGFzaE1hcEZvclRvcGljKGhhc2hNYXApO1xyXG4gIHJldHVybiBxdWV1ZVVwZGF0ZUhhc2hNYXAoaGFzaE1hcCwgYWRkVG9IaXN0b3J5KTtcclxufTtcclxuXHJcbih7aXNTYW1lVG9waWModXJsMSwgdXJsMikge319KTtcclxuXHJcbi8vRXZlbnQgSGFuZGxlcnNcclxuXHJcbmNvbnN0IGhhc2hDaGFuZ2VkID0gZnVuY3Rpb24ob2JqKSB7XHJcbiAgbGV0IHNlYXJjaFRlcm1DaGFuZ2VkO1xyXG4gIGNvbnN0IHsgbmV3TWFwIH0gPSBvYmo7XHJcbiAgY29uc3QgeyBvbGRNYXAgfSA9IG9iajtcclxuICBjb25zdCBvbGRVaU1vZGUgPSBvbGRNYXBbSEFTSF9LRVlfVUlNT0RFXTtcclxuICBjb25zdCB1aU1vZGUgPSBuZXdNYXBbSEFTSF9LRVlfVUlNT0RFXTtcclxuXHJcbiAgaWYgKEhBU0hfS0VZX1JIX1NFQVJDSCBpbiBuZXdNYXApIHtcclxuICAgIGNvbnN0IHNlYXJjaFRlcm0gPSBuZXdNYXBbSEFTSF9LRVlfUkhfU0VBUkNIXTtcclxuICAgIHNlYXJjaFRlcm1DaGFuZ2VkID0gc2VhcmNoVGVybSAhPT0gbW9kZWwuZ2V0KGNvbnN0cygnS0VZX1NFQVJDSEVEX1RFUk0nKSk7XHJcbiAgICBtb2RlbC5wdWJsaXNoKGNvbnN0cygnS0VZX1NFQVJDSF9URVJNJyksIHNlYXJjaFRlcm0sIHtzeW5jOiB0cnVlfSk7XHJcbiAgfVxyXG5cclxuICBpZiAodWlNb2RlID09PSAnc2VhcmNoJykge1xyXG4gICAgaWYgKHNlYXJjaFRlcm1DaGFuZ2VkICYmIHdpbmRvdy5nSG9zdCkge1xyXG4gICAgICBtb2RlbC5wdWJsaXNoKGNvbnN0cygnRVZUX1FVRVJZX1NFQVJDSF9SRVNVTFRTJyksIHRydWUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaWYgKCF1aU1vZGUgfHwgbmV3TWFwW0hBU0hfS0VZX1RPUElDXSkge1xyXG4gICAgbGV0IHRvcGljVXJsO1xyXG4gICAgY29uc3Qgb2xkVG9waWNVcmwgPSBtb2RlbC5nZXQoY29uc3RzKCdLRVlfVE9QSUNfSU5fSUZSQU1FJykpO1xyXG4gICAgaWYgKEhBU0hfS0VZX1RPUElDIGluIG5ld01hcCkgeyB0b3BpY1VybCA9IG5ld01hcFtIQVNIX0tFWV9UT1BJQ107IH1cclxuICAgIGlmICghdG9waWNVcmwpIHtcclxuICAgICAgdG9waWNVcmwgPSBvbGRUb3BpY1VybDtcclxuICAgIH1cclxuICAgIGNvbnN0IGZlYXR1cmUgPSByaC5tb2RlbC5nZXQocmguY29uc3RzKCdLRVlfRkVBVFVSRScpKTtcclxuICAgIGlmICghdG9waWNVcmwgJiYgKCFmZWF0dXJlIHx8IGZlYXR1cmUuc2hvd0RlZlRvcGljICE9PSBmYWxzZSkpIHtcclxuICAgICAgdG9waWNVcmwgPSB3aW5kb3cuZ0RlZmF1bHRUb3BpYyAhPSBudWxsID8gd2luZG93LmdEZWZhdWx0VG9waWMuc3Vic3RyaW5nKDEpIDogdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gICAgY29uc3QgY2hhbmdlZCA9IHRvcGljVXJsICYmICggKHRvcGljVXJsICE9PSBvbGRUb3BpY1VybCkgfHxcclxuICAgICAgICAgICAgIChvbGRVaU1vZGUgIT09IHVpTW9kZSkgfHxcclxuICAgICAgICAgICAgIChvbGRNYXBbSEFTSF9LRVlfUkhfSElHSExJR0hUXSAhPT0gbmV3TWFwW0hBU0hfS0VZX1JIX0hJR0hMSUdIVF0pIHx8XHJcbiAgICAgICAgICAgICAob2xkTWFwW0hBU0hfS0VZX1JIX1RPQ0lEXSAhPT0gbmV3TWFwW0hBU0hfS0VZX1JIX1RPQ0lEXSkgKTtcclxuICAgIGlmIChjaGFuZ2VkKSB7XHJcbiAgICAgIGlmIChfLnN0cmlwQm9va21hcmsodG9waWNVcmwpICE9PSBfLnN0cmlwQm9va21hcmsob2xkVG9waWNVcmwpKSB7XHJcbiAgICAgICAgXy5ydW5Ub3BpY0xvYWRpbmdBbmltYXRpb24odHJ1ZSk7XHJcbiAgICAgIH1cclxuICAgICAgbW9kZWwucHVibGlzaChjb25zdHMoJ0tFWV9UT1BJQ19JTl9JRlJBTUUnKSwgdG9waWNVcmwpO1xyXG4gICAgICB3aW5kb3cubG9hZFRvcGljKGdldFRvcGljVVJMKG5ld01hcCwgdG9waWNVcmwpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiBtb2RlbC5wdWJsaXNoKGNvbnN0cygnS0VZX1VJX01PREUnKSwgbmV3TWFwW0hBU0hfS0VZX1VJTU9ERV0pO1xyXG59O1xyXG5cclxuY29uc3QgdG9waWNDaGFuZ2VkID0gZnVuY3Rpb24odG9waWNVcmwpIHtcclxuICBjb25zdCBoYXNoTWFwID0gXy5oYXNoUGFyYW1zKCk7XHJcbiAgaWYgKHRvcGljVXJsICYmICFoYXNoTWFwW0hBU0hfS0VZX1VJTU9ERV0pIHtcclxuICAgIGNvbnN0IGRlY29kZWRVUkkgPSBkZWNvZGVVUkkoZG9jdW1lbnQubG9jYXRpb24uaHJlZik7XHJcbiAgICBjb25zdCByZWxVcmwgPSB3aW5kb3cuX2dldFJlbGF0aXZlRmlsZU5hbWUoZGVjb2RlZFVSSSwgdG9waWNVcmwpO1xyXG4gICAgY29uc3Qgb2xkVXJsID0gaGFzaE1hcFtIQVNIX0tFWV9UT1BJQ107XHJcbiAgICBpZiAoIW9sZFVybCB8fCAoXy5maWxlUGF0aChyZWxVcmwpICE9PSBfLmZpbGVQYXRoKG9sZFVybCkpKSB7XHJcbiAgICAgIG1vZGVsLnB1Ymxpc2goY29uc3RzKCdLRVlfVE9QSUNfSU5fSUZSQU1FJyksIHJlbFVybCk7XHJcbiAgICAgIHJldHVybiBzaG93VG9waWMocmVsVXJsLCBmYWxzZSk7XHJcbiAgICB9XHJcbiAgfVxyXG59O1xyXG5cclxuY29uc3QgbmF2aWdhdGVUb1VybCA9IGZ1bmN0aW9uKG9iaikge1xyXG4gIGxldCB1cmwgPSBvYmouYWJzVXJsO1xyXG4gIGlmIChfLmlzUm9vdFVybCgpKSB7XHJcbiAgICBpZiAoXy5pc1VybEFsbG93ZEluSWZyYW1lKHVybCkpIHtcclxuICAgICAgdXJsID0gXy5tYWtlUmVsYXRpdmVVcmwoXy5maXhSZWxhdGl2ZVVybCh1cmwpKTtcclxuICAgICAgaWYoXy5pc0hvbWVVcmwodXJsKSl7XHJcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LmxvY2F0aW9uLmhyZWYgPSB1cmxcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBmaWxlTmFtZSA9IHVybCAmJiBfLmZpbGVQYXRoKHVybCk7XHJcbiAgICAgIGlmIChmaWxlTmFtZSA9PT0gY29uc3RzKCdTVEFSVF9GSUxFUEFUSCcpKSB7XHJcbiAgICAgICAgdXJsID0gdXJsLnN1YnN0cmluZyhmaWxlTmFtZS5sZW5ndGgpOyAvL25ldmVyIHBhc3Mgc3RhcnQgZmlsZSBpbnNpZGUgaWZyYW1lXHJcbiAgICAgIH0gZWxzZSBpZiAoIXVybCkge1xyXG4gICAgICAgIHVybCA9ICcjdXgnO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoKHVybFswXSA9PT0gJyMnKSB8fCAodXJsWzBdID09PSAnPycpKSB7XHJcbiAgICAgICAgY29uc3QgaGFzaE1hcCA9IF8uaGFzaFBhcmFtcyhfLmV4dHJhY3RIYXNoU3RyaW5nKHVybCkpO1xyXG4gICAgICAgIGlmICghKEhBU0hfS0VZX1VJTU9ERSBpbiBoYXNoTWFwKSkgeyBoYXNoTWFwW0hBU0hfS0VZX1VJTU9ERV0gPSBudWxsOyB9XHJcbiAgICAgICAgcmV0dXJuIHF1ZXVlVXBkYXRlSGFzaE1hcChoYXNoTWFwLCB0cnVlKTtcclxuICAgICAgfSBlbHNlIGlmICh1cmwpIHtcclxuICAgICAgICByZXR1cm4gc2hvd1RvcGljKHVybCwgdHJ1ZSk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBzaG93Tm9uVG9waWModXJsLCB0cnVlKTtcclxuICAgIH1cclxuICB9IGVsc2Uge1xyXG4gICAgaWYgKCFfLmlzUm9vdFVybCh1cmwpKSB7XHJcbiAgICAgIGxldCBwYXJhbXMsIHJlbFVybDtcclxuICAgICAgY29uc3Qgcm9vdFVybCA9IF8uZ2V0Um9vdFVybCgpO1xyXG4gICAgICBpZiAoXy5pc0V4dGVybmFsVXJsKHVybCkpIHtcclxuICAgICAgICByZWxVcmwgPSB1cmw7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcGFyYW1zID0gXy5nZXRQYXJhbXNGb3JSb290KHVybCk7XHJcbiAgICAgICAgcmVsVXJsID0gXy5maXhSZWxhdGl2ZVVybChfLm1ha2VSZWxhdGl2ZVBhdGgodXJsLCByb290VXJsKSk7XHJcbiAgICAgIH1cclxuICAgICAgdXJsID0gYCR7cm9vdFVybH0ke3BhcmFtc30jdD0ke2VuY29kZVVSSUNvbXBvbmVudChyZWxVcmwpfWA7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZG9jdW1lbnQubG9jYXRpb24uaHJlZiA9IHVybDtcclxuICB9XHJcbn07XHJcblxyXG5tb2RlbC5zdWJzY3JpYmUoY29uc3RzKCdFVlRfV0lER0VUX0xPQURFRCcpLCBmdW5jdGlvbigpIHtcclxuICBfLmFkZEV2ZW50TGlzdGVuZXIoZG9jdW1lbnQsICdjbGljaycsIF8uaG9va0NsaWNrKTtcclxuXHJcbiAgbW9kZWwuc3Vic2NyaWJlKGNvbnN0cygnRVZUX0hBU0hfQ0hBTkdFJyksIGhhc2hDaGFuZ2VkKTtcclxuXHJcbiAgbW9kZWwuc3Vic2NyaWJlKGNvbnN0cygnS0VZX1RPUElDX1VSTCcpLCB0b3BpY0NoYW5nZWQpO1xyXG5cclxuICBtb2RlbC5zdWJzY3JpYmUoY29uc3RzKCdFVlRfTkFWSUdBVEVfVE9fVVJMJyksIG5hdmlnYXRlVG9VcmwpO1xyXG5cclxuICAvLyBjYWxsIHRvIHVwZGF0ZSBvbGQgbGF5b3V0IHNwZWNpZmljIHZhcmlhYmxlc1xyXG4gIG1vZGVsLnN1YnNjcmliZShjb25zdHMoJ0tFWV9UT1BJQ19JTl9JRlJBTUUnKSwgZnVuY3Rpb24odG9waWNVcmwpIHtcclxuICAgIGlmIChgJHt3aW5kb3cuZ0hvc3R9JHt3aW5kb3cuZ0hvc3RQYXRofWAgIT09ICcvJykgeyAvLyB3YWl0IHRvIHJlc29sdmUgZ0hvc3RQYXRoXHJcbiAgICAgIGlmICh3aW5kb3cuc2V0VG9waWMpIHsgKHdpbmRvdy5zZXRUb3BpYykoKTsgfVxyXG4gICAgICBpZiAod2luZG93LmNoYW5nZVRvcGljTGluaykge1xyXG4gICAgICAgIHJldHVybiB3aW5kb3cuY2hhbmdlVG9waWNMaW5rKGRvY3VtZW50LmxvY2F0aW9uLnRvU3RyaW5nKCkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIG1vZGVsLnN1YnNjcmliZShjb25zdHMoJ0VWVF9UT1BJQ19MT0FERUQnKSwgKCkgPT4gXy5ydW5Ub3BpY0xvYWRpbmdBbmltYXRpb24oZmFsc2UpKTtcclxuXHJcbiAgcmV0dXJuIG1vZGVsLnN1YnNjcmliZShjb25zdHMoJ0VWVF9JTlNJREVfSUZSQU1FX0RPTV9DT05URU5UTE9BREVEJyksICgpID0+IF8ucnVuVG9waWNMb2FkaW5nQW5pbWF0aW9uKGZhbHNlKSk7XHJcbn0pO1xyXG4iLCJsZXQgeyByaCB9ID0gd2luZG93O1xyXG5sZXQgeyBtb2RlbCB9ID0gcmg7XHJcbmxldCB7IF8gfSA9IHJoO1xyXG5sZXQgeyBjb25zdHMgfSA9IHJoO1xyXG5sZXQgeyBodHRwIH0gPSByaDtcclxuXHJcblxyXG52YXIgR2xvc3NhcnlDb250cm9sbGVyID0gKGZ1bmN0aW9uKCkge1xyXG4gIGxldCBlbnRyeXMgPSB1bmRlZmluZWQ7XHJcbiAgR2xvc3NhcnlDb250cm9sbGVyID0gY2xhc3MgR2xvc3NhcnlDb250cm9sbGVyIGV4dGVuZHMgcmguTmF2Q29udHJvbGxlciB7XHJcbiAgICBzdGF0aWMgaW5pdENsYXNzKCkge1xyXG4gIFxyXG4gICAgICBlbnRyeXMgPSAnZW50cnlzJztcclxuICAgIH1cclxuICAgIGNvbnN0cnVjdG9yKHdpZGdldCkge1xyXG4gICAgICBzdXBlcigpO1xyXG4gICAgICB0aGlzLmRhdGEgPSBbXTtcclxuICAgICAgdGhpcy5jaHVua0NvdW50ID0gMDtcclxuICAgICAgdGhpcy5jb3VudCA9IDA7XHJcbiAgICAgIHRoaXMua2V5cyA9ICcnO1xyXG4gICAgICB0aGlzLmFsaHBhYmV0ID0gJyc7XHJcbiAgICAgIHRoaXMubG9hZE5hdkRhdGEoJ2dsbycpO1xyXG4gICAgICB0aGlzLmZpbHRlciA9ICcnO1xyXG4gICAgICB0aGlzLndpZGdldCA9IHdpZGdldDtcclxuICAgICAgdGhpcy53aWRnZXQucHVibGlzaCgnc2hvdycsIHt9KTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRFbGVtZW50KGVsZW1lbnRzLCBsaXN0KSB7XHJcbiAgICAgIHJldHVybiAoKCkgPT4ge1xyXG4gICAgICAgIGxldCByZXN1bHQgPSBbXTtcclxuICAgICAgICBfLmVhY2goZWxlbWVudHNbZW50cnlzXSwgKGVsZW1lbnQpID0+IHtcclxuICAgICAgICAgIGlmIChlbGVtZW50ICE9IG51bGwpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmxvb2t1cChsaXN0LCBlbGVtZW50KSkge1xyXG4gICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGxpc3QucHVzaChlbGVtZW50KSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgcmVzdWx0LnB1c2godW5kZWZpbmVkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sIHRoaXMpO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgIH0pKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZXhpc3RzKG5hbWUpIHtcclxuICAgICAgbGV0IGNoID0gdGhpcy5hbHBoYVRleHQobmFtZSk7XHJcbiAgICAgIGlmICh0aGlzLmFsaHBhYmV0LmluZGV4T2YoY2gpID4gLTEpIHsgcmV0dXJuIHRydWU7IH1cclxuICAgICAgdGhpcy5hbGhwYWJldCArPSBjaDtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGlzRmlsdGVyZWQobmFtZSwgbW9kZWxLZXkpIHtcclxuICAgICAgbGV0IGZpbHRlciA9IG1vZGVsS2V5ID8gbW9kZWwuZ2V0KG1vZGVsS2V5KSA6IHRoaXMuZmlsdGVyO1xyXG4gICAgICByZXR1cm4gZmlsdGVyICYmXHJcbiAgICAgICAobmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpLmluZGV4T2YoZmlsdGVyLnRvTG9jYWxlTG93ZXJDYXNlKCkpID09PSAtMSk7XHJcbiAgICB9XHJcblxyXG4gICAgYWxwaGFUZXh0KG5hbWUpIHtcclxuICAgICAgcmV0dXJuIG5hbWUudG9VcHBlckNhc2UoKS5jaGFyQXQoMCk7XHJcbiAgICB9XHJcblxyXG4gICAgZmlsdGVyR2xvKHZhbHVlKSB7XHJcbiAgICAgIHRoaXMuZmlsdGVyID0gdmFsdWUudG9Mb2NhbGVMb3dlckNhc2UoKTtcclxuICAgICAgdGhpcy5hbGhwYWJldCA9ICcnO1xyXG4gICAgICByZXR1cm4gbW9kZWwucHVibGlzaChjb25zdHMoJ1BST0pFQ1RfR0xPU1NBUllfREFUQScpLFxyXG4gICAgICAgbW9kZWwuZ2V0KGNvbnN0cygnUFJPSkVDVF9HTE9TU0FSWV9EQVRBJykpKTtcclxuICAgIH1cclxuICB9O1xyXG4gIEdsb3NzYXJ5Q29udHJvbGxlci5pbml0Q2xhc3MoKTtcclxuICByZXR1cm4gR2xvc3NhcnlDb250cm9sbGVyO1xyXG59KSgpO1xyXG5cclxuXHJcblxyXG5yaC5jb250cm9sbGVyKCdHbG9zc2FyeUNvbnRyb2xsZXInLCBHbG9zc2FyeUNvbnRyb2xsZXIpOyIsImxldCB7IHJoIH0gPSB3aW5kb3c7XHJcbmxldCB7IG1vZGVsIH0gPSByaDtcclxubGV0IHsgXyB9ID0gcmg7XHJcbmxldCB7IGNvbnN0cyB9ID0gcmg7XHJcbmxldCB7IGh0dHAgfSA9IHJoO1xyXG5sZXQgeyByaHMgfSA9IHJoO1xyXG5sZXQgdG9waWNzID0gJ3RvcGljcyc7XHJcblxyXG5cclxuY2xhc3MgTmF2Q29udHJvbGxlciB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLnVwZGF0ZURhdGEgPSB0aGlzLnVwZGF0ZURhdGEuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIGxvb2t1cChjaGlsZHJlbiwga2V5KSB7XHJcbiAgICBsZXQgZWxlbWVudDtcclxuICAgIGlmICgoY2hpbGRyZW4gIT0gbnVsbCkgJiYgKGtleSAhPSBudWxsKSkge1xyXG4gICAgICBfLmFueShjaGlsZHJlbiwgKGNoaWxkKSA9PiAge1xyXG4gICAgICAgIGlmIChjaGlsZCAhPSBudWxsKSB7XHJcbiAgICAgICAgICBpZiAoKGtleS50eXBlID09PSBjaGlsZC50eXBlKSAmJiAoa2V5Lm5hbWUgPT09IGNoaWxkLm5hbWUpICYmXHJcbiAgICAgICAgICBfLmlzRXF1YWwoa2V5LnVybCwgY2hpbGQudXJsKSkge1xyXG4gICAgICAgICAgICBlbGVtZW50ID0gY2hpbGQ7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gZWxlbWVudCAhPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgfSwgdGhpcyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZWxlbWVudDtcclxuICB9XHJcblxyXG4gIHNvcnQoYXJyYXkpIHtcclxuICAgIHJldHVybiBhcnJheS5zb3J0KChmaXJzdCwgc2Vjb25kKSA9PiB3aW5kb3cuY29tcGFyZShmaXJzdC5uYW1lLCBzZWNvbmQubmFtZSkpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlRGF0YShjb25zdEtleSwgcHJvamVjdFVybCkge1xyXG4gICAgbGV0IGN1ckRhdGEgPSBtb2RlbC5nZXQoY29uc3RzKCdLRVlfVEVNUF9EQVRBJykpIHx8IFtdO1xyXG4gICAgbW9kZWwucHVibGlzaChjb25zdHMoJ0tFWV9URU1QX0RBVEEnKSk7XHJcbiAgICB0aGlzLmFkZEVsZW1lbnQoY3VyRGF0YSwgdGhpcy5kYXRhLCBwcm9qZWN0VXJsLCB0aGlzLmtleXMpO1xyXG4gICAgaWYgKCgtLXRoaXMuY2h1bmtDb3VudCA9PT0gMCkgJiYgKHRoaXMuY291bnQgPT09IDApKSB7XHJcbiAgICAgIHRoaXMuc29ydCh0aGlzLmRhdGEpO1xyXG4gICAgICByZXR1cm4gbW9kZWwucHVibGlzaChjb25zdHMoY29uc3RLZXkpLCB0aGlzLmRhdGEpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0Q2h1bmtEYXRhKHByb2plY3RVcmwsIGtleSkge1xyXG4gICAgdGhpcy5jb3VudC0tO1xyXG4gICAgbGV0IGFyciA9IF9fZ3VhcmRfXyhtb2RlbC5nZXQoY29uc3RzKCdLRVlfVEVNUF9EQVRBJykpLCB4ID0+IHhbJ2NodW5raW5mb3MnXSkgfHwgW107XHJcbiAgICB0aGlzLmNodW5rQ291bnQgKz0gYXJyLmxlbmd0aDtcclxuICAgIHJldHVybiBfLmVhY2goYXJyLCBmdW5jdGlvbihjaHVuaykge1xyXG4gICAgICBpZiAocHJvamVjdFVybCkgeyBwcm9qZWN0VXJsID0gXy5lbnN1cmVTbGFzaChwcm9qZWN0VXJsKTsgfVxyXG4gICAgICByZXR1cm4gXy5sb2FkU2NyaXB0KGAke3Byb2plY3RVcmx9d2h4ZGF0YS8ke2NodW5rLm5vZGV9Lm5ldy5qc2AsXHJcbiAgICAgICAgZmFsc2UsICgpID0+IHtcclxuICAgICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZURhdGEoa2V5LCBwcm9qZWN0VXJsKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAsIHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgbG9hZE5hdkRhdGEodHlwZSkge1xyXG4gICAgcmV0dXJuIG1vZGVsLnN1YnNjcmliZShjb25zdHMoJ0tFWV9QUk9KRUNUX0xJU1QnKSwgbGlzdCA9PiB7XHJcbiAgICAgIHRoaXMuYWxocGFiZXQgPSAnJztcclxuICAgICAgdGhpcy5jb3VudCArPSBsaXN0Lmxlbmd0aDtcclxuICAgICAgcmV0dXJuIF8uZWFjaChsaXN0LCBmdW5jdGlvbihwcm9qZWN0VXJsKSB7XHJcbiAgICAgICAgaWYgKHByb2plY3RVcmwpIHsgcHJvamVjdFVybCA9IF8uZW5zdXJlU2xhc2gocHJvamVjdFVybCk7IH1cclxuICAgICAgICByZXR1cm4gXy5sb2FkU2NyaXB0KGAke3Byb2plY3RVcmx9d2h4ZGF0YS9cXFxyXG4ke3R5cGUgPT09ICduZHgnID8gJ2lkeCcgOiAnZ2xvJ30ubmV3LmpzYCwgZmFsc2UsICgpID0+IHtcclxuICAgICAgICAgIHJldHVybiB0aGlzLmdldENodW5rRGF0YShwcm9qZWN0VXJsLCB0eXBlID09PSAnbmR4JyA/ICdQUk9KRUNUX0lOREVYX0RBVEEnXHJcbiAgICAgICAgICA6ICdQUk9KRUNUX0dMT1NTQVJZX0RBVEEnXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgICwgdGhpcyk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbnJoLk5hdkNvbnRyb2xsZXIgPSBOYXZDb250cm9sbGVyO1xyXG5cclxudmFyIEluZGV4Q29udHJvbGxlciA9IChmdW5jdGlvbigpIHtcclxuICBsZXQgZGVmUHJvamVjdCA9IHVuZGVmaW5lZDtcclxuICBJbmRleENvbnRyb2xsZXIgPSBjbGFzcyBJbmRleENvbnRyb2xsZXIgZXh0ZW5kcyByaC5OYXZDb250cm9sbGVyIHtcclxuICAgIHN0YXRpYyBpbml0Q2xhc3MoKSB7XHJcbiAgICAgIGRlZlByb2plY3QgPSAnJztcclxuICAgIH1cclxuICAgIGNvbnN0cnVjdG9yKHdpZGdldCkge1xyXG4gICAgICBzdXBlcigpO1xyXG4gICAgICB0aGlzLmRhdGEgPSBbXTtcclxuICAgICAgdGhpcy5jaHVua0NvdW50ID0gMDtcclxuICAgICAgdGhpcy5jb3VudCA9IDA7XHJcbiAgICAgIHRoaXMuYWxocGFiZXQgPSAnJztcclxuICAgICAgdGhpcy5maWx0ZXIgPSAnJztcclxuICAgICAgdGhpcy5rZXlzID0gJ2tleXMnO1xyXG4gICAgICB0aGlzLndpZGdldCA9IHdpZGdldDtcclxuXHJcbiAgICAgIG1vZGVsLnN1YnNjcmliZU9uY2UoY29uc3RzKCdFVlRfUFJPSkVDVF9MT0FERUQnKSwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMubG9hZE5hdkRhdGEoJ25keCcpO1xyXG4gICAgICAgICh0aGlzLmdldEluZGV4RGF0YSkoKTtcclxuICAgICAgICByZXR1cm4gbW9kZWwuc3Vic2NyaWJlKGNvbnN0cygnS0VZX0lOREVYX0ZJTFRFUicpLCAoKSA9PiB7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5hbGhwYWJldCA9ICcnO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgYWRkRWxlbWVudChlbGVtZW50LCBsaXN0LCBwcm9qZWN0VXJsLCBkYXRhKSB7XHJcbiAgICAgIGlmIChlbGVtZW50W2RhdGFdICE9IG51bGwpIHtcclxuICAgICAgICByZXR1cm4gKCgpID0+IHtcclxuICAgICAgICAgIGxldCByZXN1bHQgPSBbXTtcclxuICAgICAgICAgIF8uZWFjaChlbGVtZW50W2RhdGFdLCAoY2hpbGQpID0+IHtcclxuICAgICAgICAgICAgaWYgKGNoaWxkICE9IG51bGwpIHt2YXIgZXhpc3Rpbmc7XHJcblxyXG4gICAgICAgICAgICAgIGlmICghKGV4aXN0aW5nID0gdGhpcy5sb29rdXAobGlzdCwgY2hpbGQpKSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IG9iaiA9IHt0eXBlOiBjaGlsZC50eXBlLCBuYW1lOiBjaGlsZC5uYW1lfTtcclxuICAgICAgICAgICAgICAgIGlmIChjaGlsZFsnZGF0YS1yaHRhZ3MnXSkge1xyXG4gICAgICAgICAgICAgICAgICBvYmpbJ2RhdGEtcmh0YWdzJ10gPSBgJHtjaGlsZFsnZGF0YS1yaHRhZ3MnXX0rJHtwcm9qZWN0VXJsfWA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIWNoaWxkLnVybCkgeyBvYmpbdG9waWNzXSA9IFtdOyB9XHJcbiAgICAgICAgICAgICAgICBsZXQgcmVsVXJsID0gXy5tYWtlUmVsYXRpdmVVcmwoYCR7cHJvamVjdFVybH1gLCBkZWZQcm9qZWN0KTtcclxuICAgICAgICAgICAgICAgIGlmIChjaGlsZC51cmwgIT0gbnVsbCkgeyBvYmoudXJsID0gYCR7ZW5jb2RlVVJJKHJlbFVybCl9JHtjaGlsZC51cmx9YDsgfVxyXG4gICAgICAgICAgICAgICAgaWYgKChjaGlsZC51cmwgPT0gbnVsbCkpIHsgb2JqW3RoaXMua2V5c10gPSBbXTsgfVxyXG4gICAgICAgICAgICAgICAgbGlzdC5wdXNoKG9iaik7XHJcbiAgICAgICAgICAgICAgICBleGlzdGluZyA9IGxpc3RbbGlzdC5sZW5ndGggLSAxXTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgdGhpcy5hZGRFbGVtZW50KGNoaWxkLCBleGlzdGluZ1t0aGlzLmtleXNdLCBwcm9qZWN0VXJsLCB0aGlzLmtleXMpO1xyXG4gICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHRoaXMuYWRkRWxlbWVudChjaGlsZCwgZXhpc3RpbmdbdG9waWNzXSwgcHJvamVjdFVybCwgdG9waWNzKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sIHRoaXMpO1xyXG4gICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9KSgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHNob3dJdGVtKG5hbWUpIHtcclxuICAgICAgbGV0IGZpbHRlciA9IG1vZGVsLmdldChjb25zdHMoJ0tFWV9JTkRFWF9GSUxURVInKSk7XHJcbiAgICAgIHJldHVybiAhZmlsdGVyIHx8XHJcbiAgICAgICAobmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpLmluZGV4T2YoZmlsdGVyLnRvTG9jYWxlTG93ZXJDYXNlKCkpICE9PSAtMSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2hvd0NhdGVnb3J5KG5hbWUsIGxldmVsKSB7XHJcbiAgICAgIGlmIChsZXZlbCA+IDApIHsgcmV0dXJuIGZhbHNlOyB9XHJcbiAgICAgIGxldCBjaCA9IHRoaXMuYWxwaGFUZXh0KG5hbWUpO1xyXG4gICAgICBpZiAodGhpcy5hbGhwYWJldC5pbmRleE9mKGNoKSA+IC0xKSB7IHJldHVybiBmYWxzZTsgfVxyXG4gICAgICB0aGlzLmFsaHBhYmV0ICs9IGNoO1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBzaG93TmV4dExldmVsKG5vZGUpIHtcclxuICAgICAgbGV0IGlkID0gbm9kZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtaW5kZXhpZCcpO1xyXG4gICAgICBsZXQgb2xkID0gdGhpcy53aWRnZXQuZ2V0KGBzaG93LiR7aWR9YCk7XHJcbiAgICAgIGxldCBjaGlsZERhdGEgPSB7W2lkXTogIW9sZH07XHJcbiAgICAgIHdoaWxlIChpZCkge1xyXG4gICAgICAgIGlkID0gaWQuc3Vic3RyKDAsIGlkLmxhc3RJbmRleE9mKCdfJykpO1xyXG4gICAgICAgIGNoaWxkRGF0YVtpZF0gPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0aGlzLndpZGdldC5wdWJsaXNoKCdzaG93JywgY2hpbGREYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICBhbHBoYVRleHQobmFtZSkge1xyXG4gICAgICByZXR1cm4gbmFtZS50b1VwcGVyQ2FzZSgpLmNoYXJBdCgwKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRJbmRleERhdGEoKSB7XHJcbiAgICAgIHJldHVybiBtb2RlbC5zdWJzY3JpYmVPbmNlKGNvbnN0cygnS0VZX1BVQkxJU0hfQkFTRV9VUkwnKSwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGxldCBiYXNlVXJsID0gbW9kZWwuZ2V0KGNvbnN0cygnS0VZX1BVQkxJU0hfQkFTRV9VUkwnKSk7XHJcbiAgICAgICAgICBsZXQgaG9zdCA9IGRvY3VtZW50LmxvY2F0aW9uLm9yaWdpbjtcclxuICAgICAgICAgIGxldCBiYXNlQ29udGV4dCA9IGJhc2VVcmwuc3Vic3RyKGhvc3QubGVuZ3RoKTtcclxuICAgICAgICAgIGxldCBwYXJlbnRQYXRoID0gXy5wYXJlbnRQYXRoKF8uZmlsZVBhdGgoXy5nZXRSb290VXJsKCkpKTtcclxuICAgICAgICAgIGlmIChiYXNlQ29udGV4dCAmJiAhXy5pc0VtcHR5U3RyaW5nKGJhc2VDb250ZXh0KSkge1xyXG4gICAgICAgICAgICBsZXQgaGFzaFN0cmluZyA9IF8ubWFwVG9FbmNvZGVkU3RyaW5nKF8uZXh0ZW5kKF8uYWRkUGF0aE5hbWVLZXkoe2FyZWE6IHJocy5hcmVhKCksXHJcbiAgICAgICAgICAgIHByajogcmhzLnByb2plY3QoKSwgdHlwZTogKHJocy50eXBlKSgpLCBhZ3Q6ICduZHgnLCBtZ3I6ICdhZ20nXHJcbiAgICAgICAgICAgIH0pKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICByZXR1cm4gaHR0cC5nZXQoYCR7YmFzZUNvbnRleHR9PyR7aGFzaFN0cmluZ31gKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xyXG4gICAgICAgICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKGRhdGEpO1xyXG4gICAgICAgICAgICAgIGxldCBsaXN0ID0gW107XHJcbiAgICAgICAgICAgICAgbGV0IHJvb3RQcmpzID0gW107XHJcbiAgICAgICAgICAgICAgbGV0IHByb2plY3RzID0gZGF0YS5hbGxQcm9qZWN0cztcclxuICAgICAgICAgICAgICBsZXQgeyBtYXN0ZXJQcm9qZWN0cyB9ID0gZGF0YTtcclxuICAgICAgICAgICAgICBpZiAocHJvamVjdHMubGVuZ3RoKSB7IHByb2plY3RzWzBdID0gXy5lbnN1cmVTbGFzaChwcm9qZWN0c1swXSk7IH1cclxuICAgICAgICAgICAgICBsZXQgbWFrZWxpc3QgPSAocHJvamVjdExpc3QsIG91dExpc3QpID0+XHJcbiAgICAgICAgICAgICAgICBfLmVhY2gocHJvamVjdExpc3QsIGl0ZW0gPT4gb3V0TGlzdC5wdXNoKF8ubWFrZVJlbGF0aXZlVXJsKGl0ZW0sIHByb2plY3RzWzBdKSkpXHJcbiAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgIG1ha2VsaXN0KHByb2plY3RzLCBsaXN0KTtcclxuICAgICAgICAgICAgICBtYWtlbGlzdChtYXN0ZXJQcm9qZWN0cywgcm9vdFByanMpO1xyXG4gICAgICAgICAgICAgIHZhciB1cGRhdGVMaXN0ID0gZnVuY3Rpb24oaXRlbSxpbmRleCxsaXN0KSB7XHJcbiAgICAgICAgICAgICAgICBpZihfLmlzRW1wdHlTdHJpbmcoaXRlbSkpIHtcclxuICAgICAgICAgICAgICAgICAgbGlzdFtpbmRleF0gPSAnLic7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICBfLmVhY2gobGlzdCwgdXBkYXRlTGlzdCk7XHJcbiAgICAgICAgICAgICAgXy5lYWNoKHJvb3RQcmpzLCB1cGRhdGVMaXN0KTtcclxuICAgICAgICAgICAgICBtb2RlbC5wdWJsaXNoKGNvbnN0cygnS0VZX1BST0pFQ1RfTElTVCcpLCBsaXN0KTtcclxuICAgICAgICAgICAgICByZXR1cm4gbW9kZWwucHVibGlzaChjb25zdHMoJ0tFWV9NQVNURVJfUFJPSkVDVF9MSVNUJyksIHJvb3RQcmpzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICBpZiAocmguX2RlYnVnKSB7IHJldHVybiByaC5fZCgnd2FybicsIGVyci5tZXNzYWdlKTsgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfTtcclxuICBJbmRleENvbnRyb2xsZXIuaW5pdENsYXNzKCk7XHJcbiAgcmV0dXJuIEluZGV4Q29udHJvbGxlcjtcclxufSkoKTtcclxuXHJcblxyXG5yaC5jb250cm9sbGVyKCdJbmRleENvbnRyb2xsZXInLCBJbmRleENvbnRyb2xsZXIpO1xyXG5cclxuZnVuY3Rpb24gX19ndWFyZF9fKHZhbHVlLCB0cmFuc2Zvcm0pIHtcclxuICByZXR1cm4gKHR5cGVvZiB2YWx1ZSAhPT0gJ3VuZGVmaW5lZCcgJiYgdmFsdWUgIT09IG51bGwpID8gdHJhbnNmb3JtKHZhbHVlKSA6IHVuZGVmaW5lZDtcclxufVxyXG4iLCJsZXQgcmggPSByZXF1aXJlKFwiLi4vLi4vc3JjL2xpYi9yaFwiKVxyXG5sZXQgXyA9IHJoLl87XHJcblxyXG5fLmZpbmRFZGl0RGlzdCA9IChmaXJzdCwgc2Vjb25kKSA9PntcclxuICAgIGlmKGZpcnN0ID09IHNlY29uZClcclxuICAgICAgcmV0dXJuIDA7XHJcbiAgICBsZXQgcHJldkRpc3Q9W107XHJcbiAgICBsZXQgZGlzdD1bXTtcclxuICAgIGZvcih2YXIgaT0wO2k8c2Vjb25kLmxlbmd0aCsxO2krKylcclxuICAgIHtcclxuICAgICAgcHJldkRpc3QucHVzaChpKTtcclxuICAgICAgZGlzdC5wdXNoKDApOyAgICAgICAvL2p1c3QgdG8gY3JlYXRlIGEgYXJyYXkgb2Ygc2l6ZSBzZWNvbmQubGVuZ3RoKzFcclxuICAgIH1cclxuXHJcbiAgZm9yKHZhciBpPTA7aTxmaXJzdC5sZW5ndGg7aSsrKVxyXG4gIHtcclxuICAgIGRpc3RbMF09aSsxO1xyXG5cclxuICAgIGZvciAodmFyIGogPSAwOyBqIDwgc2Vjb25kLmxlbmd0aDsgaisrKVxyXG4gICAge1xyXG4gICAgICAgIGxldCBjdXJyO1xyXG4gICAgICAgIGlmKGZpcnN0W2ldPT1zZWNvbmRbal0pXHJcbiAgICAgICAgICBjdXJyPTA7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgY3Vycj0xO1xyXG5cclxuICAgICAgICBkaXN0W2ogKyAxXSA9IE1hdGgubWluKGRpc3Rbal0gKyAxLCBwcmV2RGlzdFtqICsgMV0gKyAxLCBwcmV2RGlzdFtqXSArIGN1cnIpO1xyXG4gICAgfVxyXG5cclxuICAgIGZvciAodmFyIGogPSAwOyBqIDwgcHJldkRpc3QubGVuZ3RoOyBqKyspICAgICAgICAgXHJcbiAgICAgIHByZXZEaXN0W2pdID0gZGlzdFtqXTtcclxuICB9ICAgXHJcbiAgcmV0dXJuICBkaXN0W2Rpc3QubGVuZ3RoLTFdXHJcbn07IiwiY29uc3QgYmluZCA9IChmbiwgbWUpID0+IGZ1bmN0aW9uKCl7IHJldHVybiBmbi5hcHBseShtZSwgYXJndW1lbnRzKTsgfTtcclxuXHJcbmxldCByaCA9IHJlcXVpcmUoXCIuLi8uLi9zcmMvbGliL3JoXCIpXHJcbmxldCBub2RlVXRpbCA9IHJlcXVpcmUoJy4uLy4uL3NyYy9yZXNwb25zaXZlX2hlbHAvdXRpbHMvbm9kZV91dGlscycpXHJcbmxldCBfID0gcmguXztcclxubGV0ICQgPSByaC4kO1xyXG5sZXQgbW9kZWwgPSByaC5tb2RlbDtcclxubGV0IGNvbnN0cyA9IHJoLmNvbnN0cztcclxubGV0IEtFWV9UT0NfRFJJTExfRE9XTiA9IGNvbnN0cygnS0VZX1RPQ19EUklMTF9ET1dOJyk7XHJcbmxldCBBTklNX1RJTUUgPSA3MDA7XHJcbmxldCBTeW5jVG9jO1xyXG5sZXQgVG9jQ29udHJvbGxlcjtcclxuXHJcblN5bmNUb2MgPSAoKCgpID0+IHtcclxuICBjbGFzcyBTeW5jVG9jIHtcclxuICAgIHN5bmModGMsIGluZm8pIHtcclxuICAgICAgbGV0IG5vZGU7XHJcbiAgICAgIHRjLnVwZGF0ZUFjdGl2ZUJvb2tJbmZvKDAsICdfJyk7XHJcblxyXG4gICAgICBub2RlID0gdGMud2lkZ2V0Lm5vZGU7XHJcbiAgICAgIC8vdGMudXBkYXRlQnJlYWRjcnVtYkluZm8odGMud2lkZ2V0Lm5vZGUpO1xyXG5cclxuICAgICAgdGhpcy5yZXNldChpbmZvKTtcclxuICAgICAgcmV0dXJuIHRoaXMuc3luY1RvUHJvamVjdFRvYyh0Yywgbm9kZS5jaGlsZHJlbiwgKChfdGhpcyA9PiBub2RlcyA9PiBfdGhpcy5zeW5jVG9Ub2NJdGVtKHRjLCBub2RlcykpKSh0aGlzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzZXQoaW5mbykge1xyXG4gICAgICBsZXQgaWR4O1xyXG4gICAgICB0aGlzLnBhcnNlVG9jSW5mbyhpbmZvKTtcclxuICAgICAgaWR4ID0gdGhpcy5vcmRlci5sYXN0SW5kZXhPZignQCcpO1xyXG4gICAgICByZXR1cm4gdGhpcy5wYXJlbnRPcmRlciA9IGlkeCAhPT0gLTEgPyB0aGlzLm9yZGVyLnN1YnN0cmluZygwLCBpZHgpIDogJyc7XHJcbiAgICB9XHJcblxyXG4gICAgcGFyc2VUb2NJbmZvKGluZm8pIHtcclxuICAgICAgbGV0IHBhdGg7XHJcbiAgICAgIHRoaXMub3JkZXIgPSBpbmZvLmNoaWxkT3JkZXIgfHwgJyc7XHJcbiAgICAgIHBhdGggPSBfLnNwbGl0QW5kVHJpbShpbmZvLmNoaWxkUHJlZml4LCAnLicpO1xyXG4gICAgICB0aGlzLnRvY1BhdGggPSBfLnJlZHVjZShwYXRoLCAocmVzdWx0LCBwcmVmaXgpID0+IHtcclxuICAgICAgICBsZXQgYXJyLCBib29rTm87XHJcbiAgICAgICAgYXJyID0gXy5zcGxpdEFuZFRyaW0ocHJlZml4LCAnQCcpO1xyXG4gICAgICAgIGlmIChib29rTm8gPSBhcnIuc2hpZnQoKSkge1xyXG4gICAgICAgICAgcmVzdWx0LnB1c2goe1xyXG4gICAgICAgICAgICBib29rTm86IF8ucGFyc2VJbnQoYm9va05vLCAwKSxcclxuICAgICAgICAgICAgb3JkZXI6IGFyci5sZW5ndGggPiAwID8gYEAke2Fyci5qb2luKCdAJyl9YCA6ICcnXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgfSwgW10pO1xyXG4gICAgICBwYXRoID0gXy5zcGxpdEFuZFRyaW0oaW5mby50b3BpY0lEIHx8ICcwJywgJ18nKTtcclxuICAgICAgdGhpcy5ib29rTm9zID0gXy5tYXAocGF0aC5zaGlmdCgpLnNwbGl0KCcuJyksIGl0ZW0gPT4gXy5wYXJzZUludChpdGVtLCAwKSk7XHJcbiAgICAgIHJldHVybiB0aGlzLnBhZ2VObyA9IF8ucGFyc2VJbnQocGF0aC5zaGlmdCgpLCAwKTtcclxuICAgIH1cclxuXHJcbiAgICBzeW5jVG9Qcm9qZWN0VG9jKHRjLCBub2Rlcywgc3VjY2Vzcykge1xyXG4gICAgICBsZXQgY3VyQm9va05vLCBpZHgsIHBhdGg7XHJcbiAgICAgIGlmICh0aGlzLnRvY1BhdGgubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGN1ckJvb2tObyA9IDA7XHJcbiAgICAgICAgcGF0aCA9IHRoaXMudG9jUGF0aC5zaGlmdCgpO1xyXG4gICAgICAgIGlkeCA9IF8uZmluZEluZGV4KG5vZGVzLCBjaGlsZCA9PiB7XHJcbiAgICAgICAgICBsZXQgY2hpbGRPcmRlcjtcclxuICAgICAgICAgIGNoaWxkT3JkZXIgPSAkLmRhdGFzZXQoY2hpbGQsICdjaGlsZG9yZGVyJykgfHwgJyc7XHJcbiAgICAgICAgICBpZiAoY2hpbGRPcmRlciA9PT0gcGF0aC5vcmRlciAmJiB0Yy5pc0Jvb2tOb2RlKGNoaWxkKSkge1xyXG4gICAgICAgICAgICBjdXJCb29rTm8rKztcclxuICAgICAgICAgICAgaWYgKGN1ckJvb2tObyA9PT0gcGF0aC5ib29rTm8pIHtcclxuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmIChpZHggIT09IC0xKSB7XHJcbiAgICAgICAgICByZXR1cm4gdGMub3BlbkJvb2sobm9kZXNbaWR4XSwgdHJ1ZSwgKChfdGhpcyA9PiAoKSA9PiBfLmRlZmVyKCgpID0+IHtcclxuICAgICAgICAgICAgbGV0IGNoaWxkLCBjaGlsZE5vZGVzO1xyXG4gICAgICAgICAgICBjaGlsZCA9IG5vZGVzW2lkeCArIDFdO1xyXG4gICAgICAgICAgICBpZiAoY2hpbGROb2RlcyA9IGNoaWxkLmNoaWxkcmVuICYmIGNoaWxkLmNoaWxkcmVuWzBdKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnN5bmNUb1Byb2plY3RUb2ModGMsIGNoaWxkTm9kZXMuY2hpbGRyZW4sIHN1Y2Nlc3MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KSkpKHRoaXMpKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSBpZiAoc3VjY2Vzcykge1xyXG4gICAgICAgIHJldHVybiBzdWNjZXNzKG5vZGVzKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN5bmNUb1RvY0l0ZW0odGMsIG5vZGVzLCB3YWl0KSB7XHJcbiAgICAgIGxldCBjdXJCb29rTm8sIGN1clBhZ2VObywgbGFzdEJvb2tOb2RlO1xyXG4gICAgICBpZiAod2FpdCA9PSBudWxsKSB7XHJcbiAgICAgICAgd2FpdCA9IDE7XHJcbiAgICAgIH1cclxuICAgICAgY3VyUGFnZU5vID0gMDtcclxuICAgICAgY3VyQm9va05vID0gMDtcclxuICAgICAgbGFzdEJvb2tOb2RlID0gbnVsbDtcclxuICAgICAgcmV0dXJuIF8uYW55KG5vZGVzLCAoKF90aGlzID0+IGNoaWxkID0+IHtcclxuICAgICAgICBsZXQgYm9va05vZGUsIGNoaWxkT3JkZXIsIGhhc0NoaWxkLCBwYWdlTm9kZSwgdG9waWNOb2RlO1xyXG4gICAgICAgIGNoaWxkT3JkZXIgPSAkLmRhdGFzZXQoY2hpbGQsICdjaGlsZG9yZGVyJykgfHwgJyc7XHJcbiAgICAgICAgaWYgKGNoaWxkT3JkZXIgIT09IF90aGlzLm9yZGVyKSB7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0Yy5pc0Jvb2tOb2RlKGNoaWxkKSkge1xyXG4gICAgICAgICAgYm9va05vZGUgPSBjaGlsZDtcclxuICAgICAgICAgIGxhc3RCb29rTm9kZSA9IGJvb2tOb2RlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYm9va05vZGUpIHtcclxuICAgICAgICAgIGN1ckJvb2tObysrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoX3RoaXMuYm9va05vc1swXSAhPT0gY3VyQm9va05vKSB7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0Yy5pc1BhZ2VOb2RlKGNoaWxkKSkge1xyXG4gICAgICAgICAgcGFnZU5vZGUgPSBjaGlsZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHBhZ2VOb2RlKSB7XHJcbiAgICAgICAgICBjdXJQYWdlTm8rKztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKF90aGlzLmJvb2tOb3MubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICBpZiAoX3RoaXMucGFnZU5vID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRvcGljTm9kZSA9IGNoaWxkO1xyXG4gICAgICAgICAgICBpZiAobGFzdEJvb2tOb2RlKSB7XHJcbiAgICAgICAgICAgICAgdGMub3BlbkJvb2sobGFzdEJvb2tOb2RlLCB0cnVlLCAoKSA9PiB0Yy51cGRhdGVCb29rSW5mbygpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBlbHNlIGlmIChwYWdlTm9kZSAmJiBjdXJQYWdlTm8gPT09IF90aGlzLnBhZ2VObykge1xyXG4gICAgICAgICAgICB0b3BpY05vZGUgPSBjaGlsZDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRjLnVwZGF0ZUJvb2tJbmZvKCk7XHJcbiAgICAgICAgICBpZiAodG9waWNOb2RlKSB7XHJcbiAgICAgICAgICAgIHRjLnNlbGVjdExpbmsodG9waWNOb2RlLCB0cnVlLCB3YWl0KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKGxhc3RCb29rTm9kZSAmJiAoaGFzQ2hpbGQgPSAkLmhhc0NsYXNzKGNoaWxkLCAnY2hpbGQnKSkpIHtcclxuICAgICAgICAgIF90aGlzLmJvb2tOb3Muc2hpZnQoKTtcclxuICAgICAgICAgIHRjLm9wZW5Cb29rKGxhc3RCb29rTm9kZSwgdHJ1ZSwgKCkgPT4gXy5kZWZlcigoKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBjaGlsZE5vZGVzO1xyXG4gICAgICAgICAgICBpZiAoY2hpbGROb2RlcyA9IGNoaWxkLmNoaWxkcmVuICYmIGNoaWxkLmNoaWxkcmVuWzBdKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnN5bmNUb1RvY0l0ZW0odGMsIGNoaWxkTm9kZXMuY2hpbGRyZW4sIEFOSU1fVElNRSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pKTtcclxuICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdG9waWNOb2RlICE9IG51bGw7XHJcbiAgICAgIH0pKSh0aGlzKSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4gU3luY1RvYztcclxufSkpKCk7XHJcblxyXG5Ub2NDb250cm9sbGVyID0gKCgoKSA9PiB7XHJcbiAgbGV0IEFDVElWRV9DTEFTUywgQ09MTEFQU0lOR19DTEFTUywgRVhQQU5ERURfQ0xBU1MsIEVYUEFORElOR19DTEFTUywgS0VZX0FDVElWRV9CT09LSUQsIEtFWV9BQ1RJVkVfQk9PS19MRVZFTCwgS0VZX0JPT0tJRCwgS0VZX0JPT0tfTEVWRUwsIEtFWV9TSE9XX0NISUxELCBLRVlfVE9DLCBMT0FESU5HX0JPT0ssIFNFTEVDVEVEX0NMQVNTO1xyXG5cclxuICBFWFBBTkRFRF9DTEFTUyA9ICdleHBhbmRlZCc7XHJcblxyXG4gIEFDVElWRV9DTEFTUyA9ICdhY3RpdmUnO1xyXG5cclxuICBDT0xMQVBTSU5HX0NMQVNTID0gJ2NvbGxhcHNpbmcnO1xyXG5cclxuICBFWFBBTkRJTkdfQ0xBU1MgPSAnZXhwYW5kaW5nJztcclxuXHJcbiAgTE9BRElOR19CT09LID0gJ2xvYWRpbmctYm9vayc7XHJcblxyXG4gIFNFTEVDVEVEX0NMQVNTID0gJ3NlbGVjdGVkJztcclxuXHJcbiAgS0VZX1NIT1dfQ0hJTEQgPSAnc2hvd19jaGlsZCc7XHJcblxyXG4gIEtFWV9CT09LSUQgPSAnYm9va2lkJztcclxuXHJcbiAgS0VZX0FDVElWRV9CT09LSUQgPSAnYWN0aXZlX2Jvb2tpZCc7XHJcblxyXG4gIEtFWV9CT09LX0xFVkVMID0gJ2xldmVsJztcclxuXHJcbiAgS0VZX0FDVElWRV9CT09LX0xFVkVMID0gJ2FjdGl2ZV9sZXZlbCc7XHJcblxyXG4gIEtFWV9UT0MgPSAnLnAudG9jJztcclxuICBsZXQgQ1VSUkVOVF9UT0NfS0VZID0gJ2N1cnRvYycsIFRPQ19JVEVNX0FUVFIgPSAnZGF0YS10b2NpdGVtJztcclxuXHJcbiAgbGV0IEtFWV9CUkVBRENSVU1CUyA9IGNvbnN0cygnS0VZX1RPQ19CUkVBRENSVU1CUycpO1xyXG5cclxuXHJcbiAgY2xhc3MgVG9jQ29udHJvbGxlciB7XHJcbiAgICBjb25zdHJ1Y3Rvcih3aWRnZXQpIHtcclxuICAgICAgdGhpcy53aWRnZXQgPSB3aWRnZXQ7XHJcbiAgICAgIHRoaXMuc3Vic2NyaWJlVG9waWNJRCA9IGJpbmQodGhpcy5zdWJzY3JpYmVUb3BpY0lELCB0aGlzKTtcclxuXHJcbiAgICAgIHRoaXMub25DbGljayA9IGJpbmQodGhpcy5vbkNsaWNrLCB0aGlzKTtcclxuICAgICAgdGhpcy51cGRhdGVCb29rSW5mbyA9IGJpbmQodGhpcy51cGRhdGVCb29rSW5mbywgdGhpcyk7XHJcbiAgICAgIHRoaXMuX2RhdGEgPSB7fTtcclxuICAgICAgdGhpcy5wcm9qZWN0QWJzUmVmID0gW107XHJcbiAgICAgIGlmICh0aGlzLnN5bmNUb2MgPT0gbnVsbCkge1xyXG4gICAgICAgIHRoaXMuc3luY1RvYyA9IG5ldyBTeW5jVG9jO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMud2lkZ2V0LnB1Ymxpc2goS0VZX0JPT0tfTEVWRUwsIDApO1xyXG4gICAgICB0aGlzLndpZGdldC5wdWJsaXNoKEtFWV9CT09LSUQsICdfJyk7XHJcbiAgICAgIHJoLm1vZGVsLnN1YnNjcmliZShLRVlfVE9DLCAoZGF0YSkgPT4ge1xyXG4gICAgICAgIHRoaXMud2lkZ2V0LnB1Ymxpc2goQ1VSUkVOVF9UT0NfS0VZLCBkYXRhKTtcclxuICAgICAgICB0aGlzLndpZGdldC5wdWJsaXNoKCdjdXJsZXZlbCcsIDApO1xyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy53aWRnZXQuc3Vic2NyaWJlKGNvbnN0cygnS0VZX1RPQ19TRUxFQ1RfSVRFTScpLCB0aGlzLnNlbGVjdFRvY0l0ZW0uYmluZCh0aGlzKSk7XHJcbiAgICAgIG1vZGVsLnN1YnNjcmliZU9uY2UoW2NvbnN0cygnRVZUX1BST0pFQ1RfTE9BREVEJyksIGNvbnN0cygnS0VZX1RPQ19PUkRFUicpXSwgKChfdGhpcyA9PiAoKSA9PiB7XHJcbiAgICAgICAgaWYgKG1vZGVsLmdldChjb25zdHMoJ0tFWV9QVUJMSVNIX01PREUnKSkpIHtcclxuICAgICAgICAgIHJldHVybiBfdGhpcy5nZXRUT0NEYXRhKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJldHVybiBfdGhpcy5sb2FkVG9jKEtFWV9UT0MsICcnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIF90aGlzLndpZGdldC5wdWJsaXNoKGNvbnN0cygnRVZUX1RPQ19MT0FERUQnKSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBfLmRlZmVyKCgpID0+IF90aGlzLndpZGdldC5zdWJzY3JpYmUocmguY29uc3RzKCdLRVlfVE9QSUNfSUQnKSwgX3RoaXMuc3Vic2NyaWJlVG9waWNJRCkpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KSkodGhpcykpO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cGFuZEJvb2sobGV2ZWwsIGlkLCBub2RlLCBpdGVtKSB7XHJcbiAgICAgIHRoaXMuc2VsZWN0VG9jSXRlbSh7J2lkJzogaWR9KTtcclxuICAgICAgbGV0IGtleSA9ICQuZ2V0QXR0cmlidXRlKG5vZGUsICdkYXRhLWl0ZW1rZXknKTtcclxuICAgICAgcmgubW9kZWwucHVibGlzaCgnRVZUX1RPQ19MT0FERUQnKydnb3RvdGFiJyxcclxuICAgICAgICB7J3RhYic6IDAsICdrZXknOiBrZXksICdpdGVtJzogaXRlbX0pO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZUJvb2tJbmZvKCkge1xyXG4gICAgICBsZXQgaWQsIG5ld0xldmVsO1xyXG4gICAgICBpZCA9IHRoaXMud2lkZ2V0LmdldChLRVlfQUNUSVZFX0JPT0tJRCk7XHJcbiAgICAgIGlmICgoaWQgIT0gbnVsbCkgJiYgaWQgIT09IHRoaXMud2lkZ2V0LmdldChLRVlfQk9PS0lEKSkge1xyXG4gICAgICAgIHRoaXMud2lkZ2V0LnB1Ymxpc2goS0VZX0JPT0tJRCwgaWQpO1xyXG4gICAgICB9XHJcbiAgICAgIG5ld0xldmVsID0gdGhpcy53aWRnZXQuZ2V0KEtFWV9BQ1RJVkVfQk9PS19MRVZFTCk7XHJcbiAgICAgIGlmICgobmV3TGV2ZWwgIT0gbnVsbCkgJiYgbmV3TGV2ZWwgIT09IHRoaXMud2lkZ2V0LmdldChLRVlfQk9PS19MRVZFTCkpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy53aWRnZXQucHVibGlzaChLRVlfQk9PS19MRVZFTCwgbmV3TGV2ZWwpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlQWN0aXZlQm9va0luZm8obGV2ZWwsIGlkKSB7XHJcbiAgICAgIHRoaXMud2lkZ2V0LnB1Ymxpc2goS0VZX0FDVElWRV9CT09LSUQsIGlkKTtcclxuXHJcbiAgICAgIHJldHVybiB0aGlzLndpZGdldC5wdWJsaXNoKEtFWV9BQ1RJVkVfQk9PS19MRVZFTCwgbGV2ZWwpO1xyXG4gICAgfVxyXG4gICAgLypcclxuICAgIF9hZGRCb29rbWFyayhub2RlKXtcclxuICAgICAgbGV0IHRoYXQgPSB0aGlzLnRoaXM7XHJcbiAgICAgIGlmKCFBcnJheS5pc0FycmF5KHRoaXMucGF0aCkgfHwgdGhpcy5wYXRoLmxlbmd0aCA9PT0gMCl7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIGlmKHRoYXQuaXNUT0NJdGVtKG5vZGUpKXtcclxuICAgICAgICBpZih0aGlzLmN1cnJJbmRleCA9PT0gdGhpcy5wYXRoWzBdKXtcclxuICAgICAgICAgIGxldCBpbmRleCA9IHRoaXMucGF0aC5zaGlmdCgpO1xyXG4gICAgICAgICAgdGhpcy5jdXJyX3BhdGggKz0gKHRoaXMuY3Vycl9wYXRoID09PSBcIlwiKT8gaW5kZXgudG9TdHJpbmcoKSA6IFwiX1wiICsgaW5kZXgudG9TdHJpbmcoKTtcclxuICAgICAgICAgIGxldCB0ZXh0ID0gdGhhdC5nZXRUZXh0KG5vZGUpO1xyXG4gICAgICAgICAgdGhpcy5ib29rbWFya3MucHVzaCh7dGV4dDogdGV4dCwgcGF0aDogdGhpcy5jdXJyX3BhdGggfSk7XHJcbiAgICAgICAgICB0aGlzLmluZGV4ID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAvL3RyYXZlcnNlQ2hpbGQgPWZhbHNlO1xyXG4gICAgICAgICAgdGhpcy5jdXJySW5kZXggKz0gMTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgICovXHJcbiAgICBnZXRUZXh0KG5vZGUpe1xyXG4gICAgICByZXR1cm4gbm9kZS50ZXh0Q29udGVudC50cmltKCk7XHJcbiAgICB9XHJcbiAgICBfZ2V0UHJldmlvdXNJdGVtTm9kZShub2RlKXtcclxuICAgICAgbGV0IHBpZCA9IHRoaXMucGlkKCQuZ2V0QXR0cmlidXRlKG5vZGUsICdkYXRhLWl0ZW1pZCcpKVxyXG4gICAgICByZXR1cm4gJC5maW5kKHRoaXMud2lkZ2V0Lm5vZGUsICdbZGF0YS1pdGVtaWQ9XFxcIicgKyBwaWQgKydcXFwiXScpWzBdXHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlQnJlYWRjcnVtYkluZm8obm9kZSl7XHJcbiAgICAgIGxldCAkbGVhZm5vZGUgPSBub2RlO1xyXG4gICAgICBsZXQgJG5vZGVcclxuICAgICAgbGV0IGJyZWFkY3J1bWJzID0gW11cclxuICAgICAgaWYoIXRoaXMuaXNUT0NJdGVtKG5vZGUpKXtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgYnJlYWRjcnVtYnMucHVzaCh0aGlzLl9jcmVhdGVCcmVhZGNydW1iSXRlbSgkbGVhZm5vZGUpKVxyXG4gICAgICB3aGlsZSgkbm9kZSA9IHRoaXMuX2dldFByZXZpb3VzSXRlbU5vZGUoJGxlYWZub2RlKSl7XHJcbiAgICAgICAgYnJlYWRjcnVtYnMucHVzaCh0aGlzLl9jcmVhdGVCcmVhZGNydW1iSXRlbSgkbm9kZSkpO1xyXG4gICAgICAgICRsZWFmbm9kZSA9ICRub2RlXHJcbiAgICAgIH1cclxuICAgICAgYnJlYWRjcnVtYnMucmV2ZXJzZSgpO1xyXG4gICAgICBpZihicmVhZGNydW1icy5sZW5ndGggPiAwKXtcclxuICAgICAgICBicmVhZGNydW1ic1ticmVhZGNydW1icy5sZW5ndGgtMV0ubGFzdE5vZGUgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICAgIGJyZWFkY3J1bWJzLmN1cmxldmVsID0gdGhpcy53aWRnZXQuZ2V0KFwiY3VybGV2ZWxcIik7XHJcbiAgICAgIHRoaXMud2lkZ2V0LnB1Ymxpc2goS0VZX0JSRUFEQ1JVTUJTLCBicmVhZGNydW1icyk7XHJcbiAgICB9XHJcbiAgICBfY3JlYXRlQnJlYWRjcnVtYkl0ZW0obm9kZSl7XHJcbiAgICAgIGxldCBsaW5rTm9kZSA9IG5vZGVcclxuICAgICAgaWYoIXRoaXMuaGFzVE9DSXRlbUxpbmsobm9kZSkpe1xyXG4gICAgICAgIGxpbmtOb2RlID0gdGhpcy5fZmluZEZpcnN0TGluayhub2RlKVxyXG4gICAgICB9XHJcbiAgICAgIGxldCB1cmwgPSAobGlua05vZGUgJiYgKCQuZ2V0QXR0cmlidXRlKGxpbmtOb2RlLCdocmVmJylcclxuICAgICAgICB8fCAkLmdldEF0dHJpYnV0ZShsaW5rTm9kZSwnbGluaycpKSlcclxuICAgICAgICB8fCAnIyc7XHJcbiAgICAgIHJldHVybiB7aWQ6JC5nZXRBdHRyaWJ1dGUobm9kZSwnZGF0YS1pdGVtaWQnKSxcclxuICAgICAgICAgICAgICB0ZXh0OiB0aGlzLmdldFRleHQobm9kZSksXHJcbiAgICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgICAgaGFzVXJsOiB0aGlzLmhhc1RPQ0l0ZW1MaW5rKG5vZGUpLFxyXG4gICAgICAgICAgICAgIGxhc3ROb2RlOmZhbHNlfTtcclxuICAgIH1cclxuICAgIGlzVE9DSXRlbShub2RlKXtcclxuXHJcbiAgICAgIHJldHVybiAkLm5vZGVOYW1lKG5vZGUpID09PSAnTEknXHJcbiAgICAgICAgfHwgJC5nZXRBdHRyaWJ1dGUobm9kZSwgVE9DX0lURU1fQVRUUilcclxuICAgIH1cclxuXHJcbiAgICBfZmluZEZpcnN0TGluayhib29rTm9kZSl7XHJcbiAgICAgIGxldCBjb250ZXh0ID0ge3RoYXQ6dGhpc307XHJcblxyXG4gICAgICBsZXQgbm9kZSA9IG5vZGVVdGlsLnBhcmVudE5vZGUoYm9va05vZGUpO1xyXG4gICAgICBjb250ZXh0LmJvb2tpZCA9ICQuZ2V0QXR0cmlidXRlKGJvb2tOb2RlLCAnZGF0YS1pdGVtaWQnKVxyXG4gICAgICAkLnRyYXZlcnNlTm9kZShub2RlLCB0aGlzLl9maW5kTGlua0ZuLCBudWxsLCBudWxsLCBjb250ZXh0KTtcclxuICAgICAgcmV0dXJuIGNvbnRleHQubGlua05vZGVcclxuICAgIH1cclxuICAgIF9pc1BhcmVudFRvY0l0ZW0obm9kZSl7XHJcbiAgICAgIHJldHVybiB0aGlzLmJvb2tOb2RlICE9PSBub2RlICYmIHRoaXMudGhhdC5pc1RPQ0l0ZW0obm9kZSlcclxuICAgIH1cclxuXHJcbiAgICBfZmluZExpbmtGbihub2RlKXtcclxuICAgICAgbGV0IGlkID0gJC5nZXRBdHRyaWJ1dGUobm9kZSwgJ2RhdGEtaXRlbWlkJylcclxuICAgICAgaWYoaWQgPT09IHRoaXMuYm9va2lkKXtcclxuICAgICAgICB0aGlzLmJvb2tGb3VuZCA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMuYm9va0ZvdW5kICYmIHRoaXMudGhhdC5oYXNUT0NJdGVtTGluayhub2RlKSAmJiB0aGlzLmxpbmtOb2RlID09PSB1bmRlZmluZWQpe1xyXG4gICAgICAgIHRoaXMubGlua05vZGUgPSBub2RlO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIG5leHRMZXZlbChub2RlKSB7XHJcbiAgICAgIGxldCBsZXZlbDtcclxuICAgICAgbGV2ZWwgPSBfLnBhcnNlSW50KCQuZGF0YXNldChub2RlLCAnaXRlbWxldmVsJyksIDApO1xyXG4gICAgICBpZiAoJC5oYXNDbGFzcyhub2RlLCBFWFBBTkRFRF9DTEFTUykpIHtcclxuICAgICAgICByZXR1cm4gbGV2ZWw7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGxldmVsICsgMTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uQ2xpY2soZXZlbnQpIHtcclxuICAgICAgbGV0IGNsaWNrTm9kZSwgaGFzTGluaywgbm9kZSwgdG9wTm9kZTtcclxuICAgICAgdG9wTm9kZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7XHJcbiAgICAgIGNsaWNrTm9kZSA9IGV2ZW50LnRhcmdldDtcclxuICAgICAgaGFzTGluayA9IHRoaXMuaGFzTGluayhjbGlja05vZGUpO1xyXG4gICAgICBub2RlID0gdGhpcy5nZXRJdGVtTm9kZShjbGlja05vZGUsIHRvcE5vZGUpO1xyXG4gICAgICBpZiAodGhpcy5pc0Jvb2tOb2RlKG5vZGUpKSB7XHJcbiAgICAgICAgaWYgKCEoaGFzTGluayAmJiB0aGlzLnNlbGVjdGVkTm9kZSAhPT0gbm9kZSAmJiB0aGlzLmlzT3BlbkJvb2sobm9kZSkpKSB7XHJcbiAgICAgICAgICB0aGlzLnRvZ2dsZUJvb2sobm9kZSwgZmFsc2UpO1xyXG4gICAgICAgICAgdGhpcy51cGRhdGVCcmVhZGNydW1iSW5mbyhub2RlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghKCFoYXNMaW5rIHx8IHRoaXMuaXNVcmxOb2RlKG5vZGUpICYmIHRoaXMuaGFzRXh0ZXJuYWxMaW5rKGNsaWNrTm9kZSkpKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0TGluayhub2RlLCBmYWxzZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgc2VsZWN0TGluayhub2RlLCBzY3JvbGxJbnRvVmlldywgd2FpdCkge1xyXG4gICAgICBpZiAod2FpdCA9PSBudWxsKSB7XHJcbiAgICAgICAgd2FpdCA9IEFOSU1fVElNRTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5zZWxlY3RlZE5vZGUpIHtcclxuICAgICAgICAkLnJlbW92ZUNsYXNzKHRoaXMuc2VsZWN0ZWROb2RlLCBTRUxFQ1RFRF9DTEFTUyk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHNjcm9sbEludG9WaWV3ICYmIHRoaXMuc2VsZWN0ZWROb2RlICE9PSBub2RlKSB7XHJcbiAgICAgICAgXy5kZWxheSgoKCkgPT4gbm9kZS5zY3JvbGxJbnRvVmlldyhmYWxzZSkpLCB3YWl0KTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLnNlbGVjdGVkTm9kZSA9IG5vZGU7XHJcbiAgICAgIGlmIChub2RlKSB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVCcmVhZGNydW1iSW5mbyhub2RlKTtcclxuICAgICAgICByZXR1cm4gJC5hZGRDbGFzcyhub2RlLCBTRUxFQ1RFRF9DTEFTUyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZWxlY3RUb2NJdGVtKHRvY09iail7XHJcbiAgICAgIGxldCBpZCA9IHRvY09iai5pZCArICdfMCdcclxuICAgICAgaWYoaWQpe1xyXG4gICAgICAgIGxldCBjaGlsZERhdGEgPSB7fSwgbGV2ZWwgPSAtMTtcclxuICAgICAgICB3aGlsZShpZCl7XHJcbiAgICAgICAgICBsZXZlbCsrO1xyXG4gICAgICAgICAgY2hpbGREYXRhW2lkXSA9IHRydWU7XHJcbiAgICAgICAgICBpZCA9IGlkLnN1YnN0cigwLCBpZC5sYXN0SW5kZXhPZignXycpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy53aWRnZXQucHVibGlzaChcInNob3dfY2hpbGRcIiwgY2hpbGREYXRhKTtcclxuICAgICAgICB0aGlzLndpZGdldC5wdWJsaXNoKFwiY3VybGV2ZWxcIiwgbGV2ZWwpO1xyXG4gICAgICAgIGlmKHRvY09iai51cmwpXHJcbiAgICAgICAgICByaC5tb2RlbC5wdWJsaXNoKCdFVlRfVE9DX0xPQURFRCcrJ2dvdG90YWInLFxyXG4gICAgICAgICAgICAgIHsndGFiJzogMCwgJ2l0ZW0nOiB7J3VybCc6IHRvY09iai51cmx9fSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRJdGVtTm9kZShub2RlLCB0b3BOb2RlKSB7XHJcbiAgICAgIHJldHVybiBfLmZpbmRQYXJlbnROb2RlKG5vZGUsIHRvcE5vZGUsIHRoaXMuaXNUT0NJdGVtKTtcclxuICAgIH1cclxuICAgIGdldENoaWxkSXRlbU5vZGUobm9kZSwgaW5kZXgpIHtcclxuICAgICAgcmV0dXJuICQuZmluZChub2RlLCAgbm9kZSA9PiAkLm5vZGVOYW1lKG5vZGUpID09PSAnTEknXHJcbiAgICAgICAgfHwgJC5nZXRBdHRyaWJ1dGUobm9kZSwgVE9DX0lURU1fQVRUUikpO1xyXG4gICAgfVxyXG4gICAgaGFzVE9DSXRlbUxpbmsobm9kZSl7XHJcbiAgICAgIGxldCBocmVmID0gJC5nZXRBdHRyaWJ1dGUobm9kZSwgJ2RhdGEtaGFzbGluaycpO1xyXG4gICAgICByZXR1cm4gaHJlZiA9PT0gJ3RydWUnO1xyXG4gICAgfVxyXG4gICAgaGFzTGluayhub2RlKSB7XHJcbiAgICAgIGxldCBocmVmO1xyXG4gICAgICBocmVmID0gJC5nZXRBdHRyaWJ1dGUobm9kZSwgJ2hyZWYnKTtcclxuICAgICAgcmV0dXJuIGhyZWYgJiYgaHJlZiAhPT0gJyMnO1xyXG4gICAgfVxyXG5cclxuICAgIGlzQm9va05vZGUobm9kZSkge1xyXG4gICAgICByZXR1cm4gJC5oYXNDbGFzcyhub2RlLCAnYm9vaycpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzVG9waWNOb2RlKG5vZGUpIHtcclxuICAgICAgcmV0dXJuICQuaGFzQ2xhc3Mobm9kZSwgJ2l0ZW0nKTtcclxuICAgIH1cclxuXHJcbiAgICBpc1VybE5vZGUobm9kZSkge1xyXG4gICAgICByZXR1cm4gJC5oYXNDbGFzcyhub2RlLCAndXJsJyk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNQYWdlTm9kZShub2RlKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmlzVG9waWNOb2RlKG5vZGUpIHx8IHRoaXMuaXNVcmxOb2RlKG5vZGUpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzT3BlbkJvb2sobm9kZSkge1xyXG4gICAgICBpZiAodGhpcy53aWRnZXQuZ2V0KEtFWV9UT0NfRFJJTExfRE9XTikpIHtcclxuICAgICAgICByZXR1cm4gJC5oYXNDbGFzcyhub2RlLCBBQ1RJVkVfQ0xBU1MpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiAkLmhhc0NsYXNzKG5vZGUsIEVYUEFOREVEX0NMQVNTKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGhhc0V4dGVybmFsTGluayhub2RlKSB7XHJcbiAgICAgIGxldCBocmVmO1xyXG4gICAgICBocmVmID0gJC5nZXRBdHRyaWJ1dGUobm9kZSwgJ2hyZWYnKTtcclxuICAgICAgaWYgKCEoaHJlZiAmJiAhXy5pc1JlbGF0aXZlVXJsKGhyZWYpKSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gIV8uaXNVcmxBbGxvd2RJbklmcmFtZShocmVmKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRCb29rTm9kZShub2RlLCB0b3BOb2RlKSB7XHJcbiAgICAgIGxldCBpdGVtTm9kZTtcclxuICAgICAgaXRlbU5vZGUgPSB0aGlzLmdldEl0ZW1Ob2RlKG5vZGUsIHRvcE5vZGUpO1xyXG4gICAgICBpZiAodGhpcy5pc0Jvb2tOb2RlKGl0ZW1Ob2RlKSkge1xyXG4gICAgICAgIHJldHVybiBpdGVtTm9kZTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFuaW1hdGVDb2xsYXBzZShib29rTm9kZSkge1xyXG4gICAgICByZXR1cm4gXy5lYWNoKFtib29rTm9kZSwgYm9va05vZGUubmV4dEVsZW1lbnRTaWJsaW5nXSwgbm9kZSA9PiB7XHJcbiAgICAgICAgJC5hZGRDbGFzcyhub2RlLCBDT0xMQVBTSU5HX0NMQVNTKTtcclxuICAgICAgICByZXR1cm4gXy5kZWxheSgoKSA9PiAkLnJlbW92ZUNsYXNzKG5vZGUsIENPTExBUFNJTkdfQ0xBU1MpLCBBTklNX1RJTUUpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhbmltYXRlRXhwYW5kKGJvb2tOb2RlKSB7XHJcbiAgICAgIHJldHVybiBfLmVhY2goW2Jvb2tOb2RlLCBib29rTm9kZS5uZXh0RWxlbWVudFNpYmxpbmddLCBub2RlID0+IHtcclxuICAgICAgICAkLmFkZENsYXNzKG5vZGUsIEVYUEFORElOR19DTEFTUyk7XHJcbiAgICAgICAgcmV0dXJuIF8uZGVsYXkoKCkgPT4gJC5yZW1vdmVDbGFzcyhub2RlLCBFWFBBTkRJTkdfQ0xBU1MpLCBBTklNX1RJTUUpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICB0b2dnbGVCb29rKGJvb2tOb2RlLCBzY3JvbGxJbnRvVmlldykge1xyXG4gICAgICBpZiAoc2Nyb2xsSW50b1ZpZXcgPT0gbnVsbCkge1xyXG4gICAgICAgIHNjcm9sbEludG9WaWV3ID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5pc09wZW5Cb29rKGJvb2tOb2RlKSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNsb3NlQm9vayhib29rTm9kZSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub3BlbkJvb2soYm9va05vZGUsIHNjcm9sbEludG9WaWV3KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlQm9vayhub2RlKSB7XHJcbiAgICAgIGxldCBpZCwga2V5U2hvdztcclxuICAgICAgaWQgPSAkLmRhdGFzZXQobm9kZSwgJ2l0ZW1pZCcpO1xyXG4gICAgICBrZXlTaG93ID0gYCR7S0VZX1NIT1dfQ0hJTER9JHtpZH1gO1xyXG4gICAgICBpZiAoZmFsc2UgIT09IHRoaXMud2lkZ2V0LmdldChrZXlTaG93KSkge1xyXG4gICAgICAgIHRoaXMud2lkZ2V0LnB1Ymxpc2goa2V5U2hvdywgZmFsc2UpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMudXBkYXRlQWN0aXZlQm9va0luZm8odGhpcy5uZXh0TGV2ZWwobm9kZSksIHRoaXMucGlkKGlkKSk7XHJcbiAgICAgIHRoaXMudXBkYXRlQm9va0luZm8oKTtcclxuICAgICAgaWYgKCQuaGFzQ2xhc3Mobm9kZSwgRVhQQU5ERURfQ0xBU1MpKSB7XHJcbiAgICAgICAgJC5yZW1vdmVDbGFzcyhub2RlLCBFWFBBTkRFRF9DTEFTUyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYW5pbWF0ZUNvbGxhcHNlKG5vZGUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb3BlbkJvb2sobm9kZSwgc2Nyb2xsSW50b1ZpZXcsIHN1Y2Nlc3MpIHtcclxuICAgICAgbGV0IGNoaWxkT3JkZXIsIGlkLCBrZXksIGtleVNob3c7XHJcbiAgICAgIGlmIChzdWNjZXNzID09IG51bGwpIHtcclxuICAgICAgICBzdWNjZXNzID0gdGhpcy51cGRhdGVCb29rSW5mbztcclxuICAgICAgfVxyXG4gICAgICBrZXkgPSAkLmRhdGFzZXQobm9kZSwgJ2l0ZW1rZXknKTtcclxuICAgICAgaWQgPSAkLmRhdGFzZXQobm9kZSwgJ2l0ZW1pZCcpO1xyXG4gICAgICBjaGlsZE9yZGVyID0gJC5kYXRhc2V0KG5vZGUsICdjaGlsZG9yZGVyJyk7XHJcbiAgICAgIGtleVNob3cgPSBgJHtLRVlfU0hPV19DSElMRH0ke2lkfWA7XHJcbiAgICAgIGlmICh0cnVlICE9PSB0aGlzLndpZGdldC5nZXQoa2V5U2hvdykpIHtcclxuICAgICAgICB0aGlzLndpZGdldC5wdWJsaXNoKGtleVNob3csIHRydWUpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMudXBkYXRlQWN0aXZlQm9va0luZm8odGhpcy5uZXh0TGV2ZWwobm9kZSksIGlkKTtcclxuICAgICAgaWYgKHRoaXMud2lkZ2V0LmdldChrZXkpKSB7XHJcbiAgICAgICAgaWYgKCEkLmhhc0NsYXNzKG5vZGUsIEVYUEFOREVEX0NMQVNTKSkge1xyXG4gICAgICAgICAgJC5hZGRDbGFzcyhub2RlLCBFWFBBTkRFRF9DTEFTUyk7XHJcbiAgICAgICAgICB0aGlzLmFuaW1hdGVFeHBhbmQobm9kZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzdWNjZXNzKCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJC5hZGRDbGFzcyhub2RlLCBMT0FESU5HX0JPT0spO1xyXG4gICAgICAgIGlmIChzY3JvbGxJbnRvVmlldykge1xyXG4gICAgICAgICAgbm9kZS5zY3JvbGxJbnRvVmlldyhmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmxvYWRUb2Moa2V5LCBjaGlsZE9yZGVyLCAoKF90aGlzID0+ICgpID0+IHtcclxuICAgICAgICAgICQucmVtb3ZlQ2xhc3Mobm9kZSwgTE9BRElOR19CT09LKTtcclxuICAgICAgICAgICQuYWRkQ2xhc3Mobm9kZSwgRVhQQU5ERURfQ0xBU1MpO1xyXG4gICAgICAgICAgX3RoaXMuYW5pbWF0ZUV4cGFuZChub2RlKTtcclxuICAgICAgICAgIHJldHVybiBzdWNjZXNzKCk7XHJcbiAgICAgICAgfSkpKHRoaXMpKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGV4dHJhY3RUZW1wRGF0YSgpIHtcclxuICAgICAgbGV0IHRlbXBJdGVtcztcclxuICAgICAgdGVtcEl0ZW1zID0gdGhpcy53aWRnZXQuZ2V0KHJoLmNvbnN0cygnS0VZX1RFTVBfREFUQScpKTtcclxuICAgICAgdGhpcy53aWRnZXQucHVibGlzaChyaC5jb25zdHMoJ0tFWV9URU1QX0RBVEEnKSk7XHJcbiAgICAgIHJldHVybiB0ZW1wSXRlbXM7XHJcbiAgICB9XHJcblxyXG4gICAgbG9hZFRvYyhmdWxsS2V5LCBwYXJlbnRPcmRlciwgc3VjY2Vzcykge1xyXG4gICAgICBsZXQgYWJzUmVmLCBrZXksIHBhcmVudFBhdGgsIHJlZjE7XHJcbiAgICAgIHJlZjEgPSB0aGlzLnBhcnNlS2V5KGZ1bGxLZXkpLCBhYnNSZWYgPSByZWYxLmFic1JlZiwga2V5ID0gcmVmMS5rZXk7XHJcbiAgICAgIHBhcmVudFBhdGggPSBhYnNSZWYgPyBgJHthYnNSZWZ9L2AgOiAnJztcclxuICAgICAgcmV0dXJuIF8ubG9hZFNjcmlwdChgJHtwYXJlbnRQYXRofXdoeGRhdGEvJHtrZXl9Lm5ldy5qc2AsIHRydWUsICgoX3RoaXMgPT4gKCkgPT4ge1xyXG4gICAgICAgIGxldCB0ZW1wSXRlbXM7XHJcbiAgICAgICAgdGVtcEl0ZW1zID0gX3RoaXMuZXh0cmFjdFRlbXBEYXRhKCkgfHwgW107XHJcbiAgICAgICAgXy5lYWNoKHRlbXBJdGVtcywgaXRlbSA9PiB7XHJcbiAgICAgICAgICBpdGVtLmFic1JlZiA9IGFic1JlZjtcclxuICAgICAgICAgIGlmIChwYXJlbnRPcmRlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gaXRlbS5jaGlsZE9yZGVyID0gcGFyZW50T3JkZXI7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzLmxvYWRSZWZUb2ModGVtcEl0ZW1zLCBpdGVtcyA9PiB7XHJcbiAgICAgICAgICBfdGhpcy53aWRnZXQucHVibGlzaChmdWxsS2V5LCBpdGVtcyk7XHJcbiAgICAgICAgICBpZiAoc3VjY2Vzcykge1xyXG4gICAgICAgICAgICByZXR1cm4gc3VjY2VzcygpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KSkodGhpcykpO1xyXG4gICAgfVxyXG5cclxuICAgIGxvYWRSZWZUb2MoaXRlbXMsIHN1Y2Nlc3MpIHtcclxuICAgICAgbGV0IGFic1JlZiwgaW5kZXgsIGl0ZW07XHJcbiAgICAgIGlmIChpdGVtcyA9PSBudWxsKSB7XHJcbiAgICAgICAgaXRlbXMgPSBbXTtcclxuICAgICAgfVxyXG4gICAgICBpbmRleCA9IF8uZmluZEluZGV4KGl0ZW1zLCBpdGVtID0+IHtcclxuICAgICAgICBpZiAoaXRlbS5yZWYpIHtcclxuICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcclxuICAgICAgICBpdGVtID0gaXRlbXNbaW5kZXhdO1xyXG4gICAgICAgIGFic1JlZiA9IGl0ZW0uYWJzUmVmIHx8ICcnO1xyXG4gICAgICAgIGlmIChhYnNSZWYpIHtcclxuICAgICAgICAgIGFic1JlZiArPSAnLyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFic1JlZiArPSBpdGVtLnJlZjtcclxuICAgICAgICBsZXQgcHJqT3JkZXIgPSBtb2RlbC5nZXQoY29uc3RzKCdLRVlfVE9DX09SREVSJykpXHJcbiAgICAgICAgbGV0IGNoaWxkT3JkZXIgPSBwcmpPcmRlclthYnNSZWZdLm9yZGVyXHJcbiAgICAgICAgcmV0dXJuIF8ubG9hZFNjcmlwdChgJHthYnNSZWZ9L3doeGRhdGEvdG9jLm5ldy5qc2AsIHRydWUsICgoX3RoaXMgPT4gKCkgPT4ge1xyXG4gICAgICAgICAgbGV0IHRlbXBJdGVtcztcclxuICAgICAgICAgIHRlbXBJdGVtcyA9IF90aGlzLmV4dHJhY3RUZW1wRGF0YSgpIHx8IFtdO1xyXG4gICAgICAgICAgXy5lYWNoKHRlbXBJdGVtcywgaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIGl0ZW0uYWJzUmVmID0gYWJzUmVmO1xyXG4gICAgICAgICAgICBpZiAoY2hpbGRPcmRlcikge1xyXG4gICAgICAgICAgICAgIHJldHVybiBpdGVtLmNoaWxkT3JkZXIgPSBjaGlsZE9yZGVyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5zcGxpY2UuYXBwbHkoaXRlbXMsIFtpbmRleCwgMV0uY29uY2F0KHRlbXBJdGVtcykpO1xyXG4gICAgICAgICAgcmV0dXJuIF90aGlzLmxvYWRSZWZUb2MoaXRlbXMsIHN1Y2Nlc3MpO1xyXG4gICAgICAgIH0pKSh0aGlzKSk7XHJcbiAgICAgIH0gZWxzZSBpZiAoc3VjY2Vzcykge1xyXG4gICAgICAgIHJldHVybiBzdWNjZXNzKGl0ZW1zKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldFRPQ0RhdGEoKSB7XHJcbiAgICAgIHJldHVybiBtb2RlbC5zdWJzY3JpYmVPbmNlKGNvbnN0cygnS0VZX1BVQkxJU0hfQkFTRV9VUkwnKSwgKGZ1bmN0aW9uKF90aGlzKSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgdmFyIGVycjtcclxuICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBtb2RlbC5zdWJzY3JpYmUoY29uc3RzKCdLRVlfUFJPSkVDVF9MSVNUJyksIGZ1bmN0aW9uKGFsbFByb2plY3RzKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIG1vZGVsLnN1YnNjcmliZShjb25zdHMoJ0tFWV9NQVNURVJfUFJPSkVDVF9MSVNUJyksIGZ1bmN0aW9uKGxpc3QpIHtcclxuICAgICAgICAgICAgICAgIHZhciBpdGVtcywgbGVuO1xyXG4gICAgICAgICAgICAgICAgbGVuID0gbGlzdC5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBpdGVtcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF8uZWFjaChsaXN0LCBmdW5jdGlvbihwcmopIHtcclxuICAgICAgICAgICAgICAgICAgcHJqID0gXy5tYWtlUmVsYXRpdmVVcmwocHJqLCBhbGxQcm9qZWN0c1swXSk7XHJcbiAgICAgICAgICAgICAgICAgIGlmIChwcmopIHtcclxuICAgICAgICAgICAgICAgICAgICBwcmogPSBwcmogKyBcIi9cIjtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gXy5sb2FkU2NyaXB0KHByaiArIFwid2h4ZGF0YS90b2MubmV3LmpzXCIsIHRydWUsIChmdW5jdGlvbihfdGhpcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wSXRlbXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0ZW1wSXRlbXMgPSBfdGhpcy5leHRyYWN0VGVtcERhdGEoKSB8fCBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgIF8uZWFjaCh0ZW1wSXRlbXMsIGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uYWJzUmVmID0gcHJqXHJcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5sb2FkUmVmVG9jKHRlbXBJdGVtcywgZnVuY3Rpb24ocmVzb2x2ZWRJdGVtcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZW4tLTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXMgPSBpdGVtcy5jb25jYXQocmVzb2x2ZWRJdGVtcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsZW4gPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy53aWRnZXQucHVibGlzaChLRVlfVE9DLCBpdGVtcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMud2lkZ2V0LnB1Ymxpc2goY29uc3RzKCdFVlRfVE9DX0xPQURFRCcpLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMud2lkZ2V0LnN1YnNjcmliZShyaC5jb25zdHMoJ0tFWV9UT1BJQ19JRCcpLCBfdGhpcy5zdWJzY3JpYmVUb3BpY0lEKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgfSkodGhpcykpO1xyXG4gICAgICAgICAgICAgICAgfSwgX3RoaXMpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGVyciA9IGVycm9yO1xyXG4gICAgICAgICAgICBpZiAocmguX2RlYnVnKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIHJoLl9kKCd3YXJuJywgZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgfSkodGhpcykpO1xyXG4gICAgfVxyXG5cclxuICAgIG5leHRDaGlsZE9yZGVyKGNoaWxkT3JkZXIpIHtcclxuICAgICAgbGV0IG9yZGVycztcclxuICAgICAgb3JkZXJzID0gY2hpbGRPcmRlci5zcGxpdCgnQCcpO1xyXG4gICAgICBvcmRlcnNbb3JkZXJzLmxlbmd0aCAtIDFdID0gMSArIF8ucGFyc2VJbnQob3JkZXJzW29yZGVycy5sZW5ndGggLSAxXSwgMCk7XHJcbiAgICAgIHJldHVybiBvcmRlcnMuam9pbignQCcpO1xyXG4gICAgfVxyXG5cclxuICAgIGNoaWxkT3JkZXIocGFyZW50T3JkZXIpIHtcclxuICAgICAgaWYgKHBhcmVudE9yZGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIGAke3BhcmVudE9yZGVyfUAxYDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gJ0AxJztcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHBpZChpZCkge1xyXG4gICAgICBsZXQgcGF0aDtcclxuICAgICAgcGF0aCA9IGlkLnNwbGl0KCdfJyk7XHJcbiAgICAgIHBhdGgucG9wKCk7XHJcbiAgICAgIHJldHVybiBwYXRoLmpvaW4oJ18nKSB8fCAnXyc7XHJcbiAgICB9XHJcblxyXG4gICAga2V5KGFic1JlZiwga2V5KSB7XHJcbiAgICAgIGxldCBpZHg7XHJcbiAgICAgIGlmIChhYnNSZWYgPT0gbnVsbCkge1xyXG4gICAgICAgIGFic1JlZiA9ICcnO1xyXG4gICAgICB9XHJcbiAgICAgIGlkeCA9IF8uZmluZEluZGV4KHRoaXMucHJvamVjdEFic1JlZiwgcmVmID0+IHJlZiA9PT0gYWJzUmVmKTtcclxuICAgICAgaWYgKGlkeCA9PT0gLTEpIHtcclxuICAgICAgICBpZHggPSB0aGlzLnByb2plY3RBYnNSZWYubGVuZ3RoO1xyXG4gICAgICAgIHRoaXMucHJvamVjdEFic1JlZi5wdXNoKGFic1JlZik7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGAucC5jaGlsZF90b2MuJHtpZHh9LiR7a2V5fWA7XHJcbiAgICB9XHJcblxyXG4gICAgcGFyc2VLZXkoa2V5KSB7XHJcbiAgICAgIGxldCBhYnNSZWYsIGtleXMsIGxhc3RLZXk7XHJcbiAgICAgIGtleSA9IGtleS5zdWJzdHJpbmcoMyk7XHJcbiAgICAgIGtleXMgPSBrZXkuc3BsaXQoJy4nKTtcclxuICAgICAgbGFzdEtleSA9IGtleXMucG9wKCk7XHJcbiAgICAgIGFic1JlZiA9IHRoaXMucHJvamVjdEFic1JlZltrZXlzLnBvcCgpXSB8fCAnJztcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBrZXk6IGxhc3RLZXksXHJcbiAgICAgICAgYWJzUmVmXHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgdXJsKGl0ZW0sIGlkKSB7XHJcbiAgICAgIGxldCBib29rTWFyaywgZmlsZVBhdGgsIHBhcmFtcywgcGFyZW50UGF0aCwgdXJsO1xyXG4gICAgICBpZiAoIWl0ZW0udXJsKSB7XHJcbiAgICAgICAgcmV0dXJuICcjJztcclxuICAgICAgfVxyXG4gICAgICBpZiAoaXRlbS50eXBlID09PSAncmVtb3RlaXRlbScpIHtcclxuICAgICAgICByZXR1cm4gZW5jb2RlVVJJKGl0ZW0udXJsKTtcclxuICAgICAgfVxyXG4gICAgICBwYXJlbnRQYXRoID0gaXRlbS5hYnNSZWYgPyBfLmVuc3VyZVNsYXNoKGl0ZW0uYWJzUmVmKSA6ICcnO1xyXG4gICAgICB1cmwgPSBgJHtwYXJlbnRQYXRofSR7aXRlbS51cmx9YDtcclxuICAgICAgYm9va01hcmsgPSBfLmV4dHJhY3RIYXNoU3RyaW5nKHVybCk7XHJcbiAgICAgIGlmIChib29rTWFyay5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgYm9va01hcmsgPSBgIyR7Ym9va01hcmt9YDtcclxuICAgICAgICBmaWxlUGF0aCA9IF8uZmlsZVBhdGgodXJsKTtcclxuICAgICAgICBwYXJhbXMgPSBfLmV4dHJhY3RQYXJhbVN0cmluZyh1cmwpO1xyXG4gICAgICAgIGlmIChwYXJhbXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgcGFyYW1zID0gYCR7cGFyYW1zfSZgO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwYXJhbXMgPSBgPyR7cGFyYW1zfXJodG9jaWQ9JHtpZH1gO1xyXG4gICAgICAgIHVybCA9IGAke2ZpbGVQYXRofSR7cGFyYW1zfSR7Ym9va01hcmt9YDtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZW5jb2RlVVJJKHVybCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGFncyhpdGVtKSB7XHJcbiAgICAgIGxldCBwYXJlbnRQYXRoO1xyXG4gICAgICBwYXJlbnRQYXRoID0gaXRlbS5hYnNSZWYgPyBgKyR7aXRlbS5hYnNSZWZ9YCA6ICcnO1xyXG4gICAgICBpZiAoaXRlbVsnZGF0YS1yaHRhZ3MnXSkge1xyXG4gICAgICAgIHJldHVybiBpdGVtWydkYXRhLXJodGFncyddICsgcGFyZW50UGF0aDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzdWJzY3JpYmVUb3BpY0lEKHRvY0luZm8pIHtcclxuICAgICAgbGV0IHBhdGgsIHRvY2lkO1xyXG4gICAgICBpZiAodG9jSW5mbyA9PSBudWxsKSB7XHJcbiAgICAgICAgdG9jSW5mbyA9IHt9O1xyXG4gICAgICB9XHJcbiAgICAgIHRvY2lkID0gXy5oYXNoUGFyYW1zKClbJ3JodG9jaWQnXTtcclxuICAgICAgaWYgKHRvY2lkKSB7XHJcbiAgICAgICAgcGF0aCA9IHRoaXMuZ2V0UGF0aGZyb21JZCh0b2NpZCk7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RUb2NCeUlkKHBhdGgsIHRoaXMud2lkZ2V0Lm5vZGUpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJoLm1vZGVsLnN1YnNjcmliZShyaC5jb25zdHMoJ0tFWV9NQVNURVJfUFJPSkVDVF9MSVNUJyksIChsaXN0KSA9PiB7XHJcbiAgICAgICAgICBpZihsaXN0ICYmIGxpc3QubGVuZ3RoIDwgMilcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3luY1RvYy5zeW5jKHRoaXMsIHRvY0luZm8pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzdWJzY3JpYmVCb29rSWQoYm9va0lkKSB7XHJcbiAgICAgIC8vIHN1a3VtYXI6IFRPRE8gcmVtb3ZlIHRoaXMgbGluZVxyXG4gICAgICBsZXQgYm9va3M7XHJcbiAgICAgIGxldCBwYXRoO1xyXG4gICAgICBpZiAoYm9va0lkKSB7XHJcbiAgICAgICAgcGF0aCA9IHRoaXMuZ2V0UGF0aGZyb21JZChib29rSWQpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNlbGVjdFRvY0J5SWQocGF0aCwgdGhpcy53aWRnZXQubm9kZSwgbnVsbCwgYm9va3MpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0UGF0aGZyb21JZChpZCl7XHJcbiAgICAgIGxldCBwYXRoO1xyXG4gICAgICBwYXRoID0gaWQuc3BsaXQoJ18nKTtcclxuICAgICAgcGF0aC5zaGlmdCgpO1xyXG4gICAgICBwYXRoID0gXy5tYXAocGF0aCwgaXRlbSA9PiBfLnBhcnNlSW50KGl0ZW0sIDApKTtcclxuICAgICAgcmV0dXJuIHBhdGg7XHJcblxyXG4gICAgfVxyXG4gICAgc2VsZWN0VG9jQnlJZChwYXRoLCBub2RlLCB3YWl0LCBib29rcykge1xyXG4gICAgICBsZXQgY2hpbGQsIGluZGV4O1xyXG4gICAgICBpZiAod2FpdCA9PSBudWxsKSB7XHJcbiAgICAgICAgd2FpdCA9IDE7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKCEobm9kZSAmJiBub2RlLmNoaWxkcmVuKSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBpbmRleCA9IHBhdGguc2hpZnQoKTtcclxuICAgICAgY2hpbGQgPSBfLmZpbmQobm9kZS5jaGlsZHJlbiwgZnVuY3Rpb24oY2hpbGQpIHtcclxuICAgICAgICBpZiAodGhpcy5pc0Jvb2tOb2RlKGNoaWxkKSB8fCB0aGlzLmlzUGFnZU5vZGUoY2hpbGQpKSB7XHJcbiAgICAgICAgICBpZiAoaW5kZXggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpbmRleC0tO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH0sIHRoaXMpO1xyXG4gICAgICBpZiAoIWNoaWxkKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAocGF0aC5sZW5ndGggPT09IDApIHtcclxuICAgICAgICB0aGlzLnNlbGVjdExpbmsoY2hpbGQsIHRydWUsIHdhaXQpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLmlzQm9va05vZGUoY2hpbGQpKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub3BlbkJvb2soY2hpbGQsIHRydWUsICgoX3RoaXMgPT4gKCkgPT4gXy5kZWZlcigoKSA9PiB7XHJcbiAgICAgICAgICBsZXQgY2hpbGROb2RlLCBwYXJlbnROb2RlO1xyXG4gICAgICAgICAgaWYgKHBhdGgubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy51cGRhdGVCb29rSW5mbygpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY2hpbGROb2RlID0gY2hpbGQubmV4dEVsZW1lbnRTaWJsaW5nO1xyXG4gICAgICAgICAgICBwYXJlbnROb2RlID0gY2hpbGROb2RlLmNoaWxkcmVuICYmIGNoaWxkTm9kZS5jaGlsZHJlblswXTtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnNlbGVjdFRvY0J5SWQocGF0aCwgcGFyZW50Tm9kZSwgQU5JTV9USU1FKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KSkpKHRoaXMpKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdGhpcy51cGRhdGVCb29rSW5mbygpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBUb2NDb250cm9sbGVyLnByb3RvdHlwZVtcImNsYXNzXCJdID0gaXRlbSA9PiB7XHJcbiAgICBpZiAoaXRlbS50eXBlID09PSAncmVtb3RlaXRlbScpIHtcclxuICAgICAgcmV0dXJuICd1cmwnO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIGl0ZW0udHlwZTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICByZXR1cm4gVG9jQ29udHJvbGxlcjtcclxufSkpKCk7XHJcblxyXG5yaC5jb250cm9sbGVyKCdUb2NDb250cm9sbGVyJywgVG9jQ29udHJvbGxlcik7XHJcbiIsImxldCByaCA9IHJlcXVpcmUoXCIuLi8uLi9zcmMvbGliL3JoXCIpXHJcbmxldCBfID0gcmguXztcclxubGV0ICQgPSByaC4kO1xyXG5sZXQgbW9kZWwgPSByaC5tb2RlbDtcclxubGV0IGNvbnN0cyA9IHJoLmNvbnN0cztcclxuXHJcbmNsYXNzIFRPQ0xldmVsIHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuZGF0YSA9IHsnJyA6IHtvcmRlcjogJycsIG5leHRDaGlsZDogMH19XHJcbiAgICBtb2RlbC5zdWJzY3JpYmVPbmNlKGNvbnN0cygnS0VZX1BST0pFQ1RfTElTVCcpLCBhbGxQcm9qZWN0cyA9PiB7XHJcbiAgICAgIF8uZWFjaChhbGxQcm9qZWN0cywgcHJqID0+IHtcclxuICAgICAgICBwcmogPSBfLm1ha2VSZWxhdGl2ZVVybCh0aGlzLnRyaW1GaXJzdChwcmosICcuJyksIGFsbFByb2plY3RzWzBdKTtcclxuICAgICAgICB0aGlzLmNoaWxkT3JkZXIocHJqKVxyXG4gICAgICB9KVxyXG4gICAgICBtb2RlbC5wdWJsaXNoKGNvbnN0cygnS0VZX1RPQ19PUkRFUicpLCB0aGlzLmRhdGEpXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgdHJpbUZpcnN0KHBhdGgsIGNoYXIpIHtcclxuICAgIHJldHVybiBwYXRoID0gKHBhdGgubGVuZ3RoICYmIHBhdGhbMF0gPT09IGNoYXIgJiYgcGF0aFsxXSAhPT0gY2hhcik/IHBhdGguc3Vic3RyaW5nKDEpIDogcGF0aFxyXG4gIH1cclxuXHJcbiAgY2hpbGRPcmRlcihhYnNSZWYpIHtcclxuICAgIGFic1JlZiA9IHRoaXMudHJpbUZpcnN0KGFic1JlZiwgJy8nKVxyXG4gICAgaWYoIXRoaXMuZGF0YVthYnNSZWZdKSB7XHJcbiAgICAgIGxldCBwYXRoID0gYWJzUmVmXHJcbiAgICAgIHBhdGggPSAgcGF0aC5zdWJzdHJpbmcoMCwgcGF0aC5sYXN0SW5kZXhPZignLycpKVxyXG4gICAgICBwYXRoID0gIHBhdGguc3Vic3RyaW5nKDAsIHBhdGgubGFzdEluZGV4T2YoJy8nKSlcclxuICAgICAgbGV0IHBhcmVudCA9IHRoaXMuZGF0YVtwYXRoXVxyXG4gICAgICBwYXJlbnQubmV4dENoaWxkKytcclxuICAgICAgdGhpcy5kYXRhW2Fic1JlZl0gPSB7b3JkZXI6IHBhcmVudC5vcmRlciArICdAJyArIHBhcmVudC5uZXh0Q2hpbGQsIG5leHRDaGlsZDogMH1cclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLmRhdGFbYWJzUmVmXS5vcmRlclxyXG4gIH1cclxufVxyXG5cclxubmV3IFRPQ0xldmVsIiwibGV0IHsgcmggfSA9IHdpbmRvdztcclxubGV0IHsgXyB9ID0gcmg7XHJcbmxldCB7ICQgfSA9IHJoO1xyXG5cclxuY2xhc3MgQnJvd3NlU2VxdWVuY2VCdWlsZGVyIHtcclxuXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcblxyXG4gICAgbGV0IGhhbmRsZVRvcGljQ2hhbmdlID0gZnVuY3Rpb24oZG9Ob3RVc2UpIHtcclxuICAgICAgbGV0IGJyc01hcCA9IHJoLm1vZGVsLmdldCgndC5icnNtYXAnKTtcclxuICAgICAgaWYgKGJyc01hcCAhPSBudWxsKSB7XHJcbiAgICAgICAgbGV0IG5leHQgPSAoYnJzTWFwWyduJ10gJiYgYnJzTWFwWyduJ11bMF0pIHx8ICcnO1xyXG4gICAgICAgIGxldCBwcmV2ID0gKGJyc01hcFsncCddICYmIGJyc01hcFsncCddWzBdKSB8fCAnJztcclxuICAgICAgICBsZXQgZGVjb2RlZFVSSSA9IHdpbmRvdy5kZWNvZGVVUkkoZG9jdW1lbnQubG9jYXRpb24uaHJlZik7XHJcblxyXG4gICAgICAgIGlmICghXy5pc0VtcHR5U3RyaW5nKG5leHQpKSB7XHJcbiAgICAgICAgICBuZXh0ID0gd2luZG93Ll9nZXRSZWxhdGl2ZUZpbGVOYW1lKGRlY29kZWRVUkksIG5leHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIV8uaXNFbXB0eVN0cmluZykge1xyXG4gICAgICAgICAgcHJldiA9IHdpbmRvdy5fZ2V0UmVsYXRpdmVGaWxlTmFtZShkZWNvZGVkVVJJLCBwcmV2KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJoLm1vZGVsLnB1Ymxpc2goJ2wuYnJzQmFjaycsIHByZXYpO1xyXG4gICAgICAgIHJldHVybiByaC5tb2RlbC5wdWJsaXNoKCdsLmJyc05leHQnLCBuZXh0KTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBsZXQgdXBkYXRlU2hvd0JycyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICBsZXQgdWlNb2RlID0gcmgubW9kZWwuZ2V0KHJoLmNvbnN0cygnS0VZX1VJX01PREUnKSk7XHJcbiAgICAgIGxldCBwcmV2ID0gcmgubW9kZWwuZ2V0KCdsLmJyc0JhY2snKTtcclxuICAgICAgbGV0IG5leHQgPSByaC5tb2RlbC5nZXQoJ2wuYnJzTmV4dCcpO1xyXG4gICAgICBsZXQgc2hvd0JycyA9ICF1aU1vZGUgJiYgKHByZXYgfHwgbmV4dCkgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgIHJldHVybiByaC5tb2RlbC5wdWJsaXNoKCdsLnNob3dfYnJzJywgc2hvd0Jycyk7XHJcbiAgICB9O1xyXG5cclxuICAgIHJoLm1vZGVsLnN1YnNjcmliZSgndC50b3BpY3VybCcsIF8uZGVib3VuY2UoaGFuZGxlVG9waWNDaGFuZ2UsIDIwMCkpO1xyXG4gICAgcmgubW9kZWwuc3Vic2NyaWJlKCd0LmJyc21hcCcsIF8uZGVib3VuY2UoaGFuZGxlVG9waWNDaGFuZ2UsIDIwMCkpO1xyXG5cclxuICAgIHJoLm1vZGVsLnN1YnNjcmliZSgnbC5icnNCYWNrJywgdXBkYXRlU2hvd0Jycyk7XHJcbiAgICByaC5tb2RlbC5zdWJzY3JpYmUoJ2wuYnJzTmV4dCcsIHVwZGF0ZVNob3dCcnMpO1xyXG4gICAgcmgubW9kZWwuc3Vic2NyaWJlKHJoLmNvbnN0cygnS0VZX1VJX01PREUnKSwgIHVwZGF0ZVNob3dCcnMpO1xyXG4gIH1cclxufVxyXG5cclxuLy9UT0RPOiBtb3ZlIGl0IHRvIGNvbnRyb2xsZXJcclxucmgud2lkZ2V0cy5Ccm93c2VTZXF1ZW5jZUJ1aWxkZXIgPSBCcm93c2VTZXF1ZW5jZUJ1aWxkZXI7XHJcbiIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS45LjFcclxuKCgpID0+IHtcclxuICB2YXIgJCwgSEFTSF9LRVlfUkFORE9NLCBIQVNIX0tFWV9SSF9ISUdITElHSFQsIEhBU0hfS0VZX1JIX1NFQVJDSCwgSEFTSF9LRVlfUkhfVE9DSUQsIEhBU0hfS0VZX1RPUElDLCBIQVNIX0tFWV9VSU1PREUsIF8sIGNvbnN0cywgZml4SGFzaE1hcEZvclJvb3QsIGZpeEhhc2hNYXBGb3JUb3BpYywgZ2V0SGFzaE1hcEZvclJvb3QsIGdldE1lcmdlZFBhcmFtc01hcCwgZ2V0UGFyYW1zRm9yUm9vdCwgZ2V0VG9waWNVUkwsIGhhc2hDaGFuZ2VkLCBoYXNoUXVlcnlLZXlzLCBtb2RlbCwgbmF2aWdhdGVUb1VybCwgcXVldWVVcGRhdGVIYXNoTWFwLCByaCwgc2hvd05vblRvcGljLCBzaG93VG9waWMsIHRvcGljQ2hhbmdlZDtcclxuXHJcbiAgcmggPSB3aW5kb3cucmg7XHJcblxyXG4gIF8gPSByaC5fO1xyXG5cclxuICAkID0gcmguJDtcclxuXHJcbiAgY29uc3RzID0gcmguY29uc3RzO1xyXG5cclxuICBtb2RlbCA9IHJoLm1vZGVsO1xyXG5cclxuICBIQVNIX0tFWV9SSF9TRUFSQ0ggPSBjb25zdHMoJ0hBU0hfS0VZX1JIX1NFQVJDSCcpO1xyXG5cclxuICBIQVNIX0tFWV9UT1BJQyA9IGNvbnN0cygnSEFTSF9LRVlfVE9QSUMnKTtcclxuXHJcbiAgSEFTSF9LRVlfVUlNT0RFID0gY29uc3RzKCdIQVNIX0tFWV9VSU1PREUnKTtcclxuXHJcbiAgSEFTSF9LRVlfUkhfVE9DSUQgPSBjb25zdHMoJ0hBU0hfS0VZX1JIX1RPQ0lEJyk7XHJcblxyXG4gIEhBU0hfS0VZX1JIX0hJR0hMSUdIVCA9IGNvbnN0cygnSEFTSF9LRVlfUkhfSElHSExJR0hUJyk7XHJcblxyXG4gIEhBU0hfS0VZX1JBTkRPTSA9IGNvbnN0cygnSEFTSF9LRVlfUkFORE9NJyk7XHJcblxyXG4gIGhhc2hRdWVyeUtleXMgPSBbSEFTSF9LRVlfUkhfSElHSExJR0hULCBjb25zdHMoJ0hBU0hfS0VZX1JIX1NZTlMnKSwgSEFTSF9LRVlfUkhfVE9DSURdO1xyXG5cclxuICBnZXRNZXJnZWRQYXJhbXNNYXAgPSB0b3BpY1VybCA9PiB7XHJcbiAgICB2YXIgaGFzaE1hcCwgcGFyYW1zTWFwO1xyXG4gICAgcGFyYW1zTWFwID0gXy51cmxQYXJhbXMoXy5leHRyYWN0UGFyYW1TdHJpbmcodG9waWNVcmwpKTtcclxuICAgIGhhc2hNYXAgPSBfLmhhc2hQYXJhbXMoXy5leHRyYWN0SGFzaFN0cmluZyh0b3BpY1VybCkpO1xyXG4gICAgcmV0dXJuIF8uZXh0ZW5kKHBhcmFtc01hcCwgaGFzaE1hcCk7XHJcbiAgfTtcclxuXHJcbiAgZ2V0VG9waWNVUkwgPSAobmV3TWFwLCB0b3BpY1VybCkgPT4ge1xyXG4gICAgdmFyIGJvb2tNYXJrLCBmaWxlUGF0aCwgaSwga2V5LCBsZW4sIHBhcmFtcywgcGFyYW1zTWFwO1xyXG4gICAgdG9waWNVcmwgPSB0b3BpY1VybDtcclxuICAgIGZpbGVQYXRoID0gXy5maWxlUGF0aCh0b3BpY1VybCk7XHJcbiAgICBib29rTWFyayA9IF8uZXh0cmFjdEhhc2hTdHJpbmcodG9waWNVcmwpO1xyXG4gICAgaWYgKGJvb2tNYXJrLmxlbmd0aCA+IDApIHtcclxuICAgICAgYm9va01hcmsgPSBcIiNcIiArIGJvb2tNYXJrO1xyXG4gICAgfVxyXG4gICAgcGFyYW1zTWFwID0gXy51cmxQYXJhbXMoXy5leHRyYWN0UGFyYW1TdHJpbmcodG9waWNVcmwpKTtcclxuICAgIGZvciAoaSA9IDAsIGxlbiA9IGhhc2hRdWVyeUtleXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAga2V5ID0gaGFzaFF1ZXJ5S2V5c1tpXTtcclxuICAgICAgaWYgKG5ld01hcFtrZXldICE9IG51bGwpIHtcclxuICAgICAgICBwYXJhbXNNYXBba2V5XSA9IG5ld01hcFtrZXldO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAobW9kZWwuZ2V0KGNvbnN0cygnS0VZX1NDUkVFTl9JT1MnKSkpIHtcclxuICAgICAgcGFyYW1zTWFwW0hBU0hfS0VZX1JBTkRPTV0gPSBfLnVuaXF1ZUlkKCk7XHJcbiAgICB9XHJcbiAgICBwYXJhbXMgPSBfLm1hcFRvRW5jb2RlZFN0cmluZyhwYXJhbXNNYXApO1xyXG4gICAgaWYgKHBhcmFtcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHBhcmFtcyA9IFwiP1wiICsgcGFyYW1zO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFwiXCIgKyBmaWxlUGF0aCArIHBhcmFtcyArIGJvb2tNYXJrO1xyXG4gIH07XHJcblxyXG4gIHF1ZXVlVXBkYXRlSGFzaE1hcCA9IF8ucXVldWVVcGRhdGVIYXNoTWFwO1xyXG5cclxuICBmaXhIYXNoTWFwRm9yVG9waWMgPSBoYXNoTWFwID0+IHtcclxuICAgIGlmIChoYXNoTWFwID09IG51bGwpIHtcclxuICAgICAgaGFzaE1hcCA9IHt9O1xyXG4gICAgfVxyXG4gICAgaGFzaE1hcFtIQVNIX0tFWV9VSU1PREVdID0gbnVsbDtcclxuICAgIGhhc2hNYXBbSEFTSF9LRVlfUkFORE9NXSA9IG51bGw7XHJcbiAgICBpZiAoIWhhc2hNYXBbSEFTSF9LRVlfUkhfVE9DSURdKSB7XHJcbiAgICAgIGhhc2hNYXBbSEFTSF9LRVlfUkhfVE9DSURdID0gbnVsbDtcclxuICAgIH1cclxuICAgIGlmICghaGFzaE1hcFtIQVNIX0tFWV9SSF9ISUdITElHSFRdKSB7XHJcbiAgICAgIGhhc2hNYXBbSEFTSF9LRVlfUkhfSElHSExJR0hUXSA9IG51bGw7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaGFzaE1hcDtcclxuICB9O1xyXG5cclxuICBmaXhIYXNoTWFwRm9yUm9vdCA9IGhhc2hNYXAgPT4ge1xyXG4gICAgaWYgKGhhc2hNYXAgPT0gbnVsbCkge1xyXG4gICAgICBoYXNoTWFwID0ge307XHJcbiAgICB9XHJcbiAgICBpZiAoIWhhc2hNYXBbSEFTSF9LRVlfVUlNT0RFXSkge1xyXG4gICAgICBoYXNoTWFwW0hBU0hfS0VZX1VJTU9ERV0gPSBudWxsO1xyXG4gICAgfVxyXG4gICAgaGFzaE1hcFtIQVNIX0tFWV9SQU5ET01dID0gbnVsbDtcclxuICAgIGlmICghaGFzaE1hcFtIQVNIX0tFWV9SSF9UT0NJRF0pIHtcclxuICAgICAgaGFzaE1hcFtIQVNIX0tFWV9SSF9UT0NJRF0gPSBudWxsO1xyXG4gICAgfVxyXG4gICAgaWYgKCFoYXNoTWFwW0hBU0hfS0VZX1JIX0hJR0hMSUdIVF0pIHtcclxuICAgICAgaGFzaE1hcFtIQVNIX0tFWV9SSF9ISUdITElHSFRdID0gbnVsbDtcclxuICAgIH1cclxuICAgIGlmICghaGFzaE1hcFtIQVNIX0tFWV9SSF9TRUFSQ0hdKSB7XHJcbiAgICAgIGhhc2hNYXBbSEFTSF9LRVlfUkhfU0VBUkNIXSA9IG51bGw7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaGFzaE1hcDtcclxuICB9O1xyXG5cclxuICBzaG93VG9waWMgPSAocmVsVXJsLCBhZGRUb0hpc3RvcnkpID0+IHtcclxuICAgIHZhciBoYXNoTWFwO1xyXG4gICAgcmVsVXJsID0gXy5maXhSZWxhdGl2ZVVybChyZWxVcmwpO1xyXG4gICAgaGFzaE1hcCA9IF8udXJsUGFyYW1zKF8uZXh0cmFjdFBhcmFtU3RyaW5nKHJlbFVybCkpO1xyXG4gICAgaGFzaE1hcFtIQVNIX0tFWV9UT1BJQ10gPSBfLnN0cmlwUGFyYW0ocmVsVXJsKTtcclxuICAgIGhhc2hNYXAgPSBmaXhIYXNoTWFwRm9yVG9waWMoaGFzaE1hcCk7XHJcbiAgICByZXR1cm4gcXVldWVVcGRhdGVIYXNoTWFwKGhhc2hNYXAsIGFkZFRvSGlzdG9yeSk7XHJcbiAgfTtcclxuXHJcbiAgZ2V0SGFzaE1hcEZvclJvb3QgPSByZWxVcmwgPT4ge1xyXG4gICAgdmFyIGhhc2hNYXA7XHJcbiAgICByZWxVcmwgPSBfLmZpeFJlbGF0aXZlVXJsKHJlbFVybCk7XHJcbiAgICBoYXNoTWFwID0gXy51cmxQYXJhbXMoXy5leHRyYWN0UGFyYW1TdHJpbmcocmVsVXJsKSk7XHJcbiAgICBoYXNoTWFwID0gZml4SGFzaE1hcEZvclJvb3QoaGFzaE1hcCk7XHJcbiAgICByZXR1cm4gaGFzaE1hcDtcclxuICB9O1xyXG5cclxuICBnZXRQYXJhbXNGb3JSb290ID0gcmVsVXJsID0+IHtcclxuICAgIHZhciBxdWVyeU1hcDtcclxuICAgIHF1ZXJ5TWFwID0gZ2V0SGFzaE1hcEZvclJvb3QocmVsVXJsKTtcclxuICAgIGlmIChfLmlzRW1wdHlPYmplY3QocXVlcnlNYXApKSB7XHJcbiAgICAgIHJldHVybiAnJztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBcIj9cIiArIChfLm1hcFRvRW5jb2RlZFN0cmluZyhxdWVyeU1hcCkpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHNob3dOb25Ub3BpYyA9ICh1cmwsIGFkZFRvSGlzdG9yeSkgPT4ge1xyXG4gICAgdmFyIGhhc2hNYXA7XHJcbiAgICBoYXNoTWFwID0ge307XHJcbiAgICBoYXNoTWFwW0hBU0hfS0VZX1RPUElDXSA9IHVybDtcclxuICAgIGhhc2hNYXAgPSBmaXhIYXNoTWFwRm9yVG9waWMoaGFzaE1hcCk7XHJcbiAgICByZXR1cm4gcXVldWVVcGRhdGVIYXNoTWFwKGhhc2hNYXAsIGFkZFRvSGlzdG9yeSk7XHJcbiAgfTtcclxuXHJcbiAgKHtcclxuICAgIGlzU2FtZVRvcGljOiBmdW5jdGlvbih1cmwxLCB1cmwyKSB7fVxyXG4gIH0pO1xyXG5cclxuICBoYXNoQ2hhbmdlZCA9IG9iaiA9PiB7XHJcbiAgICB2YXIgY2hhbmdlZCwgbmV3TWFwLCBvbGRNYXAsIG9sZFRvcGljVXJsLCBvbGRVaU1vZGUsIHJlZiwgc2VhcmNoVGVybSwgc2VhcmNoVGVybUNoYW5nZWQsIHRvcGljVXJsLCB1aU1vZGU7XHJcbiAgICBuZXdNYXAgPSBvYmoubmV3TWFwO1xyXG4gICAgb2xkTWFwID0gb2JqLm9sZE1hcDtcclxuICAgIG9sZFVpTW9kZSA9IG9sZE1hcFtIQVNIX0tFWV9VSU1PREVdO1xyXG4gICAgdWlNb2RlID0gbmV3TWFwW0hBU0hfS0VZX1VJTU9ERV07XHJcbiAgICBpZiAoSEFTSF9LRVlfUkhfU0VBUkNIIGluIG5ld01hcCkge1xyXG4gICAgICBzZWFyY2hUZXJtID0gbmV3TWFwW0hBU0hfS0VZX1JIX1NFQVJDSF07XHJcbiAgICAgIHNlYXJjaFRlcm1DaGFuZ2VkID0gc2VhcmNoVGVybSAhPT0gbW9kZWwuZ2V0KGNvbnN0cygnS0VZX1NFQVJDSEVEX1RFUk0nKSk7XHJcbiAgICAgIG1vZGVsLnB1Ymxpc2goY29uc3RzKCdLRVlfU0VBUkNIX1RFUk0nKSwgc2VhcmNoVGVybSwge1xyXG4gICAgICAgIHN5bmM6IHRydWVcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodWlNb2RlID09PSAnc2VhcmNoJykge1xyXG4gICAgICBpZiAoc2VhcmNoVGVybUNoYW5nZWQgJiYgd2luZG93LmdIb3N0KSB7XHJcbiAgICAgICAgbW9kZWwucHVibGlzaChjb25zdHMoJ0VWVF9RVUVSWV9TRUFSQ0hfUkVTVUxUUycpLCB0cnVlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKCF1aU1vZGUgfHwgbmV3TWFwW0hBU0hfS0VZX1RPUElDXSkge1xyXG4gICAgICBvbGRUb3BpY1VybCA9IG1vZGVsLmdldChjb25zdHMoJ0tFWV9UT1BJQ19JTl9JRlJBTUUnKSk7XHJcbiAgICAgIGlmIChIQVNIX0tFWV9UT1BJQyBpbiBuZXdNYXApIHtcclxuICAgICAgICB0b3BpY1VybCA9IG5ld01hcFtIQVNIX0tFWV9UT1BJQ107XHJcbiAgICAgIH1cclxuICAgICAgaWYgKCF0b3BpY1VybCkge1xyXG4gICAgICAgIHRvcGljVXJsID0gb2xkVG9waWNVcmw7XHJcbiAgICAgIH1cclxuICAgICAgdmFyIGZlYXR1cmUgPSByaC5tb2RlbC5nZXQocmguY29uc3RzKCdLRVlfRkVBVFVSRScpKVxyXG4gICAgICBpZiAoIXRvcGljVXJsICYmICghZmVhdHVyZSB8fCBmZWF0dXJlLnNob3dEZWZUb3BpYyAhPT0gZmFsc2UpKSB7XHJcbiAgICAgICAgdG9waWNVcmwgPSAocmVmID0gd2luZG93LmdEZWZhdWx0VG9waWMpICE9IG51bGwgPyByZWYuc3Vic3RyaW5nKDEpIDogdm9pZCAwO1xyXG4gICAgICB9XHJcbiAgICAgIGNoYW5nZWQgPSB0b3BpY1VybCAmJiAodG9waWNVcmwgIT09IG9sZFRvcGljVXJsIHx8IG9sZFVpTW9kZSAhPT0gdWlNb2RlIHx8IG9sZE1hcFtIQVNIX0tFWV9SSF9ISUdITElHSFRdICE9PSBuZXdNYXBbSEFTSF9LRVlfUkhfSElHSExJR0hUXSB8fCBvbGRNYXBbSEFTSF9LRVlfUkhfVE9DSURdICE9PSBuZXdNYXBbSEFTSF9LRVlfUkhfVE9DSURdKTtcclxuICAgICAgaWYgKGNoYW5nZWQpIHtcclxuICAgICAgICBpZiAoXy5zdHJpcEJvb2ttYXJrKHRvcGljVXJsKSAhPT0gXy5zdHJpcEJvb2ttYXJrKG9sZFRvcGljVXJsKSkge1xyXG4gICAgICAgICAgXy5ydW5Ub3BpY0xvYWRpbmdBbmltYXRpb24odHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG1vZGVsLnB1Ymxpc2goY29uc3RzKCdLRVlfVE9QSUNfSU5fSUZSQU1FJyksIHRvcGljVXJsKTtcclxuICAgICAgICB3aW5kb3cubG9hZFRvcGljKGdldFRvcGljVVJMKG5ld01hcCwgdG9waWNVcmwpKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG1vZGVsLnB1Ymxpc2goY29uc3RzKCdLRVlfVUlfTU9ERScpLCBuZXdNYXBbSEFTSF9LRVlfVUlNT0RFXSk7XHJcbiAgfTtcclxuXHJcbiAgdG9waWNDaGFuZ2VkID0gdG9waWNVcmwgPT4ge1xyXG4gICAgdmFyIGRlY29kZWRVUkksIGhhc2hNYXAsIG9sZFVybCwgcmVsVXJsO1xyXG4gICAgaGFzaE1hcCA9IF8uaGFzaFBhcmFtcygpO1xyXG4gICAgaWYgKHRvcGljVXJsICYmICFoYXNoTWFwW0hBU0hfS0VZX1VJTU9ERV0pIHtcclxuICAgICAgZGVjb2RlZFVSSSA9IGRlY29kZVVSSShkb2N1bWVudC5sb2NhdGlvbi5ocmVmKTtcclxuICAgICAgcmVsVXJsID0gd2luZG93Ll9nZXRSZWxhdGl2ZUZpbGVOYW1lKGRlY29kZWRVUkksIHRvcGljVXJsKTtcclxuICAgICAgb2xkVXJsID0gaGFzaE1hcFtIQVNIX0tFWV9UT1BJQ107XHJcbiAgICAgIGlmICghb2xkVXJsIHx8IF8uZmlsZVBhdGgocmVsVXJsKSAhPT0gXy5maWxlUGF0aChvbGRVcmwpKSB7XHJcbiAgICAgICAgbW9kZWwucHVibGlzaChjb25zdHMoJ0tFWV9UT1BJQ19JTl9JRlJBTUUnKSwgcmVsVXJsKTtcclxuICAgICAgICByZXR1cm4gc2hvd1RvcGljKHJlbFVybCwgZmFsc2UpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgbmF2aWdhdGVUb1VybCA9IG9iaiA9PiB7XHJcbiAgICB2YXIgZmlsZU5hbWUsIGhhc2hNYXAsIHBhcmFtcywgcmVsVXJsLCByb290VXJsLCB1cmw7XHJcbiAgICB1cmwgPSBvYmouYWJzVXJsO1xyXG4gICAgaWYgKF8uaXNSb290VXJsKCkpIHtcclxuICAgICAgaWYgKF8uaXNVcmxBbGxvd2RJbklmcmFtZSh1cmwpKSB7XHJcbiAgICAgICAgdXJsID0gXy5tYWtlUmVsYXRpdmVVcmwoXy5maXhSZWxhdGl2ZVVybCh1cmwpKTtcclxuICAgICAgICBmaWxlTmFtZSA9IHVybCAmJiBfLmZpbGVQYXRoKHVybCk7XHJcbiAgICAgICAgaWYgKGZpbGVOYW1lID09PSBjb25zdHMoJ1NUQVJUX0ZJTEVQQVRIJykpIHtcclxuICAgICAgICAgIHVybCA9IHVybC5zdWJzdHJpbmcoZmlsZU5hbWUubGVuZ3RoKTtcclxuICAgICAgICB9IGVsc2UgaWYgKCF1cmwpIHtcclxuICAgICAgICAgIHVybCA9ICcjdXgnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodXJsWzBdID09PSAnIycgfHwgdXJsWzBdID09PSAnPycpIHtcclxuICAgICAgICAgIGhhc2hNYXAgPSBfLmhhc2hQYXJhbXMoXy5leHRyYWN0SGFzaFN0cmluZyh1cmwpKTtcclxuICAgICAgICAgIGlmICghKEhBU0hfS0VZX1VJTU9ERSBpbiBoYXNoTWFwKSkge1xyXG4gICAgICAgICAgICBoYXNoTWFwW0hBU0hfS0VZX1VJTU9ERV0gPSBudWxsO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIHF1ZXVlVXBkYXRlSGFzaE1hcChoYXNoTWFwLCB0cnVlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHVybCkge1xyXG4gICAgICAgICAgcmV0dXJuIHNob3dUb3BpYyh1cmwsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gc2hvd05vblRvcGljKHVybCwgdHJ1ZSk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmICghXy5pc1Jvb3RVcmwodXJsKSkge1xyXG4gICAgICAgIHJvb3RVcmwgPSBfLmdldFJvb3RVcmwoKTtcclxuICAgICAgICBpZiAoXy5pc0V4dGVybmFsVXJsKHVybCkpIHtcclxuICAgICAgICAgIHJlbFVybCA9IHVybDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcGFyYW1zID0gZ2V0UGFyYW1zRm9yUm9vdCh1cmwpO1xyXG4gICAgICAgICAgcmVsVXJsID0gXy5maXhSZWxhdGl2ZVVybChfLm1ha2VSZWxhdGl2ZVBhdGgodXJsLCByb290VXJsKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHVybCA9IFwiXCIgKyByb290VXJsICsgcGFyYW1zICsgXCIjdD1cIiArIChlbmNvZGVVUklDb21wb25lbnQocmVsVXJsKSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGRvY3VtZW50LmxvY2F0aW9uLmhyZWYgPSB1cmw7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgbW9kZWwuc3Vic2NyaWJlKGNvbnN0cygnRVZUX1dJREdFVF9MT0FERUQnKSwgKCkgPT4ge1xyXG4gICAgXy5hZGRFdmVudExpc3RlbmVyKGRvY3VtZW50LCAnY2xpY2snLCBfLmhvb2tDbGljayk7XHJcbiAgICBtb2RlbC5zdWJzY3JpYmUoY29uc3RzKCdFVlRfSEFTSF9DSEFOR0UnKSwgaGFzaENoYW5nZWQpO1xyXG4gICAgbW9kZWwuc3Vic2NyaWJlKGNvbnN0cygnS0VZX1RPUElDX1VSTCcpLCB0b3BpY0NoYW5nZWQpO1xyXG4gICAgbW9kZWwuc3Vic2NyaWJlKGNvbnN0cygnRVZUX05BVklHQVRFX1RPX1VSTCcpLCBuYXZpZ2F0ZVRvVXJsKTtcclxuICAgIG1vZGVsLnN1YnNjcmliZShjb25zdHMoJ0tFWV9UT1BJQ19JTl9JRlJBTUUnKSwgdG9waWNVcmwgPT4ge1xyXG4gICAgICBpZiAoKFwiXCIgKyB3aW5kb3cuZ0hvc3QgKyB3aW5kb3cuZ0hvc3RQYXRoKSAhPT0gJy8nKSB7XHJcbiAgICAgICAgaWYgKHdpbmRvdy5zZXRUb3BpYykge1xyXG4gICAgICAgICAgd2luZG93LnNldFRvcGljKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh3aW5kb3cuY2hhbmdlVG9waWNMaW5rKSB7XHJcbiAgICAgICAgICByZXR1cm4gd2luZG93LmNoYW5nZVRvcGljTGluayhkb2N1bWVudC5sb2NhdGlvbi50b1N0cmluZygpKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgbW9kZWwuc3Vic2NyaWJlKGNvbnN0cygnRVZUX1RPUElDX0xPQURFRCcpLCAoKSA9PiBfLnJ1blRvcGljTG9hZGluZ0FuaW1hdGlvbihmYWxzZSkpO1xyXG4gICAgcmV0dXJuIG1vZGVsLnN1YnNjcmliZShjb25zdHMoJ0VWVF9JTlNJREVfSUZSQU1FX0RPTV9DT05URU5UTE9BREVEJyksICgpID0+IF8ucnVuVG9waWNMb2FkaW5nQW5pbWF0aW9uKGZhbHNlKSk7XHJcbiAgfSk7XHJcblxyXG59KS5jYWxsKHRoaXMpO1xyXG4iLCJsZXQgeyByaCB9ID0gd2luZG93O1xyXG5sZXQgeyBfIH0gPSByaDtcclxubGV0IHsgJCB9ID0gcmg7XHJcbmxldCB7IGNvbnN0cyB9ID0gcmg7XHJcbmxldCB7IHN0b3JhZ2UgfSA9IHJoO1xyXG5sZXQgdXJsRmlsdGVyID0gcmguX3BhcmFtcy5maWx0ZXI7XHJcblxyXG52YXIgRXhwcmVzc2lvbkJ1aWxkZXIgPSAoZnVuY3Rpb24oKSB7XHJcbiAgbGV0IEdSUF9TRVBBUkFUT1IgPSB1bmRlZmluZWQ7XHJcbiAgbGV0IFRBR19TRVBBUkFUT1IgPSB1bmRlZmluZWQ7XHJcbiAgbGV0IEVMRU1FTlRfU0VQQVJBVE9SID0gdW5kZWZpbmVkO1xyXG4gIEV4cHJlc3Npb25CdWlsZGVyID0gY2xhc3MgRXhwcmVzc2lvbkJ1aWxkZXIge1xyXG4gICAgc3RhdGljIGluaXRDbGFzcygpIHtcclxuICAgIFxyXG4gICAgICBHUlBfU0VQQVJBVE9SID0gJzonO1xyXG4gICAgICBUQUdfU0VQQVJBVE9SID0gJzsnO1xyXG4gICAgICBFTEVNRU5UX1NFUEFSQVRPUiA9ICcsJztcclxuICAgIH1cclxuICBcclxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZykge1xyXG4gICAgICB0aGlzLmdldFVuY2hlY2tlZCA9IHRoaXMuZ2V0VW5jaGVja2VkLmJpbmQodGhpcyk7XHJcbiAgICAgIHRoaXMuaGFuZGxlVGFnU3RhdGVzID0gdGhpcy5oYW5kbGVUYWdTdGF0ZXMuYmluZCh0aGlzKTtcclxuICAgICAgc3RvcmFnZS5pbml0KGNvbnN0cygnSEVMUF9JRCcpKTtcclxuICAgIFxyXG4gICAgICB0aGlzLmFsbFRhZ05hbWVzID0gdGhpcy5jb21wdXRlTmFtZXMocmgubW9kZWwuZ2V0KGNvbnN0cygnS0VZX01FUkdFRF9GSUxURVJfS0VZJykpKTtcclxuICAgIFxyXG4gICAgICB0aGlzLnByZXBhcmVUYWdTdGF0ZXMoKTtcclxuICAgIFxyXG4gICAgICB0aGlzLmhhbmRsZVRhZ1N0YXRlcyhyaC5tb2RlbC5nZXQoY29uc3RzKCdLRVlfUFJPSkVDVF9UQUdfU1RBVEVTJykpKTtcclxuICAgIFxyXG4gICAgICByaC5tb2RlbC5zdWJzY3JpYmUoY29uc3RzKCdLRVlfUFJPSkVDVF9UQUdfU1RBVEVTJyksXHJcbiAgICAgICAgXy5kZWJvdW5jZSh0aGlzLmhhbmRsZVRhZ1N0YXRlcywgMzAwKSxcclxuICAgICAgICB7aW5pdERvbmU6IHRydWV9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wdXRlTmFtZXModGFncykge1xyXG4gICAgICByZXR1cm4gXy5yZWR1Y2UodGFncywgZnVuY3Rpb24ocmVzdWx0LCB0YWcpIHtcclxuICAgICAgICByZXN1bHQucHVzaCh0YWcuY2hpbGRyZW4gPyB0aGlzLmNvbXB1dGVOYW1lcyh0YWcuY2hpbGRyZW4pIDogdGFnLm5hbWUpO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgIH1cclxuICAgICAgLCBbXSwgdGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VW5jaGVja2VkKGluZGV4LCBjaGVja2VkKSB7XHJcbiAgICAgIHJldHVybiBfLmZpbHRlcih0aGlzLmFsbFRhZ05hbWVzW2luZGV4XSwgaXRlbSA9PiAtMSA9PT0gY2hlY2tlZC5pbmRleE9mKGl0ZW0pKTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wdXRlRXhwcmVzc2lvbihzdGF0ZXMpIHtcclxuICAgICAgaWYgKCFzdGF0ZXMgfHwgIXRoaXMuYWxsVGFnTmFtZXMpIHtcclxuICAgICAgICByZXR1cm4gcmgubW9kZWwucHVibGlzaChjb25zdHMoJ0tFWV9UQUdfRVhQUkVTU0lPTicpLCBbXSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxldCBncm91cEV4cHJzID0gXy5yZWR1Y2Uoc3RhdGVzLCBmdW5jdGlvbihyZXN1bHQsIHZhbHVlLCBrZXkpIHtcclxuICAgICAgICBpZiAoXy5pc1N0cmluZyh2YWx1ZSkpIHtcclxuICAgICAgICAgIHJlc3VsdC5wdXNoKHtjOiBbdmFsdWVdLCB1OiBbXX0pO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodmFsdWUgIT0gbnVsbCkge1xyXG4gICAgICAgICAgbGV0IHZhbGlkVmFsdWVzO1xyXG4gICAgICAgICAgaWYgKCh2YWxpZFZhbHVlcyA9IF8uY29tcGFjdCh2YWx1ZSkpICYmICh2YWxpZFZhbHVlcy5sZW5ndGggPiAwKSkge1xyXG4gICAgICAgICAgICByZXN1bHQucHVzaCh7XHJcbiAgICAgICAgICAgICAgYzogdmFsaWRWYWx1ZXMsXHJcbiAgICAgICAgICAgICAgdTogdGhpcy5nZXRVbmNoZWNrZWQoa2V5LCB2YWxpZFZhbHVlcylcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgIH1cclxuICAgICAgLCBbXSwgdGhpcyk7XHJcblxyXG4gICAgICByZXR1cm4gcmgubW9kZWwucHVibGlzaChjb25zdHMoJ0tFWV9UQUdfRVhQUkVTU0lPTicpLCBncm91cEV4cHJzKTtcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVUYWdTdGF0ZXMoc3RhdGVzKSB7XHJcbiAgICAgIGlmIChzdGF0ZXMgPT0gbnVsbCkgeyBzdGF0ZXMgPSB7fTsgfVxyXG4gICAgICB0aGlzLmNvbXB1dGVFeHByZXNzaW9uKHN0YXRlcyk7XHJcbiAgICBcclxuICAgICAgLy8gUGVyc2lzdCBuZXcgdGFnIHN0YXRlIGluIGxvY2FsREIgb3IgY29va2llc1xyXG4gICAgICByZXR1cm4gc3RvcmFnZS5wZXJzaXN0KCd0YWdfc3RhdGVzJywgc3RhdGVzKTtcclxuICAgIH1cclxuXHJcbiAgICBwcmVwYXJlVGFnU3RhdGVzKCkge1xyXG4gICAgICByZXR1cm4gcmgubW9kZWwuc3Vic2NyaWJlKGNvbnN0cygnS0VZX1BST0pFQ1RfRklMVEVSX1RZUEUnKSwgKCkgPT4ge1xyXG4gICAgICAgIGxldCB0YWdTdGF0ZXM7XHJcbiAgICAgICAgaWYgKHVybEZpbHRlcikge1xyXG4gICAgICAgICAgbGV0IGZpbHRlciA9IHJoLm1vZGVsLmdldChjb25zdHMoJ0tFWV9NRVJHRURfRklMVEVSX0tFWScpKTtcclxuICAgICAgICAgIHRhZ1N0YXRlcyA9IHRoaXMucGFyc2VVcmxGaWx0ZXIoZmlsdGVyLCB1cmxGaWx0ZXIuc3BsaXQoRUxFTUVOVF9TRVBBUkFUT1IpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKCF0YWdTdGF0ZXMpIHsgdGFnU3RhdGVzID0gc3RvcmFnZS5mZXRjaCgndGFnX3N0YXRlcycpOyB9XHJcbiAgICAgIFxyXG4gICAgICAgIGlmICghdGFnU3RhdGVzKSB7XHJcbiAgICAgICAgICB0YWdTdGF0ZXMgPSBfLmNsb25lKHJoLm1vZGVsLmdldChjb25zdHMoJ0tFWV9ERUZBVUxUX0ZJTFRFUicpKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGFnU3RhdGVzKSB7IHJldHVybiByaC5tb2RlbC5wdWJsaXNoKGNvbnN0cygnS0VZX1BST0pFQ1RfVEFHX1NUQVRFUycpLCB0YWdTdGF0ZXMpOyB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHBhcnNlRmlsdGVyRWxlbW50KGZpbHRlciwgZWxlbWVudCkge1xyXG4gICAgICBsZXQgdGVtcCA9IGVsZW1lbnQuc3BsaXQoR1JQX1NFUEFSQVRPUik7XHJcbiAgICAgIGxldCBuYW1lID0gdGVtcFswXTtcclxuICAgICAgbGV0IGVsZW1lbnRzID0gdGVtcFsxXSAmJiB0ZW1wWzFdLnNwbGl0KFRBR19TRVBBUkFUT1IpO1xyXG4gICAgICBsZXQgaW5kZXggPSBfLmZpbmRJbmRleChmaWx0ZXIsIGl0ZW0gPT4gKChlbGVtZW50cyAhPSBudWxsKSA9PT0gKGl0ZW0uY2hpbGRyZW4gIT0gbnVsbCkpICYmIChpdGVtLmRpc3BsYXkgPT09IG5hbWUpKTtcclxuICAgICAgcmV0dXJuIHtpbmRleCwgZWxlbWVudHN9O1xyXG4gICAgfVxyXG5cclxuICAgIHBhcnNlVXJsRmlsdGVyKGZpbHRlciwgYXJyYXkpIHtcclxuICAgICAgaWYgKCFhcnJheSAmJiAhYXJyYXkubGVuZ3RoKSB7IHJldHVybjsgfVxyXG4gICAgICBsZXQgcmFkaW9Nb2RlID0gcmgubW9kZWwuZ2V0KGNvbnN0cygnS0VZX1BST0pFQ1RfRklMVEVSX1RZUEUnKSkgPT09ICdyYWRpbyc7XHJcbiAgICAgIGxldCBmaXJzdFN0cmluZyA9IHRydWU7XHJcbiAgICAgIHJldHVybiBfLnJlZHVjZShhcnJheSwgZnVuY3Rpb24ocmVzdWx0LCBlbGVtZW50LCBpbmRleCkge1xyXG4gICAgICAgIGxldCBlbGVtZW50cztcclxuICAgICAgICAoe2luZGV4LCBlbGVtZW50c30gPSB0aGlzLnBhcnNlRmlsdGVyRWxlbW50KGZpbHRlciwgZWxlbWVudCkpO1xyXG4gICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcclxuICAgICAgICAgIGxldCBub2RlID0gZmlsdGVyW2luZGV4XTtcclxuICAgICAgICAgIGlmIChub2RlLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdFtpbmRleF0gPSB0aGlzLnBhcnNlVXJsRmlsdGVyKG5vZGUuY2hpbGRyZW4sIGVsZW1lbnRzKTtcclxuICAgICAgICAgIH0gZWxzZSBpZiAoIXJhZGlvTW9kZSB8fCBmaXJzdFN0cmluZykge1xyXG4gICAgICAgICAgICBmaXJzdFN0cmluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICByZXN1bHRbaW5kZXhdID0gbm9kZS5uYW1lO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICB9XHJcbiAgICAgICwge30sIHRoaXMpO1xyXG4gICAgfVxyXG4gIH07XHJcbiAgRXhwcmVzc2lvbkJ1aWxkZXIuaW5pdENsYXNzKCk7XHJcbiAgcmV0dXJuIEV4cHJlc3Npb25CdWlsZGVyO1xyXG59KSgpO1xyXG4gIFxyXG5yaC53aWRnZXRzLkV4cHJlc3Npb25CdWlsZGVyID0gRXhwcmVzc2lvbkJ1aWxkZXI7IiwibGV0IHsgcmggfSA9IHdpbmRvdztcclxubGV0IHsgXyB9ID0gcmg7XHJcbmxldCB7ICQgfSA9IHJoO1xyXG5sZXQgeyBjb25zdHMgfSA9IHJoO1xyXG5cclxudmFyIEZpbHRlckNvbnRyb2xsZXIgPSAoZnVuY3Rpb24oKSB7XHJcbiAgbGV0IEdST1VQX0NMQVNTID0gdW5kZWZpbmVkO1xyXG4gIGxldCBJVEVNX0NMQVNTID0gdW5kZWZpbmVkO1xyXG4gIGxldCBLRVlfUFJPSkVDVF9GSUxURVJfVFlQRSA9IHVuZGVmaW5lZDtcclxuICBGaWx0ZXJDb250cm9sbGVyID0gY2xhc3MgRmlsdGVyQ29udHJvbGxlciB7XHJcbiAgICBzdGF0aWMgaW5pdENsYXNzKCkge1xyXG4gIFxyXG4gICAgICBHUk9VUF9DTEFTUyA9ICdncm91cCc7XHJcbiAgICAgIElURU1fQ0xBU1MgPSAnaXRlbSc7XHJcbiAgICAgIEtFWV9QUk9KRUNUX0ZJTFRFUl9UWVBFID0gY29uc3RzKCdLRVlfUFJPSkVDVF9GSUxURVJfVFlQRScpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKHdpZGdldCkge1xyXG4gICAgICB0aGlzLmNsaWNrID0gdGhpcy5jbGljay5iaW5kKHRoaXMpO1xyXG4gICAgICB0aGlzLndpZGdldCA9IHdpZGdldDtcclxuICAgIH1cclxuICBcclxuICAgIGNsaWNrKGUpIHtcclxuICAgICAgbGV0IHRvcE5vZGUgPSBlLmN1cnJlbnRUYXJnZXQ7XHJcbiAgICAgIGxldCBjbGlja05vZGUgPSBlLnRhcmdldDtcclxuICAgICAgbGV0IG5vZGUgPSB0aGlzLmdldEl0ZW1Ob2RlKGNsaWNrTm9kZSwgdG9wTm9kZSk7XHJcbiAgICAgIGxldCBzZWxUYWdFeHByc1BhdGggPSBgJHtjb25zdHMoJ0tFWV9QUk9KRUNUX1RBR19TVEFURVMnKX0ke3RoaXMuZ2V0SXRlbUtleShub2RlKX1gO1xyXG4gICAgICBsZXQgc2VsVGFnRXhwcnMgPSB0aGlzLndpZGdldC5nZXQoc2VsVGFnRXhwcnNQYXRoKTtcclxuICAgICAgaWYgKHRoaXMuZmlsdGVyVHlwZSgpICE9PSAncmFkaW8nKSB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVDaGVja2JveENsaWNrKG5vZGUsIHNlbFRhZ0V4cHJzUGF0aCwgc2VsVGFnRXhwcnMpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuaGFuZGxlUmFkaW9DbGljayhub2RlLCBzZWxUYWdFeHByc1BhdGgsIHNlbFRhZ0V4cHJzKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gXy5wcmV2ZW50RGVmYXVsdChlKTtcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVSYWRpb0NsaWNrKG5vZGUsIHNlbFRhZ0V4cHJzUGF0aCwgc2VsVGFnRXhwcnMpIHtcclxuICAgICAgaWYgKCF0aGlzLmlzR3JvdXBOb2RlKG5vZGUpICYmICFzZWxUYWdFeHBycykge1xyXG4gICAgICAgIGxldCB7cGFyZW50S2V5LCBrZXl9ID0gXy5zcGxpdEtleShzZWxUYWdFeHByc1BhdGgpO1xyXG4gICAgICAgIGxldCBuZXdWYWx1ZSA9IHt9O1xyXG4gICAgICAgIG5ld1ZhbHVlW2tleV0gPSB0aGlzLmdldEl0ZW1WYWx1ZShub2RlKTtcclxuICAgICAgICByZXR1cm4gdGhpcy53aWRnZXQucHVibGlzaChwYXJlbnRLZXksIG5ld1ZhbHVlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZUNoZWNrYm94Q2xpY2sobm9kZSwgc2VsVGFnRXhwcnNQYXRoLCBzZWxUYWdFeHBycykge1xyXG4gICAgICBsZXQgbmV3VmFsdWU7XHJcbiAgICAgIGlmICh0aGlzLmlzR3JvdXBOb2RlKG5vZGUpKSB7XHJcbiAgICAgICAgbGV0IGNoZWNrZWQgPSBfLmFueShzZWxUYWdFeHBycywgdGFnRXhwciA9PiB0YWdFeHByKTtcclxuICAgICAgICBuZXdWYWx1ZSA9IGNoZWNrZWQgPyB1bmRlZmluZWQgOiB0aGlzLmdldEdyb3VwSXRlbUV4cHJzKG5vZGUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLndpZGdldC5wdWJsaXNoKHNlbFRhZ0V4cHJzUGF0aCwgbmV3VmFsdWUpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIG5ld1ZhbHVlID0gc2VsVGFnRXhwcnMgPyB1bmRlZmluZWQgOiB0aGlzLmdldEl0ZW1WYWx1ZShub2RlKTtcclxuICAgICAgICByZXR1cm4gdGhpcy53aWRnZXQucHVibGlzaChzZWxUYWdFeHByc1BhdGgsIG5ld1ZhbHVlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldEl0ZW1Ob2RlKG5vZGUsIHRvcE5vZGUpIHtcclxuICAgICAgcmV0dXJuIF8uZmluZFBhcmVudE5vZGUobm9kZSwgdG9wTm9kZSwgbm9kZSA9PiAkLm5vZGVOYW1lKG5vZGUpID09PSAnTEknKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRJdGVtVmFsdWUobm9kZSkgeyByZXR1cm4gJC5kYXRhc2V0KG5vZGUsICdpdGVtdmFsdWUnKTsgfVxyXG5cclxuICAgIGdldEdyb3VwSXRlbUV4cHJzKG5vZGUpIHtcclxuICAgICAgbGV0IGtleSA9ICQuZGF0YXNldChub2RlLCAnaXRlbWtleScpO1xyXG4gICAgICBsZXQgZ3JvdXBUYWcgPSB0aGlzLndpZGdldC5nZXQoYCR7dGhpcy53aWRnZXQua2V5fSR7a2V5fWApO1xyXG4gICAgICByZXR1cm4gXy5tYXAoZ3JvdXBUYWcuY2hpbGRyZW4sIHRhZyA9PiB0YWcubmFtZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SXRlbUtleShub2RlKSB7IHJldHVybiAkLmRhdGFzZXQobm9kZSwgJ2l0ZW1rZXknKTsgfVxyXG5cclxuICAgIGlzR3JvdXBOb2RlKG5vZGUpIHsgcmV0dXJuICQuaGFzQ2xhc3Mobm9kZSwgR1JPVVBfQ0xBU1MpOyB9XHJcblxyXG4gICAgaXNJdGVtTm9kZShub2RlKSB7IHJldHVybiAkLmhhc0NsYXNzKG5vZGUsIElURU1fQ0xBU1MpOyB9XHJcblxyXG4gICAgY2xhc3MoaXRlbSkgeyBpZiAoaXRlbS5jaGlsZHJlbikgeyByZXR1cm4gR1JPVVBfQ0xBU1M7IH0gZWxzZSB7IHJldHVybiBJVEVNX0NMQVNTOyB9IH1cclxuXHJcbiAgICB2YWx1ZShpdGVtKSB7IGlmIChpdGVtLmNoaWxkcmVuKSB7IHJldHVybiBudWxsOyB9IGVsc2UgeyByZXR1cm4gaXRlbS5uYW1lOyB9IH1cclxuXHJcbiAgICBmaWx0ZXJUeXBlKCkgeyByZXR1cm4gdGhpcy53aWRnZXQuZ2V0KEtFWV9QUk9KRUNUX0ZJTFRFUl9UWVBFKSB8fCAnY2hlY2tib3gnOyB9XHJcblxyXG4gICAgaW5wdXRUeXBlKGl0ZW0pIHtcclxuICAgICAgbGV0IHR5cGUgPSB0aGlzLmZpbHRlclR5cGUoKTtcclxuICAgICAgaWYgKGl0ZW0uY2hpbGRyZW4gJiYgKHR5cGUgPT09ICdyYWRpbycpKSB7IHR5cGUgPSB1bmRlZmluZWQ7IH1cclxuICAgICAgcmV0dXJuIHR5cGU7XHJcbiAgICB9XHJcbiAgfTtcclxuICBGaWx0ZXJDb250cm9sbGVyLmluaXRDbGFzcygpO1xyXG4gIHJldHVybiBGaWx0ZXJDb250cm9sbGVyO1xyXG59KSgpO1xyXG5cclxucmguY29udHJvbGxlcignRmlsdGVyQ29udHJvbGxlcicsIEZpbHRlckNvbnRyb2xsZXIpOyIsImNvbnN0IHsgcmggfSA9IHdpbmRvdztcclxuY29uc3QgeyBtb2RlbCB9ID0gcmg7XHJcbmNvbnN0IHsgXyB9ID0gcmg7XHJcbmNvbnN0IHsgY29uc3RzIH0gPSByaDtcclxuY29uc3QgeyBodHRwIH0gPSByaDtcclxuY29uc3QgeyByaHMgfSA9IHJoO1xyXG5cclxuXHJcbnZhciBGaWx0ZXJSZXBvcnQgPSAoZnVuY3Rpb24oKSB7XHJcbiAgbGV0IGdldFBvc3RVcmwgPSB1bmRlZmluZWQ7XHJcbiAgRmlsdGVyUmVwb3J0ID0gY2xhc3MgRmlsdGVyUmVwb3J0IHtcclxuICAgIHN0YXRpYyBpbml0Q2xhc3MoKSB7XHJcblxyXG5cclxuICAgICAgZ2V0UG9zdFVybCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGNvbnN0IGhvc3QgPSBkb2N1bWVudC5sb2NhdGlvbi5vcmlnaW47XHJcbiAgICAgICAgY29uc3QgYmFzZUNvbnRleHQgPSBtb2RlbC5nZXQoY29uc3RzKCdLRVlfUFVCTElTSF9CQVNFX1VSTCcpKS5zdWJzdHIoaG9zdC5sZW5ndGgpO1xyXG4gICAgICAgIGlmIChiYXNlQ29udGV4dCAmJiAhXy5pc0VtcHR5U3RyaW5nKGJhc2VDb250ZXh0KSkge1xyXG4gICAgICAgICAgY29uc3QgaGFzaFN0cmluZyA9IF8ubWFwVG9FbmNvZGVkU3RyaW5nKF8uZXh0ZW5kKF8uYWRkUGF0aE5hbWVLZXkoe2FyZWE6IHJocy5hcmVhKCksXHJcbiAgICAgICAgICBwcmo6IHJocy5wcm9qZWN0KCksIHR5cGU6IChyaHMudHlwZSkoKSwgYWd0OiAnZmx0UnB0JywgbWdyOiAnYWdtJ1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgICkpO1xyXG4gICAgICAgICAgcmV0dXJuIGAke2Jhc2VDb250ZXh0fT8ke2hhc2hTdHJpbmd9YDtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgIGNvbnN0IHRpbWVyID0gMzAwMDtcclxuICAgICAgbW9kZWwuc3Vic2NyaWJlT25jZShjb25zdHMoJ0VWVF9QUk9KRUNUX0xPQURFRCcpLCAoKSA9PlxyXG4gICAgICAgIG1vZGVsLnN1YnNjcmliZU9uY2UoY29uc3RzKCdLRVlfUFVCTElTSF9NT0RFJyksIGZ1bmN0aW9uKHZhbCkge1xyXG4gICAgICAgICAgaWYgKCF2YWwpIHsgcmV0dXJuOyB9XHJcbiAgICAgICAgICB2YXIgdXJsID0gdXJsIHx8IGdldFBvc3RVcmwoKTtcclxuICAgICAgICAgIGxldCBja1RhZ3MgPSBbXTtcclxuICAgICAgICAgIGNvbnN0IHBvc3RUb1NlcnZlciA9IF8uZGVib3VuY2UoKCkgPT5cclxuICAgICAgICAgICAgaHR0cC5wb3N0KHVybCwgSlNPTi5zdHJpbmdpZnkoY2tUYWdzKSlcclxuICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xyXG4gICAgICAgICAgICAgIGlmIChyaC5fZGVidWcpIHsgcmV0dXJuIHJoLl9kKCdlcnJvcicsICdGaWx0ZXIgcmVwb3J0IHN0YXR1cyAnLCBzdGF0dXMpOyB9XHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgLCB0aW1lciwgZmFsc2UpO1xyXG5cclxuICAgICAgICAgIHJldHVybiBtb2RlbC5zdWJzY3JpYmUoY29uc3RzKCdLRVlfVEFHX0VYUFJFU1NJT04nKSwgIGZ1bmN0aW9uKGV4cHIpIHtcclxuICAgICAgICAgICAgY2tUYWdzID0gW107XHJcbiAgICAgICAgICAgIGNvbnN0IGZpbHRlckRhdGEgPSByaC5tb2RlbC5nZXQoY29uc3RzKCdLRVlfTUVSR0VEX0ZJTFRFUl9LRVknKSk7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHRhZ3Mgb2YgQXJyYXkuZnJvbShleHByKSkge1xyXG4gICAgICAgICAgICAgIGZvciAobGV0IHRhZyBvZiBBcnJheS5mcm9tKHRhZ3MuYykpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0YWdEYXRhO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRhZ0RhdGEgPSByaC5maWx0ZXJPYmplY3QubG9va3VwKGZpbHRlckRhdGEsIHRhZywgZmFsc2UpKSB7XHJcbiAgICAgICAgICAgICAgICAgIGNrVGFncy5wdXNoKHRhZ0RhdGEuZGlzcGxheSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChja1RhZ3MubGVuZ3RoID4gMCkgeyByZXR1cm4gcG9zdFRvU2VydmVyKCk7IH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgfTtcclxuICBGaWx0ZXJSZXBvcnQuaW5pdENsYXNzKCk7XHJcbiAgcmV0dXJuIEZpbHRlclJlcG9ydDtcclxufSkoKTtcclxuXHJcbm5ldyBGaWx0ZXJSZXBvcnQ7XHJcbiIsImxldCB7IHJoIH0gPSB3aW5kb3c7XHJcbmxldCB7IG1vZGVsIH0gPSByaDtcclxubGV0IHsgXyB9ID0gcmg7XHJcbmxldCB7IGNvbnN0cyB9ID0gcmg7XHJcbmxldCB7IGh0dHAgfSA9IHJoO1xyXG5cclxuXHJcbnZhciBHbG9zc2FyeUNvbnRyb2xsZXIgPSAoZnVuY3Rpb24oKSB7XHJcbiAgbGV0IGVudHJ5cyA9IHVuZGVmaW5lZDtcclxuICBHbG9zc2FyeUNvbnRyb2xsZXIgPSBjbGFzcyBHbG9zc2FyeUNvbnRyb2xsZXIgZXh0ZW5kcyByaC5OYXZDb250cm9sbGVyIHtcclxuICAgIHN0YXRpYyBpbml0Q2xhc3MoKSB7XHJcbiAgXHJcbiAgICAgIGVudHJ5cyA9ICdlbnRyeXMnO1xyXG4gICAgfVxyXG4gICAgY29uc3RydWN0b3Iod2lkZ2V0KSB7XHJcbiAgICAgIHN1cGVyKCk7XHJcbiAgICAgIHRoaXMuZGF0YSA9IFtdO1xyXG4gICAgICB0aGlzLmNodW5rQ291bnQgPSAwO1xyXG4gICAgICB0aGlzLmNvdW50ID0gMDtcclxuICAgICAgdGhpcy5rZXlzID0gJyc7XHJcbiAgICAgIHRoaXMuYWxocGFiZXQgPSAnJztcclxuICAgICAgdGhpcy5sb2FkTmF2RGF0YSgnZ2xvJyk7XHJcbiAgICAgIHRoaXMuZmlsdGVyID0gJyc7XHJcbiAgICAgIHRoaXMud2lkZ2V0ID0gd2lkZ2V0O1xyXG4gICAgICB0aGlzLndpZGdldC5wdWJsaXNoKCdzaG93Jywge30pO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZEVsZW1lbnQoZWxlbWVudHMsIGxpc3QpIHtcclxuICAgICAgcmV0dXJuICgoKSA9PiB7XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGVsZW1lbnQgb2YgQXJyYXkuZnJvbShlbGVtZW50c1tlbnRyeXNdKSkge1xyXG4gICAgICAgICAgaWYgKGVsZW1lbnQgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMubG9va3VwKGxpc3QsIGVsZW1lbnQpKSB7XHJcbiAgICAgICAgICAgICAgcmVzdWx0LnB1c2gobGlzdC5wdXNoKGVsZW1lbnQpKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICByZXN1bHQucHVzaCh1bmRlZmluZWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgIH0pKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZXhpc3RzKG5hbWUpIHtcclxuICAgICAgbGV0IGNoID0gdGhpcy5hbHBoYVRleHQobmFtZSk7XHJcbiAgICAgIGlmICh0aGlzLmFsaHBhYmV0LmluZGV4T2YoY2gpID4gLTEpIHsgcmV0dXJuIHRydWU7IH1cclxuICAgICAgdGhpcy5hbGhwYWJldCArPSBjaDtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGlzRmlsdGVyZWQobmFtZSkge1xyXG4gICAgICByZXR1cm4gdGhpcy5maWx0ZXIgJiYgKG5hbWUudG9Mb2NhbGVMb3dlckNhc2UoKS5pbmRleE9mKHRoaXMuZmlsdGVyKSA9PT0gLTEpO1xyXG4gICAgfVxyXG5cclxuICAgIGFscGhhVGV4dChuYW1lKSB7XHJcbiAgICAgIHJldHVybiBuYW1lLnRvVXBwZXJDYXNlKCkuY2hhckF0KDApO1xyXG4gICAgfVxyXG5cclxuICAgIGZpbHRlckdsbyh2YWx1ZSkge1xyXG4gICAgICB0aGlzLmZpbHRlciA9IHZhbHVlLnRvTG9jYWxlTG93ZXJDYXNlKCk7XHJcbiAgICAgIHRoaXMuYWxocGFiZXQgPSAnJztcclxuICAgICAgcmV0dXJuIG1vZGVsLnB1Ymxpc2goY29uc3RzKCdQUk9KRUNUX0dMT1NTQVJZX0RBVEEnKSxcclxuICAgICAgIG1vZGVsLmdldChjb25zdHMoJ1BST0pFQ1RfR0xPU1NBUllfREFUQScpKSk7XHJcbiAgICB9XHJcbiAgfTtcclxuICBHbG9zc2FyeUNvbnRyb2xsZXIuaW5pdENsYXNzKCk7XHJcbiAgcmV0dXJuIEdsb3NzYXJ5Q29udHJvbGxlcjtcclxufSkoKTtcclxuXHJcblxyXG5cclxucmguY29udHJvbGxlcignR2xvc3NhcnlDb250cm9sbGVyJywgR2xvc3NhcnlDb250cm9sbGVyKTsiLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuOS4xXHJcbigoKSA9PiB7XHJcbiAgdmFyIEluZGV4Q29udHJvbGxlciwgTmF2Q29udHJvbGxlciwgXywgY29uc3RzLCBodHRwLCBtb2RlbCwgcmgsIHJocywgdG9waWNzLFxyXG4gICAgYmluZCA9IChmbiwgbWUpID0+IGZ1bmN0aW9uKCl7IHJldHVybiBmbi5hcHBseShtZSwgYXJndW1lbnRzKTsgfSxcclxuICAgIGV4dGVuZCA9IChjaGlsZCwgcGFyZW50KSA9PiB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXHJcbiAgICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XHJcblxyXG4gIHJoID0gd2luZG93LnJoO1xyXG5cclxuICBtb2RlbCA9IHJoLm1vZGVsO1xyXG5cclxuICBfID0gcmguXztcclxuXHJcbiAgY29uc3RzID0gcmguY29uc3RzO1xyXG5cclxuICBodHRwID0gcmguaHR0cDtcclxuXHJcbiAgcmhzID0gcmgucmhzO1xyXG5cclxuICB0b3BpY3MgPSAndG9waWNzJztcclxuXHJcbiAgTmF2Q29udHJvbGxlciA9ICgoKCkgPT4ge1xyXG4gICAgZnVuY3Rpb24gTmF2Q29udHJvbGxlcigpIHtcclxuICAgICAgdGhpcy51cGRhdGVEYXRhID0gYmluZCh0aGlzLnVwZGF0ZURhdGEsIHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIE5hdkNvbnRyb2xsZXIucHJvdG90eXBlLmxvb2t1cCA9IChjaGlsZHJlbiwga2V5KSA9PiB7XHJcbiAgICAgIHZhciBjaGlsZCwgZWxlbWVudCwgaSwgbGVuO1xyXG4gICAgICBpZiAoKGNoaWxkcmVuICE9IG51bGwpICYmIChrZXkgIT0gbnVsbCkpIHtcclxuICAgICAgICBmb3IgKGkgPSAwLCBsZW4gPSBjaGlsZHJlbi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgY2hpbGQgPSBjaGlsZHJlbltpXTtcclxuICAgICAgICAgIGlmICghKGNoaWxkICE9IG51bGwpKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKGtleS50eXBlID09PSBjaGlsZC50eXBlICYmIGtleS5uYW1lID09PSBjaGlsZC5uYW1lICYmIF8uaXNFcXVhbChrZXkudXJsLCBjaGlsZC51cmwpICYmIF8uaXNFcXVhbChrZXlbdG9waWNzXSwgY2hpbGRbdG9waWNzXSkpIHtcclxuICAgICAgICAgICAgZWxlbWVudCA9IGNoaWxkO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKGVsZW1lbnQgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICB9O1xyXG5cclxuICAgIE5hdkNvbnRyb2xsZXIucHJvdG90eXBlLnNvcnQgPSBhcnJheSA9PiBhcnJheS5zb3J0KChmaXJzdCwgc2Vjb25kKSA9PiB3aW5kb3cuY29tcGFyZShmaXJzdC5uYW1lLCBzZWNvbmQubmFtZSkpO1xyXG5cclxuICAgIE5hdkNvbnRyb2xsZXIucHJvdG90eXBlLnVwZGF0ZURhdGEgPSBmdW5jdGlvbihjb25zdEtleSwgcHJvamVjdFVybCkge1xyXG4gICAgICB2YXIgY3VyRGF0YTtcclxuICAgICAgY3VyRGF0YSA9IG1vZGVsLmdldChjb25zdHMoJ0tFWV9URU1QX0RBVEEnKSkgfHwgW107XHJcbiAgICAgIG1vZGVsLnB1Ymxpc2goY29uc3RzKCdLRVlfVEVNUF9EQVRBJykpO1xyXG4gICAgICB0aGlzLmFkZEVsZW1lbnQoY3VyRGF0YSwgdGhpcy5kYXRhLCBwcm9qZWN0VXJsLCB0aGlzLmtleXMpO1xyXG4gICAgICBpZiAoLS10aGlzLmNodW5rQ291bnQgPT09IDAgJiYgdGhpcy5jb3VudCA9PT0gMCkge1xyXG4gICAgICAgIHRoaXMuc29ydCh0aGlzLmRhdGEpO1xyXG4gICAgICAgIHJldHVybiBtb2RlbC5wdWJsaXNoKGNvbnN0cyhjb25zdEtleSksIHRoaXMuZGF0YSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgTmF2Q29udHJvbGxlci5wcm90b3R5cGUuZ2V0Q2h1bmtEYXRhID0gZnVuY3Rpb24ocHJvamVjdFVybCwga2V5KSB7XHJcbiAgICAgIHZhciBhcnIsIHJlZjtcclxuICAgICAgdGhpcy5jb3VudC0tO1xyXG4gICAgICBhcnIgPSAoKHJlZiA9IG1vZGVsLmdldChjb25zdHMoJ0tFWV9URU1QX0RBVEEnKSkpICE9IG51bGwgPyByZWZbJ2NodW5raW5mb3MnXSA6IHZvaWQgMCkgfHwgW107XHJcbiAgICAgIHRoaXMuY2h1bmtDb3VudCArPSBhcnIubGVuZ3RoO1xyXG4gICAgICByZXR1cm4gXy5lYWNoKGFyciwgZnVuY3Rpb24oY2h1bmspIHtcclxuICAgICAgICBpZiAocHJvamVjdFVybCkge1xyXG4gICAgICAgICAgcHJvamVjdFVybCA9IF8uZW5zdXJlU2xhc2gocHJvamVjdFVybCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBfLmxvYWRTY3JpcHQocHJvamVjdFVybCArIFwid2h4ZGF0YS9cIiArIGNodW5rLm5vZGUgKyBcIi5uZXcuanNcIiwgZmFsc2UsICgoX3RoaXMgPT4gKCkgPT4gX3RoaXMudXBkYXRlRGF0YShrZXksIHByb2plY3RVcmwpKSkodGhpcykpO1xyXG4gICAgICB9LCB0aGlzKTtcclxuICAgIH07XHJcblxyXG4gICAgTmF2Q29udHJvbGxlci5wcm90b3R5cGUubG9hZE5hdkRhdGEgPSBmdW5jdGlvbih0eXBlKSB7XHJcbiAgICAgIHJldHVybiBtb2RlbC5zdWJzY3JpYmUoY29uc3RzKCdLRVlfUFJPSkVDVF9MSVNUJyksICgoX3RoaXMgPT4gbGlzdCA9PiB7XHJcbiAgICAgICAgX3RoaXMuYWxocGFiZXQgPSAnJztcclxuICAgICAgICBfdGhpcy5jb3VudCArPSBsaXN0Lmxlbmd0aDtcclxuICAgICAgICByZXR1cm4gXy5lYWNoKGxpc3QsIGZ1bmN0aW9uKHByb2plY3RVcmwpIHtcclxuICAgICAgICAgIGlmIChwcm9qZWN0VXJsKSB7XHJcbiAgICAgICAgICAgIHByb2plY3RVcmwgPSBfLmVuc3VyZVNsYXNoKHByb2plY3RVcmwpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIF8ubG9hZFNjcmlwdChwcm9qZWN0VXJsICsgXCJ3aHhkYXRhL1wiICsgKHR5cGUgPT09ICduZHgnID8gJ2lkeCcgOiAnZ2xvJykgKyBcIi5uZXcuanNcIiwgZmFsc2UsICgoX3RoaXMgPT4gKCkgPT4gX3RoaXMuZ2V0Q2h1bmtEYXRhKHByb2plY3RVcmwsIHR5cGUgPT09ICduZHgnID8gJ1BST0pFQ1RfSU5ERVhfREFUQScgOiAnUFJPSkVDVF9HTE9TU0FSWV9EQVRBJykpKSh0aGlzKSk7XHJcbiAgICAgICAgfSwgX3RoaXMpO1xyXG4gICAgICB9KSkodGhpcykpO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gTmF2Q29udHJvbGxlcjtcclxuXHJcbiAgfSkpKCk7XHJcblxyXG4gIHJoLk5hdkNvbnRyb2xsZXIgPSBOYXZDb250cm9sbGVyO1xyXG5cclxuICBJbmRleENvbnRyb2xsZXIgPSAoKHN1cGVyQ2xhc3MgPT4ge1xyXG4gICAgdmFyIGRlZlByb2plY3Q7XHJcblxyXG4gICAgZXh0ZW5kKEluZGV4Q29udHJvbGxlciwgc3VwZXJDbGFzcyk7XHJcblxyXG4gICAgZGVmUHJvamVjdCA9ICcnO1xyXG5cclxuICAgIGZ1bmN0aW9uIEluZGV4Q29udHJvbGxlcih3aWRnZXQpIHtcclxuICAgICAgdGhpcy5kYXRhID0gW107XHJcbiAgICAgIHRoaXMuY2h1bmtDb3VudCA9IDA7XHJcbiAgICAgIHRoaXMuY291bnQgPSAwO1xyXG4gICAgICB0aGlzLmFsaHBhYmV0ID0gJyc7XHJcbiAgICAgIHRoaXMuZmlsdGVyID0gJyc7XHJcbiAgICAgIHRoaXMua2V5cyA9ICdrZXlzJztcclxuICAgICAgdGhpcy53aWRnZXQgPSB3aWRnZXQ7XHJcbiAgICAgIG1vZGVsLnN1YnNjcmliZU9uY2UoY29uc3RzKCdFVlRfUFJPSkVDVF9MT0FERUQnKSwgKChfdGhpcyA9PiAoKSA9PiB7XHJcbiAgICAgICAgX3RoaXMubG9hZE5hdkRhdGEoJ25keCcpO1xyXG4gICAgICAgIF90aGlzLmdldEluZGV4RGF0YSgpO1xyXG4gICAgICAgIHJldHVybiBtb2RlbC5zdWJzY3JpYmUoY29uc3RzKCdLRVlfSU5ERVhfRklMVEVSJyksICgpID0+IHtcclxuICAgICAgICAgIF90aGlzLmFsaHBhYmV0ID0gJyc7XHJcbiAgICAgICAgICByZXR1cm4gbW9kZWwucHVibGlzaChjb25zdHMoJ1BST0pFQ1RfSU5ERVhfREFUQScpLCBtb2RlbC5nZXQoY29uc3RzKCdQUk9KRUNUX0lOREVYX0RBVEEnKSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KSkodGhpcykpO1xyXG4gICAgfVxyXG5cclxuICAgIEluZGV4Q29udHJvbGxlci5wcm90b3R5cGUuYWRkRWxlbWVudCA9IGZ1bmN0aW9uKGVsZW1lbnQsIGxpc3QsIHByb2plY3RVcmwsIGRhdGEpIHtcclxuICAgICAgdmFyIGNoaWxkLCBleGlzdGluZywgaSwgbGVuLCBvYmosIHJlZiwgcmVsVXJsLCByZXN1bHRzO1xyXG4gICAgICBpZiAoZWxlbWVudFtkYXRhXSAhPSBudWxsKSB7XHJcbiAgICAgICAgcmVmID0gZWxlbWVudFtkYXRhXTtcclxuICAgICAgICByZXN1bHRzID0gW107XHJcbiAgICAgICAgZm9yIChpID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICBjaGlsZCA9IHJlZltpXTtcclxuICAgICAgICAgIGlmICghKGNoaWxkICE9IG51bGwpKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKCEoZXhpc3RpbmcgPSB0aGlzLmxvb2t1cChsaXN0LCBjaGlsZCkpKSB7XHJcbiAgICAgICAgICAgIG9iaiA9IHtcclxuICAgICAgICAgICAgICB0eXBlOiBjaGlsZC50eXBlLFxyXG4gICAgICAgICAgICAgIG5hbWU6IGNoaWxkLm5hbWVcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgaWYgKGNoaWxkWydkYXRhLXJodGFncyddKSB7XHJcbiAgICAgICAgICAgICAgb2JqWydkYXRhLXJodGFncyddID0gY2hpbGRbJ2RhdGEtcmh0YWdzJ10gKyBcIitcIiArIHByb2plY3RVcmw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFjaGlsZC51cmwpIHtcclxuICAgICAgICAgICAgICBvYmpbdG9waWNzXSA9IFtdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJlbFVybCA9IF8ubWFrZVJlbGF0aXZlVXJsKFwiXCIgKyBwcm9qZWN0VXJsLCBkZWZQcm9qZWN0KTtcclxuICAgICAgICAgICAgaWYgKGNoaWxkLnVybCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgb2JqLnVybCA9IFwiXCIgKyAoZW5jb2RlVVJJKHJlbFVybCkpICsgY2hpbGQudXJsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjaGlsZC51cmwgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgIG9ialt0aGlzLmtleXNdID0gW107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGlzdC5wdXNoKG9iaik7XHJcbiAgICAgICAgICAgIGV4aXN0aW5nID0gbGlzdFtsaXN0Lmxlbmd0aCAtIDFdO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdGhpcy5hZGRFbGVtZW50KGNoaWxkLCBleGlzdGluZ1t0aGlzLmtleXNdLCBwcm9qZWN0VXJsLCB0aGlzLmtleXMpO1xyXG4gICAgICAgICAgcmVzdWx0cy5wdXNoKHRoaXMuYWRkRWxlbWVudChjaGlsZCwgZXhpc3RpbmdbdG9waWNzXSwgcHJvamVjdFVybCwgdG9waWNzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHRzO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIEluZGV4Q29udHJvbGxlci5wcm90b3R5cGUuc2hvd0l0ZW0gPSBuYW1lID0+IHtcclxuICAgICAgdmFyIGZpbHRlcjtcclxuICAgICAgZmlsdGVyID0gbW9kZWwuZ2V0KGNvbnN0cygnS0VZX0lOREVYX0ZJTFRFUicpKTtcclxuICAgICAgcmV0dXJuICFmaWx0ZXIgfHwgbmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpLmluZGV4T2YoZmlsdGVyLnRvTG9jYWxlTG93ZXJDYXNlKCkpICE9PSAtMTtcclxuICAgIH07XHJcblxyXG4gICAgSW5kZXhDb250cm9sbGVyLnByb3RvdHlwZS5zaG93Q2F0ZWdvcnkgPSBmdW5jdGlvbihuYW1lLCBsZXZlbCkge1xyXG4gICAgICB2YXIgY2g7XHJcbiAgICAgIGlmIChsZXZlbCA+IDApIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgICAgY2ggPSB0aGlzLmFscGhhVGV4dChuYW1lKTtcclxuICAgICAgaWYgKHRoaXMuYWxocGFiZXQuaW5kZXhPZihjaCkgPiAtMSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmFsaHBhYmV0ICs9IGNoO1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH07XHJcblxyXG4gICAgSW5kZXhDb250cm9sbGVyLnByb3RvdHlwZS5zaG93TmV4dExldmVsID0gZnVuY3Rpb24obm9kZSkge1xyXG4gICAgICB2YXIgY2hpbGREYXRhLCBpZCwgb2JqMSwgb2xkO1xyXG4gICAgICBpZCA9IG5vZGUuZ2V0QXR0cmlidXRlKCdkYXRhLWluZGV4aWQnKTtcclxuICAgICAgb2xkID0gdGhpcy53aWRnZXQuZ2V0KCdzaG93LicgKyBpZCk7XHJcbiAgICAgIGNoaWxkRGF0YSA9IChcclxuICAgICAgICBvYmoxID0ge30sXHJcbiAgICAgICAgb2JqMVtcIlwiICsgaWRdID0gIW9sZCxcclxuICAgICAgICBvYmoxXHJcbiAgICAgICk7XHJcbiAgICAgIHdoaWxlIChpZCkge1xyXG4gICAgICAgIGlkID0gaWQuc3Vic3RyKDAsIGlkLmxhc3RJbmRleE9mKCdfJykpO1xyXG4gICAgICAgIGNoaWxkRGF0YVtpZF0gPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0aGlzLndpZGdldC5wdWJsaXNoKCdzaG93JywgY2hpbGREYXRhKTtcclxuICAgIH07XHJcblxyXG4gICAgSW5kZXhDb250cm9sbGVyLnByb3RvdHlwZS5hbHBoYVRleHQgPSBuYW1lID0+IG5hbWUudG9VcHBlckNhc2UoKS5jaGFyQXQoMCk7XHJcblxyXG4gICAgSW5kZXhDb250cm9sbGVyLnByb3RvdHlwZS5nZXRJbmRleERhdGEgPSAoKSA9PiBtb2RlbC5zdWJzY3JpYmVPbmNlKGNvbnN0cygnS0VZX1BVQkxJU0hfQkFTRV9VUkwnKSwgKCkgPT4ge1xyXG4gICAgICB2YXIgYmFzZUNvbnRleHQsIGJhc2VVcmwsIGVyciwgaGFzaFN0cmluZywgaG9zdCwgcGFyZW50UGF0aDtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBiYXNlVXJsID0gbW9kZWwuZ2V0KGNvbnN0cygnS0VZX1BVQkxJU0hfQkFTRV9VUkwnKSk7XHJcbiAgICAgICAgaG9zdCA9IGRvY3VtZW50LmxvY2F0aW9uLm9yaWdpbjtcclxuICAgICAgICBiYXNlQ29udGV4dCA9IGJhc2VVcmwuc3Vic3RyKGhvc3QubGVuZ3RoKTtcclxuICAgICAgICBwYXJlbnRQYXRoID0gXy5wYXJlbnRQYXRoKF8uZmlsZVBhdGgoXy5nZXRSb290VXJsKCkpKTtcclxuICAgICAgICBpZiAoYmFzZUNvbnRleHQgJiYgIV8uaXNFbXB0eVN0cmluZyhiYXNlQ29udGV4dCkpIHtcclxuICAgICAgICAgIGhhc2hTdHJpbmcgPSBfLm1hcFRvRW5jb2RlZFN0cmluZyhfLmV4dGVuZCh7XHJcbiAgICAgICAgICAgIGFyZWE6IHJocy5hcmVhKCksXHJcbiAgICAgICAgICAgIHByajogcmhzLnByb2plY3QoKSxcclxuICAgICAgICAgICAgdHlwZTogcmhzLnR5cGUoKSxcclxuICAgICAgICAgICAgYWd0OiAnbmR4JyxcclxuICAgICAgICAgICAgbWdyOiAnYWdtJ1xyXG4gICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgcmV0dXJuIGh0dHAuZ2V0KGJhc2VDb250ZXh0ICsgXCI/XCIgKyBoYXNoU3RyaW5nKS5zdWNjZXNzKChkYXRhLCBzdGF0dXMpID0+IHtcclxuICAgICAgICAgICAgdmFyIGxpc3Q7XHJcbiAgICAgICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKGRhdGEpO1xyXG4gICAgICAgICAgICBsaXN0ID0gW107XHJcbiAgICAgICAgICAgIF8uZWFjaChkYXRhLCBpdGVtID0+IHtcclxuICAgICAgICAgICAgICBkYXRhWzBdID0gXy5lbnN1cmVTbGFzaChkYXRhWzBdKTtcclxuICAgICAgICAgICAgICByZXR1cm4gbGlzdC5wdXNoKF8ubWFrZVJlbGF0aXZlVXJsKGl0ZW0sIGRhdGFbMF0pKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBtb2RlbC5wdWJsaXNoKGNvbnN0cygnS0VZX1BST0pFQ1RfTElTVCcpLCBsaXN0KTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCAoX2Vycm9yKSB7XHJcbiAgICAgICAgZXJyID0gX2Vycm9yO1xyXG4gICAgICAgIGlmIChyaC5fZGVidWcpIHtcclxuICAgICAgICAgIHJldHVybiByaC5fZCgnd2FybicsIGVyci5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBJbmRleENvbnRyb2xsZXI7XHJcblxyXG4gIH0pKShyaC5OYXZDb250cm9sbGVyKTtcclxuXHJcbiAgcmguY29udHJvbGxlcignSW5kZXhDb250cm9sbGVyJywgSW5kZXhDb250cm9sbGVyKTtcclxuXHJcbn0pLmNhbGwodGhpcyk7XHJcbiIsImxldCB7IHJoIH0gPSB3aW5kb3c7XHJcbmxldCB7IF8gfSA9IHJoO1xyXG5sZXQgeyAkIH0gPSByaDtcclxubGV0IHsgY29uc3RzIH0gPSByaDtcclxubGV0IHsgbW9kZWwgfSA9IHJoO1xyXG5cclxubW9kZWwucHVibGlzaChjb25zdHMoJ0tFWV9TSE9XX1RBR1MnKSwgcmguX3BhcmFtcy5zaG93dGFncyA9PT0gJ3RydWUnKTtcclxubW9kZWwucHVibGlzaChjb25zdHMoJ0tFWV9JRlJBTUVfRVZFTlRTJyksIHtjbGljazogdHJ1ZX0pO1xyXG5cclxubGV0IG9sZEhhc2hNYXAgPSB7fTtcclxubGV0IGhhc2hDaGFuZ2VkID0gZnVuY3Rpb24oKSB7XHJcbiAgbGV0IG5ld0hhc2hNYXAgPSBfLmhhc2hQYXJhbXMoKTtcclxuICBtb2RlbC5wdWJsaXNoKGNvbnN0cygnRVZUX0hBU0hfQ0hBTkdFJyksXHJcbiAgICB7b2xkTWFwOiBvbGRIYXNoTWFwLCBuZXdNYXA6IG5ld0hhc2hNYXB9LFxyXG4gICAge3N5bmM6IHRydWV9KTtcclxuICByZXR1cm4gb2xkSGFzaE1hcCA9IG5ld0hhc2hNYXA7XHJcbn07XHJcblxyXG5sZXQgcmVkaXJlY3RUb0RlZmF1bHRUb3BpYyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgbGV0IHBhcmFtc1N0ciA9IF8uZXh0cmFjdFBhcmFtU3RyaW5nKGRvY3VtZW50LmxvY2F0aW9uLmhyZWYpO1xyXG4gICAgbGV0IHBhcmFtc01hcCA9IF8udXJsUGFyYW1zKHBhcmFtc1N0cik7XHJcbiAgICBsZXQgaGFzaFN0ciA9IF8uZXh0cmFjdEhhc2hTdHJpbmcoZG9jdW1lbnQubG9jYXRpb24uaHJlZik7XHJcbiAgICBsZXQgaGFzaE1hcCA9IF8uaGFzaFBhcmFtcyhoYXNoU3RyKTtcclxuICAgIGxldCBtYXBub2F0dHIgPSBjb25zdHMoJ1JITUFQTk8nKTtcclxuICAgIGxldCB0b3BpY0tleSA9IGNvbnN0cygnSEFTSF9LRVlfVE9QSUMnKTtcclxuICAgIGlmICghKG1hcG5vYXR0ciBpbiBwYXJhbXNNYXApICYmICEodG9waWNLZXkgaW4gaGFzaE1hcCkpIHtcclxuICAgICAgcmV0dXJuIGRvY3VtZW50LmxvY2F0aW9uID0gY29uc3RzKCdERUZBVUxUX1RPUElDJyk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbl8uYWRkRXZlbnRMaXN0ZW5lcih3aW5kb3csICdoYXNoY2hhbmdlJywgaGFzaENoYW5nZWQpO1xyXG5cclxuXy5hZGRFdmVudExpc3RlbmVyKHdpbmRvdywgJ29yaWVudGF0aW9uY2hhbmdlJywgZnVuY3Rpb24oZSkge1xyXG4gIG1vZGVsLnB1Ymxpc2goY29uc3RzKCdFVlRfT1JJRU5UQVRJT05fQ0hBTkdFJyksIG51bGwpO1xyXG4gIGlmIChtb2RlbC5nZXQoY29uc3RzKCdLRVlfU0NSRUVOX0lQQUQnKSkpIHtcclxuICAgIGxldCB0b3BpY0ZyYW1lO1xyXG4gICAgaWYgKHRvcGljRnJhbWUgPSBfLmdldFRvcGljRnJhbWUoKSkge1xyXG4gICAgICBsZXQgeyBkaXNwbGF5IH0gPSB0b3BpY0ZyYW1lLnN0eWxlO1xyXG4gICAgICB0b3BpY0ZyYW1lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgIHRvcGljRnJhbWUub2Zmc2V0SGVpZ2h0O1xyXG4gICAgICByZXR1cm4gXy5kZWZlcihmdW5jdGlvbigpIHtcclxuICAgICAgICB0b3BpY0ZyYW1lLnN0eWxlLmRpc3BsYXkgPSBkaXNwbGF5O1xyXG4gICAgICAgIHJldHVybiBfLmRlbGF5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgdG9waWNGcmFtZS5vZmZzZXRIZWlnaHQ7XHJcbiAgICAgICAgICByZXR1cm4gXy5kZWxheSgoKSA9PiAvLyBMZXQgdHJ5IG9uY2UgbW9yZVxyXG4gICAgICAgICAgICB0b3BpY0ZyYW1lLm9mZnNldEhlaWdodFxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAsIDUwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICwgMjAwKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG59KTtcclxuICAgXHJcblxyXG4vLyBUT0RPXHJcbi8vbW9kZWwuc3Vic2NyaWJlIGNvbnN0cygnRVZUX09SSUVOVEFUSU9OX0NIQU5HRScpLCBfLmRlYm91bmNlIC0+XHJcbi8vICBtZXRhID0gJCgnbWV0YVtuYW1lPXZpZXdwb3J0XScsIDApXHJcbi8vICBtZXRhLmNvbnRlbnQgPSBcIndpZHRoPSN7d2luZG93LmlubmVyV2lkdGh9LCBpbml0aWFsLXNjYWxlPTEsXHJcbi8vICBtYXhpbXVtLXNjYWxlPTMsIHVzZXItc2NhbGFibGU9eWVzXCJcclxuLy8gIGlmIG1vZGVsLmdldCBjb25zdHMgJ0tFWV9TQ1JFRU5fSU9TJ1xyXG4vLyAgICBtb2RlbC5wdWJsaXNoIGNvbnN0cygnRVZUX1JFTE9BRF9UT1BJQycpLCBudWxsXHJcbi8vLCAyNTBcclxuXHJcbm1vZGVsLnN1YnNjcmliZShjb25zdHMoJ0VWVF9XSURHRVRfTE9BREVEJyksIGZ1bmN0aW9uKCkge1xyXG4gIC8vIENyZWF0ZSBFeHByZXNzaW9uQnVpbGRlciB3aWRnZXQgb24gZXZlcnkgcGFnZVxyXG4gIGxldCB0b3BpY0ZyYW1lO1xyXG4gIG1vZGVsLnN1YnNjcmliZShjb25zdHMoJ0tFWV9NRVJHRURfRklMVEVSX0tFWScpLCAoKSA9PiBuZXcgcmgud2lkZ2V0cy5FeHByZXNzaW9uQnVpbGRlcigpKTtcclxuXHJcbiAgLy8gQ3JlYXRlIEJyb3dzZVNlcXVlbmNlQnVpbGRlciB3aWRnZXQgb24gZXZlcnkgcGFnZVxyXG4gIG5ldyByaC53aWRnZXRzLkJyb3dzZVNlcXVlbmNlQnVpbGRlcigpO1xyXG5cclxuICBoYXNoQ2hhbmdlZCgpO1xyXG5cclxuICAvLyByZXBsYWNlIGRlZmF1bHQgcHJpbnQgbWV0aG9kIHRvIHN1cHBvcnQgaUZyYW1lXHJcbiAgcmgubGF5b3V0UHJpbnQgPSB3aW5kb3cucHJpbnQ7XHJcbiAgd2luZG93LnByaW50ID0gKCkgPT5cclxuICAgIC8vIHB1Ymxpc2ggaXQgd2l0aCBudWxsIHZhbHVlLCB0byBzdG9wIHRoZSBhdXRtYXRpYyBzdWJzY3JpYmUgY2FsbHNcclxuICAgIG1vZGVsLnB1Ymxpc2goY29uc3RzKCdFVlRfUFJJTlRfVE9QSUMnKSwgbnVsbClcclxuICA7XHJcblxyXG4gIGxldCB0b3BpY0ZpbGVOYW1lID0gXy5nZXRGaWxlTmFtZShkb2N1bWVudC5sb2NhdGlvbi5ocmVmKTtcclxuICBpZiAodG9waWNGaWxlTmFtZSA9PT0gY29uc3RzKCdUT1BJQ19GSUxFJykpIHtcclxuICAgIGxldCByZWRpcmVjdFVybCA9IHJlZGlyZWN0VG9EZWZhdWx0VG9waWMoKTtcclxuICAgIGlmIChyZWRpcmVjdFVybCkgeyByZXR1cm4gcmVkaXJlY3RVcmw7IH1cclxuICB9XHJcblxyXG4gIGlmICh0b3BpY0ZyYW1lID0gXy5nZXRUb3BpY0ZyYW1lKCkpIHtcclxuICAgIHJldHVybiB0b3BpY0ZyYW1lLm9ubG9hZCA9ICgpID0+IG1vZGVsLnB1Ymxpc2goY29uc3RzKCdFVlRfVE9QSUNfTE9BREVEJyksIG51bGwpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBsZXQgcGFyYW1zU3RyID0gXy5leHRyYWN0UGFyYW1TdHJpbmcoZG9jdW1lbnQubG9jYXRpb24uaHJlZik7XHJcbiAgICBsZXQgcGFyYW1zTWFwID0gXy51cmxQYXJhbXMocGFyYW1zU3RyKTtcclxuICAgIGxldCBtYXBub2F0dHIgPSBjb25zdHMoJ1JITUFQTk8nKTtcclxuICAgIGlmKCBtYXBub2F0dHIgaW4gcGFyYW1zTWFwICkge1xyXG4gICAgICByZXR1cm4gZG9jdW1lbnQubG9jYXRpb24gPSBjb25zdHMoJ1RPUElDX0ZJTEUnKSArIFwiP1wiICsgcGFyYW1zU3RyO1xyXG4gICAgfVxyXG4gIH1cclxufSk7XHJcbm1vZGVsLnN1YnNjcmliZShgJHtjb25zdHMoJ0VWVF9CT09LTUFSSycpfSNjb250ZW50X3RvcF9wbGFjZWhvbGRlcmAsICgpID0+XHJcbiAgLy8gSGFjayAjY29udGVudF90b3BfbGluayBjbGlja3MgYW5kIHNlbmQgdGhlbSB0byBjb250ZW50IGlmcmFtZVxyXG4gIG1vZGVsLnB1Ymxpc2goY29uc3RzKCdFVlRfU0NST0xMX1RPX1RPUCcpLCBudWxsKVxyXG4pO1xyXG5cclxubW9kZWwuc3Vic2NyaWJlKGNvbnN0cygnS0VZX1BST0pFQ1RfTElTVCcpLCAoKSA9PiByaC5maWx0ZXJPYmplY3QgPSBuZXcgcmguTWVyZ2VQcm9qKTtcclxuXHJcbm1vZGVsLnN1YnNjcmliZShjb25zdHMoJ0VWVF9QUk9KRUNUX0xPQURFRCcpLCBmdW5jdGlvbigpIHtcclxuICBsZXQgZGV2aWNlUmVhZHkgPSBcImRldmljZXJlYWR5XCI7XHJcbiAgcmV0dXJuIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoZGV2aWNlUmVhZHksIGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKHdpbmRvdy5jb3Jkb3ZhICE9IG51bGwpIHsgcmV0dXJuIG1vZGVsLnB1Ymxpc2goY29uc3RzKCdLRVlfTU9CSUxFX0FQUF9NT0RFJyksIHRydWUpOyB9XHJcbiAgfSk7XHJcbn0pO1xyXG4iLCJ2YXIgSnNMb2FkaW5nQ29udHJvbGxlciA9IChmdW5jdGlvbigpIHtcclxuICBsZXQgcmggPSB1bmRlZmluZWQ7XHJcbiAgbGV0ICQgPSB1bmRlZmluZWQ7XHJcbiAgbGV0IF8gPSB1bmRlZmluZWQ7XHJcbiAgSnNMb2FkaW5nQ29udHJvbGxlciA9IGNsYXNzIEpzTG9hZGluZ0NvbnRyb2xsZXIge1xyXG4gICAgc3RhdGljIGluaXRDbGFzcygpIHtcclxuICAgICAgKHsgcmggfSA9IHdpbmRvdyk7XHJcbiAgICAgICh7ICQgfSA9IHJoKTtcclxuICAgICAgKHsgXyB9ID0gcmgpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKHdpZGdldCwgb3B0cykge1xyXG4gICAgICBsZXQgcmVtb3ZlQ2xhc3NlcyA9IChvcHRzICE9IG51bGwgPyBvcHRzLnJlbW92ZUNsYXNzZXMgOiB1bmRlZmluZWQpIHx8IFsnaGlkZS1jaGlsZHJlbicsICdsb2FkaW5nJ107XHJcbiAgICAgIF8uZWFjaChyZW1vdmVDbGFzc2VzLCBjbGFzc05hbWUgPT4gJC5yZW1vdmVDbGFzcyh3aWRnZXQubm9kZSwgY2xhc3NOYW1lKSk7XHJcbiAgICAgIF8uZWFjaChvcHRzICE9IG51bGwgPyBvcHRzLmFkZENsYXNzZXMgOiB1bmRlZmluZWQsIGNsYXNzTmFtZSA9PiAkLmFkZENsYXNzKHdpZGdldC5ub2RlLCBjbGFzc05hbWUpKTtcclxuICAgIH1cclxuICB9O1xyXG4gIEpzTG9hZGluZ0NvbnRyb2xsZXIuaW5pdENsYXNzKCk7XHJcbiAgcmV0dXJuIEpzTG9hZGluZ0NvbnRyb2xsZXI7XHJcbn0pKCk7XHJcblxyXG53aW5kb3cucmguY29udHJvbGxlcignSnNMb2FkaW5nQ29udHJvbGxlcicsIEpzTG9hZGluZ0NvbnRyb2xsZXIpO1xyXG4iLCJsZXQgeyByaCB9ID0gd2luZG93O1xyXG5sZXQgeyBfIH0gPSByaDtcclxubGV0IHsgJCB9ID0gcmg7XHJcbmxldCB7IGNvbnN0cyB9ID0gcmg7XHJcblxyXG5yaC5tb2RlbC5zdWJzY3JpYmUoY29uc3RzKCdFVlRfV0lER0VUX0JFRk9SRUxPQUQnKSwgZnVuY3Rpb24oKSB7XHJcbiAgaWYgKCQoJ2Eud1Nob3cnLCAwKSAhPT0gbnVsbCkge1xyXG4gICAgbGV0IGNvbnRlbnREaXYgPSAkKCcuY29udGVudHRvcGljJywgMCk7XHJcbiAgICAkLnNldEF0dHJpYnV0ZShjb250ZW50RGl2LCAnZGF0YS1yaHdpZGdldCcsICdCYXNpYycpO1xyXG4gICAgcmV0dXJuICQuc2V0QXR0cmlidXRlKGNvbnRlbnREaXYsICdkYXRhLWNsYXNzJyxcclxuICAgICAgJ2dvdnRfY3NoOkAubC5jc2hfbW9kZTtnb3Z0X25vY3NoOiFALmwuY3NoX21vZGUnKTtcclxuICB9XHJcbn0pOyIsImxldCB7IHJoIH0gPSB3aW5kb3c7XHJcbmxldCB7IF8gfSA9IHJoO1xyXG5sZXQgeyBtb2RlbCB9ID0gcmg7XHJcbmxldCB7IGNvbnN0cyB9ID0gcmg7XHJcblxyXG52YXIgUHJvamVjdHMgPSAoZnVuY3Rpb24oKSB7XHJcbiAgbGV0IHByb2plY3RMaXN0ID0gdW5kZWZpbmVkO1xyXG4gIGxldCBwcm9qZWN0UXVldWUgPSB1bmRlZmluZWQ7XHJcbiAgbGV0IHByb2pEYXRhRmlsZSA9IHVuZGVmaW5lZDtcclxuICBsZXQgUkVNT1RFTk9ERSA9IHVuZGVmaW5lZDtcclxuICBsZXQgUFJPSk5PREUgPSB1bmRlZmluZWQ7XHJcbiAgbGV0IFVSTCA9IHVuZGVmaW5lZDtcclxuICBsZXQgbG9hZGVkID0gdW5kZWZpbmVkO1xyXG4gIGxldCBsb2FkUHJvamVjdEZpbGUgPSB1bmRlZmluZWQ7XHJcbiAgbGV0IGdldFByb2plY3RMaXN0ID0gdW5kZWZpbmVkO1xyXG4gIFByb2plY3RzID0gY2xhc3MgUHJvamVjdHMge1xyXG4gICAgc3RhdGljIGluaXRDbGFzcygpIHtcclxuICAgICAgcHJvamVjdExpc3QgPSBbXTtcclxuICAgICAgcHJvamVjdFF1ZXVlID0gW107XHJcbiAgICAgIHByb2pEYXRhRmlsZSA9ICdwcm9qZWN0ZGF0YS5qcyc7XHJcbiAgICAgIFJFTU9URU5PREUgPSAncmVtb3RlJztcclxuICAgICAgUFJPSk5PREUgPSAncHJvamVjdCc7XHJcbiAgICAgIFVSTCA9ICd1cmwnO1xyXG4gICAgICBsb2FkZWQgPSAwO1xyXG4gIFxyXG4gICAgICBsb2FkUHJvamVjdEZpbGUgPSBmdW5jdGlvbihjdXJQcm9qUGF0aCkgeyBcclxuICAgICAgICBsZXQgY3VyUHJvakRhdGFGaWxlID0gY3VyUHJvalBhdGggKyAnLycgKyBwcm9qRGF0YUZpbGU7XHJcbiAgICAgICAgcmV0dXJuIHdpbmRvdy54bWxKc1JlYWRlci5sb2FkRmlsZShjdXJQcm9qRGF0YUZpbGUsIGZ1bmN0aW9uKHhtbERvYywgY3VyUHJvalBhdGgpIHtcclxuICAgICAgICAgIGxldCByZW1vdGVOb2RlcztcclxuICAgICAgICAgIGxldCBsZW4gPSAwO1xyXG4gICAgICAgICAgbG9hZGVkKys7XHJcbiAgICAgICAgICBpZiAoeG1sRG9jICE9IG51bGwpIHtcclxuICAgICAgICAgICAgbGV0IHByb2pYbWxOb2RlID0geG1sRG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKFBST0pOT0RFKVswXTtcclxuICAgICAgICAgICAgcmVtb3RlTm9kZXMgPSBwcm9qWG1sTm9kZS5nZXRFbGVtZW50c0J5VGFnTmFtZShSRU1PVEVOT0RFKTtcclxuICAgICAgICAgICAgbGVuID0gcmVtb3RlTm9kZXMubGVuZ3RoO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgXy5lYWNoKHJlbW90ZU5vZGVzLCBmdW5jdGlvbihyZW1vdGVOb2RlKSB7XHJcbiAgICAgICAgICAgIGxldCBwYXRoID0gY3VyUHJvalBhdGggKyAnLycgKyByZW1vdGVOb2RlLmdldEF0dHJpYnV0ZShVUkwpO1xyXG4gICAgICAgICAgICBwcm9qZWN0TGlzdC5wdXNoKHBhdGgpO1xyXG4gICAgICAgICAgICByZXR1cm4gcHJvamVjdFF1ZXVlLnB1c2gocGF0aCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIGdldFByb2plY3RMaXN0KCk7XHJcbiAgICAgICAgICBpZiAoKHByb2plY3RRdWV1ZS5sZW5ndGggPT09IDApICYmIChsb2FkZWQgPT09IHByb2plY3RMaXN0Lmxlbmd0aCkpIHtcclxuICAgICAgICAgICAgbW9kZWwucHVibGlzaChjb25zdHMoJ0tFWV9QUk9KRUNUX0xJU1QnKSwgcHJvamVjdExpc3QpO1xyXG4gICAgICAgICAgICByZXR1cm4gbW9kZWwucHVibGlzaChjb25zdHMoJ0tFWV9NQVNURVJfUFJPSkVDVF9MSVNUJyksIFtcIi5cIl0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAsIGN1clByb2pQYXRoKTtcclxuICAgICAgfTtcclxuICBcclxuICAgICAgZ2V0UHJvamVjdExpc3QgPSAoKSA9PlxyXG4gICAgICAgICgoKSA9PiB7XHJcbiAgICAgICAgICBsZXQgcmVzdWx0ID0gW107XHJcbiAgICAgICAgICB3aGlsZSAocHJvamVjdFF1ZXVlLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgbGV0IHByb2plY3QgPSBwcm9qZWN0UXVldWUuc3BsaWNlKDAsIDEpO1xyXG4gICAgICAgICAgICByZXN1bHQucHVzaChsb2FkUHJvamVjdEZpbGUocHJvamVjdCkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9KSgpXHJcbiAgICAgIDtcclxuICAgIH1cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICBwcm9qZWN0TGlzdC5wdXNoKCcuJyk7XHJcbiAgICAgIHByb2plY3RRdWV1ZS5wdXNoKCcuJyk7XHJcbiAgICAgIGdldFByb2plY3RMaXN0KCk7XHJcbiAgICB9XHJcbiAgfTtcclxuICBQcm9qZWN0cy5pbml0Q2xhc3MoKTtcclxuICByZXR1cm4gUHJvamVjdHM7XHJcbn0pKCk7XHJcblxyXG5tb2RlbC5zdWJzY3JpYmUoY29uc3RzKCdFVlRfUFJPSkVDVF9MT0FERUQnKSwgKCkgPT5cclxuICBfLmRlZmVyKGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKCFtb2RlbC5nZXQoY29uc3RzKCdLRVlfUFVCTElTSF9NT0RFJykpICYmICF3aW5kb3cuZ2JQcmV2aWV3TW9kZSkge1xyXG4gICAgICByZXR1cm4gbmV3IFByb2plY3RzO1xyXG4gICAgfVxyXG4gIH0pXHJcbik7XHJcbiIsInZhciBNb2Rlcm5MYXlvdXRDb250cm9sbGVyID0gKGZ1bmN0aW9uKCkge1xyXG4gIGxldCByaCA9IHVuZGVmaW5lZDtcclxuICBsZXQgXyA9IHVuZGVmaW5lZDtcclxuICBsZXQgJCA9IHVuZGVmaW5lZDtcclxuICBsZXQgY29uc3RzID0gdW5kZWZpbmVkO1xyXG4gIGxldCBLRVlfRkVBVFVSRSA9IHVuZGVmaW5lZDtcclxuICBsZXQgS0VZX0ZJTFRFUl9MT0NBVElPTiA9IHVuZGVmaW5lZDtcclxuICBsZXQgS0VZX1NFQVJDSF9MT0NBVElPTiA9IHVuZGVmaW5lZDtcclxuICBsZXQgS0VZX0FDVElWRV9UQUIgPSB1bmRlZmluZWQ7XHJcbiAgbGV0IEtFWV9VSV9NT0RFID0gdW5kZWZpbmVkO1xyXG4gIGxldCBLRVlfTU9CSUxFX1RPQ19EUklMTF9ET1dOID0gdW5kZWZpbmVkO1xyXG4gIGxldCBLRVlfVE9DX0RSSUxMX0RPV04gPSB1bmRlZmluZWQ7XHJcbiAgbGV0IERFU0tUT1AgPSB1bmRlZmluZWQ7XHJcbiAgbGV0IFRBQkxFVCA9IHVuZGVmaW5lZDtcclxuICBsZXQgUEhPTkUgPSB1bmRlZmluZWQ7XHJcbiAgbGV0IFNIT1dfRklMVEVSX1VJID0gdW5kZWZpbmVkO1xyXG4gIGxldCB0YWJzID0gdW5kZWZpbmVkO1xyXG4gIGxldCBzaWRlQmFyVGFicyA9IHVuZGVmaW5lZDtcclxuICBsZXQgZGVsYXlMb2FkVGFicyA9IHVuZGVmaW5lZDtcclxuICBNb2Rlcm5MYXlvdXRDb250cm9sbGVyID0gY2xhc3MgTW9kZXJuTGF5b3V0Q29udHJvbGxlciB7XHJcbiAgICBzdGF0aWMgaW5pdENsYXNzKCkge1xyXG4gIFxyXG4gICAgICAoeyByaCB9ID0gd2luZG93KTtcclxuICAgICAgKHsgXyB9ID0gcmgpO1xyXG4gICAgICAoeyAkIH0gPSByaCk7XHJcbiAgICAgICh7IGNvbnN0cyB9ID0gcmgpO1xyXG4gICAgICBLRVlfRkVBVFVSRSA9IGNvbnN0cygnS0VZX0ZFQVRVUkUnKTtcclxuICAgICAgS0VZX0ZJTFRFUl9MT0NBVElPTiA9IGNvbnN0cygnS0VZX0ZJTFRFUl9MT0NBVElPTicpO1xyXG4gICAgICBLRVlfU0VBUkNIX0xPQ0FUSU9OID0gY29uc3RzKCdLRVlfU0VBUkNIX0xPQ0FUSU9OJyk7XHJcbiAgICAgIEtFWV9BQ1RJVkVfVEFCID0gY29uc3RzKCdLRVlfQUNUSVZFX1RBQicpO1xyXG4gICAgICBLRVlfVUlfTU9ERSA9IGNvbnN0cygnS0VZX1VJX01PREUnKTtcclxuICAgICAgS0VZX01PQklMRV9UT0NfRFJJTExfRE9XTiA9IGNvbnN0cygnS0VZX01PQklMRV9UT0NfRFJJTExfRE9XTicpO1xyXG4gICAgICBLRVlfVE9DX0RSSUxMX0RPV04gPSBjb25zdHMoJ0tFWV9UT0NfRFJJTExfRE9XTicpO1xyXG4gICAgICBERVNLVE9QID0gJ2Rlc2t0b3AnO1xyXG4gICAgICBUQUJMRVQgPSAndGFibGV0JztcclxuICAgICAgUEhPTkUgPSAncGhvbmUnO1xyXG4gICAgICBTSE9XX0ZJTFRFUl9VSSA9IHJoLl9wYXJhbXMuaGlkZVVJICE9PSAnZmlsdGVyJztcclxuICAgICAgdGFicyA9IHtcclxuICAgICAgICBkZXNrdG9wOiBbJ3RvYycsICdpZHgnLCAnZ2xvJywgJ2ZpbHRlcicsICdmdHMnXSxcclxuICAgICAgICB0YWJsZXQ6IFsndG9jJywgJ2lkeCcsICdnbG8nLCAnZmlsdGVyJywgJ2Z0cyddLFxyXG4gICAgICAgIHBob25lOiBbJ3RvYycsICdpZHgnLCAnZ2xvJywgJ2ZpbHRlcicsICdmdHMnXVxyXG4gICAgICB9O1xyXG4gIFxyXG4gICAgICBzaWRlQmFyVGFicyA9IHtcclxuICAgICAgICBkZXNrdG9wOiBbJ3RvYycsICdpZHgnLCAnZ2xvJywgJ2ZpbHRlcicsICdmdHMnXSxcclxuICAgICAgICB0YWJsZXQ6IFsndG9jJywgJ2lkeCcsICdnbG8nLCAnZmlsdGVyJywgJ2Z0cyddLFxyXG4gICAgICAgIHBob25lOiBbJ3RvYycsICdpZHgnLCAnZ2xvJ11cclxuICAgICAgfTtcclxuICAgICAgZGVsYXlMb2FkVGFicyA9IHtcclxuICAgICAgICAnaWR4Jzoge2V2dDogJ0VWVF9MT0FEX0lEWCcsIGZfa2V5OiAnZGVsYXlfbG9hZF9pZHgnfSxcclxuICAgICAgICAnZ2xvJzoge2V2dDogJ0VWVF9MT0FEX0dMTycsIGZfa2V5OiAnZGVsYXlfbG9hZF9nbG8nfVxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKHdpZGdldCkge1xyXG4gICAgICB0aGlzLnRyaWdnZXJEZWxheUxvYWRXaWRnZXRzID0gdGhpcy50cmlnZ2VyRGVsYXlMb2FkV2lkZ2V0cy5iaW5kKHRoaXMpO1xyXG4gICAgICB0aGlzLndpZGdldCA9IHdpZGdldDtcclxuICAgICAgKHRoaXMuaW5pdCkoKTtcclxuICAgICAgKHRoaXMuc3Vic2NyaWJlQWN0aXZlVGFiKSgpO1xyXG4gICAgICAodGhpcy5zdWJzY3JpYmVUb0xvY2F0aW9ucykoKTtcclxuICAgICAgKHRoaXMuc3Vic2NyaWJlU2NyZWVucykoKTtcclxuICAgICAgXHJcbiAgICAgIHRoaXMud2lkZ2V0LnN1YnNjcmliZShjb25zdHMoJ0VWVF9QUk9KRUNUX0xPQURFRCcpLCAoKSA9PiB7XHJcbiAgICAgICAgKHRoaXMuc3Vic2NyaWJlVUlNb2RlKSgpO1xyXG4gICAgICAgICh0aGlzLnN1YnNjcmliZU1lcmdlZEZpbHRlcikoKTtcclxuICAgICAgICAodGhpcy5zdWJzY3JpYmVUb3BpY0NsaWNrKSgpO1xyXG4gICAgICAgICh0aGlzLnN1YnNjcmliZVRvcGljU2Nyb2xsKSgpO1xyXG4gICAgICAgICh0aGlzLnN1YnNjcmliRm9yU2VhcmNoUmVzdWx0KSgpO1xyXG4gICAgICAgICh0aGlzLnN1YnNjcmliZVRvcGljTmF2aWdhdGUpKCk7XHJcbiAgICAgICAgKHRoaXMuc3Vic2NyaWJlVG9EZWxheUxvYWRFdmVudHMpKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud2lkZ2V0LnB1Ymxpc2goY29uc3RzKCdLRVlfSUZSQU1FX0VWRU5UUycpLCB7Y2xpY2s6IHRydWUsIHNjcm9sbDogZmFsc2V9KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdCgpIHtcclxuICAgICAgdGhpcy5zY3JlZW5zID0gdGhpcy53aWRnZXQuZ2V0KGNvbnN0cygnS0VZX1NDUkVFTl9OQU1FUycpKTtcclxuICAgICAgcmguc3RvcmFnZS5pbml0KGNvbnN0cygnSEVMUF9JRCcpKTtcclxuICAgICAgdGhpcy5hY3RpdmVTY3JlZW4gPSBfLmZpbmQodGhpcy5zY3JlZW5zLCBmdW5jdGlvbihzY3JlZW4pIHtcclxuICAgICAgICByZXR1cm4gdGhpcy53aWRnZXQuZ2V0KGAke2NvbnN0cygnS0VZX1NDUkVFTicpfS4ke3NjcmVlbn0uYXR0YWNoZWRgKTtcclxuICAgICAgfVxyXG4gICAgICAsIHRoaXMpO1xyXG4gICAgICBpZiAodGhpcy5hY3RpdmVTY3JlZW4gPT0gbnVsbCkgeyB0aGlzLmFjdGl2ZVNjcmVlbiA9IHRoaXMud2lkZ2V0LmdldChjb25zdHMoJ0tFWV9ERUZBVUxUX1NDUkVFTicpKTsgfVxyXG5cclxuICAgICAgdGhpcy5hc3N1cmVMb2NhdGlvbnModGhpcy5hY3RpdmVTY3JlZW4pO1xyXG5cclxuICAgICAgKHRoaXMuaW5pdERlZmF1bHMpKCk7XHJcblxyXG4gICAgICByZXR1cm4gKHRoaXMuaW5pdEFjdGl2ZVRhYikoKTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0RGVmYXVscygpIHtcclxuICAgICAgbGV0IGRlZmF1bHRUYWIgPSB0aGlzLndpZGdldC5nZXQoY29uc3RzKCdLRVlfREVGQVVMVF9UQUInKSk7XHJcbiAgICAgIGlmICghdGhpcy5oYXNGZWF0dXJlKGRlZmF1bHRUYWIpKSB7IGRlZmF1bHRUYWIgPSBudWxsOyB9XHJcbiAgICBcclxuICAgICAgdGhpcy5kZWZhdWx0VGFicyA9IHt9O1xyXG5cclxuICAgICAgcmV0dXJuIF8uZWFjaCh0aGlzLnNjcmVlbnMsIGZ1bmN0aW9uKHNjcmVlbikge1xyXG4gICAgICAgIHRhYnNbc2NyZWVuXSA9IF8uZmlsdGVyKHRhYnNbc2NyZWVuXSwgKGZ1bmN0aW9uKHRhYikgeyByZXR1cm4gdGhpcy5oYXNGZWF0dXJlKHRhYik7IH0pLCB0aGlzKTtcclxuICAgICAgXHJcbiAgICAgICAgc2lkZUJhclRhYnNbc2NyZWVuXSA9IF8uZmlsdGVyKHNpZGVCYXJUYWJzW3NjcmVlbl0sIGZ1bmN0aW9uKHRhYikge1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuaGFzRmVhdHVyZSh0YWIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAsIHRoaXMpO1xyXG4gICAgICBcclxuICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0VGFic1tzY3JlZW5dID1cclxuICAgICAgICAgIGRlZmF1bHRUYWIgJiYgKC0xICE9PSB0YWJzW3NjcmVlbl0uaW5kZXhPZihkZWZhdWx0VGFiKSkgP1xyXG4gICAgICAgICAgICBkZWZhdWx0VGFiXHJcbiAgICAgICAgICA6XHJcbiAgICAgICAgICAgIHRhYnNbc2NyZWVuXVswXTtcclxuICAgICAgfVxyXG4gICAgICAsIHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXRBY3RpdmVUYWIoKSB7XHJcbiAgICAgIGxldCBhY3RpdmVUYWIgPSByaC5zdG9yYWdlLmZldGNoKCdhY3RpdmV0YWInKTtcclxuICAgICAgaWYgKChhY3RpdmVUYWIgIT09IHVuZGVmaW5lZCkgJiYgYWN0aXZlVGFiICYmIHRoaXMuaGFzRmVhdHVyZShhY3RpdmVUYWIpKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud2lkZ2V0LnB1Ymxpc2goS0VZX0FDVElWRV9UQUIsIGFjdGl2ZVRhYik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpc1ZhbGlkVGFiKHRhYiwgc2NyZWVuKSB7XHJcbiAgICAgIGlmIChzY3JlZW4gPT0gbnVsbCkgeyBzY3JlZW4gPSB0aGlzLmFjdGl2ZVNjcmVlbjsgfVxyXG4gICAgICBpZiAoIXRhYiB8fCAhdGhpcy5oYXNGZWF0dXJlKHRhYikpIHsgcmV0dXJuIGZhbHNlOyB9XHJcblxyXG4gICAgICBpZiAoc2NyZWVuID09PSBERVNLVE9QKSB7XHJcbiAgICAgICAgaWYgKCgodGFiID09PSAnZmlsdGVyJykgJiYgKCdjb250ZW50JyA9PT0gdGhpcy53aWRnZXQuZ2V0KEtFWV9GSUxURVJfTE9DQVRJT04pKSkgfHxcclxuICAgICAgICAoKHRhYiA9PT0gJ2Z0cycpICYmICgnY29udGVudCcgPT09IHRoaXMud2lkZ2V0LmdldChLRVlfU0VBUkNIX0xPQ0FUSU9OKSkpKSB7XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICBcclxuICAgICAgcmV0dXJuIC0xICE9PSB0YWJzW3NjcmVlbl0uaW5kZXhPZih0YWIpO1xyXG4gICAgfVxyXG5cclxuICAgIGRlZmF1bHRUYWIoc2NyZWVuKSB7XHJcbiAgICAgIGlmIChzY3JlZW4gPT0gbnVsbCkgeyBzY3JlZW4gPSB0aGlzLmFjdGl2ZVNjcmVlbjsgfVxyXG4gICAgICBsZXQgZGVmYXVsdFRhYiA9IHRoaXMuZGVmYXVsdFRhYnNbc2NyZWVuXTtcclxuICAgICAgaWYgKCF0aGlzLmlzVmFsaWRUYWIoZGVmYXVsdFRhYikpIHtcclxuICAgICAgICBkZWZhdWx0VGFiID0gXy5maW5kKHRhYnNbc2NyZWVuXSwgKGZ1bmN0aW9uKHRhYikgeyByZXR1cm4gdGhpcy5pc1ZhbGlkVGFiKHRhYik7IH0pLCB0aGlzKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZGVmYXVsdFRhYjtcclxuICAgIH1cclxuXHJcbiAgICBhc3N1cmVWYWxpZEFjdGl2ZVRhYihzY3JlZW4pIHtcclxuICAgICAgaWYgKHNjcmVlbiA9PSBudWxsKSB7IHNjcmVlbiA9IHRoaXMuYWN0aXZlU2NyZWVuOyB9XHJcbiAgICAgIGxldCBhY3RpdmV0YWIgPSB0aGlzLndpZGdldC5nZXQoS0VZX0FDVElWRV9UQUIpO1xyXG4gICAgICBpZiAoKHNjcmVlbiA9PT0gREVTS1RPUCkgfHwgYWN0aXZldGFiKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzVmFsaWRUYWIoYWN0aXZldGFiKSkgeyBhY3RpdmV0YWIgPSB0aGlzLmRlZmF1bHRUYWIoKTsgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLndpZGdldC5wdWJsaXNoKEtFWV9BQ1RJVkVfVEFCLCBhY3RpdmV0YWIpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdG9nZ2xlU2lkZUJhcigpIHtcclxuICAgICAgaWYgKHRoaXMud2lkZ2V0LmdldChLRVlfQUNUSVZFX1RBQikpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy53aWRnZXQucHVibGlzaChLRVlfQUNUSVZFX1RBQiwgbnVsbCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud2lkZ2V0LnB1Ymxpc2goS0VZX0FDVElWRV9UQUIsIHRoaXMubGFzdE1vYmlsZVRhYiB8fCB0aGlzLmRlZmF1bHRUYWIoKSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0b2dnbGVBY3RpdmVUYWIodGFiKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLndpZGdldC5wdWJsaXNoKEtFWV9BQ1RJVkVfVEFCLFxyXG4gICAgICAgICF0aGlzLmlzRGVza3RvcFNjcmVlbigpICYmICh0YWIgPT09IHRoaXMud2lkZ2V0LmdldChLRVlfQUNUSVZFX1RBQikpID8gbnVsbFxyXG4gICAgICAgIDogdGFiXHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgdHJpZ2dlckRlbGF5TG9hZFdpZGdldHModGFiKSB7XHJcbiAgICAgIGxldCB0YWJPYmogPSBkZWxheUxvYWRUYWJzW3RhYl07XHJcbiAgICAgIGlmICh0YWJPYmogJiYgdGhpcy5oYXNGZWF0dXJlKHRhYk9iai5mX2tleSkpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy53aWRnZXQucHVibGlzaChjb25zdHModGFiT2JqLmV2dCksIHRydWUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3Vic2NyaWJlVG9EZWxheUxvYWRFdmVudHMoKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLndpZGdldC5zdWJzY3JpYmUoS0VZX0FDVElWRV9UQUIsIHRoaXMudHJpZ2dlckRlbGF5TG9hZFdpZGdldHMpO1xyXG4gICAgfVxyXG5cclxuICAgIGZpbHRlckRvbmUoKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLndpZGdldC5wdWJsaXNoKEtFWV9BQ1RJVkVfVEFCLCB0aGlzLnNlYXJjaE1vZGUgPyAnZnRzJyA6IG51bGwpO1xyXG4gICAgfVxyXG5cclxuICAgIGhhc0ZlYXR1cmUoZmVhdHVyZSkge1xyXG4gICAgICByZXR1cm4gKGZlYXR1cmUgPT09IHVuZGVmaW5lZCkgfHwgKGZhbHNlICE9PSB0aGlzLndpZGdldC5nZXQoYCR7S0VZX0ZFQVRVUkV9LiR7ZmVhdHVyZX1gKSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3Vic2NyaWJlVUlNb2RlKCkge1xyXG4gICAgICBsZXQgc2V0U2VhcmNoVGFiID0gKCkgPT4ge1xyXG4gICAgICAgIGlmICghdGhpcy5pc1ZhbGlkVGFiKCdmdHMnKSkgeyByZXR1cm47IH1cclxuICAgICAgICBpZiAoIXRoaXMuaXNEZXNrdG9wU2NyZWVuKCkgfHwgKCd0YWJiYXInID09PSB0aGlzLndpZGdldC5nZXQoS0VZX1NFQVJDSF9MT0NBVElPTikpKSB7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy53aWRnZXQucHVibGlzaChLRVlfQUNUSVZFX1RBQiwgJ2Z0cycpO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuXHJcbiAgICAgIHRoaXMud2lkZ2V0LnN1YnNjcmliZShLRVlfVUlfTU9ERSwgbW9kZSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud2lkZ2V0LnB1Ymxpc2goJ2FjdGl2ZV9jb250ZW50JywgbW9kZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgIHRoaXMud2lkZ2V0LnN1YnNjcmliZSgnYWN0aXZlX2NvbnRlbnQnLCBtb2RlID0+IHtcclxuICAgICAgICBpZiAodGhpcy5pc01vYmlsZVNjcmVlbigpICYmICFtb2RlKSB7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy53aWRnZXQucHVibGlzaChLRVlfQUNUSVZFX1RBQiwgbnVsbCk7XHJcbiAgICAgICAgfSBlbHNlIGlmICgnc2VhcmNoJyA9PT0gbW9kZSkge1xyXG4gICAgICAgICAgcmV0dXJuIHNldFNlYXJjaFRhYigpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICAsIHtpbml0RG9uZTogdHJ1ZX0pO1xyXG4gICAgICBpZiAoJ3NlYXJjaCcgPT09IHRoaXMud2lkZ2V0LmdldCgnYWN0aXZlX2NvbnRlbnQnKSkgeyByZXR1cm4gc2V0U2VhcmNoVGFiKCk7IH1cclxuICAgIH1cclxuXHJcbiAgICBzdWJzY3JpYmVNZXJnZWRGaWx0ZXIoKSB7XHJcbiAgICAgIGxldCBmZWF0dXJlRmlsdGVyS2V5O1xyXG4gICAgICBpZiAodGhpcy53aWRnZXQuZ2V0KGZlYXR1cmVGaWx0ZXJLZXkgPSBgJHtLRVlfRkVBVFVSRX0uZmlsdGVyYCkpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy53aWRnZXQuc3Vic2NyaWJlKGNvbnN0cygnS0VZX01FUkdFRF9GSUxURVJfS0VZJyksIHRhZ3MgPT4ge1xyXG4gICAgICAgICAgdGhpcy53aWRnZXQucHVibGlzaChmZWF0dXJlRmlsdGVyS2V5LFxyXG4gICAgICAgICAgICB0YWdzICYmIHRhZ3MubGVuZ3RoICYmIFNIT1dfRklMVEVSX1VJID8gdHJ1ZSA6IGZhbHNlKTtcclxuICAgICAgICAgIHJldHVybiAodGhpcy5hc3N1cmVWYWxpZEFjdGl2ZVRhYikoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBzdWJzY3JpYmVUb3BpY0NsaWNrKCkge1xyXG4gICAgICByZXR1cm4gdGhpcy53aWRnZXQuc3Vic2NyaWJlKGNvbnN0cygnRVZUX0NMSUNLX0lOU0lERV9JRlJBTUUnKSwgKCkgPT4ge1xyXG4gICAgICAgIGlmICgodGhpcy5hY3RpdmVTY3JlZW4gPT09IFBIT05FKSAmJiB0aGlzLndpZGdldC5nZXQoS0VZX0FDVElWRV9UQUIpKSB7XHJcbiAgICAgICAgICByZXR1cm4gKHRoaXMudG9nZ2xlU2lkZUJhcikoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHN1YnNjcmliZVRvcGljTmF2aWdhdGUoKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLndpZGdldC5zdWJzY3JpYmUoY29uc3RzKCdFVlRfTkFWSUdBVEVfVE9fVVJMJyksIG9iaiA9PiB7XHJcbiAgICAgICAgaWYgKG9iai5hYnNVcmwgJiYgXy5pc1VybEFsbG93ZEluSWZyYW1lKG9iai5hYnNVcmwpKSB7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy53aWRnZXQucHVibGlzaCgnYWN0aXZlX2NvbnRlbnQnLCBudWxsKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgc3Vic2NyaWJlVG9waWNTY3JvbGwoKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLndpZGdldC5zdWJzY3JpYmUoY29uc3RzKCdFVlRfU0NST0xMX0lOU0lERV9JRlJBTUUnKSwgaW5mbyA9PiB7XHJcbiAgICAgICAgbGV0IGhpZGVfaGVhZGVyID0gKGluZm8uZGlyID09PSAnZG93bicpIHx8IChpbmZvLnNjcm9sbFRvcCA+IDEwKTtcclxuICAgICAgICB0aGlzLndpZGdldC5wdWJsaXNoKCdoaWRlX2hlYWRlcicsIGhpZGVfaGVhZGVyKTtcclxuXHJcbiAgICAgICAgbGV0IGhpZGVfbW9iaWxlX2Z1bmN0aW9ucyA9IChpbmZvLmRpciA9PT0gJ2Rvd24nKSAmJiAoaW5mby5zY3JvbGxUb3AgPiAxMCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud2lkZ2V0LnB1Ymxpc2goJ2hpZGVfbW9iaWxlX2Z1bmN0aW9ucycsIGhpZGVfbW9iaWxlX2Z1bmN0aW9ucyk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHN1YnNjcmliZUFjdGl2ZVRhYigpIHtcclxuICAgICAgcmV0dXJuIHRoaXMud2lkZ2V0LnN1YnNjcmliZShLRVlfQUNUSVZFX1RBQiwgYWN0aXZlVGFiID0+IHtcclxuICAgICAgICByaC5zdG9yYWdlLnBlcnNpc3QoJ2FjdGl2ZXRhYicsIGFjdGl2ZVRhYik7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNNb2JpbGVTY3JlZW4oKSkge1xyXG4gICAgICAgICAgaWYgKHRoaXMuaXNTaWRlYmFyVGFiKGFjdGl2ZVRhYikpIHsgdGhpcy5sYXN0TW9iaWxlVGFiID0gYWN0aXZlVGFiOyB9XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5zZWFyY2hNb2RlID1cclxuICAgICAgICAgICAgKGFjdGl2ZVRhYiA9PT0gJ2Z0cycpIHx8ICh0aGlzLnNlYXJjaE1vZGUgJiYgKGFjdGl2ZVRhYiA9PT0gJ2ZpbHRlcicpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuc2VhcmNoTW9kZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3Vic2NyaWJlU2NyZWVucygpIHtcclxuICAgICAgcmV0dXJuIF8uZWFjaCh0aGlzLnNjcmVlbnMsIGZ1bmN0aW9uKHNjcmVlbikge1xyXG4gICAgICAgIGxldCBrZXkgPSBgJHtjb25zdHMoJ0tFWV9TQ1JFRU4nKX0uJHtzY3JlZW59LmF0dGFjaGVkYDtcclxuICAgICAgICBpZiAodGhpcy53aWRnZXQuZ2V0KGtleSkpIHsgdGhpcy5oYW5kbGVTY3JlZW4odHJ1ZSwgc2NyZWVuKTsgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLndpZGdldC5zdWJzY3JpYmUoa2V5LCBhdHRhY2hlZCA9PiB7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVTY3JlZW4oYXR0YWNoZWQsIHNjcmVlbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICwge2luaXREb25lOiB0cnVlfSk7XHJcbiAgICAgIH1cclxuICAgICAgLCB0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBzdWJzY3JpYmVUb0xvY2F0aW9ucygpIHtcclxuICAgICAgdGhpcy53aWRnZXQuc3Vic2NyaWJlKEtFWV9TRUFSQ0hfTE9DQVRJT04sICgpID0+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hc3N1cmVWYWxpZEFjdGl2ZVRhYih0aGlzLmFjdGl2ZVNjcmVlbik7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIHRoaXMud2lkZ2V0LnN1YnNjcmliZShLRVlfRklMVEVSX0xPQ0FUSU9OLCAoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXNzdXJlVmFsaWRBY3RpdmVUYWIodGhpcy5hY3RpdmVTY3JlZW4pO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBzdWJzY3JpYkZvclNlYXJjaFJlc3VsdCgpIHtcclxuICAgICAgbGV0IHVwZGF0ZVNlYXJjaFJlc3VsdHMgPSAoKSA9PiB7XHJcbiAgICAgICAgbGV0IHRhZ0V4cHIgPSB0aGlzLndpZGdldC5nZXQoY29uc3RzKCdLRVlfVEFHX0VYUFJFU1NJT04nKSk7XHJcbiAgICAgICAgbGV0IHNlYXJjaFRhZ0V4cHIgPSB0aGlzLndpZGdldC5nZXQoY29uc3RzKCdLRVlfT05TRUFSQ0hfVEFHX0VYUFInKSk7XHJcbiAgICAgICAgaWYgKHNlYXJjaFRhZ0V4cHIgJiYgKHNlYXJjaFRhZ0V4cHIgIT09IEpTT04uc3RyaW5naWZ5KHRhZ0V4cHIpKSkge1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMud2lkZ2V0LnB1Ymxpc2goY29uc3RzKCdFVlRfU0VBUkNIX1RFUk0nKSwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgXHJcbiAgICAgIHRoaXMud2lkZ2V0LnN1YnNjcmliZShjb25zdHMoJ0tFWV9UQUdfRVhQUkVTU0lPTicpLCBfLmRlYm91bmNlKCgpID0+IHtcclxuICAgICAgICBpZiAodGhpcy5pc1ZhbGlkVGFiKCdmdHMnKSAmJiAoJ2Z0cycgIT09IHRoaXMud2lkZ2V0LmdldChLRVlfQUNUSVZFX1RBQikpKSB7IHJldHVybjsgfVxyXG4gICAgICAgIGlmICghdGhpcy5pc1NlYXJjaE1vZGUodGhpcy53aWRnZXQuZ2V0KEtFWV9BQ1RJVkVfVEFCKSkpIHsgcmV0dXJuOyB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIHJldHVybiB1cGRhdGVTZWFyY2hSZXN1bHRzKCk7XHJcbiAgICAgIH1cclxuICAgICAgLCAzMDApXHJcbiAgICAgICk7XHJcblxyXG4gICAgICByZXR1cm4gdGhpcy53aWRnZXQuc3Vic2NyaWJlKEtFWV9BQ1RJVkVfVEFCLCBmdW5jdGlvbih0YWIpIHtcclxuICAgICAgICBpZiAodGFiID09PSAnZnRzJykgeyByZXR1cm4gdXBkYXRlU2VhcmNoUmVzdWx0cygpOyB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlzTW9iaWxlU2NyZWVuKCkgeyByZXR1cm4gdGhpcy5hY3RpdmVTY3JlZW4gPT09IFBIT05FOyB9XHJcblxyXG4gICAgaXNEZXNrdG9wU2NyZWVuKCkgeyByZXR1cm4gdGhpcy5hY3RpdmVTY3JlZW4gPT09IERFU0tUT1A7IH1cclxuICBcclxuICAgIGlzVGFibGV0U2NyZWVuKCkgeyByZXR1cm4gdGhpcy5hY3RpdmVTY3JlZW4gPT09IFRBQkxFVDsgfVxyXG5cclxuICAgIGlzU2lkZWJhclRhYih0YWIpIHtcclxuICAgICAgcmV0dXJuIHRhYiAmJiAoLTEgIT09IHNpZGVCYXJUYWJzW3RoaXMuYWN0aXZlU2NyZWVuXS5pbmRleE9mKHRhYikpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzU2VhcmNoTW9kZSh0YWIpIHtcclxuICAgICAgbGV0IHRvcGljVGFiID0gdGhpcy53aWRnZXQuZ2V0KCdhY3RpdmVfY29udGVudCcpO1xyXG4gICAgICByZXR1cm4gKHRhYiA9PT0gJ2Z0cycpIHx8ICgodG9waWNUYWIgPT09ICdzZWFyY2gnKSAmJiB0aGlzLmlzRGVza3RvcFNjcmVlbigpICYmXHJcbiAgICAgICgnY29udGVudCcgPT09IHRoaXMud2lkZ2V0LmdldChLRVlfU0VBUkNIX0xPQ0FUSU9OKSkpO1xyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZVNjcmVlbihhdHRhY2hlZCwgc2NyZWVuKSB7XHJcbiAgICAgIGlmIChhdHRhY2hlZCkge1xyXG4gICAgICAgIHRoaXMuYWN0aXZlU2NyZWVuID0gc2NyZWVuO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmhhbmRsZUF0dGFjaGVkKHNjcmVlbik7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlRGV0YWNoZWQoc2NyZWVuKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBoYW5kbGVEZXRhY2hlZChzY3JlZW4pIHsgcmV0dXJuIF8uZGVmZXIoKCkgPT4ge1xyXG4gICAgICBpZiAoc2NyZWVuID09PSBERVNLVE9QKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud2lkZ2V0LnB1Ymxpc2goS0VZX0FDVElWRV9UQUIsXHJcbiAgICAgICAgICAoJ3NlYXJjaCcgPT09IHRoaXMud2lkZ2V0LmdldCgnYWN0aXZlX2NvbnRlbnQnKSkgJiYgdGhpcy5pc1ZhbGlkVGFiKCdmdHMnKSA/XHJcbiAgICAgICAgICAgICdmdHMnXHJcbiAgICAgICAgICA6IG51bGxcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICB9KTsgfVxyXG5cclxuICAgIGhhbmRsZUF0dGFjaGVkKHNjcmVlbikge1xyXG4gICAgICB0aGlzLmFzc3VyZUxvY2F0aW9ucyhzY3JlZW4pO1xyXG4gICAgICB0aGlzLmFzc3VyZVZhbGlkQWN0aXZlVGFiKHNjcmVlbik7XHJcbiAgICAgIHJldHVybiB0aGlzLmFzc3VyZVRPQ01vZGUoc2NyZWVuKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3N1cmVMb2NhdGlvbnMoc2NyZWVuKSB7XHJcbiAgICAgIGlmIChzY3JlZW4gPT0gbnVsbCkgeyBzY3JlZW4gPSB0aGlzLmFjdGl2ZVNjcmVlbjsgfVxyXG4gICAgICB0aGlzLndpZGdldC5wdWJsaXNoKEtFWV9TRUFSQ0hfTE9DQVRJT04sXHJcbiAgICAgICAgc2NyZWVuID09PSBERVNLVE9QID9cclxuICAgICAgICAgIHRoaXMud2lkZ2V0LmdldChjb25zdHMoJ0tFWV9ERUZBVUxUX1NFQVJDSF9MT0NBVElPTicpKVxyXG4gICAgICAgIDogc2NyZWVuID09PSBUQUJMRVQgP1xyXG4gICAgICAgICAgJ3RhYmJhcidcclxuICAgICAgICA6XHJcbiAgICAgICAgICAnY29udGVudCdcclxuICAgICAgKTtcclxuICAgICAgcmV0dXJuIHRoaXMud2lkZ2V0LnB1Ymxpc2goS0VZX0ZJTFRFUl9MT0NBVElPTixcclxuICAgICAgICAoc2NyZWVuID09PSBERVNLVE9QKSB8fCAoc2NyZWVuID09PSBUQUJMRVQpID8gJ3RhYmJhcicgOiAnY29udGVudCcpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzc3VyZVRPQ01vZGUoc2NyZWVuKSB7XHJcbiAgICAgIGlmIChzY3JlZW4gPT0gbnVsbCkgeyBzY3JlZW4gPSB0aGlzLmFjdGl2ZVNjcmVlbjsgfVxyXG4gICAgICByZXR1cm4gdGhpcy53aWRnZXQucHVibGlzaChLRVlfVE9DX0RSSUxMX0RPV04sXHJcbiAgICAgICAgKHNjcmVlbiAhPT0gREVTS1RPUCkgJiYgdGhpcy53aWRnZXQuZ2V0KEtFWV9NT0JJTEVfVE9DX0RSSUxMX0RPV04pKTtcclxuICAgIH1cclxuXHJcbiAgICBuZXdTZWFyY2godGV4dCwga2V5Q29kZSwgZXZlbnQpIHtcclxuICAgICAgaWYgKGtleUNvZGUgPT09IDEzKSB7XHJcbiAgICAgICAgbGV0IG9sZFRleHQgPSB0aGlzLndpZGdldC5nZXQoY29uc3RzKCdLRVlfU0VBUkNIX1RFUk0nKSk7XHJcbiAgICAgICAgaWYgKG9sZFRleHQgIT09IHRleHQpIHsgdGhpcy53aWRnZXQucHVibGlzaChjb25zdHMoJ0tFWV9TRUFSQ0hfVEVSTScpLCB0ZXh0KTsgfVxyXG4gICAgICAgIHRoaXMud2lkZ2V0LnB1Ymxpc2goY29uc3RzKCdFVlRfU0VBUkNIX1RFUk0nKSwgdHJ1ZSk7XHJcbiAgICAgICAgaWYgKGV2ZW50ICE9IG51bGwgPyBldmVudC50YXJnZXQgOiB1bmRlZmluZWQpIHsgcmV0dXJuIChldmVudC50YXJnZXQuYmx1cikoKTsgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaXNUYWdTdGF0ZXNDaGFuZ2VkKCkge1xyXG4gICAgICBsZXQgY3VycmVudFN0YXRlID0gXy5jb21wYWN0T2JqZWN0KHRoaXMud2lkZ2V0LmdldChjb25zdHMoJ0tFWV9QUk9KRUNUX1RBR19TVEFURVMnKSkpO1xyXG4gICAgICBsZXQgZGVmYXVsdFN0YXRlID0gXy5jb21wYWN0T2JqZWN0KHRoaXMud2lkZ2V0LmdldChjb25zdHMoJ0tFWV9ERUZBVUxUX0ZJTFRFUicpKSk7XHJcbiAgICAgIHJldHVybiAhXy5pc0VxdWFsKGN1cnJlbnRTdGF0ZSwgZGVmYXVsdFN0YXRlKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXREZWZhdWx0VGFnU3RhdGVzKCkge1xyXG4gICAgICBsZXQgZGVmYXVsdFN0YXRlID0gdGhpcy53aWRnZXQuZ2V0KGNvbnN0cygnS0VZX0RFRkFVTFRfRklMVEVSJykpO1xyXG4gICAgICByZXR1cm4gdGhpcy53aWRnZXQucHVibGlzaChjb25zdHMoJ0tFWV9QUk9KRUNUX1RBR19TVEFURVMnKSwgXy5jbG9uZShkZWZhdWx0U3RhdGUpKTtcclxuICAgIH1cclxuICB9O1xyXG4gIE1vZGVybkxheW91dENvbnRyb2xsZXIuaW5pdENsYXNzKCk7XHJcbiAgcmV0dXJuIE1vZGVybkxheW91dENvbnRyb2xsZXI7XHJcbn0pKCk7XHJcblxyXG53aW5kb3cucmguY29udHJvbGxlcignTW9kZXJuTGF5b3V0Q29udHJvbGxlcicsIE1vZGVybkxheW91dENvbnRyb2xsZXIpO1xyXG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuOS4xXHJcbigoKSA9PiB7XHJcbiAgdmFyIE1lcmdlUHJvaiwgXywgY29uc3RzLCBtb2RlbCwgcmg7XHJcblxyXG4gIHJoID0gd2luZG93LnJoO1xyXG5cclxuICBtb2RlbCA9IHJoLm1vZGVsO1xyXG5cclxuICBfID0gcmguXztcclxuXHJcbiAgY29uc3RzID0gcmguY29uc3RzO1xyXG5cclxuICBNZXJnZVByb2ogPSAoKCgpID0+IHtcclxuICAgIHZhciBncm91cCwgb25Mb2FkU2NpcHQ7XHJcblxyXG4gICAgZnVuY3Rpb24gTWVyZ2VQcm9qKCkge1xyXG4gICAgICB0aGlzLnRhZ0NvbWJzID0gW107XHJcbiAgICAgIHRoaXMuaWRtYXAgPSB7fTtcclxuICAgICAgdGhpcy5maWx0ZXIgPSBbXTtcclxuICAgICAgdGhpcy5ncnBUeXBlID0gJ2dyb3VwJztcclxuICAgICAgdGhpcy5kYXRhTG9hZGVkID0gZmFsc2U7XHJcbiAgICAgIHRoaXMubG9hZFRhZ0RhdGEobW9kZWwuZ2V0KGNvbnN0cygnS0VZX1BST0pFQ1RfTElTVCcpKSk7XHJcbiAgICAgIHRoaXMuY2FwdGlvbiA9IHRoaXMudHlwZSA9IHRoaXMuZGVmRmlsdGVyID0gdm9pZCAwO1xyXG4gICAgfVxyXG5cclxuICAgIE1lcmdlUHJvai5wcm90b3R5cGUudXBkYXRlVGFnQ29tYnMgPSBmdW5jdGlvbihwcm9qZWN0KSB7XHJcbiAgICAgIHZhciBiYXNlLCBjb21icztcclxuICAgICAgY29tYnMgPSBtb2RlbC5nZXQoY29uc3RzKCdLRVlfUFJPSkVDVF9UQUdfQ09NQklOQVRJT05TJykpO1xyXG4gICAgICBpZiAoY29tYnMgIT0gbnVsbCkge1xyXG4gICAgICAgIHByb2plY3QgPSBfLnBhcnNlUHJvamVjdE5hbWUocHJvamVjdCk7XHJcbiAgICAgICAgcmV0dXJuIChiYXNlID0gdGhpcy5pZG1hcClbcHJvamVjdF0gIT0gbnVsbCA/IGJhc2VbcHJvamVjdF0gOiBiYXNlW3Byb2plY3RdID0gY29tYnM7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgTWVyZ2VQcm9qLnByb3RvdHlwZS5sb29rdXAgPSBmdW5jdGlvbihjaGlsZHJlbiwga2V5LCBpc0dycFR5cGUpIHtcclxuICAgICAgdmFyIGNoaWxkLCBjb21wS2V5LCBlbGVtZW50LCBpLCBsZW47XHJcbiAgICAgIGlmIChpc0dycFR5cGUgPT0gbnVsbCkge1xyXG4gICAgICAgIGlzR3JwVHlwZSA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKChjaGlsZHJlbiAhPSBudWxsKSAmJiAoa2V5ICE9IG51bGwpKSB7XHJcbiAgICAgICAgZm9yIChpID0gMCwgbGVuID0gY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgIGNoaWxkID0gY2hpbGRyZW5baV07XHJcbiAgICAgICAgICBpZiAoIShjaGlsZCAhPSBudWxsKSkge1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGNvbXBLZXkgPSBjaGlsZC5uYW1lIHx8IGNoaWxkLmRpc3BsYXk7XHJcbiAgICAgICAgICBpZiAoaXNHcnBUeXBlID09PSAoY2hpbGQuY2hpbGRyZW4gIT0gbnVsbCkgJiYgY29tcEtleSA9PT0ga2V5KSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQgPSBjaGlsZDtcclxuICAgICAgICAgIH0gZWxzZSBpZiAoKGNoaWxkLmNoaWxkcmVuICE9IG51bGwpICYmICFpc0dycFR5cGUpIHtcclxuICAgICAgICAgICAgZWxlbWVudCA9IHRoaXMubG9va3VwKGNoaWxkLmNoaWxkcmVuLCBrZXksIGlzR3JwVHlwZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAoZWxlbWVudCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZWxlbWVudDtcclxuICAgIH07XHJcblxyXG4gICAgZ3JvdXAgPSBmdW5jdGlvbihkaXNwKSB7XHJcbiAgICAgIHZhciBvYmplY3Q7XHJcbiAgICAgIHJldHVybiBvYmplY3QgPSB7XHJcbiAgICAgICAgdHlwZTogJ2dyb3VwJyxcclxuICAgICAgICBkaXNwbGF5OiBkaXNwLFxyXG4gICAgICAgIGNoaWxkcmVuOiBbXVxyXG4gICAgICB9O1xyXG4gICAgfTtcclxuXHJcbiAgICBNZXJnZVByb2oucHJvdG90eXBlLmFkZFRhZyA9IGZ1bmN0aW9uKGNoaWxkQXJyLCB0YWdFbGVtZW50KSB7XHJcbiAgICAgIHZhciB0YWc7XHJcbiAgICAgIGlmICh0aGlzLmxvb2t1cCh0aGlzLmZpbHRlciwgdGFnRWxlbWVudC5uYW1lLCBmYWxzZSkgPT0gbnVsbCkge1xyXG4gICAgICAgIHRhZyA9IHtcclxuICAgICAgICAgIGRpc3BsYXk6IHRhZ0VsZW1lbnQuZGlzcGxheSxcclxuICAgICAgICAgIG5hbWU6IHRhZ0VsZW1lbnQubmFtZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIGNoaWxkQXJyLnB1c2godGFnKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBNZXJnZVByb2oucHJvdG90eXBlLmFkZEdyb3VwID0gZnVuY3Rpb24oZ3JwRWxlbWVudCkge1xyXG4gICAgICB2YXIgZWxlbWVudCwgZ3JwLCBpLCBsZW4sIHJlZjtcclxuICAgICAgZ3JwID0gdGhpcy5sb29rdXAodGhpcy5maWx0ZXIsIGdycEVsZW1lbnQuZGlzcGxheSk7XHJcbiAgICAgIGlmIChncnAgPT0gbnVsbCkge1xyXG4gICAgICAgIGdycCA9IGdyb3VwKGdycEVsZW1lbnQuZGlzcGxheSk7XHJcbiAgICAgICAgdGhpcy5maWx0ZXIucHVzaChncnApO1xyXG4gICAgICB9XHJcbiAgICAgIHJlZiA9IGdycEVsZW1lbnQuY2hpbGRyZW47XHJcbiAgICAgIGZvciAoaSA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgIGVsZW1lbnQgPSByZWZbaV07XHJcbiAgICAgICAgaWYgKGVsZW1lbnQgIT0gbnVsbCkge1xyXG4gICAgICAgICAgaWYgKGVsZW1lbnQuY2hpbGRyZW4gPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLmFkZFRhZyhncnAuY2hpbGRyZW4sIGVsZW1lbnQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBpZiAoZ3JwLmNoaWxkcmVuLmxlbmd0aCA9PT0gMCAmJiB0aGlzLmZpbHRlci5pbmRleE9mKGdycCkgPiAtMSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZpbHRlci5zcGxpY2UodGhpcy5maWx0ZXIuaW5kZXhPZihncnApLCAxKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBNZXJnZVByb2oucHJvdG90eXBlLnVwZGF0ZUZpbHRlciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICB2YXIgY3VyZmlsdGVyLCBlbGVtZW50LCBpLCBsZW4sIHJlc3VsdHM7XHJcbiAgICAgIGN1cmZpbHRlciA9IG1vZGVsLmdldChjb25zdHMoJ0tFWV9URU1QX0RBVEEnKSkgfHwgW107XHJcbiAgICAgIGlmICghdGhpcy5jYXB0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5jYXB0aW9uID0gY3VyZmlsdGVyWydjYXB0aW9uJ107XHJcbiAgICAgIH1cclxuICAgICAgaWYgKCF0aGlzLnR5cGUpIHtcclxuICAgICAgICB0aGlzLnR5cGUgPSBjdXJmaWx0ZXJbJ3R5cGUnXTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodHlwZW9mIHRoaXMuZGVmRmlsdGVyID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHRoaXMuZGVmRmlsdGVyID0gY3VyZmlsdGVyWydkZWZhdWx0J107XHJcbiAgICAgIH1cclxuICAgICAgY3VyZmlsdGVyID0gY3VyZmlsdGVyWyd0YWdzJ10gfHwgW107XHJcbiAgICAgIG1vZGVsLnB1Ymxpc2goY29uc3RzKCdLRVlfVEVNUF9EQVRBJykpO1xyXG4gICAgICByZXN1bHRzID0gW107XHJcbiAgICAgIGZvciAoaSA9IDAsIGxlbiA9IGN1cmZpbHRlci5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgIGVsZW1lbnQgPSBjdXJmaWx0ZXJbaV07XHJcbiAgICAgICAgaWYgKGVsZW1lbnQgIT0gbnVsbCkge1xyXG4gICAgICAgICAgaWYgKGVsZW1lbnQuY2hpbGRyZW4gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXN1bHRzLnB1c2godGhpcy5hZGRHcm91cChlbGVtZW50KSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXN1bHRzLnB1c2godGhpcy5hZGRUYWcodGhpcy5maWx0ZXIsIGVsZW1lbnQpKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgICB9O1xyXG5cclxuICAgIG9uTG9hZFNjaXB0ID0gZnVuY3Rpb24ocHJvamVjdCwgY291bnQpIHtcclxuICAgICAgdGhpcy51cGRhdGVUYWdDb21icyhwcm9qZWN0KTtcclxuICAgICAgdGhpcy51cGRhdGVGaWx0ZXIoKTtcclxuICAgICAgaWYgKCFjb3VudCkge1xyXG4gICAgICAgIG1vZGVsLnB1Ymxpc2goY29uc3RzKCdLRVlfTUVSR0VEX0ZJTFRFUl9LRVknKSwgdGhpcy5maWx0ZXIpO1xyXG4gICAgICAgIG1vZGVsLnB1Ymxpc2goY29uc3RzKCdLRVlfTUVSR0VEX1BST0pFQ1RfTUFQJyksIHRoaXMuaWRtYXApO1xyXG4gICAgICAgIG1vZGVsLnB1Ymxpc2goY29uc3RzKCdLRVlfUFJPSkVDVF9GSUxURVJfQ0FQVElPTicpLCB0aGlzLmNhcHRpb24pO1xyXG4gICAgICAgIG1vZGVsLnB1Ymxpc2goY29uc3RzKCdLRVlfUFJPSkVDVF9GSUxURVJfVFlQRScpLCB0aGlzLnR5cGUpO1xyXG4gICAgICAgIG1vZGVsLnB1Ymxpc2goY29uc3RzKCdLRVlfREVGQVVMVF9GSUxURVInKSwgdGhpcy5kZWZGaWx0ZXIpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGFMb2FkZWQgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIE1lcmdlUHJvai5wcm90b3R5cGUubG9hZFRhZ0RhdGEgPSBmdW5jdGlvbihwcm9qTGlzdCkge1xyXG4gICAgICB2YXIgY291bnQsIGksIGxlbiwgcHJvamVjdCwgcmVzdWx0cztcclxuICAgICAgaWYgKCF0aGlzLmRhdGFMb2FkZWQpIHtcclxuICAgICAgICBjb3VudCA9IHByb2pMaXN0Lmxlbmd0aDtcclxuICAgICAgICByZXN1bHRzID0gW107XHJcbiAgICAgICAgZm9yIChpID0gMCwgbGVuID0gcHJvakxpc3QubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgIHByb2plY3QgPSBwcm9qTGlzdFtpXTtcclxuICAgICAgICAgIGlmIChwcm9qZWN0ICE9IG51bGwpIHtcclxuICAgICAgICAgICAgaWYgKHByb2plY3QpIHtcclxuICAgICAgICAgICAgICBwcm9qZWN0ID0gcHJvamVjdCArIFwiL1wiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJlc3VsdHMucHVzaChfLmxvYWRTY3JpcHQoXCJcIiArIHByb2plY3QgKyAoY29uc3RzKCdQQVRIX1BST0pFQ1RfVEFHREFUQV9GSUxFJykpLCBmYWxzZSwgb25Mb2FkU2NpcHQuYmluZCh0aGlzLCBwcm9qZWN0LCAtLWNvdW50KSkpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHZvaWQgMCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHRzO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBNZXJnZVByb2o7XHJcblxyXG4gIH0pKSgpO1xyXG5cclxuICByaC5NZXJnZVByb2ogPSBNZXJnZVByb2o7XHJcblxyXG59KS5jYWxsKHRoaXMpO1xyXG4iLCJsZXQgeyByaCB9ID0gd2luZG93O1xyXG5sZXQgeyBfIH0gPSByaDtcclxubGV0IHsgJCB9ID0gcmg7XHJcbmxldCB7IGNvbnN0cyB9ID0gcmg7XHJcbmxldCB7IG1vZGVsIH0gPSByaDtcclxubGV0IHsgcmhzIH0gPSByaDtcclxubGV0IHVuc3ViID0gbnVsbDtcclxuXHJcbnVuc3ViID0gbW9kZWwuc3Vic2NyaWJlKGNvbnN0cygnS0VZX1RBR19FWFBSRVNTSU9OJyksIChmdW5jdGlvbigpIHtcclxuICBsZXQgZG9uZSA9IGZhbHNlO1xyXG4gIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgIGlmICh1bnN1YikgeyB1bnN1YigpOyB9XHJcbiAgICBpZiAoZG9uZSkgeyByZXR1cm47IH1cclxuICAgIGRvbmUgPSB0cnVlO1xyXG4gICAgcmV0dXJuIG1vZGVsLnN1YnNjcmliZShjb25zdHMoJ0tFWV9TRUFSQ0hFRF9URVJNJyksICgpID0+XHJcbiAgICAgIG1vZGVsLnB1Ymxpc2goY29uc3RzKCdLRVlfT05TRUFSQ0hfVEFHX0VYUFInKSxcclxuICAgICAgIEpTT04uc3RyaW5naWZ5KG1vZGVsLmdldChjb25zdHMoJ0tFWV9UQUdfRVhQUkVTU0lPTicpKSkpXHJcbiAgICApO1xyXG4gIH07XHJcbn0pKClcclxuKTtcclxuXHJcbm1vZGVsLnN1YnNjcmliZShjb25zdHMoJ0VWVF9TRUFSQ0hfVEVSTScpLCBmdW5jdGlvbigpIHtcclxuICBsZXQgY2FuSGFuZGxlU2VhcmNoID0gbW9kZWwuZ2V0KGNvbnN0cygnS0VZX0NBTl9IQU5ETEVfU0VBUkNIJykpO1xyXG4gIGxldCBzZWFyY2hUZXJtID0gbW9kZWwuZ2V0KGNvbnN0cygnS0VZX1NFQVJDSF9URVJNJykpIHx8IG51bGw7XHJcbiAgbGV0IG5ld01hcCA9IHt9O1xyXG4gIG5ld01hcFtjb25zdHMoJ0hBU0hfS0VZX1JIX1NFQVJDSCcpXSA9IHNlYXJjaFRlcm07XHJcbiAgbmV3TWFwW2NvbnN0cygnSEFTSF9LRVlfVUlNT0RFJyldID0gJ3NlYXJjaCc7XHJcblxyXG4gIGlmIChjYW5IYW5kbGVTZWFyY2ggIT09IHRydWUpIHtcclxuICAgIHJldHVybiBkb2N1bWVudC5sb2NhdGlvbiA9IGAke3dpbmRvdy5nUm9vdFJlbFBhdGh9L2AgK1xyXG4gICAgICBgJHt3aW5kb3cuZ1NlYXJjaFBhZ2VGaWxlUGF0aCB8fCBjb25zdHMoJ1NUQVJUX0ZJTEVQQVRIJyl9YCArXHJcbiAgICAgIGA/IyR7Xy5tYXBUb0VuY29kZWRTdHJpbmcobmV3TWFwKX1gO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBtb2RlbC5wdWJsaXNoKGNvbnN0cygnRVZUX1FVRVJZX1NFQVJDSF9SRVNVTFRTJyksIHRydWUpO1xyXG4gICAgcmV0dXJuIF8uZGVmZXIoKCkgPT4gXy51cGRhdGVIYXNoTWFwKG5ld01hcCwgdHJ1ZSkpO1xyXG4gIH1cclxufSk7XHJcblxyXG5tb2RlbC5zdWJzY3JpYmUoY29uc3RzKCdFVlRfUFJPSkVDVF9MT0FERUQnKSwgZnVuY3Rpb24oKSB7XHJcbiAgaWYgKHdpbmRvdy5yZWFkU2V0dGluZykge1xyXG4gICAgd2luZG93LnJlYWRTZXR0aW5nKFJIQU5EU0VBUkNILCBzdGF0ZSA9PiBtb2RlbC5wdWJsaXNoKGNvbnN0cygnS0VZX0FORF9TRUFSQ0gnKSwgc3RhdGUpKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBtb2RlbC5zdWJzY3JpYmUoY29uc3RzKCdLRVlfQU5EX1NFQVJDSCcpLCBzdGF0ZSA9PiBzYXZlU2V0dGluZyhSSEFORFNFQVJDSCwgKHN0YXRlID09PSAnMScgPyAnMScgOiAnMCcpLCB0cnVlKSk7XHJcbn0pO1xyXG5cclxubW9kZWwuc3Vic2NyaWJlKGNvbnN0cygnRVZUX1FVRVJZX1NFQVJDSF9SRVNVTFRTJyksIGZ1bmN0aW9uKCkge1xyXG4gIGlmICghcmhzLmRvU2VhcmNoKCkpIHsgcmV0dXJuIHdpbmRvdy5kb1NlYXJjaCgpOyB9XHJcbn0pO1xyXG4iLCJsZXQgeyByaCB9ID0gd2luZG93O1xyXG5sZXQgeyBfIH0gPSByaDtcclxubGV0IHsgJCB9ID0gcmg7XHJcbmxldCB7IGNvbnN0cyB9ID0gcmg7XHJcbmxldCB7IG1vZGVsIH0gPSByaDtcclxuXHJcbl8uZ2V0Um9vdFVybCA9IChmdW5jdGlvbigpIHtcclxuICBsZXQgcm9vdFVybCA9IG51bGw7XHJcbiAgcmV0dXJuICgpID0+IHJvb3RVcmwgIT0gbnVsbCA/IHJvb3RVcmwgOiAocm9vdFVybCA9IGAke18uZ2V0SG9zdEZvbGRlcigpfSR7Y29uc3RzKCdTVEFSVF9GSUxFUEFUSCcpfWApO1xyXG59KSgpO1xyXG5cclxuXy5ydW5Ub3BpY0xvYWRpbmdBbmltYXRpb24gPSAoZnVuY3Rpb24oKSB7XHJcbiAgbGV0IHJ1bkFuaW1hdGlvbiA9IG51bGw7XHJcbiAgbGV0IHRvcGljTG9hZGluZyA9IGZhbHNlO1xyXG4gIHJldHVybiBmdW5jdGlvbihmbGFnKSB7XHJcbiAgICB0b3BpY0xvYWRpbmcgPSBmbGFnO1xyXG4gICAgaWYgKGZsYWcpIHtcclxuICAgICAgaWYgKHJ1bkFuaW1hdGlvbiA9PSBudWxsKSB7IHJ1bkFuaW1hdGlvbiA9IF8uZGVib3VuY2UoKCkgPT4gbW9kZWwucHVibGlzaChjb25zdHMoJ0VWVF9UT1BJQ19MT0FESU5HJyksIHRvcGljTG9hZGluZylcclxuICAgICAgLCA3MDApOyB9XHJcbiAgICAgIHJldHVybiBydW5BbmltYXRpb24oKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJ1bkFuaW1hdGlvbiA9IG51bGw7XHJcbiAgICAgIHJldHVybiBtb2RlbC5wdWJsaXNoKGNvbnN0cygnRVZUX1RPUElDX0xPQURJTkcnKSwgZmFsc2UpO1xyXG4gICAgfVxyXG4gIH07XHJcbn0pKCk7XHJcblxyXG5fLmdldFRvcGljRnJhbWUgPSBmdW5jdGlvbigpIHtcclxuICBsZXQgdG9waWNGcmFtZU5hbWUgPSB3aW5kb3cuZ1RvcGljRnJhbWVOYW1lIHx8ICdyaF9kZWZhdWx0X3RvcGljX2ZyYW1lX25hbWUnO1xyXG4gIHJldHVybiAkKGBbbmFtZT0ke3RvcGljRnJhbWVOYW1lfV1gLCAwKTtcclxufTtcclxuIiwiLyoqXG4gKiBsdW5yIC0gaHR0cDovL2x1bnJqcy5jb20gLSBBIGJpdCBsaWtlIFNvbHIsIGJ1dCBtdWNoIHNtYWxsZXIgYW5kIG5vdCBhcyBicmlnaHQgLSAyLjEuNlxuICogQ29weXJpZ2h0IChDKSAyMDE4IE9saXZlciBOaWdodGluZ2FsZVxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuOyhmdW5jdGlvbigpe1xuXG4vKipcbiAqIEEgY29udmVuaWVuY2UgZnVuY3Rpb24gZm9yIGNvbmZpZ3VyaW5nIGFuZCBjb25zdHJ1Y3RpbmdcbiAqIGEgbmV3IGx1bnIgSW5kZXguXG4gKlxuICogQSBsdW5yLkJ1aWxkZXIgaW5zdGFuY2UgaXMgY3JlYXRlZCBhbmQgdGhlIHBpcGVsaW5lIHNldHVwXG4gKiB3aXRoIGEgdHJpbW1lciwgc3RvcCB3b3JkIGZpbHRlciBhbmQgc3RlbW1lci5cbiAqXG4gKiBUaGlzIGJ1aWxkZXIgb2JqZWN0IGlzIHlpZWxkZWQgdG8gdGhlIGNvbmZpZ3VyYXRpb24gZnVuY3Rpb25cbiAqIHRoYXQgaXMgcGFzc2VkIGFzIGEgcGFyYW1ldGVyLCBhbGxvd2luZyB0aGUgbGlzdCBvZiBmaWVsZHNcbiAqIGFuZCBvdGhlciBidWlsZGVyIHBhcmFtZXRlcnMgdG8gYmUgY3VzdG9taXNlZC5cbiAqXG4gKiBBbGwgZG9jdW1lbnRzIF9tdXN0XyBiZSBhZGRlZCB3aXRoaW4gdGhlIHBhc3NlZCBjb25maWcgZnVuY3Rpb24uXG4gKlxuICogQGV4YW1wbGVcbiAqIHZhciBpZHggPSBsdW5yKGZ1bmN0aW9uICgpIHtcbiAqICAgdGhpcy5maWVsZCgndGl0bGUnKVxuICogICB0aGlzLmZpZWxkKCdib2R5JylcbiAqICAgdGhpcy5yZWYoJ2lkJylcbiAqXG4gKiAgIGRvY3VtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChkb2MpIHtcbiAqICAgICB0aGlzLmFkZChkb2MpXG4gKiAgIH0sIHRoaXMpXG4gKiB9KVxuICpcbiAqIEBzZWUge0BsaW5rIGx1bnIuQnVpbGRlcn1cbiAqIEBzZWUge0BsaW5rIGx1bnIuUGlwZWxpbmV9XG4gKiBAc2VlIHtAbGluayBsdW5yLnRyaW1tZXJ9XG4gKiBAc2VlIHtAbGluayBsdW5yLnN0b3BXb3JkRmlsdGVyfVxuICogQHNlZSB7QGxpbmsgbHVuci5zdGVtbWVyfVxuICogQG5hbWVzcGFjZSB7ZnVuY3Rpb259IGx1bnJcbiAqL1xudmFyIGx1bnIgPSBmdW5jdGlvbiAoY29uZmlnKSB7XG4gIHZhciBidWlsZGVyID0gbmV3IGx1bnIuQnVpbGRlclxuXG4gIGJ1aWxkZXIucGlwZWxpbmUuYWRkKFxuICAgIGx1bnIudHJpbW1lcixcbiAgICBsdW5yLnN0b3BXb3JkRmlsdGVyLFxuICAgIGx1bnIuc3RlbW1lclxuICApXG5cbiAgYnVpbGRlci5zZWFyY2hQaXBlbGluZS5hZGQoXG4gICAgbHVuci5zdGVtbWVyXG4gIClcblxuICBjb25maWcuY2FsbChidWlsZGVyLCBidWlsZGVyKVxuICByZXR1cm4gYnVpbGRlci5idWlsZCgpXG59XG5cbmx1bnIudmVyc2lvbiA9IFwiMi4xLjZcIlxuLyohXG4gKiBsdW5yLnV0aWxzXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTggT2xpdmVyIE5pZ2h0aW5nYWxlXG4gKi9cblxuLyoqXG4gKiBBIG5hbWVzcGFjZSBjb250YWluaW5nIHV0aWxzIGZvciB0aGUgcmVzdCBvZiB0aGUgbHVuciBsaWJyYXJ5XG4gKi9cbmx1bnIudXRpbHMgPSB7fVxuXG4vKipcbiAqIFByaW50IGEgd2FybmluZyBtZXNzYWdlIHRvIHRoZSBjb25zb2xlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIFRoZSBtZXNzYWdlIHRvIGJlIHByaW50ZWQuXG4gKiBAbWVtYmVyT2YgVXRpbHNcbiAqL1xubHVuci51dGlscy53YXJuID0gKGZ1bmN0aW9uIChnbG9iYWwpIHtcbiAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uc29sZSAqL1xuICByZXR1cm4gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICBpZiAoZ2xvYmFsLmNvbnNvbGUgJiYgY29uc29sZS53YXJuKSB7XG4gICAgICBjb25zb2xlLndhcm4obWVzc2FnZSlcbiAgICB9XG4gIH1cbiAgLyogZXNsaW50LWVuYWJsZSBuby1jb25zb2xlICovXG59KSh0aGlzKVxuXG4vKipcbiAqIENvbnZlcnQgYW4gb2JqZWN0IHRvIGEgc3RyaW5nLlxuICpcbiAqIEluIHRoZSBjYXNlIG9mIGBudWxsYCBhbmQgYHVuZGVmaW5lZGAgdGhlIGZ1bmN0aW9uIHJldHVybnNcbiAqIHRoZSBlbXB0eSBzdHJpbmcsIGluIGFsbCBvdGhlciBjYXNlcyB0aGUgcmVzdWx0IG9mIGNhbGxpbmdcbiAqIGB0b1N0cmluZ2Agb24gdGhlIHBhc3NlZCBvYmplY3QgaXMgcmV0dXJuZWQuXG4gKlxuICogQHBhcmFtIHtBbnl9IG9iaiBUaGUgb2JqZWN0IHRvIGNvbnZlcnQgdG8gYSBzdHJpbmcuXG4gKiBAcmV0dXJuIHtTdHJpbmd9IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgcGFzc2VkIG9iamVjdC5cbiAqIEBtZW1iZXJPZiBVdGlsc1xuICovXG5sdW5yLnV0aWxzLmFzU3RyaW5nID0gZnVuY3Rpb24gKG9iaikge1xuICBpZiAob2JqID09PSB2b2lkIDAgfHwgb2JqID09PSBudWxsKSB7XG4gICAgcmV0dXJuIFwiXCJcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gb2JqLnRvU3RyaW5nKClcbiAgfVxufVxubHVuci5GaWVsZFJlZiA9IGZ1bmN0aW9uIChkb2NSZWYsIGZpZWxkTmFtZSwgc3RyaW5nVmFsdWUpIHtcbiAgdGhpcy5kb2NSZWYgPSBkb2NSZWZcbiAgdGhpcy5maWVsZE5hbWUgPSBmaWVsZE5hbWVcbiAgdGhpcy5fc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZVxufVxuXG5sdW5yLkZpZWxkUmVmLmpvaW5lciA9IFwiL1wiXG5cbmx1bnIuRmllbGRSZWYuZnJvbVN0cmluZyA9IGZ1bmN0aW9uIChzKSB7XG4gIHZhciBuID0gcy5pbmRleE9mKGx1bnIuRmllbGRSZWYuam9pbmVyKVxuXG4gIGlmIChuID09PSAtMSkge1xuICAgIHRocm93IFwibWFsZm9ybWVkIGZpZWxkIHJlZiBzdHJpbmdcIlxuICB9XG5cbiAgdmFyIGZpZWxkUmVmID0gcy5zbGljZSgwLCBuKSxcbiAgICAgIGRvY1JlZiA9IHMuc2xpY2UobiArIDEpXG5cbiAgcmV0dXJuIG5ldyBsdW5yLkZpZWxkUmVmIChkb2NSZWYsIGZpZWxkUmVmLCBzKVxufVxuXG5sdW5yLkZpZWxkUmVmLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHRoaXMuX3N0cmluZ1ZhbHVlID09IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuX3N0cmluZ1ZhbHVlID0gdGhpcy5maWVsZE5hbWUgKyBsdW5yLkZpZWxkUmVmLmpvaW5lciArIHRoaXMuZG9jUmVmXG4gIH1cblxuICByZXR1cm4gdGhpcy5fc3RyaW5nVmFsdWVcbn1cbi8qKlxuICogQSBmdW5jdGlvbiB0byBjYWxjdWxhdGUgdGhlIGludmVyc2UgZG9jdW1lbnQgZnJlcXVlbmN5IGZvclxuICogYSBwb3N0aW5nLiBUaGlzIGlzIHNoYXJlZCBiZXR3ZWVuIHRoZSBidWlsZGVyIGFuZCB0aGUgaW5kZXhcbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtvYmplY3R9IHBvc3RpbmcgLSBUaGUgcG9zdGluZyBmb3IgYSBnaXZlbiB0ZXJtXG4gKiBAcGFyYW0ge251bWJlcn0gZG9jdW1lbnRDb3VudCAtIFRoZSB0b3RhbCBudW1iZXIgb2YgZG9jdW1lbnRzLlxuICovXG5sdW5yLmlkZiA9IGZ1bmN0aW9uIChwb3N0aW5nLCBkb2N1bWVudENvdW50KSB7XG4gIHZhciBkb2N1bWVudHNXaXRoVGVybSA9IDBcblxuICBmb3IgKHZhciBmaWVsZE5hbWUgaW4gcG9zdGluZykge1xuICAgIGlmIChmaWVsZE5hbWUgPT0gJ19pbmRleCcpIGNvbnRpbnVlIC8vIElnbm9yZSB0aGUgdGVybSBpbmRleCwgaXRzIG5vdCBhIGZpZWxkXG4gICAgZG9jdW1lbnRzV2l0aFRlcm0gKz0gT2JqZWN0LmtleXMocG9zdGluZ1tmaWVsZE5hbWVdKS5sZW5ndGhcbiAgfVxuXG4gIHZhciB4ID0gKGRvY3VtZW50Q291bnQgLSBkb2N1bWVudHNXaXRoVGVybSArIDAuNSkgLyAoZG9jdW1lbnRzV2l0aFRlcm0gKyAwLjUpXG5cbiAgcmV0dXJuIE1hdGgubG9nKDEgKyBNYXRoLmFicyh4KSlcbn1cblxuLyoqXG4gKiBBIHRva2VuIHdyYXBzIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGEgdG9rZW5cbiAqIGFzIGl0IGlzIHBhc3NlZCB0aHJvdWdoIHRoZSB0ZXh0IHByb2Nlc3NpbmcgcGlwZWxpbmUuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge3N0cmluZ30gW3N0cj0nJ10gLSBUaGUgc3RyaW5nIHRva2VuIGJlaW5nIHdyYXBwZWQuXG4gKiBAcGFyYW0ge29iamVjdH0gW21ldGFkYXRhPXt9XSAtIE1ldGFkYXRhIGFzc29jaWF0ZWQgd2l0aCB0aGlzIHRva2VuLlxuICovXG5sdW5yLlRva2VuID0gZnVuY3Rpb24gKHN0ciwgbWV0YWRhdGEpIHtcbiAgdGhpcy5zdHIgPSBzdHIgfHwgXCJcIlxuICB0aGlzLm1ldGFkYXRhID0gbWV0YWRhdGEgfHwge31cbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSB0b2tlbiBzdHJpbmcgdGhhdCBpcyBiZWluZyB3cmFwcGVkIGJ5IHRoaXMgb2JqZWN0LlxuICpcbiAqIEByZXR1cm5zIHtzdHJpbmd9XG4gKi9cbmx1bnIuVG9rZW4ucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5zdHJcbn1cblxuLyoqXG4gKiBBIHRva2VuIHVwZGF0ZSBmdW5jdGlvbiBpcyB1c2VkIHdoZW4gdXBkYXRpbmcgb3Igb3B0aW9uYWxseVxuICogd2hlbiBjbG9uaW5nIGEgdG9rZW4uXG4gKlxuICogQGNhbGxiYWNrIGx1bnIuVG9rZW5+dXBkYXRlRnVuY3Rpb25cbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgLSBUaGUgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSB0b2tlbi5cbiAqIEBwYXJhbSB7T2JqZWN0fSBtZXRhZGF0YSAtIEFsbCBtZXRhZGF0YSBhc3NvY2lhdGVkIHdpdGggdGhpcyB0b2tlbi5cbiAqL1xuXG4vKipcbiAqIEFwcGxpZXMgdGhlIGdpdmVuIGZ1bmN0aW9uIHRvIHRoZSB3cmFwcGVkIHN0cmluZyB0b2tlbi5cbiAqXG4gKiBAZXhhbXBsZVxuICogdG9rZW4udXBkYXRlKGZ1bmN0aW9uIChzdHIsIG1ldGFkYXRhKSB7XG4gKiAgIHJldHVybiBzdHIudG9VcHBlckNhc2UoKVxuICogfSlcbiAqXG4gKiBAcGFyYW0ge2x1bnIuVG9rZW5+dXBkYXRlRnVuY3Rpb259IGZuIC0gQSBmdW5jdGlvbiB0byBhcHBseSB0byB0aGUgdG9rZW4gc3RyaW5nLlxuICogQHJldHVybnMge2x1bnIuVG9rZW59XG4gKi9cbmx1bnIuVG9rZW4ucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChmbikge1xuICB0aGlzLnN0ciA9IGZuKHRoaXMuc3RyLCB0aGlzLm1ldGFkYXRhKVxuICByZXR1cm4gdGhpc1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBjbG9uZSBvZiB0aGlzIHRva2VuLiBPcHRpb25hbGx5IGEgZnVuY3Rpb24gY2FuIGJlXG4gKiBhcHBsaWVkIHRvIHRoZSBjbG9uZWQgdG9rZW4uXG4gKlxuICogQHBhcmFtIHtsdW5yLlRva2VufnVwZGF0ZUZ1bmN0aW9ufSBbZm5dIC0gQW4gb3B0aW9uYWwgZnVuY3Rpb24gdG8gYXBwbHkgdG8gdGhlIGNsb25lZCB0b2tlbi5cbiAqIEByZXR1cm5zIHtsdW5yLlRva2VufVxuICovXG5sdW5yLlRva2VuLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uIChmbikge1xuICBmbiA9IGZuIHx8IGZ1bmN0aW9uIChzKSB7IHJldHVybiBzIH1cbiAgcmV0dXJuIG5ldyBsdW5yLlRva2VuIChmbih0aGlzLnN0ciwgdGhpcy5tZXRhZGF0YSksIHRoaXMubWV0YWRhdGEpXG59XG4vKiFcbiAqIGx1bnIudG9rZW5pemVyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTggT2xpdmVyIE5pZ2h0aW5nYWxlXG4gKi9cblxuLyoqXG4gKiBBIGZ1bmN0aW9uIGZvciBzcGxpdHRpbmcgYSBzdHJpbmcgaW50byB0b2tlbnMgcmVhZHkgdG8gYmUgaW5zZXJ0ZWQgaW50b1xuICogdGhlIHNlYXJjaCBpbmRleC4gVXNlcyBgbHVuci50b2tlbml6ZXIuc2VwYXJhdG9yYCB0byBzcGxpdCBzdHJpbmdzLCBjaGFuZ2VcbiAqIHRoZSB2YWx1ZSBvZiB0aGlzIHByb3BlcnR5IHRvIGNoYW5nZSBob3cgc3RyaW5ncyBhcmUgc3BsaXQgaW50byB0b2tlbnMuXG4gKlxuICogVGhpcyB0b2tlbml6ZXIgd2lsbCBjb252ZXJ0IGl0cyBwYXJhbWV0ZXIgdG8gYSBzdHJpbmcgYnkgY2FsbGluZyBgdG9TdHJpbmdgIGFuZFxuICogdGhlbiB3aWxsIHNwbGl0IHRoaXMgc3RyaW5nIG9uIHRoZSBjaGFyYWN0ZXIgaW4gYGx1bnIudG9rZW5pemVyLnNlcGFyYXRvcmAuXG4gKiBBcnJheXMgd2lsbCBoYXZlIHRoZWlyIGVsZW1lbnRzIGNvbnZlcnRlZCB0byBzdHJpbmdzIGFuZCB3cmFwcGVkIGluIGEgbHVuci5Ub2tlbi5cbiAqXG4gKiBAc3RhdGljXG4gKiBAcGFyYW0gez8oc3RyaW5nfG9iamVjdHxvYmplY3RbXSl9IG9iaiAtIFRoZSBvYmplY3QgdG8gY29udmVydCBpbnRvIHRva2Vuc1xuICogQHJldHVybnMge2x1bnIuVG9rZW5bXX1cbiAqL1xubHVuci50b2tlbml6ZXIgPSBmdW5jdGlvbiAob2JqKSB7XG4gIGlmIChvYmogPT0gbnVsbCB8fCBvYmogPT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIFtdXG4gIH1cblxuICBpZiAoQXJyYXkuaXNBcnJheShvYmopKSB7XG4gICAgcmV0dXJuIG9iai5tYXAoZnVuY3Rpb24gKHQpIHtcbiAgICAgIHJldHVybiBuZXcgbHVuci5Ub2tlbihsdW5yLnV0aWxzLmFzU3RyaW5nKHQpLnRvTG93ZXJDYXNlKCkpXG4gICAgfSlcbiAgfVxuXG4gIHZhciBzdHIgPSBvYmoudG9TdHJpbmcoKS50cmltKCkudG9Mb3dlckNhc2UoKSxcbiAgICAgIGxlbiA9IHN0ci5sZW5ndGgsXG4gICAgICB0b2tlbnMgPSBbXVxuXG4gIGZvciAodmFyIHNsaWNlRW5kID0gMCwgc2xpY2VTdGFydCA9IDA7IHNsaWNlRW5kIDw9IGxlbjsgc2xpY2VFbmQrKykge1xuICAgIHZhciBjaGFyID0gc3RyLmNoYXJBdChzbGljZUVuZCksXG4gICAgICAgIHNsaWNlTGVuZ3RoID0gc2xpY2VFbmQgLSBzbGljZVN0YXJ0XG5cbiAgICBpZiAoKGNoYXIubWF0Y2gobHVuci50b2tlbml6ZXIuc2VwYXJhdG9yKSB8fCBzbGljZUVuZCA9PSBsZW4pKSB7XG5cbiAgICAgIGlmIChzbGljZUxlbmd0aCA+IDApIHtcbiAgICAgICAgdG9rZW5zLnB1c2goXG4gICAgICAgICAgbmV3IGx1bnIuVG9rZW4gKHN0ci5zbGljZShzbGljZVN0YXJ0LCBzbGljZUVuZCksIHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiBbc2xpY2VTdGFydCwgc2xpY2VMZW5ndGhdLFxuICAgICAgICAgICAgaW5kZXg6IHRva2Vucy5sZW5ndGhcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIHNsaWNlU3RhcnQgPSBzbGljZUVuZCArIDFcbiAgICB9XG5cbiAgfVxuXG4gIHJldHVybiB0b2tlbnNcbn1cblxuLyoqXG4gKiBUaGUgc2VwYXJhdG9yIHVzZWQgdG8gc3BsaXQgYSBzdHJpbmcgaW50byB0b2tlbnMuIE92ZXJyaWRlIHRoaXMgcHJvcGVydHkgdG8gY2hhbmdlIHRoZSBiZWhhdmlvdXIgb2ZcbiAqIGBsdW5yLnRva2VuaXplcmAgYmVoYXZpb3VyIHdoZW4gdG9rZW5pemluZyBzdHJpbmdzLiBCeSBkZWZhdWx0IHRoaXMgc3BsaXRzIG9uIHdoaXRlc3BhY2UgYW5kIGh5cGhlbnMuXG4gKlxuICogQHN0YXRpY1xuICogQHNlZSBsdW5yLnRva2VuaXplclxuICovXG5sdW5yLnRva2VuaXplci5zZXBhcmF0b3IgPSAvW1xcc1xcLV0rL1xuLyohXG4gKiBsdW5yLlBpcGVsaW5lXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTggT2xpdmVyIE5pZ2h0aW5nYWxlXG4gKi9cblxuLyoqXG4gKiBsdW5yLlBpcGVsaW5lcyBtYWludGFpbiBhbiBvcmRlcmVkIGxpc3Qgb2YgZnVuY3Rpb25zIHRvIGJlIGFwcGxpZWQgdG8gYWxsXG4gKiB0b2tlbnMgaW4gZG9jdW1lbnRzIGVudGVyaW5nIHRoZSBzZWFyY2ggaW5kZXggYW5kIHF1ZXJpZXMgYmVpbmcgcmFuIGFnYWluc3RcbiAqIHRoZSBpbmRleC5cbiAqXG4gKiBBbiBpbnN0YW5jZSBvZiBsdW5yLkluZGV4IGNyZWF0ZWQgd2l0aCB0aGUgbHVuciBzaG9ydGN1dCB3aWxsIGNvbnRhaW4gYVxuICogcGlwZWxpbmUgd2l0aCBhIHN0b3Agd29yZCBmaWx0ZXIgYW5kIGFuIEVuZ2xpc2ggbGFuZ3VhZ2Ugc3RlbW1lci4gRXh0cmFcbiAqIGZ1bmN0aW9ucyBjYW4gYmUgYWRkZWQgYmVmb3JlIG9yIGFmdGVyIGVpdGhlciBvZiB0aGVzZSBmdW5jdGlvbnMgb3IgdGhlc2VcbiAqIGRlZmF1bHQgZnVuY3Rpb25zIGNhbiBiZSByZW1vdmVkLlxuICpcbiAqIFdoZW4gcnVuIHRoZSBwaXBlbGluZSB3aWxsIGNhbGwgZWFjaCBmdW5jdGlvbiBpbiB0dXJuLCBwYXNzaW5nIGEgdG9rZW4sIHRoZVxuICogaW5kZXggb2YgdGhhdCB0b2tlbiBpbiB0aGUgb3JpZ2luYWwgbGlzdCBvZiBhbGwgdG9rZW5zIGFuZCBmaW5hbGx5IGEgbGlzdCBvZlxuICogYWxsIHRoZSBvcmlnaW5hbCB0b2tlbnMuXG4gKlxuICogVGhlIG91dHB1dCBvZiBmdW5jdGlvbnMgaW4gdGhlIHBpcGVsaW5lIHdpbGwgYmUgcGFzc2VkIHRvIHRoZSBuZXh0IGZ1bmN0aW9uXG4gKiBpbiB0aGUgcGlwZWxpbmUuIFRvIGV4Y2x1ZGUgYSB0b2tlbiBmcm9tIGVudGVyaW5nIHRoZSBpbmRleCB0aGUgZnVuY3Rpb25cbiAqIHNob3VsZCByZXR1cm4gdW5kZWZpbmVkLCB0aGUgcmVzdCBvZiB0aGUgcGlwZWxpbmUgd2lsbCBub3QgYmUgY2FsbGVkIHdpdGhcbiAqIHRoaXMgdG9rZW4uXG4gKlxuICogRm9yIHNlcmlhbGlzYXRpb24gb2YgcGlwZWxpbmVzIHRvIHdvcmssIGFsbCBmdW5jdGlvbnMgdXNlZCBpbiBhbiBpbnN0YW5jZSBvZlxuICogYSBwaXBlbGluZSBzaG91bGQgYmUgcmVnaXN0ZXJlZCB3aXRoIGx1bnIuUGlwZWxpbmUuIFJlZ2lzdGVyZWQgZnVuY3Rpb25zIGNhblxuICogdGhlbiBiZSBsb2FkZWQuIElmIHRyeWluZyB0byBsb2FkIGEgc2VyaWFsaXNlZCBwaXBlbGluZSB0aGF0IHVzZXMgZnVuY3Rpb25zXG4gKiB0aGF0IGFyZSBub3QgcmVnaXN0ZXJlZCBhbiBlcnJvciB3aWxsIGJlIHRocm93bi5cbiAqXG4gKiBJZiBub3QgcGxhbm5pbmcgb24gc2VyaWFsaXNpbmcgdGhlIHBpcGVsaW5lIHRoZW4gcmVnaXN0ZXJpbmcgcGlwZWxpbmUgZnVuY3Rpb25zXG4gKiBpcyBub3QgbmVjZXNzYXJ5LlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5sdW5yLlBpcGVsaW5lID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLl9zdGFjayA9IFtdXG59XG5cbmx1bnIuUGlwZWxpbmUucmVnaXN0ZXJlZEZ1bmN0aW9ucyA9IE9iamVjdC5jcmVhdGUobnVsbClcblxuLyoqXG4gKiBBIHBpcGVsaW5lIGZ1bmN0aW9uIG1hcHMgbHVuci5Ub2tlbiB0byBsdW5yLlRva2VuLiBBIGx1bnIuVG9rZW4gY29udGFpbnMgdGhlIHRva2VuXG4gKiBzdHJpbmcgYXMgd2VsbCBhcyBhbGwga25vd24gbWV0YWRhdGEuIEEgcGlwZWxpbmUgZnVuY3Rpb24gY2FuIG11dGF0ZSB0aGUgdG9rZW4gc3RyaW5nXG4gKiBvciBtdXRhdGUgKG9yIGFkZCkgbWV0YWRhdGEgZm9yIGEgZ2l2ZW4gdG9rZW4uXG4gKlxuICogQSBwaXBlbGluZSBmdW5jdGlvbiBjYW4gaW5kaWNhdGUgdGhhdCB0aGUgcGFzc2VkIHRva2VuIHNob3VsZCBiZSBkaXNjYXJkZWQgYnkgcmV0dXJuaW5nXG4gKiBudWxsLiBUaGlzIHRva2VuIHdpbGwgbm90IGJlIHBhc3NlZCB0byBhbnkgZG93bnN0cmVhbSBwaXBlbGluZSBmdW5jdGlvbnMgYW5kIHdpbGwgbm90IGJlXG4gKiBhZGRlZCB0byB0aGUgaW5kZXguXG4gKlxuICogTXVsdGlwbGUgdG9rZW5zIGNhbiBiZSByZXR1cm5lZCBieSByZXR1cm5pbmcgYW4gYXJyYXkgb2YgdG9rZW5zLiBFYWNoIHRva2VuIHdpbGwgYmUgcGFzc2VkXG4gKiB0byBhbnkgZG93bnN0cmVhbSBwaXBlbGluZSBmdW5jdGlvbnMgYW5kIGFsbCB3aWxsIHJldHVybmVkIHRva2VucyB3aWxsIGJlIGFkZGVkIHRvIHRoZSBpbmRleC5cbiAqXG4gKiBBbnkgbnVtYmVyIG9mIHBpcGVsaW5lIGZ1bmN0aW9ucyBtYXkgYmUgY2hhaW5lZCB0b2dldGhlciB1c2luZyBhIGx1bnIuUGlwZWxpbmUuXG4gKlxuICogQGludGVyZmFjZSBsdW5yLlBpcGVsaW5lRnVuY3Rpb25cbiAqIEBwYXJhbSB7bHVuci5Ub2tlbn0gdG9rZW4gLSBBIHRva2VuIGZyb20gdGhlIGRvY3VtZW50IGJlaW5nIHByb2Nlc3NlZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBpIC0gVGhlIGluZGV4IG9mIHRoaXMgdG9rZW4gaW4gdGhlIGNvbXBsZXRlIGxpc3Qgb2YgdG9rZW5zIGZvciB0aGlzIGRvY3VtZW50L2ZpZWxkLlxuICogQHBhcmFtIHtsdW5yLlRva2VuW119IHRva2VucyAtIEFsbCB0b2tlbnMgZm9yIHRoaXMgZG9jdW1lbnQvZmllbGQuXG4gKiBAcmV0dXJucyB7KD9sdW5yLlRva2VufGx1bnIuVG9rZW5bXSl9XG4gKi9cblxuLyoqXG4gKiBSZWdpc3RlciBhIGZ1bmN0aW9uIHdpdGggdGhlIHBpcGVsaW5lLlxuICpcbiAqIEZ1bmN0aW9ucyB0aGF0IGFyZSB1c2VkIGluIHRoZSBwaXBlbGluZSBzaG91bGQgYmUgcmVnaXN0ZXJlZCBpZiB0aGUgcGlwZWxpbmVcbiAqIG5lZWRzIHRvIGJlIHNlcmlhbGlzZWQsIG9yIGEgc2VyaWFsaXNlZCBwaXBlbGluZSBuZWVkcyB0byBiZSBsb2FkZWQuXG4gKlxuICogUmVnaXN0ZXJpbmcgYSBmdW5jdGlvbiBkb2VzIG5vdCBhZGQgaXQgdG8gYSBwaXBlbGluZSwgZnVuY3Rpb25zIG11c3Qgc3RpbGwgYmVcbiAqIGFkZGVkIHRvIGluc3RhbmNlcyBvZiB0aGUgcGlwZWxpbmUgZm9yIHRoZW0gdG8gYmUgdXNlZCB3aGVuIHJ1bm5pbmcgYSBwaXBlbGluZS5cbiAqXG4gKiBAcGFyYW0ge2x1bnIuUGlwZWxpbmVGdW5jdGlvbn0gZm4gLSBUaGUgZnVuY3Rpb24gdG8gY2hlY2sgZm9yLlxuICogQHBhcmFtIHtTdHJpbmd9IGxhYmVsIC0gVGhlIGxhYmVsIHRvIHJlZ2lzdGVyIHRoaXMgZnVuY3Rpb24gd2l0aFxuICovXG5sdW5yLlBpcGVsaW5lLnJlZ2lzdGVyRnVuY3Rpb24gPSBmdW5jdGlvbiAoZm4sIGxhYmVsKSB7XG4gIGlmIChsYWJlbCBpbiB0aGlzLnJlZ2lzdGVyZWRGdW5jdGlvbnMpIHtcbiAgICBsdW5yLnV0aWxzLndhcm4oJ092ZXJ3cml0aW5nIGV4aXN0aW5nIHJlZ2lzdGVyZWQgZnVuY3Rpb246ICcgKyBsYWJlbClcbiAgfVxuXG4gIGZuLmxhYmVsID0gbGFiZWxcbiAgbHVuci5QaXBlbGluZS5yZWdpc3RlcmVkRnVuY3Rpb25zW2ZuLmxhYmVsXSA9IGZuXG59XG5cbi8qKlxuICogV2FybnMgaWYgdGhlIGZ1bmN0aW9uIGlzIG5vdCByZWdpc3RlcmVkIGFzIGEgUGlwZWxpbmUgZnVuY3Rpb24uXG4gKlxuICogQHBhcmFtIHtsdW5yLlBpcGVsaW5lRnVuY3Rpb259IGZuIC0gVGhlIGZ1bmN0aW9uIHRvIGNoZWNrIGZvci5cbiAqIEBwcml2YXRlXG4gKi9cbmx1bnIuUGlwZWxpbmUud2FybklmRnVuY3Rpb25Ob3RSZWdpc3RlcmVkID0gZnVuY3Rpb24gKGZuKSB7XG4gIHZhciBpc1JlZ2lzdGVyZWQgPSBmbi5sYWJlbCAmJiAoZm4ubGFiZWwgaW4gdGhpcy5yZWdpc3RlcmVkRnVuY3Rpb25zKVxuXG4gIGlmICghaXNSZWdpc3RlcmVkKSB7XG4gICAgbHVuci51dGlscy53YXJuKCdGdW5jdGlvbiBpcyBub3QgcmVnaXN0ZXJlZCB3aXRoIHBpcGVsaW5lLiBUaGlzIG1heSBjYXVzZSBwcm9ibGVtcyB3aGVuIHNlcmlhbGlzaW5nIHRoZSBpbmRleC5cXG4nLCBmbilcbiAgfVxufVxuXG4vKipcbiAqIExvYWRzIGEgcHJldmlvdXNseSBzZXJpYWxpc2VkIHBpcGVsaW5lLlxuICpcbiAqIEFsbCBmdW5jdGlvbnMgdG8gYmUgbG9hZGVkIG11c3QgYWxyZWFkeSBiZSByZWdpc3RlcmVkIHdpdGggbHVuci5QaXBlbGluZS5cbiAqIElmIGFueSBmdW5jdGlvbiBmcm9tIHRoZSBzZXJpYWxpc2VkIGRhdGEgaGFzIG5vdCBiZWVuIHJlZ2lzdGVyZWQgdGhlbiBhblxuICogZXJyb3Igd2lsbCBiZSB0aHJvd24uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHNlcmlhbGlzZWQgLSBUaGUgc2VyaWFsaXNlZCBwaXBlbGluZSB0byBsb2FkLlxuICogQHJldHVybnMge2x1bnIuUGlwZWxpbmV9XG4gKi9cbmx1bnIuUGlwZWxpbmUubG9hZCA9IGZ1bmN0aW9uIChzZXJpYWxpc2VkKSB7XG4gIHZhciBwaXBlbGluZSA9IG5ldyBsdW5yLlBpcGVsaW5lXG5cbiAgc2VyaWFsaXNlZC5mb3JFYWNoKGZ1bmN0aW9uIChmbk5hbWUpIHtcbiAgICB2YXIgZm4gPSBsdW5yLlBpcGVsaW5lLnJlZ2lzdGVyZWRGdW5jdGlvbnNbZm5OYW1lXVxuXG4gICAgaWYgKGZuKSB7XG4gICAgICBwaXBlbGluZS5hZGQoZm4pXG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGxvYWQgdW5yZWdpc3RlcmVkIGZ1bmN0aW9uOiAnICsgZm5OYW1lKVxuICAgIH1cbiAgfSlcblxuICByZXR1cm4gcGlwZWxpbmVcbn1cblxuLyoqXG4gKiBBZGRzIG5ldyBmdW5jdGlvbnMgdG8gdGhlIGVuZCBvZiB0aGUgcGlwZWxpbmUuXG4gKlxuICogTG9ncyBhIHdhcm5pbmcgaWYgdGhlIGZ1bmN0aW9uIGhhcyBub3QgYmVlbiByZWdpc3RlcmVkLlxuICpcbiAqIEBwYXJhbSB7bHVuci5QaXBlbGluZUZ1bmN0aW9uW119IGZ1bmN0aW9ucyAtIEFueSBudW1iZXIgb2YgZnVuY3Rpb25zIHRvIGFkZCB0byB0aGUgcGlwZWxpbmUuXG4gKi9cbmx1bnIuUGlwZWxpbmUucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGZucyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cylcblxuICBmbnMuZm9yRWFjaChmdW5jdGlvbiAoZm4pIHtcbiAgICBsdW5yLlBpcGVsaW5lLndhcm5JZkZ1bmN0aW9uTm90UmVnaXN0ZXJlZChmbilcbiAgICB0aGlzLl9zdGFjay5wdXNoKGZuKVxuICB9LCB0aGlzKVxufVxuXG4vKipcbiAqIEFkZHMgYSBzaW5nbGUgZnVuY3Rpb24gYWZ0ZXIgYSBmdW5jdGlvbiB0aGF0IGFscmVhZHkgZXhpc3RzIGluIHRoZVxuICogcGlwZWxpbmUuXG4gKlxuICogTG9ncyBhIHdhcm5pbmcgaWYgdGhlIGZ1bmN0aW9uIGhhcyBub3QgYmVlbiByZWdpc3RlcmVkLlxuICpcbiAqIEBwYXJhbSB7bHVuci5QaXBlbGluZUZ1bmN0aW9ufSBleGlzdGluZ0ZuIC0gQSBmdW5jdGlvbiB0aGF0IGFscmVhZHkgZXhpc3RzIGluIHRoZSBwaXBlbGluZS5cbiAqIEBwYXJhbSB7bHVuci5QaXBlbGluZUZ1bmN0aW9ufSBuZXdGbiAtIFRoZSBuZXcgZnVuY3Rpb24gdG8gYWRkIHRvIHRoZSBwaXBlbGluZS5cbiAqL1xubHVuci5QaXBlbGluZS5wcm90b3R5cGUuYWZ0ZXIgPSBmdW5jdGlvbiAoZXhpc3RpbmdGbiwgbmV3Rm4pIHtcbiAgbHVuci5QaXBlbGluZS53YXJuSWZGdW5jdGlvbk5vdFJlZ2lzdGVyZWQobmV3Rm4pXG5cbiAgdmFyIHBvcyA9IHRoaXMuX3N0YWNrLmluZGV4T2YoZXhpc3RpbmdGbilcbiAgaWYgKHBvcyA9PSAtMSkge1xuICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGZpbmQgZXhpc3RpbmdGbicpXG4gIH1cblxuICBwb3MgPSBwb3MgKyAxXG4gIHRoaXMuX3N0YWNrLnNwbGljZShwb3MsIDAsIG5ld0ZuKVxufVxuXG4vKipcbiAqIEFkZHMgYSBzaW5nbGUgZnVuY3Rpb24gYmVmb3JlIGEgZnVuY3Rpb24gdGhhdCBhbHJlYWR5IGV4aXN0cyBpbiB0aGVcbiAqIHBpcGVsaW5lLlxuICpcbiAqIExvZ3MgYSB3YXJuaW5nIGlmIHRoZSBmdW5jdGlvbiBoYXMgbm90IGJlZW4gcmVnaXN0ZXJlZC5cbiAqXG4gKiBAcGFyYW0ge2x1bnIuUGlwZWxpbmVGdW5jdGlvbn0gZXhpc3RpbmdGbiAtIEEgZnVuY3Rpb24gdGhhdCBhbHJlYWR5IGV4aXN0cyBpbiB0aGUgcGlwZWxpbmUuXG4gKiBAcGFyYW0ge2x1bnIuUGlwZWxpbmVGdW5jdGlvbn0gbmV3Rm4gLSBUaGUgbmV3IGZ1bmN0aW9uIHRvIGFkZCB0byB0aGUgcGlwZWxpbmUuXG4gKi9cbmx1bnIuUGlwZWxpbmUucHJvdG90eXBlLmJlZm9yZSA9IGZ1bmN0aW9uIChleGlzdGluZ0ZuLCBuZXdGbikge1xuICBsdW5yLlBpcGVsaW5lLndhcm5JZkZ1bmN0aW9uTm90UmVnaXN0ZXJlZChuZXdGbilcblxuICB2YXIgcG9zID0gdGhpcy5fc3RhY2suaW5kZXhPZihleGlzdGluZ0ZuKVxuICBpZiAocG9zID09IC0xKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgZmluZCBleGlzdGluZ0ZuJylcbiAgfVxuXG4gIHRoaXMuX3N0YWNrLnNwbGljZShwb3MsIDAsIG5ld0ZuKVxufVxuXG4vKipcbiAqIFJlbW92ZXMgYSBmdW5jdGlvbiBmcm9tIHRoZSBwaXBlbGluZS5cbiAqXG4gKiBAcGFyYW0ge2x1bnIuUGlwZWxpbmVGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIHJlbW92ZSBmcm9tIHRoZSBwaXBlbGluZS5cbiAqL1xubHVuci5QaXBlbGluZS5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKGZuKSB7XG4gIHZhciBwb3MgPSB0aGlzLl9zdGFjay5pbmRleE9mKGZuKVxuICBpZiAocG9zID09IC0xKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICB0aGlzLl9zdGFjay5zcGxpY2UocG9zLCAxKVxufVxuXG4vKipcbiAqIFJ1bnMgdGhlIGN1cnJlbnQgbGlzdCBvZiBmdW5jdGlvbnMgdGhhdCBtYWtlIHVwIHRoZSBwaXBlbGluZSBhZ2FpbnN0IHRoZVxuICogcGFzc2VkIHRva2Vucy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSB0b2tlbnMgVGhlIHRva2VucyB0byBydW4gdGhyb3VnaCB0aGUgcGlwZWxpbmUuXG4gKiBAcmV0dXJucyB7QXJyYXl9XG4gKi9cbmx1bnIuUGlwZWxpbmUucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICh0b2tlbnMpIHtcbiAgdmFyIHN0YWNrTGVuZ3RoID0gdGhpcy5fc3RhY2subGVuZ3RoXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGFja0xlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGZuID0gdGhpcy5fc3RhY2tbaV1cbiAgICB2YXIgbWVtbyA9IFtdXG5cbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRva2Vucy5sZW5ndGg7IGorKykge1xuICAgICAgdmFyIHJlc3VsdCA9IGZuKHRva2Vuc1tqXSwgaiwgdG9rZW5zKVxuXG4gICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDAgfHwgcmVzdWx0ID09PSAnJykgY29udGludWVcblxuICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgcmVzdWx0Lmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgbWVtby5wdXNoKHJlc3VsdFtrXSlcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbWVtby5wdXNoKHJlc3VsdClcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0b2tlbnMgPSBtZW1vXG4gIH1cblxuICByZXR1cm4gdG9rZW5zXG59XG5cbi8qKlxuICogQ29udmVuaWVuY2UgbWV0aG9kIGZvciBwYXNzaW5nIGEgc3RyaW5nIHRocm91Z2ggYSBwaXBlbGluZSBhbmQgZ2V0dGluZ1xuICogc3RyaW5ncyBvdXQuIFRoaXMgbWV0aG9kIHRha2VzIGNhcmUgb2Ygd3JhcHBpbmcgdGhlIHBhc3NlZCBzdHJpbmcgaW4gYVxuICogdG9rZW4gYW5kIG1hcHBpbmcgdGhlIHJlc3VsdGluZyB0b2tlbnMgYmFjayB0byBzdHJpbmdzLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgLSBUaGUgc3RyaW5nIHRvIHBhc3MgdGhyb3VnaCB0aGUgcGlwZWxpbmUuXG4gKiBAcmV0dXJucyB7c3RyaW5nW119XG4gKi9cbmx1bnIuUGlwZWxpbmUucHJvdG90eXBlLnJ1blN0cmluZyA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgdmFyIHRva2VuID0gbmV3IGx1bnIuVG9rZW4gKHN0cilcblxuICByZXR1cm4gdGhpcy5ydW4oW3Rva2VuXSkubWFwKGZ1bmN0aW9uICh0KSB7XG4gICAgcmV0dXJuIHQudG9TdHJpbmcoKVxuICB9KVxufVxuXG4vKipcbiAqIFJlc2V0cyB0aGUgcGlwZWxpbmUgYnkgcmVtb3ZpbmcgYW55IGV4aXN0aW5nIHByb2Nlc3NvcnMuXG4gKlxuICovXG5sdW5yLlBpcGVsaW5lLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5fc3RhY2sgPSBbXVxufVxuXG4vKipcbiAqIFJldHVybnMgYSByZXByZXNlbnRhdGlvbiBvZiB0aGUgcGlwZWxpbmUgcmVhZHkgZm9yIHNlcmlhbGlzYXRpb24uXG4gKlxuICogTG9ncyBhIHdhcm5pbmcgaWYgdGhlIGZ1bmN0aW9uIGhhcyBub3QgYmVlbiByZWdpc3RlcmVkLlxuICpcbiAqIEByZXR1cm5zIHtBcnJheX1cbiAqL1xubHVuci5QaXBlbGluZS5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5fc3RhY2subWFwKGZ1bmN0aW9uIChmbikge1xuICAgIGx1bnIuUGlwZWxpbmUud2FybklmRnVuY3Rpb25Ob3RSZWdpc3RlcmVkKGZuKVxuXG4gICAgcmV0dXJuIGZuLmxhYmVsXG4gIH0pXG59XG4vKiFcbiAqIGx1bnIuVmVjdG9yXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTggT2xpdmVyIE5pZ2h0aW5nYWxlXG4gKi9cblxuLyoqXG4gKiBBIHZlY3RvciBpcyB1c2VkIHRvIGNvbnN0cnVjdCB0aGUgdmVjdG9yIHNwYWNlIG9mIGRvY3VtZW50cyBhbmQgcXVlcmllcy4gVGhlc2VcbiAqIHZlY3RvcnMgc3VwcG9ydCBvcGVyYXRpb25zIHRvIGRldGVybWluZSB0aGUgc2ltaWxhcml0eSBiZXR3ZWVuIHR3byBkb2N1bWVudHMgb3JcbiAqIGEgZG9jdW1lbnQgYW5kIGEgcXVlcnkuXG4gKlxuICogTm9ybWFsbHkgbm8gcGFyYW1ldGVycyBhcmUgcmVxdWlyZWQgZm9yIGluaXRpYWxpemluZyBhIHZlY3RvciwgYnV0IGluIHRoZSBjYXNlIG9mXG4gKiBsb2FkaW5nIGEgcHJldmlvdXNseSBkdW1wZWQgdmVjdG9yIHRoZSByYXcgZWxlbWVudHMgY2FuIGJlIHByb3ZpZGVkIHRvIHRoZSBjb25zdHJ1Y3Rvci5cbiAqXG4gKiBGb3IgcGVyZm9ybWFuY2UgcmVhc29ucyB2ZWN0b3JzIGFyZSBpbXBsZW1lbnRlZCB3aXRoIGEgZmxhdCBhcnJheSwgd2hlcmUgYW4gZWxlbWVudHNcbiAqIGluZGV4IGlzIGltbWVkaWF0ZWx5IGZvbGxvd2VkIGJ5IGl0cyB2YWx1ZS4gRS5nLiBbaW5kZXgsIHZhbHVlLCBpbmRleCwgdmFsdWVdLiBUaGlzXG4gKiBhbGxvd3MgdGhlIHVuZGVybHlpbmcgYXJyYXkgdG8gYmUgYXMgc3BhcnNlIGFzIHBvc3NpYmxlIGFuZCBzdGlsbCBvZmZlciBkZWNlbnRcbiAqIHBlcmZvcm1hbmNlIHdoZW4gYmVpbmcgdXNlZCBmb3IgdmVjdG9yIGNhbGN1bGF0aW9ucy5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7TnVtYmVyW119IFtlbGVtZW50c10gLSBUaGUgZmxhdCBsaXN0IG9mIGVsZW1lbnQgaW5kZXggYW5kIGVsZW1lbnQgdmFsdWUgcGFpcnMuXG4gKi9cbmx1bnIuVmVjdG9yID0gZnVuY3Rpb24gKGVsZW1lbnRzKSB7XG4gIHRoaXMuX21hZ25pdHVkZSA9IDBcbiAgdGhpcy5lbGVtZW50cyA9IGVsZW1lbnRzIHx8IFtdXG59XG5cblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBwb3NpdGlvbiB3aXRoaW4gdGhlIHZlY3RvciB0byBpbnNlcnQgYSBnaXZlbiBpbmRleC5cbiAqXG4gKiBUaGlzIGlzIHVzZWQgaW50ZXJuYWxseSBieSBpbnNlcnQgYW5kIHVwc2VydC4gSWYgdGhlcmUgYXJlIGR1cGxpY2F0ZSBpbmRleGVzIHRoZW5cbiAqIHRoZSBwb3NpdGlvbiBpcyByZXR1cm5lZCBhcyBpZiB0aGUgdmFsdWUgZm9yIHRoYXQgaW5kZXggd2VyZSB0byBiZSB1cGRhdGVkLCBidXQgaXRcbiAqIGlzIHRoZSBjYWxsZXJzIHJlc3BvbnNpYmlsaXR5IHRvIGNoZWNrIHdoZXRoZXIgdGhlcmUgaXMgYSBkdXBsaWNhdGUgYXQgdGhhdCBpbmRleFxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBpbnNlcnRJZHggLSBUaGUgaW5kZXggYXQgd2hpY2ggdGhlIGVsZW1lbnQgc2hvdWxkIGJlIGluc2VydGVkLlxuICogQHJldHVybnMge051bWJlcn1cbiAqL1xubHVuci5WZWN0b3IucHJvdG90eXBlLnBvc2l0aW9uRm9ySW5kZXggPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgLy8gRm9yIGFuIGVtcHR5IHZlY3RvciB0aGUgdHVwbGUgY2FuIGJlIGluc2VydGVkIGF0IHRoZSBiZWdpbm5pbmdcbiAgaWYgKHRoaXMuZWxlbWVudHMubGVuZ3RoID09IDApIHtcbiAgICByZXR1cm4gMFxuICB9XG5cbiAgdmFyIHN0YXJ0ID0gMCxcbiAgICAgIGVuZCA9IHRoaXMuZWxlbWVudHMubGVuZ3RoIC8gMixcbiAgICAgIHNsaWNlTGVuZ3RoID0gZW5kIC0gc3RhcnQsXG4gICAgICBwaXZvdFBvaW50ID0gTWF0aC5mbG9vcihzbGljZUxlbmd0aCAvIDIpLFxuICAgICAgcGl2b3RJbmRleCA9IHRoaXMuZWxlbWVudHNbcGl2b3RQb2ludCAqIDJdXG5cbiAgd2hpbGUgKHNsaWNlTGVuZ3RoID4gMSkge1xuICAgIGlmIChwaXZvdEluZGV4IDwgaW5kZXgpIHtcbiAgICAgIHN0YXJ0ID0gcGl2b3RQb2ludFxuICAgIH1cblxuICAgIGlmIChwaXZvdEluZGV4ID4gaW5kZXgpIHtcbiAgICAgIGVuZCA9IHBpdm90UG9pbnRcbiAgICB9XG5cbiAgICBpZiAocGl2b3RJbmRleCA9PSBpbmRleCkge1xuICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICBzbGljZUxlbmd0aCA9IGVuZCAtIHN0YXJ0XG4gICAgcGl2b3RQb2ludCA9IHN0YXJ0ICsgTWF0aC5mbG9vcihzbGljZUxlbmd0aCAvIDIpXG4gICAgcGl2b3RJbmRleCA9IHRoaXMuZWxlbWVudHNbcGl2b3RQb2ludCAqIDJdXG4gIH1cblxuICBpZiAocGl2b3RJbmRleCA9PSBpbmRleCkge1xuICAgIHJldHVybiBwaXZvdFBvaW50ICogMlxuICB9XG5cbiAgaWYgKHBpdm90SW5kZXggPiBpbmRleCkge1xuICAgIHJldHVybiBwaXZvdFBvaW50ICogMlxuICB9XG5cbiAgaWYgKHBpdm90SW5kZXggPCBpbmRleCkge1xuICAgIHJldHVybiAocGl2b3RQb2ludCArIDEpICogMlxuICB9XG59XG5cbi8qKlxuICogSW5zZXJ0cyBhbiBlbGVtZW50IGF0IGFuIGluZGV4IHdpdGhpbiB0aGUgdmVjdG9yLlxuICpcbiAqIERvZXMgbm90IGFsbG93IGR1cGxpY2F0ZXMsIHdpbGwgdGhyb3cgYW4gZXJyb3IgaWYgdGhlcmUgaXMgYWxyZWFkeSBhbiBlbnRyeVxuICogZm9yIHRoaXMgaW5kZXguXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IGluc2VydElkeCAtIFRoZSBpbmRleCBhdCB3aGljaCB0aGUgZWxlbWVudCBzaG91bGQgYmUgaW5zZXJ0ZWQuXG4gKiBAcGFyYW0ge051bWJlcn0gdmFsIC0gVGhlIHZhbHVlIHRvIGJlIGluc2VydGVkIGludG8gdGhlIHZlY3Rvci5cbiAqL1xubHVuci5WZWN0b3IucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uIChpbnNlcnRJZHgsIHZhbCkge1xuICB0aGlzLnVwc2VydChpbnNlcnRJZHgsIHZhbCwgZnVuY3Rpb24gKCkge1xuICAgIHRocm93IFwiZHVwbGljYXRlIGluZGV4XCJcbiAgfSlcbn1cblxuLyoqXG4gKiBJbnNlcnRzIG9yIHVwZGF0ZXMgYW4gZXhpc3RpbmcgaW5kZXggd2l0aGluIHRoZSB2ZWN0b3IuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IGluc2VydElkeCAtIFRoZSBpbmRleCBhdCB3aGljaCB0aGUgZWxlbWVudCBzaG91bGQgYmUgaW5zZXJ0ZWQuXG4gKiBAcGFyYW0ge051bWJlcn0gdmFsIC0gVGhlIHZhbHVlIHRvIGJlIGluc2VydGVkIGludG8gdGhlIHZlY3Rvci5cbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGZuIC0gQSBmdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCBmb3IgdXBkYXRlcywgdGhlIGV4aXN0aW5nIHZhbHVlIGFuZCB0aGVcbiAqIHJlcXVlc3RlZCB2YWx1ZSBhcmUgcGFzc2VkIGFzIGFyZ3VtZW50c1xuICovXG5sdW5yLlZlY3Rvci5wcm90b3R5cGUudXBzZXJ0ID0gZnVuY3Rpb24gKGluc2VydElkeCwgdmFsLCBmbikge1xuICB0aGlzLl9tYWduaXR1ZGUgPSAwXG4gIHZhciBwb3NpdGlvbiA9IHRoaXMucG9zaXRpb25Gb3JJbmRleChpbnNlcnRJZHgpXG5cbiAgaWYgKHRoaXMuZWxlbWVudHNbcG9zaXRpb25dID09IGluc2VydElkeCkge1xuICAgIHRoaXMuZWxlbWVudHNbcG9zaXRpb24gKyAxXSA9IGZuKHRoaXMuZWxlbWVudHNbcG9zaXRpb24gKyAxXSwgdmFsKVxuICB9IGVsc2Uge1xuICAgIHRoaXMuZWxlbWVudHMuc3BsaWNlKHBvc2l0aW9uLCAwLCBpbnNlcnRJZHgsIHZhbClcbiAgfVxufVxuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIG1hZ25pdHVkZSBvZiB0aGlzIHZlY3Rvci5cbiAqXG4gKiBAcmV0dXJucyB7TnVtYmVyfVxuICovXG5sdW5yLlZlY3Rvci5wcm90b3R5cGUubWFnbml0dWRlID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy5fbWFnbml0dWRlKSByZXR1cm4gdGhpcy5fbWFnbml0dWRlXG5cbiAgdmFyIHN1bU9mU3F1YXJlcyA9IDAsXG4gICAgICBlbGVtZW50c0xlbmd0aCA9IHRoaXMuZWxlbWVudHMubGVuZ3RoXG5cbiAgZm9yICh2YXIgaSA9IDE7IGkgPCBlbGVtZW50c0xlbmd0aDsgaSArPSAyKSB7XG4gICAgdmFyIHZhbCA9IHRoaXMuZWxlbWVudHNbaV1cbiAgICBzdW1PZlNxdWFyZXMgKz0gdmFsICogdmFsXG4gIH1cblxuICByZXR1cm4gdGhpcy5fbWFnbml0dWRlID0gTWF0aC5zcXJ0KHN1bU9mU3F1YXJlcylcbn1cblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBkb3QgcHJvZHVjdCBvZiB0aGlzIHZlY3RvciBhbmQgYW5vdGhlciB2ZWN0b3IuXG4gKlxuICogQHBhcmFtIHtsdW5yLlZlY3Rvcn0gb3RoZXJWZWN0b3IgLSBUaGUgdmVjdG9yIHRvIGNvbXB1dGUgdGhlIGRvdCBwcm9kdWN0IHdpdGguXG4gKiBAcmV0dXJucyB7TnVtYmVyfVxuICovXG5sdW5yLlZlY3Rvci5wcm90b3R5cGUuZG90ID0gZnVuY3Rpb24gKG90aGVyVmVjdG9yKSB7XG4gIHZhciBkb3RQcm9kdWN0ID0gMCxcbiAgICAgIGEgPSB0aGlzLmVsZW1lbnRzLCBiID0gb3RoZXJWZWN0b3IuZWxlbWVudHMsXG4gICAgICBhTGVuID0gYS5sZW5ndGgsIGJMZW4gPSBiLmxlbmd0aCxcbiAgICAgIGFWYWwgPSAwLCBiVmFsID0gMCxcbiAgICAgIGkgPSAwLCBqID0gMFxuXG4gIHdoaWxlIChpIDwgYUxlbiAmJiBqIDwgYkxlbikge1xuICAgIGFWYWwgPSBhW2ldLCBiVmFsID0gYltqXVxuICAgIGlmIChhVmFsIDwgYlZhbCkge1xuICAgICAgaSArPSAyXG4gICAgfSBlbHNlIGlmIChhVmFsID4gYlZhbCkge1xuICAgICAgaiArPSAyXG4gICAgfSBlbHNlIGlmIChhVmFsID09IGJWYWwpIHtcbiAgICAgIGRvdFByb2R1Y3QgKz0gYVtpICsgMV0gKiBiW2ogKyAxXVxuICAgICAgaSArPSAyXG4gICAgICBqICs9IDJcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZG90UHJvZHVjdFxufVxuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGNvc2luZSBzaW1pbGFyaXR5IGJldHdlZW4gdGhpcyB2ZWN0b3IgYW5kIGFub3RoZXJcbiAqIHZlY3Rvci5cbiAqXG4gKiBAcGFyYW0ge2x1bnIuVmVjdG9yfSBvdGhlclZlY3RvciAtIFRoZSBvdGhlciB2ZWN0b3IgdG8gY2FsY3VsYXRlIHRoZVxuICogc2ltaWxhcml0eSB3aXRoLlxuICogQHJldHVybnMge051bWJlcn1cbiAqL1xubHVuci5WZWN0b3IucHJvdG90eXBlLnNpbWlsYXJpdHkgPSBmdW5jdGlvbiAob3RoZXJWZWN0b3IpIHtcbiAgcmV0dXJuIHRoaXMuZG90KG90aGVyVmVjdG9yKSAvICh0aGlzLm1hZ25pdHVkZSgpICogb3RoZXJWZWN0b3IubWFnbml0dWRlKCkpXG59XG5cbi8qKlxuICogQ29udmVydHMgdGhlIHZlY3RvciB0byBhbiBhcnJheSBvZiB0aGUgZWxlbWVudHMgd2l0aGluIHRoZSB2ZWN0b3IuXG4gKlxuICogQHJldHVybnMge051bWJlcltdfVxuICovXG5sdW5yLlZlY3Rvci5wcm90b3R5cGUudG9BcnJheSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIG91dHB1dCA9IG5ldyBBcnJheSAodGhpcy5lbGVtZW50cy5sZW5ndGggLyAyKVxuXG4gIGZvciAodmFyIGkgPSAxLCBqID0gMDsgaSA8IHRoaXMuZWxlbWVudHMubGVuZ3RoOyBpICs9IDIsIGorKykge1xuICAgIG91dHB1dFtqXSA9IHRoaXMuZWxlbWVudHNbaV1cbiAgfVxuXG4gIHJldHVybiBvdXRwdXRcbn1cblxuLyoqXG4gKiBBIEpTT04gc2VyaWFsaXphYmxlIHJlcHJlc2VudGF0aW9uIG9mIHRoZSB2ZWN0b3IuXG4gKlxuICogQHJldHVybnMge051bWJlcltdfVxuICovXG5sdW5yLlZlY3Rvci5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5lbGVtZW50c1xufVxuLyogZXNsaW50LWRpc2FibGUgKi9cbi8qIVxuICogbHVuci5zdGVtbWVyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTggT2xpdmVyIE5pZ2h0aW5nYWxlXG4gKiBJbmNsdWRlcyBjb2RlIGZyb20gLSBodHRwOi8vdGFydGFydXMub3JnL35tYXJ0aW4vUG9ydGVyU3RlbW1lci9qcy50eHRcbiAqL1xuXG4vKipcbiAqIGx1bnIuc3RlbW1lciBpcyBhbiBlbmdsaXNoIGxhbmd1YWdlIHN0ZW1tZXIsIHRoaXMgaXMgYSBKYXZhU2NyaXB0XG4gKiBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgUG9ydGVyU3RlbW1lciB0YWtlbiBmcm9tIGh0dHA6Ly90YXJ0YXJ1cy5vcmcvfm1hcnRpblxuICpcbiAqIEBzdGF0aWNcbiAqIEBpbXBsZW1lbnRzIHtsdW5yLlBpcGVsaW5lRnVuY3Rpb259XG4gKiBAcGFyYW0ge2x1bnIuVG9rZW59IHRva2VuIC0gVGhlIHN0cmluZyB0byBzdGVtXG4gKiBAcmV0dXJucyB7bHVuci5Ub2tlbn1cbiAqIEBzZWUge0BsaW5rIGx1bnIuUGlwZWxpbmV9XG4gKi9cbmx1bnIuc3RlbW1lciA9IChmdW5jdGlvbigpe1xuICB2YXIgc3RlcDJsaXN0ID0ge1xuICAgICAgXCJhdGlvbmFsXCIgOiBcImF0ZVwiLFxuICAgICAgXCJ0aW9uYWxcIiA6IFwidGlvblwiLFxuICAgICAgXCJlbmNpXCIgOiBcImVuY2VcIixcbiAgICAgIFwiYW5jaVwiIDogXCJhbmNlXCIsXG4gICAgICBcIml6ZXJcIiA6IFwiaXplXCIsXG4gICAgICBcImJsaVwiIDogXCJibGVcIixcbiAgICAgIFwiYWxsaVwiIDogXCJhbFwiLFxuICAgICAgXCJlbnRsaVwiIDogXCJlbnRcIixcbiAgICAgIFwiZWxpXCIgOiBcImVcIixcbiAgICAgIFwib3VzbGlcIiA6IFwib3VzXCIsXG4gICAgICBcIml6YXRpb25cIiA6IFwiaXplXCIsXG4gICAgICBcImF0aW9uXCIgOiBcImF0ZVwiLFxuICAgICAgXCJhdG9yXCIgOiBcImF0ZVwiLFxuICAgICAgXCJhbGlzbVwiIDogXCJhbFwiLFxuICAgICAgXCJpdmVuZXNzXCIgOiBcIml2ZVwiLFxuICAgICAgXCJmdWxuZXNzXCIgOiBcImZ1bFwiLFxuICAgICAgXCJvdXNuZXNzXCIgOiBcIm91c1wiLFxuICAgICAgXCJhbGl0aVwiIDogXCJhbFwiLFxuICAgICAgXCJpdml0aVwiIDogXCJpdmVcIixcbiAgICAgIFwiYmlsaXRpXCIgOiBcImJsZVwiLFxuICAgICAgXCJsb2dpXCIgOiBcImxvZ1wiXG4gICAgfSxcblxuICAgIHN0ZXAzbGlzdCA9IHtcbiAgICAgIFwiaWNhdGVcIiA6IFwiaWNcIixcbiAgICAgIFwiYXRpdmVcIiA6IFwiXCIsXG4gICAgICBcImFsaXplXCIgOiBcImFsXCIsXG4gICAgICBcImljaXRpXCIgOiBcImljXCIsXG4gICAgICBcImljYWxcIiA6IFwiaWNcIixcbiAgICAgIFwiZnVsXCIgOiBcIlwiLFxuICAgICAgXCJuZXNzXCIgOiBcIlwiXG4gICAgfSxcblxuICAgIGMgPSBcIlteYWVpb3VdXCIsICAgICAgICAgIC8vIGNvbnNvbmFudFxuICAgIHYgPSBcIlthZWlvdXldXCIsICAgICAgICAgIC8vIHZvd2VsXG4gICAgQyA9IGMgKyBcIlteYWVpb3V5XSpcIiwgICAgLy8gY29uc29uYW50IHNlcXVlbmNlXG4gICAgViA9IHYgKyBcIlthZWlvdV0qXCIsICAgICAgLy8gdm93ZWwgc2VxdWVuY2VcblxuICAgIG1ncjAgPSBcIl4oXCIgKyBDICsgXCIpP1wiICsgViArIEMsICAgICAgICAgICAgICAgLy8gW0NdVkMuLi4gaXMgbT4wXG4gICAgbWVxMSA9IFwiXihcIiArIEMgKyBcIik/XCIgKyBWICsgQyArIFwiKFwiICsgViArIFwiKT8kXCIsICAvLyBbQ11WQ1tWXSBpcyBtPTFcbiAgICBtZ3IxID0gXCJeKFwiICsgQyArIFwiKT9cIiArIFYgKyBDICsgViArIEMsICAgICAgIC8vIFtDXVZDVkMuLi4gaXMgbT4xXG4gICAgc192ID0gXCJeKFwiICsgQyArIFwiKT9cIiArIHY7ICAgICAgICAgICAgICAgICAgIC8vIHZvd2VsIGluIHN0ZW1cblxuICB2YXIgcmVfbWdyMCA9IG5ldyBSZWdFeHAobWdyMCk7XG4gIHZhciByZV9tZ3IxID0gbmV3IFJlZ0V4cChtZ3IxKTtcbiAgdmFyIHJlX21lcTEgPSBuZXcgUmVnRXhwKG1lcTEpO1xuICB2YXIgcmVfc192ID0gbmV3IFJlZ0V4cChzX3YpO1xuXG4gIHZhciByZV8xYSA9IC9eKC4rPykoc3N8aSllcyQvO1xuICB2YXIgcmUyXzFhID0gL14oLis/KShbXnNdKXMkLztcbiAgdmFyIHJlXzFiID0gL14oLis/KWVlZCQvO1xuICB2YXIgcmUyXzFiID0gL14oLis/KShlZHxpbmcpJC87XG4gIHZhciByZV8xYl8yID0gLy4kLztcbiAgdmFyIHJlMl8xYl8yID0gLyhhdHxibHxpeikkLztcbiAgdmFyIHJlM18xYl8yID0gbmV3IFJlZ0V4cChcIihbXmFlaW91eWxzel0pXFxcXDEkXCIpO1xuICB2YXIgcmU0XzFiXzIgPSBuZXcgUmVnRXhwKFwiXlwiICsgQyArIHYgKyBcIlteYWVpb3V3eHldJFwiKTtcblxuICB2YXIgcmVfMWMgPSAvXiguKz9bXmFlaW91XSl5JC87XG4gIHZhciByZV8yID0gL14oLis/KShhdGlvbmFsfHRpb25hbHxlbmNpfGFuY2l8aXplcnxibGl8YWxsaXxlbnRsaXxlbGl8b3VzbGl8aXphdGlvbnxhdGlvbnxhdG9yfGFsaXNtfGl2ZW5lc3N8ZnVsbmVzc3xvdXNuZXNzfGFsaXRpfGl2aXRpfGJpbGl0aXxsb2dpKSQvO1xuXG4gIHZhciByZV8zID0gL14oLis/KShpY2F0ZXxhdGl2ZXxhbGl6ZXxpY2l0aXxpY2FsfGZ1bHxuZXNzKSQvO1xuXG4gIHZhciByZV80ID0gL14oLis/KShhbHxhbmNlfGVuY2V8ZXJ8aWN8YWJsZXxpYmxlfGFudHxlbWVudHxtZW50fGVudHxvdXxpc218YXRlfGl0aXxvdXN8aXZlfGl6ZSkkLztcbiAgdmFyIHJlMl80ID0gL14oLis/KShzfHQpKGlvbikkLztcblxuICB2YXIgcmVfNSA9IC9eKC4rPyllJC87XG4gIHZhciByZV81XzEgPSAvbGwkLztcbiAgdmFyIHJlM181ID0gbmV3IFJlZ0V4cChcIl5cIiArIEMgKyB2ICsgXCJbXmFlaW91d3h5XSRcIik7XG5cbiAgdmFyIHBvcnRlclN0ZW1tZXIgPSBmdW5jdGlvbiBwb3J0ZXJTdGVtbWVyKHcpIHtcbiAgICB2YXIgc3RlbSxcbiAgICAgIHN1ZmZpeCxcbiAgICAgIGZpcnN0Y2gsXG4gICAgICByZSxcbiAgICAgIHJlMixcbiAgICAgIHJlMyxcbiAgICAgIHJlNDtcblxuICAgIGlmICh3Lmxlbmd0aCA8IDMpIHsgcmV0dXJuIHc7IH1cblxuICAgIGZpcnN0Y2ggPSB3LnN1YnN0cigwLDEpO1xuICAgIGlmIChmaXJzdGNoID09IFwieVwiKSB7XG4gICAgICB3ID0gZmlyc3RjaC50b1VwcGVyQ2FzZSgpICsgdy5zdWJzdHIoMSk7XG4gICAgfVxuXG4gICAgLy8gU3RlcCAxYVxuICAgIHJlID0gcmVfMWFcbiAgICByZTIgPSByZTJfMWE7XG5cbiAgICBpZiAocmUudGVzdCh3KSkgeyB3ID0gdy5yZXBsYWNlKHJlLFwiJDEkMlwiKTsgfVxuICAgIGVsc2UgaWYgKHJlMi50ZXN0KHcpKSB7IHcgPSB3LnJlcGxhY2UocmUyLFwiJDEkMlwiKTsgfVxuXG4gICAgLy8gU3RlcCAxYlxuICAgIHJlID0gcmVfMWI7XG4gICAgcmUyID0gcmUyXzFiO1xuICAgIGlmIChyZS50ZXN0KHcpKSB7XG4gICAgICB2YXIgZnAgPSByZS5leGVjKHcpO1xuICAgICAgcmUgPSByZV9tZ3IwO1xuICAgICAgaWYgKHJlLnRlc3QoZnBbMV0pKSB7XG4gICAgICAgIHJlID0gcmVfMWJfMjtcbiAgICAgICAgdyA9IHcucmVwbGFjZShyZSxcIlwiKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHJlMi50ZXN0KHcpKSB7XG4gICAgICB2YXIgZnAgPSByZTIuZXhlYyh3KTtcbiAgICAgIHN0ZW0gPSBmcFsxXTtcbiAgICAgIHJlMiA9IHJlX3NfdjtcbiAgICAgIGlmIChyZTIudGVzdChzdGVtKSkge1xuICAgICAgICB3ID0gc3RlbTtcbiAgICAgICAgcmUyID0gcmUyXzFiXzI7XG4gICAgICAgIHJlMyA9IHJlM18xYl8yO1xuICAgICAgICByZTQgPSByZTRfMWJfMjtcbiAgICAgICAgaWYgKHJlMi50ZXN0KHcpKSB7IHcgPSB3ICsgXCJlXCI7IH1cbiAgICAgICAgZWxzZSBpZiAocmUzLnRlc3QodykpIHsgcmUgPSByZV8xYl8yOyB3ID0gdy5yZXBsYWNlKHJlLFwiXCIpOyB9XG4gICAgICAgIGVsc2UgaWYgKHJlNC50ZXN0KHcpKSB7IHcgPSB3ICsgXCJlXCI7IH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTdGVwIDFjIC0gcmVwbGFjZSBzdWZmaXggeSBvciBZIGJ5IGkgaWYgcHJlY2VkZWQgYnkgYSBub24tdm93ZWwgd2hpY2ggaXMgbm90IHRoZSBmaXJzdCBsZXR0ZXIgb2YgdGhlIHdvcmQgKHNvIGNyeSAtPiBjcmksIGJ5IC0+IGJ5LCBzYXkgLT4gc2F5KVxuICAgIHJlID0gcmVfMWM7XG4gICAgaWYgKHJlLnRlc3QodykpIHtcbiAgICAgIHZhciBmcCA9IHJlLmV4ZWModyk7XG4gICAgICBzdGVtID0gZnBbMV07XG4gICAgICB3ID0gc3RlbSArIFwiaVwiO1xuICAgIH1cblxuICAgIC8vIFN0ZXAgMlxuICAgIHJlID0gcmVfMjtcbiAgICBpZiAocmUudGVzdCh3KSkge1xuICAgICAgdmFyIGZwID0gcmUuZXhlYyh3KTtcbiAgICAgIHN0ZW0gPSBmcFsxXTtcbiAgICAgIHN1ZmZpeCA9IGZwWzJdO1xuICAgICAgcmUgPSByZV9tZ3IwO1xuICAgICAgaWYgKHJlLnRlc3Qoc3RlbSkpIHtcbiAgICAgICAgdyA9IHN0ZW0gKyBzdGVwMmxpc3Rbc3VmZml4XTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTdGVwIDNcbiAgICByZSA9IHJlXzM7XG4gICAgaWYgKHJlLnRlc3QodykpIHtcbiAgICAgIHZhciBmcCA9IHJlLmV4ZWModyk7XG4gICAgICBzdGVtID0gZnBbMV07XG4gICAgICBzdWZmaXggPSBmcFsyXTtcbiAgICAgIHJlID0gcmVfbWdyMDtcbiAgICAgIGlmIChyZS50ZXN0KHN0ZW0pKSB7XG4gICAgICAgIHcgPSBzdGVtICsgc3RlcDNsaXN0W3N1ZmZpeF07XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gU3RlcCA0XG4gICAgcmUgPSByZV80O1xuICAgIHJlMiA9IHJlMl80O1xuICAgIGlmIChyZS50ZXN0KHcpKSB7XG4gICAgICB2YXIgZnAgPSByZS5leGVjKHcpO1xuICAgICAgc3RlbSA9IGZwWzFdO1xuICAgICAgcmUgPSByZV9tZ3IxO1xuICAgICAgaWYgKHJlLnRlc3Qoc3RlbSkpIHtcbiAgICAgICAgdyA9IHN0ZW07XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChyZTIudGVzdCh3KSkge1xuICAgICAgdmFyIGZwID0gcmUyLmV4ZWModyk7XG4gICAgICBzdGVtID0gZnBbMV0gKyBmcFsyXTtcbiAgICAgIHJlMiA9IHJlX21ncjE7XG4gICAgICBpZiAocmUyLnRlc3Qoc3RlbSkpIHtcbiAgICAgICAgdyA9IHN0ZW07XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gU3RlcCA1XG4gICAgcmUgPSByZV81O1xuICAgIGlmIChyZS50ZXN0KHcpKSB7XG4gICAgICB2YXIgZnAgPSByZS5leGVjKHcpO1xuICAgICAgc3RlbSA9IGZwWzFdO1xuICAgICAgcmUgPSByZV9tZ3IxO1xuICAgICAgcmUyID0gcmVfbWVxMTtcbiAgICAgIHJlMyA9IHJlM181O1xuICAgICAgaWYgKHJlLnRlc3Qoc3RlbSkgfHwgKHJlMi50ZXN0KHN0ZW0pICYmICEocmUzLnRlc3Qoc3RlbSkpKSkge1xuICAgICAgICB3ID0gc3RlbTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZSA9IHJlXzVfMTtcbiAgICByZTIgPSByZV9tZ3IxO1xuICAgIGlmIChyZS50ZXN0KHcpICYmIHJlMi50ZXN0KHcpKSB7XG4gICAgICByZSA9IHJlXzFiXzI7XG4gICAgICB3ID0gdy5yZXBsYWNlKHJlLFwiXCIpO1xuICAgIH1cblxuICAgIC8vIGFuZCB0dXJuIGluaXRpYWwgWSBiYWNrIHRvIHlcblxuICAgIGlmIChmaXJzdGNoID09IFwieVwiKSB7XG4gICAgICB3ID0gZmlyc3RjaC50b0xvd2VyQ2FzZSgpICsgdy5zdWJzdHIoMSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHc7XG4gIH07XG5cbiAgcmV0dXJuIGZ1bmN0aW9uICh0b2tlbikge1xuICAgIHJldHVybiB0b2tlbi51cGRhdGUocG9ydGVyU3RlbW1lcik7XG4gIH1cbn0pKCk7XG5cbmx1bnIuUGlwZWxpbmUucmVnaXN0ZXJGdW5jdGlvbihsdW5yLnN0ZW1tZXIsICdzdGVtbWVyJylcbi8qIVxuICogbHVuci5zdG9wV29yZEZpbHRlclxuICogQ29weXJpZ2h0IChDKSAyMDE4IE9saXZlciBOaWdodGluZ2FsZVxuICovXG5cbi8qKlxuICogbHVuci5nZW5lcmF0ZVN0b3BXb3JkRmlsdGVyIGJ1aWxkcyBhIHN0b3BXb3JkRmlsdGVyIGZ1bmN0aW9uIGZyb20gdGhlIHByb3ZpZGVkXG4gKiBsaXN0IG9mIHN0b3Agd29yZHMuXG4gKlxuICogVGhlIGJ1aWx0IGluIGx1bnIuc3RvcFdvcmRGaWx0ZXIgaXMgYnVpbHQgdXNpbmcgdGhpcyBnZW5lcmF0b3IgYW5kIGNhbiBiZSB1c2VkXG4gKiB0byBnZW5lcmF0ZSBjdXN0b20gc3RvcFdvcmRGaWx0ZXJzIGZvciBhcHBsaWNhdGlvbnMgb3Igbm9uIEVuZ2xpc2ggbGFuZ3VhZ2VzLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IHRva2VuIFRoZSB0b2tlbiB0byBwYXNzIHRocm91Z2ggdGhlIGZpbHRlclxuICogQHJldHVybnMge2x1bnIuUGlwZWxpbmVGdW5jdGlvbn1cbiAqIEBzZWUgbHVuci5QaXBlbGluZVxuICogQHNlZSBsdW5yLnN0b3BXb3JkRmlsdGVyXG4gKi9cbmx1bnIuZ2VuZXJhdGVTdG9wV29yZEZpbHRlciA9IGZ1bmN0aW9uIChzdG9wV29yZHMpIHtcbiAgdmFyIHdvcmRzID0gc3RvcFdvcmRzLnJlZHVjZShmdW5jdGlvbiAobWVtbywgc3RvcFdvcmQpIHtcbiAgICBtZW1vW3N0b3BXb3JkXSA9IHN0b3BXb3JkXG4gICAgcmV0dXJuIG1lbW9cbiAgfSwge30pXG5cbiAgcmV0dXJuIGZ1bmN0aW9uICh0b2tlbikge1xuICAgIGlmICh0b2tlbiAmJiB3b3Jkc1t0b2tlbi50b1N0cmluZygpXSAhPT0gdG9rZW4udG9TdHJpbmcoKSkgcmV0dXJuIHRva2VuXG4gIH1cbn1cblxuLyoqXG4gKiBsdW5yLnN0b3BXb3JkRmlsdGVyIGlzIGFuIEVuZ2xpc2ggbGFuZ3VhZ2Ugc3RvcCB3b3JkIGxpc3QgZmlsdGVyLCBhbnkgd29yZHNcbiAqIGNvbnRhaW5lZCBpbiB0aGUgbGlzdCB3aWxsIG5vdCBiZSBwYXNzZWQgdGhyb3VnaCB0aGUgZmlsdGVyLlxuICpcbiAqIFRoaXMgaXMgaW50ZW5kZWQgdG8gYmUgdXNlZCBpbiB0aGUgUGlwZWxpbmUuIElmIHRoZSB0b2tlbiBkb2VzIG5vdCBwYXNzIHRoZVxuICogZmlsdGVyIHRoZW4gdW5kZWZpbmVkIHdpbGwgYmUgcmV0dXJuZWQuXG4gKlxuICogQGltcGxlbWVudHMge2x1bnIuUGlwZWxpbmVGdW5jdGlvbn1cbiAqIEBwYXJhbXMge2x1bnIuVG9rZW59IHRva2VuIC0gQSB0b2tlbiB0byBjaGVjayBmb3IgYmVpbmcgYSBzdG9wIHdvcmQuXG4gKiBAcmV0dXJucyB7bHVuci5Ub2tlbn1cbiAqIEBzZWUge0BsaW5rIGx1bnIuUGlwZWxpbmV9XG4gKi9cbmx1bnIuc3RvcFdvcmRGaWx0ZXIgPSBsdW5yLmdlbmVyYXRlU3RvcFdvcmRGaWx0ZXIoW1xuICAnYScsXG4gICdhYmxlJyxcbiAgJ2Fib3V0JyxcbiAgJ2Fjcm9zcycsXG4gICdhZnRlcicsXG4gICdhbGwnLFxuICAnYWxtb3N0JyxcbiAgJ2Fsc28nLFxuICAnYW0nLFxuICAnYW1vbmcnLFxuICAnYW4nLFxuICAnYW5kJyxcbiAgJ2FueScsXG4gICdhcmUnLFxuICAnYXMnLFxuICAnYXQnLFxuICAnYmUnLFxuICAnYmVjYXVzZScsXG4gICdiZWVuJyxcbiAgJ2J1dCcsXG4gICdieScsXG4gICdjYW4nLFxuICAnY2Fubm90JyxcbiAgJ2NvdWxkJyxcbiAgJ2RlYXInLFxuICAnZGlkJyxcbiAgJ2RvJyxcbiAgJ2RvZXMnLFxuICAnZWl0aGVyJyxcbiAgJ2Vsc2UnLFxuICAnZXZlcicsXG4gICdldmVyeScsXG4gICdmb3InLFxuICAnZnJvbScsXG4gICdnZXQnLFxuICAnZ290JyxcbiAgJ2hhZCcsXG4gICdoYXMnLFxuICAnaGF2ZScsXG4gICdoZScsXG4gICdoZXInLFxuICAnaGVycycsXG4gICdoaW0nLFxuICAnaGlzJyxcbiAgJ2hvdycsXG4gICdob3dldmVyJyxcbiAgJ2knLFxuICAnaWYnLFxuICAnaW4nLFxuICAnaW50bycsXG4gICdpcycsXG4gICdpdCcsXG4gICdpdHMnLFxuICAnanVzdCcsXG4gICdsZWFzdCcsXG4gICdsZXQnLFxuICAnbGlrZScsXG4gICdsaWtlbHknLFxuICAnbWF5JyxcbiAgJ21lJyxcbiAgJ21pZ2h0JyxcbiAgJ21vc3QnLFxuICAnbXVzdCcsXG4gICdteScsXG4gICduZWl0aGVyJyxcbiAgJ25vJyxcbiAgJ25vcicsXG4gICdub3QnLFxuICAnb2YnLFxuICAnb2ZmJyxcbiAgJ29mdGVuJyxcbiAgJ29uJyxcbiAgJ29ubHknLFxuICAnb3InLFxuICAnb3RoZXInLFxuICAnb3VyJyxcbiAgJ293bicsXG4gICdyYXRoZXInLFxuICAnc2FpZCcsXG4gICdzYXknLFxuICAnc2F5cycsXG4gICdzaGUnLFxuICAnc2hvdWxkJyxcbiAgJ3NpbmNlJyxcbiAgJ3NvJyxcbiAgJ3NvbWUnLFxuICAndGhhbicsXG4gICd0aGF0JyxcbiAgJ3RoZScsXG4gICd0aGVpcicsXG4gICd0aGVtJyxcbiAgJ3RoZW4nLFxuICAndGhlcmUnLFxuICAndGhlc2UnLFxuICAndGhleScsXG4gICd0aGlzJyxcbiAgJ3RpcycsXG4gICd0bycsXG4gICd0b28nLFxuICAndHdhcycsXG4gICd1cycsXG4gICd3YW50cycsXG4gICd3YXMnLFxuICAnd2UnLFxuICAnd2VyZScsXG4gICd3aGF0JyxcbiAgJ3doZW4nLFxuICAnd2hlcmUnLFxuICAnd2hpY2gnLFxuICAnd2hpbGUnLFxuICAnd2hvJyxcbiAgJ3dob20nLFxuICAnd2h5JyxcbiAgJ3dpbGwnLFxuICAnd2l0aCcsXG4gICd3b3VsZCcsXG4gICd5ZXQnLFxuICAneW91JyxcbiAgJ3lvdXInXG5dKVxuXG5sdW5yLlBpcGVsaW5lLnJlZ2lzdGVyRnVuY3Rpb24obHVuci5zdG9wV29yZEZpbHRlciwgJ3N0b3BXb3JkRmlsdGVyJylcbi8qIVxuICogbHVuci50cmltbWVyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTggT2xpdmVyIE5pZ2h0aW5nYWxlXG4gKi9cblxuLyoqXG4gKiBsdW5yLnRyaW1tZXIgaXMgYSBwaXBlbGluZSBmdW5jdGlvbiBmb3IgdHJpbW1pbmcgbm9uIHdvcmRcbiAqIGNoYXJhY3RlcnMgZnJvbSB0aGUgYmVnaW5uaW5nIGFuZCBlbmQgb2YgdG9rZW5zIGJlZm9yZSB0aGV5XG4gKiBlbnRlciB0aGUgaW5kZXguXG4gKlxuICogVGhpcyBpbXBsZW1lbnRhdGlvbiBtYXkgbm90IHdvcmsgY29ycmVjdGx5IGZvciBub24gbGF0aW5cbiAqIGNoYXJhY3RlcnMgYW5kIHNob3VsZCBlaXRoZXIgYmUgcmVtb3ZlZCBvciBhZGFwdGVkIGZvciB1c2VcbiAqIHdpdGggbGFuZ3VhZ2VzIHdpdGggbm9uLWxhdGluIGNoYXJhY3RlcnMuXG4gKlxuICogQHN0YXRpY1xuICogQGltcGxlbWVudHMge2x1bnIuUGlwZWxpbmVGdW5jdGlvbn1cbiAqIEBwYXJhbSB7bHVuci5Ub2tlbn0gdG9rZW4gVGhlIHRva2VuIHRvIHBhc3MgdGhyb3VnaCB0aGUgZmlsdGVyXG4gKiBAcmV0dXJucyB7bHVuci5Ub2tlbn1cbiAqIEBzZWUgbHVuci5QaXBlbGluZVxuICovXG5sdW5yLnRyaW1tZXIgPSBmdW5jdGlvbiAodG9rZW4pIHtcbiAgcmV0dXJuIHRva2VuLnVwZGF0ZShmdW5jdGlvbiAocykge1xuICAgIHJldHVybiBzLnJlcGxhY2UoL15cXFcrLywgJycpLnJlcGxhY2UoL1xcVyskLywgJycpXG4gIH0pXG59XG5cbmx1bnIuUGlwZWxpbmUucmVnaXN0ZXJGdW5jdGlvbihsdW5yLnRyaW1tZXIsICd0cmltbWVyJylcbi8qIVxuICogbHVuci5Ub2tlblNldFxuICogQ29weXJpZ2h0IChDKSAyMDE4IE9saXZlciBOaWdodGluZ2FsZVxuICovXG5cbi8qKlxuICogQSB0b2tlbiBzZXQgaXMgdXNlZCB0byBzdG9yZSB0aGUgdW5pcXVlIGxpc3Qgb2YgYWxsIHRva2Vuc1xuICogd2l0aGluIGFuIGluZGV4LiBUb2tlbiBzZXRzIGFyZSBhbHNvIHVzZWQgdG8gcmVwcmVzZW50IGFuXG4gKiBpbmNvbWluZyBxdWVyeSB0byB0aGUgaW5kZXgsIHRoaXMgcXVlcnkgdG9rZW4gc2V0IGFuZCBpbmRleFxuICogdG9rZW4gc2V0IGFyZSB0aGVuIGludGVyc2VjdGVkIHRvIGZpbmQgd2hpY2ggdG9rZW5zIHRvIGxvb2tcbiAqIHVwIGluIHRoZSBpbnZlcnRlZCBpbmRleC5cbiAqXG4gKiBBIHRva2VuIHNldCBjYW4gaG9sZCBtdWx0aXBsZSB0b2tlbnMsIGFzIGluIHRoZSBjYXNlIG9mIHRoZVxuICogaW5kZXggdG9rZW4gc2V0LCBvciBpdCBjYW4gaG9sZCBhIHNpbmdsZSB0b2tlbiBhcyBpbiB0aGVcbiAqIGNhc2Ugb2YgYSBzaW1wbGUgcXVlcnkgdG9rZW4gc2V0LlxuICpcbiAqIEFkZGl0aW9uYWxseSB0b2tlbiBzZXRzIGFyZSB1c2VkIHRvIHBlcmZvcm0gd2lsZGNhcmQgbWF0Y2hpbmcuXG4gKiBMZWFkaW5nLCBjb250YWluZWQgYW5kIHRyYWlsaW5nIHdpbGRjYXJkcyBhcmUgc3VwcG9ydGVkLCBhbmRcbiAqIGZyb20gdGhpcyBlZGl0IGRpc3RhbmNlIG1hdGNoaW5nIGNhbiBhbHNvIGJlIHByb3ZpZGVkLlxuICpcbiAqIFRva2VuIHNldHMgYXJlIGltcGxlbWVudGVkIGFzIGEgbWluaW1hbCBmaW5pdGUgc3RhdGUgYXV0b21hdGEsXG4gKiB3aGVyZSBib3RoIGNvbW1vbiBwcmVmaXhlcyBhbmQgc3VmZml4ZXMgYXJlIHNoYXJlZCBiZXR3ZWVuIHRva2Vucy5cbiAqIFRoaXMgaGVscHMgdG8gcmVkdWNlIHRoZSBzcGFjZSB1c2VkIGZvciBzdG9yaW5nIHRoZSB0b2tlbiBzZXQuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmx1bnIuVG9rZW5TZXQgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuZmluYWwgPSBmYWxzZVxuICB0aGlzLmVkZ2VzID0ge31cbiAgdGhpcy5pZCA9IGx1bnIuVG9rZW5TZXQuX25leHRJZFxuICBsdW5yLlRva2VuU2V0Ll9uZXh0SWQgKz0gMVxufVxuXG4vKipcbiAqIEtlZXBzIHRyYWNrIG9mIHRoZSBuZXh0LCBhdXRvIGluY3JlbWVudCwgaWRlbnRpZmllciB0byBhc3NpZ25cbiAqIHRvIGEgbmV3IHRva2VuU2V0LlxuICpcbiAqIFRva2VuU2V0cyByZXF1aXJlIGEgdW5pcXVlIGlkZW50aWZpZXIgdG8gYmUgY29ycmVjdGx5IG1pbmltaXNlZC5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5sdW5yLlRva2VuU2V0Ll9uZXh0SWQgPSAxXG5cbi8qKlxuICogQ3JlYXRlcyBhIFRva2VuU2V0IGluc3RhbmNlIGZyb20gdGhlIGdpdmVuIHNvcnRlZCBhcnJheSBvZiB3b3Jkcy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ1tdfSBhcnIgLSBBIHNvcnRlZCBhcnJheSBvZiBzdHJpbmdzIHRvIGNyZWF0ZSB0aGUgc2V0IGZyb20uXG4gKiBAcmV0dXJucyB7bHVuci5Ub2tlblNldH1cbiAqIEB0aHJvd3MgV2lsbCB0aHJvdyBhbiBlcnJvciBpZiB0aGUgaW5wdXQgYXJyYXkgaXMgbm90IHNvcnRlZC5cbiAqL1xubHVuci5Ub2tlblNldC5mcm9tQXJyYXkgPSBmdW5jdGlvbiAoYXJyKSB7XG4gIHZhciBidWlsZGVyID0gbmV3IGx1bnIuVG9rZW5TZXQuQnVpbGRlclxuXG4gIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhcnIubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICBidWlsZGVyLmluc2VydChhcnJbaV0pXG4gIH1cblxuICBidWlsZGVyLmZpbmlzaCgpXG4gIHJldHVybiBidWlsZGVyLnJvb3Rcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgdG9rZW4gc2V0IGZyb20gYSBxdWVyeSBjbGF1c2UuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBjbGF1c2UgLSBBIHNpbmdsZSBjbGF1c2UgZnJvbSBsdW5yLlF1ZXJ5LlxuICogQHBhcmFtIHtzdHJpbmd9IGNsYXVzZS50ZXJtIC0gVGhlIHF1ZXJ5IGNsYXVzZSB0ZXJtLlxuICogQHBhcmFtIHtudW1iZXJ9IFtjbGF1c2UuZWRpdERpc3RhbmNlXSAtIFRoZSBvcHRpb25hbCBlZGl0IGRpc3RhbmNlIGZvciB0aGUgdGVybS5cbiAqIEByZXR1cm5zIHtsdW5yLlRva2VuU2V0fVxuICovXG5sdW5yLlRva2VuU2V0LmZyb21DbGF1c2UgPSBmdW5jdGlvbiAoY2xhdXNlKSB7XG4gIGlmICgnZWRpdERpc3RhbmNlJyBpbiBjbGF1c2UpIHtcbiAgICByZXR1cm4gbHVuci5Ub2tlblNldC5mcm9tRnV6enlTdHJpbmcoY2xhdXNlLnRlcm0sIGNsYXVzZS5lZGl0RGlzdGFuY2UpXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGx1bnIuVG9rZW5TZXQuZnJvbVN0cmluZyhjbGF1c2UudGVybSlcbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB0b2tlbiBzZXQgcmVwcmVzZW50aW5nIGEgc2luZ2xlIHN0cmluZyB3aXRoIGEgc3BlY2lmaWVkXG4gKiBlZGl0IGRpc3RhbmNlLlxuICpcbiAqIEluc2VydGlvbnMsIGRlbGV0aW9ucywgc3Vic3RpdHV0aW9ucyBhbmQgdHJhbnNwb3NpdGlvbnMgYXJlIGVhY2hcbiAqIHRyZWF0ZWQgYXMgYW4gZWRpdCBkaXN0YW5jZSBvZiAxLlxuICpcbiAqIEluY3JlYXNpbmcgdGhlIGFsbG93ZWQgZWRpdCBkaXN0YW5jZSB3aWxsIGhhdmUgYSBkcmFtYXRpYyBpbXBhY3RcbiAqIG9uIHRoZSBwZXJmb3JtYW5jZSBvZiBib3RoIGNyZWF0aW5nIGFuZCBpbnRlcnNlY3RpbmcgdGhlc2UgVG9rZW5TZXRzLlxuICogSXQgaXMgYWR2aXNlZCB0byBrZWVwIHRoZSBlZGl0IGRpc3RhbmNlIGxlc3MgdGhhbiAzLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgLSBUaGUgc3RyaW5nIHRvIGNyZWF0ZSB0aGUgdG9rZW4gc2V0IGZyb20uXG4gKiBAcGFyYW0ge251bWJlcn0gZWRpdERpc3RhbmNlIC0gVGhlIGFsbG93ZWQgZWRpdCBkaXN0YW5jZSB0byBtYXRjaC5cbiAqIEByZXR1cm5zIHtsdW5yLlZlY3Rvcn1cbiAqL1xubHVuci5Ub2tlblNldC5mcm9tRnV6enlTdHJpbmcgPSBmdW5jdGlvbiAoc3RyLCBlZGl0RGlzdGFuY2UpIHtcbiAgdmFyIHJvb3QgPSBuZXcgbHVuci5Ub2tlblNldFxuXG4gIHZhciBzdGFjayA9IFt7XG4gICAgbm9kZTogcm9vdCxcbiAgICBlZGl0c1JlbWFpbmluZzogZWRpdERpc3RhbmNlLFxuICAgIHN0cjogc3RyXG4gIH1dXG5cbiAgd2hpbGUgKHN0YWNrLmxlbmd0aCkge1xuICAgIHZhciBmcmFtZSA9IHN0YWNrLnBvcCgpXG5cbiAgICAvLyBubyBlZGl0XG4gICAgaWYgKGZyYW1lLnN0ci5sZW5ndGggPiAwKSB7XG4gICAgICB2YXIgY2hhciA9IGZyYW1lLnN0ci5jaGFyQXQoMCksXG4gICAgICAgICAgbm9FZGl0Tm9kZVxuXG4gICAgICBpZiAoY2hhciBpbiBmcmFtZS5ub2RlLmVkZ2VzKSB7XG4gICAgICAgIG5vRWRpdE5vZGUgPSBmcmFtZS5ub2RlLmVkZ2VzW2NoYXJdXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub0VkaXROb2RlID0gbmV3IGx1bnIuVG9rZW5TZXRcbiAgICAgICAgZnJhbWUubm9kZS5lZGdlc1tjaGFyXSA9IG5vRWRpdE5vZGVcbiAgICAgIH1cblxuICAgICAgaWYgKGZyYW1lLnN0ci5sZW5ndGggPT0gMSkge1xuICAgICAgICBub0VkaXROb2RlLmZpbmFsID0gdHJ1ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhY2sucHVzaCh7XG4gICAgICAgICAgbm9kZTogbm9FZGl0Tm9kZSxcbiAgICAgICAgICBlZGl0c1JlbWFpbmluZzogZnJhbWUuZWRpdHNSZW1haW5pbmcsXG4gICAgICAgICAgc3RyOiBmcmFtZS5zdHIuc2xpY2UoMSlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBkZWxldGlvblxuICAgIC8vIGNhbiBvbmx5IGRvIGEgZGVsZXRpb24gaWYgd2UgaGF2ZSBlbm91Z2ggZWRpdHMgcmVtYWluaW5nXG4gICAgLy8gYW5kIGlmIHRoZXJlIGFyZSBjaGFyYWN0ZXJzIGxlZnQgdG8gZGVsZXRlIGluIHRoZSBzdHJpbmdcbiAgICBpZiAoZnJhbWUuZWRpdHNSZW1haW5pbmcgPiAwICYmIGZyYW1lLnN0ci5sZW5ndGggPiAxKSB7XG4gICAgICB2YXIgY2hhciA9IGZyYW1lLnN0ci5jaGFyQXQoMSksXG4gICAgICAgICAgZGVsZXRpb25Ob2RlXG5cbiAgICAgIGlmIChjaGFyIGluIGZyYW1lLm5vZGUuZWRnZXMpIHtcbiAgICAgICAgZGVsZXRpb25Ob2RlID0gZnJhbWUubm9kZS5lZGdlc1tjaGFyXVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVsZXRpb25Ob2RlID0gbmV3IGx1bnIuVG9rZW5TZXRcbiAgICAgICAgZnJhbWUubm9kZS5lZGdlc1tjaGFyXSA9IGRlbGV0aW9uTm9kZVxuICAgICAgfVxuXG4gICAgICBpZiAoZnJhbWUuc3RyLmxlbmd0aCA8PSAyKSB7XG4gICAgICAgIGRlbGV0aW9uTm9kZS5maW5hbCA9IHRydWVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YWNrLnB1c2goe1xuICAgICAgICAgIG5vZGU6IGRlbGV0aW9uTm9kZSxcbiAgICAgICAgICBlZGl0c1JlbWFpbmluZzogZnJhbWUuZWRpdHNSZW1haW5pbmcgLSAxLFxuICAgICAgICAgIHN0cjogZnJhbWUuc3RyLnNsaWNlKDIpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gZGVsZXRpb25cbiAgICAvLyBqdXN0IHJlbW92aW5nIHRoZSBsYXN0IGNoYXJhY3RlciBmcm9tIHRoZSBzdHJcbiAgICBpZiAoZnJhbWUuZWRpdHNSZW1haW5pbmcgPiAwICYmIGZyYW1lLnN0ci5sZW5ndGggPT0gMSkge1xuICAgICAgZnJhbWUubm9kZS5maW5hbCA9IHRydWVcbiAgICB9XG5cbiAgICAvLyBzdWJzdGl0dXRpb25cbiAgICAvLyBjYW4gb25seSBkbyBhIHN1YnN0aXR1dGlvbiBpZiB3ZSBoYXZlIGVub3VnaCBlZGl0cyByZW1haW5pbmdcbiAgICAvLyBhbmQgaWYgdGhlcmUgYXJlIGNoYXJhY3RlcnMgbGVmdCB0byBzdWJzdGl0dXRlXG4gICAgaWYgKGZyYW1lLmVkaXRzUmVtYWluaW5nID4gMCAmJiBmcmFtZS5zdHIubGVuZ3RoID49IDEpIHtcbiAgICAgIGlmIChcIipcIiBpbiBmcmFtZS5ub2RlLmVkZ2VzKSB7XG4gICAgICAgIHZhciBzdWJzdGl0dXRpb25Ob2RlID0gZnJhbWUubm9kZS5lZGdlc1tcIipcIl1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBzdWJzdGl0dXRpb25Ob2RlID0gbmV3IGx1bnIuVG9rZW5TZXRcbiAgICAgICAgZnJhbWUubm9kZS5lZGdlc1tcIipcIl0gPSBzdWJzdGl0dXRpb25Ob2RlXG4gICAgICB9XG5cbiAgICAgIGlmIChmcmFtZS5zdHIubGVuZ3RoID09IDEpIHtcbiAgICAgICAgc3Vic3RpdHV0aW9uTm9kZS5maW5hbCA9IHRydWVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YWNrLnB1c2goe1xuICAgICAgICAgIG5vZGU6IHN1YnN0aXR1dGlvbk5vZGUsXG4gICAgICAgICAgZWRpdHNSZW1haW5pbmc6IGZyYW1lLmVkaXRzUmVtYWluaW5nIC0gMSxcbiAgICAgICAgICBzdHI6IGZyYW1lLnN0ci5zbGljZSgxKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGluc2VydGlvblxuICAgIC8vIGNhbiBvbmx5IGRvIGluc2VydGlvbiBpZiB0aGVyZSBhcmUgZWRpdHMgcmVtYWluaW5nXG4gICAgaWYgKGZyYW1lLmVkaXRzUmVtYWluaW5nID4gMCkge1xuICAgICAgaWYgKFwiKlwiIGluIGZyYW1lLm5vZGUuZWRnZXMpIHtcbiAgICAgICAgdmFyIGluc2VydGlvbk5vZGUgPSBmcmFtZS5ub2RlLmVkZ2VzW1wiKlwiXVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGluc2VydGlvbk5vZGUgPSBuZXcgbHVuci5Ub2tlblNldFxuICAgICAgICBmcmFtZS5ub2RlLmVkZ2VzW1wiKlwiXSA9IGluc2VydGlvbk5vZGVcbiAgICAgIH1cblxuICAgICAgaWYgKGZyYW1lLnN0ci5sZW5ndGggPT0gMCkge1xuICAgICAgICBpbnNlcnRpb25Ob2RlLmZpbmFsID0gdHJ1ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhY2sucHVzaCh7XG4gICAgICAgICAgbm9kZTogaW5zZXJ0aW9uTm9kZSxcbiAgICAgICAgICBlZGl0c1JlbWFpbmluZzogZnJhbWUuZWRpdHNSZW1haW5pbmcgLSAxLFxuICAgICAgICAgIHN0cjogZnJhbWUuc3RyXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gdHJhbnNwb3NpdGlvblxuICAgIC8vIGNhbiBvbmx5IGRvIGEgdHJhbnNwb3NpdGlvbiBpZiB0aGVyZSBhcmUgZWRpdHMgcmVtYWluaW5nXG4gICAgLy8gYW5kIHRoZXJlIGFyZSBlbm91Z2ggY2hhcmFjdGVycyB0byB0cmFuc3Bvc2VcbiAgICBpZiAoZnJhbWUuZWRpdHNSZW1haW5pbmcgPiAwICYmIGZyYW1lLnN0ci5sZW5ndGggPiAxKSB7XG4gICAgICB2YXIgY2hhckEgPSBmcmFtZS5zdHIuY2hhckF0KDApLFxuICAgICAgICAgIGNoYXJCID0gZnJhbWUuc3RyLmNoYXJBdCgxKSxcbiAgICAgICAgICB0cmFuc3Bvc2VOb2RlXG5cbiAgICAgIGlmIChjaGFyQiBpbiBmcmFtZS5ub2RlLmVkZ2VzKSB7XG4gICAgICAgIHRyYW5zcG9zZU5vZGUgPSBmcmFtZS5ub2RlLmVkZ2VzW2NoYXJCXVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdHJhbnNwb3NlTm9kZSA9IG5ldyBsdW5yLlRva2VuU2V0XG4gICAgICAgIGZyYW1lLm5vZGUuZWRnZXNbY2hhckJdID0gdHJhbnNwb3NlTm9kZVxuICAgICAgfVxuXG4gICAgICBpZiAoZnJhbWUuc3RyLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgIHRyYW5zcG9zZU5vZGUuZmluYWwgPSB0cnVlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGFjay5wdXNoKHtcbiAgICAgICAgICBub2RlOiB0cmFuc3Bvc2VOb2RlLFxuICAgICAgICAgIGVkaXRzUmVtYWluaW5nOiBmcmFtZS5lZGl0c1JlbWFpbmluZyAtIDEsXG4gICAgICAgICAgc3RyOiBjaGFyQSArIGZyYW1lLnN0ci5zbGljZSgyKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiByb290XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIFRva2VuU2V0IGZyb20gYSBzdHJpbmcuXG4gKlxuICogVGhlIHN0cmluZyBtYXkgY29udGFpbiBvbmUgb3IgbW9yZSB3aWxkY2FyZCBjaGFyYWN0ZXJzICgqKVxuICogdGhhdCB3aWxsIGFsbG93IHdpbGRjYXJkIG1hdGNoaW5nIHdoZW4gaW50ZXJzZWN0aW5nIHdpdGhcbiAqIGFub3RoZXIgVG9rZW5TZXQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHN0ciAtIFRoZSBzdHJpbmcgdG8gY3JlYXRlIGEgVG9rZW5TZXQgZnJvbS5cbiAqIEByZXR1cm5zIHtsdW5yLlRva2VuU2V0fVxuICovXG5sdW5yLlRva2VuU2V0LmZyb21TdHJpbmcgPSBmdW5jdGlvbiAoc3RyKSB7XG4gIHZhciBub2RlID0gbmV3IGx1bnIuVG9rZW5TZXQsXG4gICAgICByb290ID0gbm9kZSxcbiAgICAgIHdpbGRjYXJkRm91bmQgPSBmYWxzZVxuXG4gIC8qXG4gICAqIEl0ZXJhdGVzIHRocm91Z2ggYWxsIGNoYXJhY3RlcnMgd2l0aGluIHRoZSBwYXNzZWQgc3RyaW5nXG4gICAqIGFwcGVuZGluZyBhIG5vZGUgZm9yIGVhY2ggY2hhcmFjdGVyLlxuICAgKlxuICAgKiBBcyBzb29uIGFzIGEgd2lsZGNhcmQgY2hhcmFjdGVyIGlzIGZvdW5kIHRoZW4gYSBzZWxmXG4gICAqIHJlZmVyZW5jaW5nIGVkZ2UgaXMgaW50cm9kdWNlZCB0byBjb250aW51YWxseSBtYXRjaFxuICAgKiBhbnkgbnVtYmVyIG9mIGFueSBjaGFyYWN0ZXJzLlxuICAgKi9cbiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHN0ci5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgIHZhciBjaGFyID0gc3RyW2ldLFxuICAgICAgICBmaW5hbCA9IChpID09IGxlbiAtIDEpXG5cbiAgICBpZiAoY2hhciA9PSBcIipcIikge1xuICAgICAgd2lsZGNhcmRGb3VuZCA9IHRydWVcbiAgICAgIG5vZGUuZWRnZXNbY2hhcl0gPSBub2RlXG4gICAgICBub2RlLmZpbmFsID0gZmluYWxcblxuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgbmV4dCA9IG5ldyBsdW5yLlRva2VuU2V0XG4gICAgICBuZXh0LmZpbmFsID0gZmluYWxcblxuICAgICAgbm9kZS5lZGdlc1tjaGFyXSA9IG5leHRcbiAgICAgIG5vZGUgPSBuZXh0XG5cbiAgICAgIC8vIFRPRE86IGlzIHRoaXMgbmVlZGVkIGFueW1vcmU/XG4gICAgICBpZiAod2lsZGNhcmRGb3VuZCkge1xuICAgICAgICBub2RlLmVkZ2VzW1wiKlwiXSA9IHJvb3RcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gcm9vdFxufVxuXG4vKipcbiAqIENvbnZlcnRzIHRoaXMgVG9rZW5TZXQgaW50byBhbiBhcnJheSBvZiBzdHJpbmdzXG4gKiBjb250YWluZWQgd2l0aGluIHRoZSBUb2tlblNldC5cbiAqXG4gKiBAcmV0dXJucyB7c3RyaW5nW119XG4gKi9cbmx1bnIuVG9rZW5TZXQucHJvdG90eXBlLnRvQXJyYXkgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciB3b3JkcyA9IFtdXG5cbiAgdmFyIHN0YWNrID0gW3tcbiAgICBwcmVmaXg6IFwiXCIsXG4gICAgbm9kZTogdGhpc1xuICB9XVxuXG4gIHdoaWxlIChzdGFjay5sZW5ndGgpIHtcbiAgICB2YXIgZnJhbWUgPSBzdGFjay5wb3AoKSxcbiAgICAgICAgZWRnZXMgPSBPYmplY3Qua2V5cyhmcmFtZS5ub2RlLmVkZ2VzKSxcbiAgICAgICAgbGVuID0gZWRnZXMubGVuZ3RoXG5cbiAgICBpZiAoZnJhbWUubm9kZS5maW5hbCkge1xuICAgICAgd29yZHMucHVzaChmcmFtZS5wcmVmaXgpXG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgdmFyIGVkZ2UgPSBlZGdlc1tpXVxuXG4gICAgICBzdGFjay5wdXNoKHtcbiAgICAgICAgcHJlZml4OiBmcmFtZS5wcmVmaXguY29uY2F0KGVkZ2UpLFxuICAgICAgICBub2RlOiBmcmFtZS5ub2RlLmVkZ2VzW2VkZ2VdXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB3b3Jkc1xufVxuXG4vKipcbiAqIEdlbmVyYXRlcyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBhIFRva2VuU2V0LlxuICpcbiAqIFRoaXMgaXMgaW50ZW5kZWQgdG8gYWxsb3cgVG9rZW5TZXRzIHRvIGJlIHVzZWQgYXMga2V5c1xuICogaW4gb2JqZWN0cywgbGFyZ2VseSB0byBhaWQgdGhlIGNvbnN0cnVjdGlvbiBhbmQgbWluaW1pc2F0aW9uXG4gKiBvZiBhIFRva2VuU2V0LiBBcyBzdWNoIGl0IGlzIG5vdCBkZXNpZ25lZCB0byBiZSBhIGh1bWFuXG4gKiBmcmllbmRseSByZXByZXNlbnRhdGlvbiBvZiB0aGUgVG9rZW5TZXQuXG4gKlxuICogQHJldHVybnMge3N0cmluZ31cbiAqL1xubHVuci5Ub2tlblNldC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gIC8vIE5PVEU6IFVzaW5nIE9iamVjdC5rZXlzIGhlcmUgYXMgdGhpcy5lZGdlcyBpcyB2ZXJ5IGxpa2VseVxuICAvLyB0byBlbnRlciAnaGFzaC1tb2RlJyB3aXRoIG1hbnkga2V5cyBiZWluZyBhZGRlZFxuICAvL1xuICAvLyBhdm9pZGluZyBhIGZvci1pbiBsb29wIGhlcmUgYXMgaXQgbGVhZHMgdG8gdGhlIGZ1bmN0aW9uXG4gIC8vIGJlaW5nIGRlLW9wdGltaXNlZCAoYXQgbGVhc3QgaW4gVjgpLiBGcm9tIHNvbWUgc2ltcGxlXG4gIC8vIGJlbmNobWFya3MgdGhlIHBlcmZvcm1hbmNlIGlzIGNvbXBhcmFibGUsIGJ1dCBhbGxvd2luZ1xuICAvLyBWOCB0byBvcHRpbWl6ZSBtYXkgbWVhbiBlYXN5IHBlcmZvcm1hbmNlIHdpbnMgaW4gdGhlIGZ1dHVyZS5cblxuICBpZiAodGhpcy5fc3RyKSB7XG4gICAgcmV0dXJuIHRoaXMuX3N0clxuICB9XG5cbiAgdmFyIHN0ciA9IHRoaXMuZmluYWwgPyAnMScgOiAnMCcsXG4gICAgICBsYWJlbHMgPSBPYmplY3Qua2V5cyh0aGlzLmVkZ2VzKS5zb3J0KCksXG4gICAgICBsZW4gPSBsYWJlbHMubGVuZ3RoXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIHZhciBsYWJlbCA9IGxhYmVsc1tpXSxcbiAgICAgICAgbm9kZSA9IHRoaXMuZWRnZXNbbGFiZWxdXG5cbiAgICBzdHIgPSBzdHIgKyBsYWJlbCArIG5vZGUuaWRcbiAgfVxuXG4gIHJldHVybiBzdHJcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgbmV3IFRva2VuU2V0IHRoYXQgaXMgdGhlIGludGVyc2VjdGlvbiBvZlxuICogdGhpcyBUb2tlblNldCBhbmQgdGhlIHBhc3NlZCBUb2tlblNldC5cbiAqXG4gKiBUaGlzIGludGVyc2VjdGlvbiB3aWxsIHRha2UgaW50byBhY2NvdW50IGFueSB3aWxkY2FyZHNcbiAqIGNvbnRhaW5lZCB3aXRoaW4gdGhlIFRva2VuU2V0LlxuICpcbiAqIEBwYXJhbSB7bHVuci5Ub2tlblNldH0gYiAtIEFuIG90aGVyIFRva2VuU2V0IHRvIGludGVyc2VjdCB3aXRoLlxuICogQHJldHVybnMge2x1bnIuVG9rZW5TZXR9XG4gKi9cbmx1bnIuVG9rZW5TZXQucHJvdG90eXBlLmludGVyc2VjdCA9IGZ1bmN0aW9uIChiKSB7XG4gIHZhciBvdXRwdXQgPSBuZXcgbHVuci5Ub2tlblNldCxcbiAgICAgIGZyYW1lID0gdW5kZWZpbmVkXG5cbiAgdmFyIHN0YWNrID0gW3tcbiAgICBxTm9kZTogYixcbiAgICBvdXRwdXQ6IG91dHB1dCxcbiAgICBub2RlOiB0aGlzXG4gIH1dXG5cbiAgd2hpbGUgKHN0YWNrLmxlbmd0aCkge1xuICAgIGZyYW1lID0gc3RhY2sucG9wKClcblxuICAgIC8vIE5PVEU6IEFzIHdpdGggdGhlICN0b1N0cmluZyBtZXRob2QsIHdlIGFyZSB1c2luZ1xuICAgIC8vIE9iamVjdC5rZXlzIGFuZCBhIGZvciBsb29wIGluc3RlYWQgb2YgYSBmb3ItaW4gbG9vcFxuICAgIC8vIGFzIGJvdGggb2YgdGhlc2Ugb2JqZWN0cyBlbnRlciAnaGFzaCcgbW9kZSwgY2F1c2luZ1xuICAgIC8vIHRoZSBmdW5jdGlvbiB0byBiZSBkZS1vcHRpbWlzZWQgaW4gVjhcbiAgICB2YXIgcUVkZ2VzID0gT2JqZWN0LmtleXMoZnJhbWUucU5vZGUuZWRnZXMpLFxuICAgICAgICBxTGVuID0gcUVkZ2VzLmxlbmd0aCxcbiAgICAgICAgbkVkZ2VzID0gT2JqZWN0LmtleXMoZnJhbWUubm9kZS5lZGdlcyksXG4gICAgICAgIG5MZW4gPSBuRWRnZXMubGVuZ3RoXG5cbiAgICBmb3IgKHZhciBxID0gMDsgcSA8IHFMZW47IHErKykge1xuICAgICAgdmFyIHFFZGdlID0gcUVkZ2VzW3FdXG5cbiAgICAgIGZvciAodmFyIG4gPSAwOyBuIDwgbkxlbjsgbisrKSB7XG4gICAgICAgIHZhciBuRWRnZSA9IG5FZGdlc1tuXVxuXG4gICAgICAgIGlmIChuRWRnZSA9PSBxRWRnZSB8fCBxRWRnZSA9PSAnKicpIHtcbiAgICAgICAgICB2YXIgbm9kZSA9IGZyYW1lLm5vZGUuZWRnZXNbbkVkZ2VdLFxuICAgICAgICAgICAgICBxTm9kZSA9IGZyYW1lLnFOb2RlLmVkZ2VzW3FFZGdlXSxcbiAgICAgICAgICAgICAgZmluYWwgPSBub2RlLmZpbmFsICYmIHFOb2RlLmZpbmFsLFxuICAgICAgICAgICAgICBuZXh0ID0gdW5kZWZpbmVkXG5cbiAgICAgICAgICBpZiAobkVkZ2UgaW4gZnJhbWUub3V0cHV0LmVkZ2VzKSB7XG4gICAgICAgICAgICAvLyBhbiBlZGdlIGFscmVhZHkgZXhpc3RzIGZvciB0aGlzIGNoYXJhY3RlclxuICAgICAgICAgICAgLy8gbm8gbmVlZCB0byBjcmVhdGUgYSBuZXcgbm9kZSwganVzdCBzZXQgdGhlIGZpbmFsaXR5XG4gICAgICAgICAgICAvLyBiaXQgdW5sZXNzIHRoaXMgbm9kZSBpcyBhbHJlYWR5IGZpbmFsXG4gICAgICAgICAgICBuZXh0ID0gZnJhbWUub3V0cHV0LmVkZ2VzW25FZGdlXVxuICAgICAgICAgICAgbmV4dC5maW5hbCA9IG5leHQuZmluYWwgfHwgZmluYWxcblxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBubyBlZGdlIGV4aXN0cyB5ZXQsIG11c3QgY3JlYXRlIG9uZVxuICAgICAgICAgICAgLy8gc2V0IHRoZSBmaW5hbGl0eSBiaXQgYW5kIGluc2VydCBpdFxuICAgICAgICAgICAgLy8gaW50byB0aGUgb3V0cHV0XG4gICAgICAgICAgICBuZXh0ID0gbmV3IGx1bnIuVG9rZW5TZXRcbiAgICAgICAgICAgIG5leHQuZmluYWwgPSBmaW5hbFxuICAgICAgICAgICAgZnJhbWUub3V0cHV0LmVkZ2VzW25FZGdlXSA9IG5leHRcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzdGFjay5wdXNoKHtcbiAgICAgICAgICAgIHFOb2RlOiBxTm9kZSxcbiAgICAgICAgICAgIG91dHB1dDogbmV4dCxcbiAgICAgICAgICAgIG5vZGU6IG5vZGVcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG91dHB1dFxufVxubHVuci5Ub2tlblNldC5CdWlsZGVyID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLnByZXZpb3VzV29yZCA9IFwiXCJcbiAgdGhpcy5yb290ID0gbmV3IGx1bnIuVG9rZW5TZXRcbiAgdGhpcy51bmNoZWNrZWROb2RlcyA9IFtdXG4gIHRoaXMubWluaW1pemVkTm9kZXMgPSB7fVxufVxuXG5sdW5yLlRva2VuU2V0LkJ1aWxkZXIucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uICh3b3JkKSB7XG4gIHZhciBub2RlLFxuICAgICAgY29tbW9uUHJlZml4ID0gMFxuXG4gIGlmICh3b3JkIDwgdGhpcy5wcmV2aW91c1dvcmQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IgKFwiT3V0IG9mIG9yZGVyIHdvcmQgaW5zZXJ0aW9uXCIpXG4gIH1cblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHdvcmQubGVuZ3RoICYmIGkgPCB0aGlzLnByZXZpb3VzV29yZC5sZW5ndGg7IGkrKykge1xuICAgIGlmICh3b3JkW2ldICE9IHRoaXMucHJldmlvdXNXb3JkW2ldKSBicmVha1xuICAgIGNvbW1vblByZWZpeCsrXG4gIH1cblxuICB0aGlzLm1pbmltaXplKGNvbW1vblByZWZpeClcblxuICBpZiAodGhpcy51bmNoZWNrZWROb2Rlcy5sZW5ndGggPT0gMCkge1xuICAgIG5vZGUgPSB0aGlzLnJvb3RcbiAgfSBlbHNlIHtcbiAgICBub2RlID0gdGhpcy51bmNoZWNrZWROb2Rlc1t0aGlzLnVuY2hlY2tlZE5vZGVzLmxlbmd0aCAtIDFdLmNoaWxkXG4gIH1cblxuICBmb3IgKHZhciBpID0gY29tbW9uUHJlZml4OyBpIDwgd29yZC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBuZXh0Tm9kZSA9IG5ldyBsdW5yLlRva2VuU2V0LFxuICAgICAgICBjaGFyID0gd29yZFtpXVxuXG4gICAgbm9kZS5lZGdlc1tjaGFyXSA9IG5leHROb2RlXG5cbiAgICB0aGlzLnVuY2hlY2tlZE5vZGVzLnB1c2goe1xuICAgICAgcGFyZW50OiBub2RlLFxuICAgICAgY2hhcjogY2hhcixcbiAgICAgIGNoaWxkOiBuZXh0Tm9kZVxuICAgIH0pXG5cbiAgICBub2RlID0gbmV4dE5vZGVcbiAgfVxuXG4gIG5vZGUuZmluYWwgPSB0cnVlXG4gIHRoaXMucHJldmlvdXNXb3JkID0gd29yZFxufVxuXG5sdW5yLlRva2VuU2V0LkJ1aWxkZXIucHJvdG90eXBlLmZpbmlzaCA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5taW5pbWl6ZSgwKVxufVxuXG5sdW5yLlRva2VuU2V0LkJ1aWxkZXIucHJvdG90eXBlLm1pbmltaXplID0gZnVuY3Rpb24gKGRvd25Ubykge1xuICBmb3IgKHZhciBpID0gdGhpcy51bmNoZWNrZWROb2Rlcy5sZW5ndGggLSAxOyBpID49IGRvd25UbzsgaS0tKSB7XG4gICAgdmFyIG5vZGUgPSB0aGlzLnVuY2hlY2tlZE5vZGVzW2ldLFxuICAgICAgICBjaGlsZEtleSA9IG5vZGUuY2hpbGQudG9TdHJpbmcoKVxuXG4gICAgaWYgKGNoaWxkS2V5IGluIHRoaXMubWluaW1pemVkTm9kZXMpIHtcbiAgICAgIG5vZGUucGFyZW50LmVkZ2VzW25vZGUuY2hhcl0gPSB0aGlzLm1pbmltaXplZE5vZGVzW2NoaWxkS2V5XVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBDYWNoZSB0aGUga2V5IGZvciB0aGlzIG5vZGUgc2luY2VcbiAgICAgIC8vIHdlIGtub3cgaXQgY2FuJ3QgY2hhbmdlIGFueW1vcmVcbiAgICAgIG5vZGUuY2hpbGQuX3N0ciA9IGNoaWxkS2V5XG5cbiAgICAgIHRoaXMubWluaW1pemVkTm9kZXNbY2hpbGRLZXldID0gbm9kZS5jaGlsZFxuICAgIH1cblxuICAgIHRoaXMudW5jaGVja2VkTm9kZXMucG9wKClcbiAgfVxufVxuLyohXG4gKiBsdW5yLkluZGV4XG4gKiBDb3B5cmlnaHQgKEMpIDIwMTggT2xpdmVyIE5pZ2h0aW5nYWxlXG4gKi9cblxuLyoqXG4gKiBBbiBpbmRleCBjb250YWlucyB0aGUgYnVpbHQgaW5kZXggb2YgYWxsIGRvY3VtZW50cyBhbmQgcHJvdmlkZXMgYSBxdWVyeSBpbnRlcmZhY2VcbiAqIHRvIHRoZSBpbmRleC5cbiAqXG4gKiBVc3VhbGx5IGluc3RhbmNlcyBvZiBsdW5yLkluZGV4IHdpbGwgbm90IGJlIGNyZWF0ZWQgdXNpbmcgdGhpcyBjb25zdHJ1Y3RvciwgaW5zdGVhZFxuICogbHVuci5CdWlsZGVyIHNob3VsZCBiZSB1c2VkIHRvIGNvbnN0cnVjdCBuZXcgaW5kZXhlcywgb3IgbHVuci5JbmRleC5sb2FkIHNob3VsZCBiZVxuICogdXNlZCB0byBsb2FkIHByZXZpb3VzbHkgYnVpbHQgYW5kIHNlcmlhbGl6ZWQgaW5kZXhlcy5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7T2JqZWN0fSBhdHRycyAtIFRoZSBhdHRyaWJ1dGVzIG9mIHRoZSBidWlsdCBzZWFyY2ggaW5kZXguXG4gKiBAcGFyYW0ge09iamVjdH0gYXR0cnMuaW52ZXJ0ZWRJbmRleCAtIEFuIGluZGV4IG9mIHRlcm0vZmllbGQgdG8gZG9jdW1lbnQgcmVmZXJlbmNlLlxuICogQHBhcmFtIHtPYmplY3Q8c3RyaW5nLCBsdW5yLlZlY3Rvcj59IGF0dHJzLmRvY3VtZW50VmVjdG9ycyAtIERvY3VtZW50IHZlY3RvcnMga2V5ZWQgYnkgZG9jdW1lbnQgcmVmZXJlbmNlLlxuICogQHBhcmFtIHtsdW5yLlRva2VuU2V0fSBhdHRycy50b2tlblNldCAtIEFuIHNldCBvZiBhbGwgY29ycHVzIHRva2Vucy5cbiAqIEBwYXJhbSB7c3RyaW5nW119IGF0dHJzLmZpZWxkcyAtIFRoZSBuYW1lcyBvZiBpbmRleGVkIGRvY3VtZW50IGZpZWxkcy5cbiAqIEBwYXJhbSB7bHVuci5QaXBlbGluZX0gYXR0cnMucGlwZWxpbmUgLSBUaGUgcGlwZWxpbmUgdG8gdXNlIGZvciBzZWFyY2ggdGVybXMuXG4gKi9cbmx1bnIuSW5kZXggPSBmdW5jdGlvbiAoYXR0cnMpIHtcbiAgdGhpcy5pbnZlcnRlZEluZGV4ID0gYXR0cnMuaW52ZXJ0ZWRJbmRleFxuICB0aGlzLmZpZWxkVmVjdG9ycyA9IGF0dHJzLmZpZWxkVmVjdG9yc1xuICB0aGlzLnRva2VuU2V0ID0gYXR0cnMudG9rZW5TZXRcbiAgdGhpcy5maWVsZHMgPSBhdHRycy5maWVsZHNcbiAgdGhpcy5waXBlbGluZSA9IGF0dHJzLnBpcGVsaW5lXG59XG5cbi8qKlxuICogQSByZXN1bHQgY29udGFpbnMgZGV0YWlscyBvZiBhIGRvY3VtZW50IG1hdGNoaW5nIGEgc2VhcmNoIHF1ZXJ5LlxuICogQHR5cGVkZWYge09iamVjdH0gbHVuci5JbmRleH5SZXN1bHRcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSByZWYgLSBUaGUgcmVmZXJlbmNlIG9mIHRoZSBkb2N1bWVudCB0aGlzIHJlc3VsdCByZXByZXNlbnRzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IHNjb3JlIC0gQSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxIHJlcHJlc2VudGluZyBob3cgc2ltaWxhciB0aGlzIGRvY3VtZW50IGlzIHRvIHRoZSBxdWVyeS5cbiAqIEBwcm9wZXJ0eSB7bHVuci5NYXRjaERhdGF9IG1hdGNoRGF0YSAtIENvbnRhaW5zIG1ldGFkYXRhIGFib3V0IHRoaXMgbWF0Y2ggaW5jbHVkaW5nIHdoaWNoIHRlcm0ocykgY2F1c2VkIHRoZSBtYXRjaC5cbiAqL1xuXG4vKipcbiAqIEFsdGhvdWdoIGx1bnIgcHJvdmlkZXMgdGhlIGFiaWxpdHkgdG8gY3JlYXRlIHF1ZXJpZXMgdXNpbmcgbHVuci5RdWVyeSwgaXQgYWxzbyBwcm92aWRlcyBhIHNpbXBsZVxuICogcXVlcnkgbGFuZ3VhZ2Ugd2hpY2ggaXRzZWxmIGlzIHBhcnNlZCBpbnRvIGFuIGluc3RhbmNlIG9mIGx1bnIuUXVlcnkuXG4gKlxuICogRm9yIHByb2dyYW1tYXRpY2FsbHkgYnVpbGRpbmcgcXVlcmllcyBpdCBpcyBhZHZpc2VkIHRvIGRpcmVjdGx5IHVzZSBsdW5yLlF1ZXJ5LCB0aGUgcXVlcnkgbGFuZ3VhZ2VcbiAqIGlzIGJlc3QgdXNlZCBmb3IgaHVtYW4gZW50ZXJlZCB0ZXh0IHJhdGhlciB0aGFuIHByb2dyYW0gZ2VuZXJhdGVkIHRleHQuXG4gKlxuICogQXQgaXRzIHNpbXBsZXN0IHF1ZXJpZXMgY2FuIGp1c3QgYmUgYSBzaW5nbGUgdGVybSwgZS5nLiBgaGVsbG9gLCBtdWx0aXBsZSB0ZXJtcyBhcmUgYWxzbyBzdXBwb3J0ZWRcbiAqIGFuZCB3aWxsIGJlIGNvbWJpbmVkIHdpdGggT1IsIGUuZyBgaGVsbG8gd29ybGRgIHdpbGwgbWF0Y2ggZG9jdW1lbnRzIHRoYXQgY29udGFpbiBlaXRoZXIgJ2hlbGxvJ1xuICogb3IgJ3dvcmxkJywgdGhvdWdoIHRob3NlIHRoYXQgY29udGFpbiBib3RoIHdpbGwgcmFuayBoaWdoZXIgaW4gdGhlIHJlc3VsdHMuXG4gKlxuICogV2lsZGNhcmRzIGNhbiBiZSBpbmNsdWRlZCBpbiB0ZXJtcyB0byBtYXRjaCBvbmUgb3IgbW9yZSB1bnNwZWNpZmllZCBjaGFyYWN0ZXJzLCB0aGVzZSB3aWxkY2FyZHMgY2FuXG4gKiBiZSBpbnNlcnRlZCBhbnl3aGVyZSB3aXRoaW4gdGhlIHRlcm0sIGFuZCBtb3JlIHRoYW4gb25lIHdpbGRjYXJkIGNhbiBleGlzdCBpbiBhIHNpbmdsZSB0ZXJtLiBBZGRpbmdcbiAqIHdpbGRjYXJkcyB3aWxsIGluY3JlYXNlIHRoZSBudW1iZXIgb2YgZG9jdW1lbnRzIHRoYXQgd2lsbCBiZSBmb3VuZCBidXQgY2FuIGFsc28gaGF2ZSBhIG5lZ2F0aXZlXG4gKiBpbXBhY3Qgb24gcXVlcnkgcGVyZm9ybWFuY2UsIGVzcGVjaWFsbHkgd2l0aCB3aWxkY2FyZHMgYXQgdGhlIGJlZ2lubmluZyBvZiBhIHRlcm0uXG4gKlxuICogVGVybXMgY2FuIGJlIHJlc3RyaWN0ZWQgdG8gc3BlY2lmaWMgZmllbGRzLCBlLmcuIGB0aXRsZTpoZWxsb2AsIG9ubHkgZG9jdW1lbnRzIHdpdGggdGhlIHRlcm1cbiAqIGhlbGxvIGluIHRoZSB0aXRsZSBmaWVsZCB3aWxsIG1hdGNoIHRoaXMgcXVlcnkuIFVzaW5nIGEgZmllbGQgbm90IHByZXNlbnQgaW4gdGhlIGluZGV4IHdpbGwgbGVhZFxuICogdG8gYW4gZXJyb3IgYmVpbmcgdGhyb3duLlxuICpcbiAqIE1vZGlmaWVycyBjYW4gYWxzbyBiZSBhZGRlZCB0byB0ZXJtcywgbHVuciBzdXBwb3J0cyBlZGl0IGRpc3RhbmNlIGFuZCBib29zdCBtb2RpZmllcnMgb24gdGVybXMuIEEgdGVybVxuICogYm9vc3Qgd2lsbCBtYWtlIGRvY3VtZW50cyBtYXRjaGluZyB0aGF0IHRlcm0gc2NvcmUgaGlnaGVyLCBlLmcuIGBmb29eNWAuIEVkaXQgZGlzdGFuY2UgaXMgYWxzbyBzdXBwb3J0ZWRcbiAqIHRvIHByb3ZpZGUgZnV6enkgbWF0Y2hpbmcsIGUuZy4gJ2hlbGxvfjInIHdpbGwgbWF0Y2ggZG9jdW1lbnRzIHdpdGggaGVsbG8gd2l0aCBhbiBlZGl0IGRpc3RhbmNlIG9mIDIuXG4gKiBBdm9pZCBsYXJnZSB2YWx1ZXMgZm9yIGVkaXQgZGlzdGFuY2UgdG8gaW1wcm92ZSBxdWVyeSBwZXJmb3JtYW5jZS5cbiAqXG4gKiBUbyBlc2NhcGUgc3BlY2lhbCBjaGFyYWN0ZXJzIHRoZSBiYWNrc2xhc2ggY2hhcmFjdGVyICdcXCcgY2FuIGJlIHVzZWQsIHRoaXMgYWxsb3dzIHNlYXJjaGVzIHRvIGluY2x1ZGVcbiAqIGNoYXJhY3RlcnMgdGhhdCB3b3VsZCBub3JtYWxseSBiZSBjb25zaWRlcmVkIG1vZGlmaWVycywgZS5nLiBgZm9vXFx+MmAgd2lsbCBzZWFyY2ggZm9yIGEgdGVybSBcImZvb34yXCIgaW5zdGVhZFxuICogb2YgYXR0ZW1wdGluZyB0byBhcHBseSBhIGJvb3N0IG9mIDIgdG8gdGhlIHNlYXJjaCB0ZXJtIFwiZm9vXCIuXG4gKlxuICogQHR5cGVkZWYge3N0cmluZ30gbHVuci5JbmRleH5RdWVyeVN0cmluZ1xuICogQGV4YW1wbGUgPGNhcHRpb24+U2ltcGxlIHNpbmdsZSB0ZXJtIHF1ZXJ5PC9jYXB0aW9uPlxuICogaGVsbG9cbiAqIEBleGFtcGxlIDxjYXB0aW9uPk11bHRpcGxlIHRlcm0gcXVlcnk8L2NhcHRpb24+XG4gKiBoZWxsbyB3b3JsZFxuICogQGV4YW1wbGUgPGNhcHRpb24+dGVybSBzY29wZWQgdG8gYSBmaWVsZDwvY2FwdGlvbj5cbiAqIHRpdGxlOmhlbGxvXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj50ZXJtIHdpdGggYSBib29zdCBvZiAxMDwvY2FwdGlvbj5cbiAqIGhlbGxvXjEwXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj50ZXJtIHdpdGggYW4gZWRpdCBkaXN0YW5jZSBvZiAyPC9jYXB0aW9uPlxuICogaGVsbG9+MlxuICovXG5cbi8qKlxuICogUGVyZm9ybXMgYSBzZWFyY2ggYWdhaW5zdCB0aGUgaW5kZXggdXNpbmcgbHVuciBxdWVyeSBzeW50YXguXG4gKlxuICogUmVzdWx0cyB3aWxsIGJlIHJldHVybmVkIHNvcnRlZCBieSB0aGVpciBzY29yZSwgdGhlIG1vc3QgcmVsZXZhbnQgcmVzdWx0c1xuICogd2lsbCBiZSByZXR1cm5lZCBmaXJzdC5cbiAqXG4gKiBGb3IgbW9yZSBwcm9ncmFtbWF0aWMgcXVlcnlpbmcgdXNlIGx1bnIuSW5kZXgjcXVlcnkuXG4gKlxuICogQHBhcmFtIHtsdW5yLkluZGV4flF1ZXJ5U3RyaW5nfSBxdWVyeVN0cmluZyAtIEEgc3RyaW5nIGNvbnRhaW5pbmcgYSBsdW5yIHF1ZXJ5LlxuICogQHRocm93cyB7bHVuci5RdWVyeVBhcnNlRXJyb3J9IElmIHRoZSBwYXNzZWQgcXVlcnkgc3RyaW5nIGNhbm5vdCBiZSBwYXJzZWQuXG4gKiBAcmV0dXJucyB7bHVuci5JbmRleH5SZXN1bHRbXX1cbiAqL1xubHVuci5JbmRleC5wcm90b3R5cGUuc2VhcmNoID0gZnVuY3Rpb24gKHF1ZXJ5U3RyaW5nKSB7XG4gIHJldHVybiB0aGlzLnF1ZXJ5KGZ1bmN0aW9uIChxdWVyeSkge1xuICAgIHZhciBwYXJzZXIgPSBuZXcgbHVuci5RdWVyeVBhcnNlcihxdWVyeVN0cmluZywgcXVlcnkpXG4gICAgcGFyc2VyLnBhcnNlKClcbiAgfSlcbn1cblxuLyoqXG4gKiBBIHF1ZXJ5IGJ1aWxkZXIgY2FsbGJhY2sgcHJvdmlkZXMgYSBxdWVyeSBvYmplY3QgdG8gYmUgdXNlZCB0byBleHByZXNzXG4gKiB0aGUgcXVlcnkgdG8gcGVyZm9ybSBvbiB0aGUgaW5kZXguXG4gKlxuICogQGNhbGxiYWNrIGx1bnIuSW5kZXh+cXVlcnlCdWlsZGVyXG4gKiBAcGFyYW0ge2x1bnIuUXVlcnl9IHF1ZXJ5IC0gVGhlIHF1ZXJ5IG9iamVjdCB0byBidWlsZCB1cC5cbiAqIEB0aGlzIGx1bnIuUXVlcnlcbiAqL1xuXG4vKipcbiAqIFBlcmZvcm1zIGEgcXVlcnkgYWdhaW5zdCB0aGUgaW5kZXggdXNpbmcgdGhlIHlpZWxkZWQgbHVuci5RdWVyeSBvYmplY3QuXG4gKlxuICogSWYgcGVyZm9ybWluZyBwcm9ncmFtbWF0aWMgcXVlcmllcyBhZ2FpbnN0IHRoZSBpbmRleCwgdGhpcyBtZXRob2QgaXMgcHJlZmVycmVkXG4gKiBvdmVyIGx1bnIuSW5kZXgjc2VhcmNoIHNvIGFzIHRvIGF2b2lkIHRoZSBhZGRpdGlvbmFsIHF1ZXJ5IHBhcnNpbmcgb3ZlcmhlYWQuXG4gKlxuICogQSBxdWVyeSBvYmplY3QgaXMgeWllbGRlZCB0byB0aGUgc3VwcGxpZWQgZnVuY3Rpb24gd2hpY2ggc2hvdWxkIGJlIHVzZWQgdG9cbiAqIGV4cHJlc3MgdGhlIHF1ZXJ5IHRvIGJlIHJ1biBhZ2FpbnN0IHRoZSBpbmRleC5cbiAqXG4gKiBOb3RlIHRoYXQgYWx0aG91Z2ggdGhpcyBmdW5jdGlvbiB0YWtlcyBhIGNhbGxiYWNrIHBhcmFtZXRlciBpdCBpcyBfbm90XyBhblxuICogYXN5bmNocm9ub3VzIG9wZXJhdGlvbiwgdGhlIGNhbGxiYWNrIGlzIGp1c3QgeWllbGRlZCBhIHF1ZXJ5IG9iamVjdCB0byBiZVxuICogY3VzdG9taXplZC5cbiAqXG4gKiBAcGFyYW0ge2x1bnIuSW5kZXh+cXVlcnlCdWlsZGVyfSBmbiAtIEEgZnVuY3Rpb24gdGhhdCBpcyB1c2VkIHRvIGJ1aWxkIHRoZSBxdWVyeS5cbiAqIEByZXR1cm5zIHtsdW5yLkluZGV4flJlc3VsdFtdfVxuICovXG5sdW5yLkluZGV4LnByb3RvdHlwZS5xdWVyeSA9IGZ1bmN0aW9uIChmbikge1xuICAvLyBmb3IgZWFjaCBxdWVyeSBjbGF1c2VcbiAgLy8gKiBwcm9jZXNzIHRlcm1zXG4gIC8vICogZXhwYW5kIHRlcm1zIGZyb20gdG9rZW4gc2V0XG4gIC8vICogZmluZCBtYXRjaGluZyBkb2N1bWVudHMgYW5kIG1ldGFkYXRhXG4gIC8vICogZ2V0IGRvY3VtZW50IHZlY3RvcnNcbiAgLy8gKiBzY29yZSBkb2N1bWVudHNcblxuICB2YXIgcXVlcnkgPSBuZXcgbHVuci5RdWVyeSh0aGlzLmZpZWxkcyksXG4gICAgICBtYXRjaGluZ0ZpZWxkcyA9IE9iamVjdC5jcmVhdGUobnVsbCksXG4gICAgICBxdWVyeVZlY3RvcnMgPSBPYmplY3QuY3JlYXRlKG51bGwpLFxuICAgICAgdGVybUZpZWxkQ2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpXG5cbiAgZm4uY2FsbChxdWVyeSwgcXVlcnkpXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBxdWVyeS5jbGF1c2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgLypcbiAgICAgKiBVbmxlc3MgdGhlIHBpcGVsaW5lIGhhcyBiZWVuIGRpc2FibGVkIGZvciB0aGlzIHRlcm0sIHdoaWNoIGlzXG4gICAgICogdGhlIGNhc2UgZm9yIHRlcm1zIHdpdGggd2lsZGNhcmRzLCB3ZSBuZWVkIHRvIHBhc3MgdGhlIGNsYXVzZVxuICAgICAqIHRlcm0gdGhyb3VnaCB0aGUgc2VhcmNoIHBpcGVsaW5lLiBBIHBpcGVsaW5lIHJldHVybnMgYW4gYXJyYXlcbiAgICAgKiBvZiBwcm9jZXNzZWQgdGVybXMuIFBpcGVsaW5lIGZ1bmN0aW9ucyBtYXkgZXhwYW5kIHRoZSBwYXNzZWRcbiAgICAgKiB0ZXJtLCB3aGljaCBtZWFucyB3ZSBtYXkgZW5kIHVwIHBlcmZvcm1pbmcgbXVsdGlwbGUgaW5kZXggbG9va3Vwc1xuICAgICAqIGZvciBhIHNpbmdsZSBxdWVyeSB0ZXJtLlxuICAgICAqL1xuICAgIHZhciBjbGF1c2UgPSBxdWVyeS5jbGF1c2VzW2ldLFxuICAgICAgICB0ZXJtcyA9IG51bGxcblxuICAgIGlmIChjbGF1c2UudXNlUGlwZWxpbmUpIHtcbiAgICAgIHRlcm1zID0gdGhpcy5waXBlbGluZS5ydW5TdHJpbmcoY2xhdXNlLnRlcm0pXG4gICAgfSBlbHNlIHtcbiAgICAgIHRlcm1zID0gW2NsYXVzZS50ZXJtXVxuICAgIH1cblxuICAgIGZvciAodmFyIG0gPSAwOyBtIDwgdGVybXMubGVuZ3RoOyBtKyspIHtcbiAgICAgIHZhciB0ZXJtID0gdGVybXNbbV1cblxuICAgICAgLypcbiAgICAgICAqIEVhY2ggdGVybSByZXR1cm5lZCBmcm9tIHRoZSBwaXBlbGluZSBuZWVkcyB0byB1c2UgdGhlIHNhbWUgcXVlcnlcbiAgICAgICAqIGNsYXVzZSBvYmplY3QsIGUuZy4gdGhlIHNhbWUgYm9vc3QgYW5kIG9yIGVkaXQgZGlzdGFuY2UuIFRoZVxuICAgICAgICogc2ltcGxlc3Qgd2F5IHRvIGRvIHRoaXMgaXMgdG8gcmUtdXNlIHRoZSBjbGF1c2Ugb2JqZWN0IGJ1dCBtdXRhdGVcbiAgICAgICAqIGl0cyB0ZXJtIHByb3BlcnR5LlxuICAgICAgICovXG4gICAgICBjbGF1c2UudGVybSA9IHRlcm1cblxuICAgICAgLypcbiAgICAgICAqIEZyb20gdGhlIHRlcm0gaW4gdGhlIGNsYXVzZSB3ZSBjcmVhdGUgYSB0b2tlbiBzZXQgd2hpY2ggd2lsbCB0aGVuXG4gICAgICAgKiBiZSB1c2VkIHRvIGludGVyc2VjdCB0aGUgaW5kZXhlcyB0b2tlbiBzZXQgdG8gZ2V0IGEgbGlzdCBvZiB0ZXJtc1xuICAgICAgICogdG8gbG9va3VwIGluIHRoZSBpbnZlcnRlZCBpbmRleFxuICAgICAgICovXG4gICAgICB2YXIgdGVybVRva2VuU2V0ID0gbHVuci5Ub2tlblNldC5mcm9tQ2xhdXNlKGNsYXVzZSksXG4gICAgICAgICAgZXhwYW5kZWRUZXJtcyA9IHRoaXMudG9rZW5TZXQuaW50ZXJzZWN0KHRlcm1Ub2tlblNldCkudG9BcnJheSgpXG5cbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZXhwYW5kZWRUZXJtcy5sZW5ndGg7IGorKykge1xuICAgICAgICAvKlxuICAgICAgICAgKiBGb3IgZWFjaCB0ZXJtIGdldCB0aGUgcG9zdGluZyBhbmQgdGVybUluZGV4LCB0aGlzIGlzIHJlcXVpcmVkIGZvclxuICAgICAgICAgKiBidWlsZGluZyB0aGUgcXVlcnkgdmVjdG9yLlxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIGV4cGFuZGVkVGVybSA9IGV4cGFuZGVkVGVybXNbal0sXG4gICAgICAgICAgICBwb3N0aW5nID0gdGhpcy5pbnZlcnRlZEluZGV4W2V4cGFuZGVkVGVybV0sXG4gICAgICAgICAgICB0ZXJtSW5kZXggPSBwb3N0aW5nLl9pbmRleFxuXG4gICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgY2xhdXNlLmZpZWxkcy5sZW5ndGg7IGsrKykge1xuICAgICAgICAgIC8qXG4gICAgICAgICAgICogRm9yIGVhY2ggZmllbGQgdGhhdCB0aGlzIHF1ZXJ5IHRlcm0gaXMgc2NvcGVkIGJ5IChieSBkZWZhdWx0XG4gICAgICAgICAgICogYWxsIGZpZWxkcyBhcmUgaW4gc2NvcGUpIHdlIG5lZWQgdG8gZ2V0IGFsbCB0aGUgZG9jdW1lbnQgcmVmc1xuICAgICAgICAgICAqIHRoYXQgaGF2ZSB0aGlzIHRlcm0gaW4gdGhhdCBmaWVsZC5cbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIFRoZSBwb3N0aW5nIGlzIHRoZSBlbnRyeSBpbiB0aGUgaW52ZXJ0ZWRJbmRleCBmb3IgdGhlIG1hdGNoaW5nXG4gICAgICAgICAgICogdGVybSBmcm9tIGFib3ZlLlxuICAgICAgICAgICAqL1xuICAgICAgICAgIHZhciBmaWVsZCA9IGNsYXVzZS5maWVsZHNba10sXG4gICAgICAgICAgICAgIGZpZWxkUG9zdGluZyA9IHBvc3RpbmdbZmllbGRdLFxuICAgICAgICAgICAgICBtYXRjaGluZ0RvY3VtZW50UmVmcyA9IE9iamVjdC5rZXlzKGZpZWxkUG9zdGluZyksXG4gICAgICAgICAgICAgIHRlcm1GaWVsZCA9IGV4cGFuZGVkVGVybSArIFwiL1wiICsgZmllbGRcblxuICAgICAgICAgIC8qXG4gICAgICAgICAgICogVG8gc3VwcG9ydCBmaWVsZCBsZXZlbCBib29zdHMgYSBxdWVyeSB2ZWN0b3IgaXMgY3JlYXRlZCBwZXJcbiAgICAgICAgICAgKiBmaWVsZC4gVGhpcyB2ZWN0b3IgaXMgcG9wdWxhdGVkIHVzaW5nIHRoZSB0ZXJtSW5kZXggZm91bmQgZm9yXG4gICAgICAgICAgICogdGhlIHRlcm0gYW5kIGEgdW5pdCB2YWx1ZSB3aXRoIHRoZSBhcHByb3ByaWF0ZSBib29zdCBhcHBsaWVkLlxuICAgICAgICAgICAqXG4gICAgICAgICAgICogSWYgdGhlIHF1ZXJ5IHZlY3RvciBmb3IgdGhpcyBmaWVsZCBkb2VzIG5vdCBleGlzdCB5ZXQgaXQgbmVlZHNcbiAgICAgICAgICAgKiB0byBiZSBjcmVhdGVkLlxuICAgICAgICAgICAqL1xuICAgICAgICAgIGlmIChxdWVyeVZlY3RvcnNbZmllbGRdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHF1ZXJ5VmVjdG9yc1tmaWVsZF0gPSBuZXcgbHVuci5WZWN0b3JcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvKlxuICAgICAgICAgICAqIFVzaW5nIHVwc2VydCBiZWNhdXNlIHRoZXJlIGNvdWxkIGFscmVhZHkgYmUgYW4gZW50cnkgaW4gdGhlIHZlY3RvclxuICAgICAgICAgICAqIGZvciB0aGUgdGVybSB3ZSBhcmUgd29ya2luZyB3aXRoLiBJbiB0aGF0IGNhc2Ugd2UganVzdCBhZGQgdGhlIHNjb3Jlc1xuICAgICAgICAgICAqIHRvZ2V0aGVyLlxuICAgICAgICAgICAqL1xuICAgICAgICAgIHF1ZXJ5VmVjdG9yc1tmaWVsZF0udXBzZXJ0KHRlcm1JbmRleCwgMSAqIGNsYXVzZS5ib29zdCwgZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIGEgKyBiIH0pXG5cbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBJZiB3ZSd2ZSBhbHJlYWR5IHNlZW4gdGhpcyB0ZXJtLCBmaWVsZCBjb21ibyB0aGVuIHdlJ3ZlIGFscmVhZHkgY29sbGVjdGVkXG4gICAgICAgICAgICogdGhlIG1hdGNoaW5nIGRvY3VtZW50cyBhbmQgbWV0YWRhdGEsIG5vIG5lZWQgdG8gZ28gdGhyb3VnaCBhbGwgdGhhdCBhZ2FpblxuICAgICAgICAgICAqL1xuICAgICAgICAgIGlmICh0ZXJtRmllbGRDYWNoZVt0ZXJtRmllbGRdKSB7XG4gICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGZvciAodmFyIGwgPSAwOyBsIDwgbWF0Y2hpbmdEb2N1bWVudFJlZnMubGVuZ3RoOyBsKyspIHtcbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgKiBBbGwgbWV0YWRhdGEgZm9yIHRoaXMgdGVybS9maWVsZC9kb2N1bWVudCB0cmlwbGVcbiAgICAgICAgICAgICAqIGFyZSB0aGVuIGV4dHJhY3RlZCBhbmQgY29sbGVjdGVkIGludG8gYW4gaW5zdGFuY2VcbiAgICAgICAgICAgICAqIG9mIGx1bnIuTWF0Y2hEYXRhIHJlYWR5IHRvIGJlIHJldHVybmVkIGluIHRoZSBxdWVyeVxuICAgICAgICAgICAgICogcmVzdWx0c1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICB2YXIgbWF0Y2hpbmdEb2N1bWVudFJlZiA9IG1hdGNoaW5nRG9jdW1lbnRSZWZzW2xdLFxuICAgICAgICAgICAgICAgIG1hdGNoaW5nRmllbGRSZWYgPSBuZXcgbHVuci5GaWVsZFJlZiAobWF0Y2hpbmdEb2N1bWVudFJlZiwgZmllbGQpLFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhID0gZmllbGRQb3N0aW5nW21hdGNoaW5nRG9jdW1lbnRSZWZdLFxuICAgICAgICAgICAgICAgIGZpZWxkTWF0Y2hcblxuICAgICAgICAgICAgaWYgKChmaWVsZE1hdGNoID0gbWF0Y2hpbmdGaWVsZHNbbWF0Y2hpbmdGaWVsZFJlZl0pID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgbWF0Y2hpbmdGaWVsZHNbbWF0Y2hpbmdGaWVsZFJlZl0gPSBuZXcgbHVuci5NYXRjaERhdGEgKGV4cGFuZGVkVGVybSwgZmllbGQsIG1ldGFkYXRhKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZmllbGRNYXRjaC5hZGQoZXhwYW5kZWRUZXJtLCBmaWVsZCwgbWV0YWRhdGEpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0ZXJtRmllbGRDYWNoZVt0ZXJtRmllbGRdID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdmFyIG1hdGNoaW5nRmllbGRSZWZzID0gT2JqZWN0LmtleXMobWF0Y2hpbmdGaWVsZHMpLFxuICAgICAgcmVzdWx0cyA9IFtdLFxuICAgICAgbWF0Y2hlcyA9IE9iamVjdC5jcmVhdGUobnVsbClcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IG1hdGNoaW5nRmllbGRSZWZzLmxlbmd0aDsgaSsrKSB7XG4gICAgLypcbiAgICAgKiBDdXJyZW50bHkgd2UgaGF2ZSBkb2N1bWVudCBmaWVsZHMgdGhhdCBtYXRjaCB0aGUgcXVlcnksIGJ1dCB3ZVxuICAgICAqIG5lZWQgdG8gcmV0dXJuIGRvY3VtZW50cy4gVGhlIG1hdGNoRGF0YSBhbmQgc2NvcmVzIGFyZSBjb21iaW5lZFxuICAgICAqIGZyb20gbXVsdGlwbGUgZmllbGRzIGJlbG9uZ2luZyB0byB0aGUgc2FtZSBkb2N1bWVudC5cbiAgICAgKlxuICAgICAqIFNjb3JlcyBhcmUgY2FsY3VsYXRlZCBieSBmaWVsZCwgdXNpbmcgdGhlIHF1ZXJ5IHZlY3RvcnMgY3JlYXRlZFxuICAgICAqIGFib3ZlLCBhbmQgY29tYmluZWQgaW50byBhIGZpbmFsIGRvY3VtZW50IHNjb3JlIHVzaW5nIGFkZGl0aW9uLlxuICAgICAqL1xuICAgIHZhciBmaWVsZFJlZiA9IGx1bnIuRmllbGRSZWYuZnJvbVN0cmluZyhtYXRjaGluZ0ZpZWxkUmVmc1tpXSksXG4gICAgICAgIGRvY1JlZiA9IGZpZWxkUmVmLmRvY1JlZixcbiAgICAgICAgZmllbGRWZWN0b3IgPSB0aGlzLmZpZWxkVmVjdG9yc1tmaWVsZFJlZl0sXG4gICAgICAgIHNjb3JlID0gcXVlcnlWZWN0b3JzW2ZpZWxkUmVmLmZpZWxkTmFtZV0uc2ltaWxhcml0eShmaWVsZFZlY3RvciksXG4gICAgICAgIGRvY01hdGNoXG5cbiAgICBpZiAoKGRvY01hdGNoID0gbWF0Y2hlc1tkb2NSZWZdKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBkb2NNYXRjaC5zY29yZSArPSBzY29yZVxuICAgICAgZG9jTWF0Y2gubWF0Y2hEYXRhLmNvbWJpbmUobWF0Y2hpbmdGaWVsZHNbZmllbGRSZWZdKVxuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgbWF0Y2ggPSB7XG4gICAgICAgIHJlZjogZG9jUmVmLFxuICAgICAgICBzY29yZTogc2NvcmUsXG4gICAgICAgIG1hdGNoRGF0YTogbWF0Y2hpbmdGaWVsZHNbZmllbGRSZWZdXG4gICAgICB9XG4gICAgICBtYXRjaGVzW2RvY1JlZl0gPSBtYXRjaFxuICAgICAgcmVzdWx0cy5wdXNoKG1hdGNoKVxuICAgIH1cbiAgfVxuXG4gIC8qXG4gICAqIFNvcnQgdGhlIHJlc3VsdHMgb2JqZWN0cyBieSBzY29yZSwgaGlnaGVzdCBmaXJzdC5cbiAgICovXG4gIHJldHVybiByZXN1bHRzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICByZXR1cm4gYi5zY29yZSAtIGEuc2NvcmVcbiAgfSlcbn1cblxuLyoqXG4gKiBQcmVwYXJlcyB0aGUgaW5kZXggZm9yIEpTT04gc2VyaWFsaXphdGlvbi5cbiAqXG4gKiBUaGUgc2NoZW1hIGZvciB0aGlzIEpTT04gYmxvYiB3aWxsIGJlIGRlc2NyaWJlZCBpbiBhXG4gKiBzZXBhcmF0ZSBKU09OIHNjaGVtYSBmaWxlLlxuICpcbiAqIEByZXR1cm5zIHtPYmplY3R9XG4gKi9cbmx1bnIuSW5kZXgucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGludmVydGVkSW5kZXggPSBPYmplY3Qua2V5cyh0aGlzLmludmVydGVkSW5kZXgpXG4gICAgLnNvcnQoKVxuICAgIC5tYXAoZnVuY3Rpb24gKHRlcm0pIHtcbiAgICAgIHJldHVybiBbdGVybSwgdGhpcy5pbnZlcnRlZEluZGV4W3Rlcm1dXVxuICAgIH0sIHRoaXMpXG5cbiAgdmFyIGZpZWxkVmVjdG9ycyA9IE9iamVjdC5rZXlzKHRoaXMuZmllbGRWZWN0b3JzKVxuICAgIC5tYXAoZnVuY3Rpb24gKHJlZikge1xuICAgICAgcmV0dXJuIFtyZWYsIHRoaXMuZmllbGRWZWN0b3JzW3JlZl0udG9KU09OKCldXG4gICAgfSwgdGhpcylcblxuICByZXR1cm4ge1xuICAgIHZlcnNpb246IGx1bnIudmVyc2lvbixcbiAgICBmaWVsZHM6IHRoaXMuZmllbGRzLFxuICAgIGZpZWxkVmVjdG9yczogZmllbGRWZWN0b3JzLFxuICAgIGludmVydGVkSW5kZXg6IGludmVydGVkSW5kZXgsXG4gICAgcGlwZWxpbmU6IHRoaXMucGlwZWxpbmUudG9KU09OKClcbiAgfVxufVxuXG4vKipcbiAqIExvYWRzIGEgcHJldmlvdXNseSBzZXJpYWxpemVkIGx1bnIuSW5kZXhcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gc2VyaWFsaXplZEluZGV4IC0gQSBwcmV2aW91c2x5IHNlcmlhbGl6ZWQgbHVuci5JbmRleFxuICogQHJldHVybnMge2x1bnIuSW5kZXh9XG4gKi9cbmx1bnIuSW5kZXgubG9hZCA9IGZ1bmN0aW9uIChzZXJpYWxpemVkSW5kZXgpIHtcbiAgdmFyIGF0dHJzID0ge30sXG4gICAgICBmaWVsZFZlY3RvcnMgPSB7fSxcbiAgICAgIHNlcmlhbGl6ZWRWZWN0b3JzID0gc2VyaWFsaXplZEluZGV4LmZpZWxkVmVjdG9ycyxcbiAgICAgIGludmVydGVkSW5kZXggPSB7fSxcbiAgICAgIHNlcmlhbGl6ZWRJbnZlcnRlZEluZGV4ID0gc2VyaWFsaXplZEluZGV4LmludmVydGVkSW5kZXgsXG4gICAgICB0b2tlblNldEJ1aWxkZXIgPSBuZXcgbHVuci5Ub2tlblNldC5CdWlsZGVyLFxuICAgICAgcGlwZWxpbmUgPSBsdW5yLlBpcGVsaW5lLmxvYWQoc2VyaWFsaXplZEluZGV4LnBpcGVsaW5lKVxuXG4gIGlmIChzZXJpYWxpemVkSW5kZXgudmVyc2lvbiAhPSBsdW5yLnZlcnNpb24pIHtcbiAgICBsdW5yLnV0aWxzLndhcm4oXCJWZXJzaW9uIG1pc21hdGNoIHdoZW4gbG9hZGluZyBzZXJpYWxpc2VkIGluZGV4LiBDdXJyZW50IHZlcnNpb24gb2YgbHVuciAnXCIgKyBsdW5yLnZlcnNpb24gKyBcIicgZG9lcyBub3QgbWF0Y2ggc2VyaWFsaXplZCBpbmRleCAnXCIgKyBzZXJpYWxpemVkSW5kZXgudmVyc2lvbiArIFwiJ1wiKVxuICB9XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZXJpYWxpemVkVmVjdG9ycy5sZW5ndGg7IGkrKykge1xuICAgIHZhciB0dXBsZSA9IHNlcmlhbGl6ZWRWZWN0b3JzW2ldLFxuICAgICAgICByZWYgPSB0dXBsZVswXSxcbiAgICAgICAgZWxlbWVudHMgPSB0dXBsZVsxXVxuXG4gICAgZmllbGRWZWN0b3JzW3JlZl0gPSBuZXcgbHVuci5WZWN0b3IoZWxlbWVudHMpXG4gIH1cblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHNlcmlhbGl6ZWRJbnZlcnRlZEluZGV4Lmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHR1cGxlID0gc2VyaWFsaXplZEludmVydGVkSW5kZXhbaV0sXG4gICAgICAgIHRlcm0gPSB0dXBsZVswXSxcbiAgICAgICAgcG9zdGluZyA9IHR1cGxlWzFdXG5cbiAgICB0b2tlblNldEJ1aWxkZXIuaW5zZXJ0KHRlcm0pXG4gICAgaW52ZXJ0ZWRJbmRleFt0ZXJtXSA9IHBvc3RpbmdcbiAgfVxuXG4gIHRva2VuU2V0QnVpbGRlci5maW5pc2goKVxuXG4gIGF0dHJzLmZpZWxkcyA9IHNlcmlhbGl6ZWRJbmRleC5maWVsZHNcblxuICBhdHRycy5maWVsZFZlY3RvcnMgPSBmaWVsZFZlY3RvcnNcbiAgYXR0cnMuaW52ZXJ0ZWRJbmRleCA9IGludmVydGVkSW5kZXhcbiAgYXR0cnMudG9rZW5TZXQgPSB0b2tlblNldEJ1aWxkZXIucm9vdFxuICBhdHRycy5waXBlbGluZSA9IHBpcGVsaW5lXG5cbiAgcmV0dXJuIG5ldyBsdW5yLkluZGV4KGF0dHJzKVxufVxuLyohXG4gKiBsdW5yLkJ1aWxkZXJcbiAqIENvcHlyaWdodCAoQykgMjAxOCBPbGl2ZXIgTmlnaHRpbmdhbGVcbiAqL1xuXG4vKipcbiAqIGx1bnIuQnVpbGRlciBwZXJmb3JtcyBpbmRleGluZyBvbiBhIHNldCBvZiBkb2N1bWVudHMgYW5kXG4gKiByZXR1cm5zIGluc3RhbmNlcyBvZiBsdW5yLkluZGV4IHJlYWR5IGZvciBxdWVyeWluZy5cbiAqXG4gKiBBbGwgY29uZmlndXJhdGlvbiBvZiB0aGUgaW5kZXggaXMgZG9uZSB2aWEgdGhlIGJ1aWxkZXIsIHRoZVxuICogZmllbGRzIHRvIGluZGV4LCB0aGUgZG9jdW1lbnQgcmVmZXJlbmNlLCB0aGUgdGV4dCBwcm9jZXNzaW5nXG4gKiBwaXBlbGluZSBhbmQgZG9jdW1lbnQgc2NvcmluZyBwYXJhbWV0ZXJzIGFyZSBhbGwgc2V0IG9uIHRoZVxuICogYnVpbGRlciBiZWZvcmUgaW5kZXhpbmcuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcHJvcGVydHkge3N0cmluZ30gX3JlZiAtIEludGVybmFsIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgcmVmZXJlbmNlIGZpZWxkLlxuICogQHByb3BlcnR5IHtzdHJpbmdbXX0gX2ZpZWxkcyAtIEludGVybmFsIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgZmllbGRzIHRvIGluZGV4LlxuICogQHByb3BlcnR5IHtvYmplY3R9IGludmVydGVkSW5kZXggLSBUaGUgaW52ZXJ0ZWQgaW5kZXggbWFwcyB0ZXJtcyB0byBkb2N1bWVudCBmaWVsZHMuXG4gKiBAcHJvcGVydHkge29iamVjdH0gZG9jdW1lbnRUZXJtRnJlcXVlbmNpZXMgLSBLZWVwcyB0cmFjayBvZiBkb2N1bWVudCB0ZXJtIGZyZXF1ZW5jaWVzLlxuICogQHByb3BlcnR5IHtvYmplY3R9IGRvY3VtZW50TGVuZ3RocyAtIEtlZXBzIHRyYWNrIG9mIHRoZSBsZW5ndGggb2YgZG9jdW1lbnRzIGFkZGVkIHRvIHRoZSBpbmRleC5cbiAqIEBwcm9wZXJ0eSB7bHVuci50b2tlbml6ZXJ9IHRva2VuaXplciAtIEZ1bmN0aW9uIGZvciBzcGxpdHRpbmcgc3RyaW5ncyBpbnRvIHRva2VucyBmb3IgaW5kZXhpbmcuXG4gKiBAcHJvcGVydHkge2x1bnIuUGlwZWxpbmV9IHBpcGVsaW5lIC0gVGhlIHBpcGVsaW5lIHBlcmZvcm1zIHRleHQgcHJvY2Vzc2luZyBvbiB0b2tlbnMgYmVmb3JlIGluZGV4aW5nLlxuICogQHByb3BlcnR5IHtsdW5yLlBpcGVsaW5lfSBzZWFyY2hQaXBlbGluZSAtIEEgcGlwZWxpbmUgZm9yIHByb2Nlc3Npbmcgc2VhcmNoIHRlcm1zIGJlZm9yZSBxdWVyeWluZyB0aGUgaW5kZXguXG4gKiBAcHJvcGVydHkge251bWJlcn0gZG9jdW1lbnRDb3VudCAtIEtlZXBzIHRyYWNrIG9mIHRoZSB0b3RhbCBudW1iZXIgb2YgZG9jdW1lbnRzIGluZGV4ZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gX2IgLSBBIHBhcmFtZXRlciB0byBjb250cm9sIGZpZWxkIGxlbmd0aCBub3JtYWxpemF0aW9uLCBzZXR0aW5nIHRoaXMgdG8gMCBkaXNhYmxlZCBub3JtYWxpemF0aW9uLCAxIGZ1bGx5IG5vcm1hbGl6ZXMgZmllbGQgbGVuZ3RocywgdGhlIGRlZmF1bHQgdmFsdWUgaXMgMC43NS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBfazEgLSBBIHBhcmFtZXRlciB0byBjb250cm9sIGhvdyBxdWlja2x5IGFuIGluY3JlYXNlIGluIHRlcm0gZnJlcXVlbmN5IHJlc3VsdHMgaW4gdGVybSBmcmVxdWVuY3kgc2F0dXJhdGlvbiwgdGhlIGRlZmF1bHQgdmFsdWUgaXMgMS4yLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IHRlcm1JbmRleCAtIEEgY291bnRlciBpbmNyZW1lbnRlZCBmb3IgZWFjaCB1bmlxdWUgdGVybSwgdXNlZCB0byBpZGVudGlmeSBhIHRlcm1zIHBvc2l0aW9uIGluIHRoZSB2ZWN0b3Igc3BhY2UuXG4gKiBAcHJvcGVydHkge2FycmF5fSBtZXRhZGF0YVdoaXRlbGlzdCAtIEEgbGlzdCBvZiBtZXRhZGF0YSBrZXlzIHRoYXQgaGF2ZSBiZWVuIHdoaXRlbGlzdGVkIGZvciBlbnRyeSBpbiB0aGUgaW5kZXguXG4gKi9cbmx1bnIuQnVpbGRlciA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5fcmVmID0gXCJpZFwiXG4gIHRoaXMuX2ZpZWxkcyA9IFtdXG4gIHRoaXMuaW52ZXJ0ZWRJbmRleCA9IE9iamVjdC5jcmVhdGUobnVsbClcbiAgdGhpcy5maWVsZFRlcm1GcmVxdWVuY2llcyA9IHt9XG4gIHRoaXMuZmllbGRMZW5ndGhzID0ge31cbiAgdGhpcy50b2tlbml6ZXIgPSBsdW5yLnRva2VuaXplclxuICB0aGlzLnBpcGVsaW5lID0gbmV3IGx1bnIuUGlwZWxpbmVcbiAgdGhpcy5zZWFyY2hQaXBlbGluZSA9IG5ldyBsdW5yLlBpcGVsaW5lXG4gIHRoaXMuZG9jdW1lbnRDb3VudCA9IDBcbiAgdGhpcy5fYiA9IDAuNzVcbiAgdGhpcy5fazEgPSAxLjJcbiAgdGhpcy50ZXJtSW5kZXggPSAwXG4gIHRoaXMubWV0YWRhdGFXaGl0ZWxpc3QgPSBbXVxufVxuXG4vKipcbiAqIFNldHMgdGhlIGRvY3VtZW50IGZpZWxkIHVzZWQgYXMgdGhlIGRvY3VtZW50IHJlZmVyZW5jZS4gRXZlcnkgZG9jdW1lbnQgbXVzdCBoYXZlIHRoaXMgZmllbGQuXG4gKiBUaGUgdHlwZSBvZiB0aGlzIGZpZWxkIGluIHRoZSBkb2N1bWVudCBzaG91bGQgYmUgYSBzdHJpbmcsIGlmIGl0IGlzIG5vdCBhIHN0cmluZyBpdCB3aWxsIGJlXG4gKiBjb2VyY2VkIGludG8gYSBzdHJpbmcgYnkgY2FsbGluZyB0b1N0cmluZy5cbiAqXG4gKiBUaGUgZGVmYXVsdCByZWYgaXMgJ2lkJy5cbiAqXG4gKiBUaGUgcmVmIHNob3VsZCBfbm90XyBiZSBjaGFuZ2VkIGR1cmluZyBpbmRleGluZywgaXQgc2hvdWxkIGJlIHNldCBiZWZvcmUgYW55IGRvY3VtZW50cyBhcmVcbiAqIGFkZGVkIHRvIHRoZSBpbmRleC4gQ2hhbmdpbmcgaXQgZHVyaW5nIGluZGV4aW5nIGNhbiBsZWFkIHRvIGluY29uc2lzdGVudCByZXN1bHRzLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSByZWYgLSBUaGUgbmFtZSBvZiB0aGUgcmVmZXJlbmNlIGZpZWxkIGluIHRoZSBkb2N1bWVudC5cbiAqL1xubHVuci5CdWlsZGVyLnByb3RvdHlwZS5yZWYgPSBmdW5jdGlvbiAocmVmKSB7XG4gIHRoaXMuX3JlZiA9IHJlZlxufVxuXG4vKipcbiAqIEFkZHMgYSBmaWVsZCB0byB0aGUgbGlzdCBvZiBkb2N1bWVudCBmaWVsZHMgdGhhdCB3aWxsIGJlIGluZGV4ZWQuIEV2ZXJ5IGRvY3VtZW50IGJlaW5nXG4gKiBpbmRleGVkIHNob3VsZCBoYXZlIHRoaXMgZmllbGQuIE51bGwgdmFsdWVzIGZvciB0aGlzIGZpZWxkIGluIGluZGV4ZWQgZG9jdW1lbnRzIHdpbGxcbiAqIG5vdCBjYXVzZSBlcnJvcnMgYnV0IHdpbGwgbGltaXQgdGhlIGNoYW5jZSBvZiB0aGF0IGRvY3VtZW50IGJlaW5nIHJldHJpZXZlZCBieSBzZWFyY2hlcy5cbiAqXG4gKiBBbGwgZmllbGRzIHNob3VsZCBiZSBhZGRlZCBiZWZvcmUgYWRkaW5nIGRvY3VtZW50cyB0byB0aGUgaW5kZXguIEFkZGluZyBmaWVsZHMgYWZ0ZXJcbiAqIGEgZG9jdW1lbnQgaGFzIGJlZW4gaW5kZXhlZCB3aWxsIGhhdmUgbm8gZWZmZWN0IG9uIGFscmVhZHkgaW5kZXhlZCBkb2N1bWVudHMuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGZpZWxkIC0gVGhlIG5hbWUgb2YgYSBmaWVsZCB0byBpbmRleCBpbiBhbGwgZG9jdW1lbnRzLlxuICovXG5sdW5yLkJ1aWxkZXIucHJvdG90eXBlLmZpZWxkID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gIHRoaXMuX2ZpZWxkcy5wdXNoKGZpZWxkKVxufVxuXG4vKipcbiAqIEEgcGFyYW1ldGVyIHRvIHR1bmUgdGhlIGFtb3VudCBvZiBmaWVsZCBsZW5ndGggbm9ybWFsaXNhdGlvbiB0aGF0IGlzIGFwcGxpZWQgd2hlblxuICogY2FsY3VsYXRpbmcgcmVsZXZhbmNlIHNjb3Jlcy4gQSB2YWx1ZSBvZiAwIHdpbGwgY29tcGxldGVseSBkaXNhYmxlIGFueSBub3JtYWxpc2F0aW9uXG4gKiBhbmQgYSB2YWx1ZSBvZiAxIHdpbGwgZnVsbHkgbm9ybWFsaXNlIGZpZWxkIGxlbmd0aHMuIFRoZSBkZWZhdWx0IGlzIDAuNzUuIFZhbHVlcyBvZiBiXG4gKiB3aWxsIGJlIGNsYW1wZWQgdG8gdGhlIHJhbmdlIDAgLSAxLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBudW1iZXIgLSBUaGUgdmFsdWUgdG8gc2V0IGZvciB0aGlzIHR1bmluZyBwYXJhbWV0ZXIuXG4gKi9cbmx1bnIuQnVpbGRlci5wcm90b3R5cGUuYiA9IGZ1bmN0aW9uIChudW1iZXIpIHtcbiAgaWYgKG51bWJlciA8IDApIHtcbiAgICB0aGlzLl9iID0gMFxuICB9IGVsc2UgaWYgKG51bWJlciA+IDEpIHtcbiAgICB0aGlzLl9iID0gMVxuICB9IGVsc2Uge1xuICAgIHRoaXMuX2IgPSBudW1iZXJcbiAgfVxufVxuXG4vKipcbiAqIEEgcGFyYW1ldGVyIHRoYXQgY29udHJvbHMgdGhlIHNwZWVkIGF0IHdoaWNoIGEgcmlzZSBpbiB0ZXJtIGZyZXF1ZW5jeSByZXN1bHRzIGluIHRlcm1cbiAqIGZyZXF1ZW5jeSBzYXR1cmF0aW9uLiBUaGUgZGVmYXVsdCB2YWx1ZSBpcyAxLjIuIFNldHRpbmcgdGhpcyB0byBhIGhpZ2hlciB2YWx1ZSB3aWxsIGdpdmVcbiAqIHNsb3dlciBzYXR1cmF0aW9uIGxldmVscywgYSBsb3dlciB2YWx1ZSB3aWxsIHJlc3VsdCBpbiBxdWlja2VyIHNhdHVyYXRpb24uXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IG51bWJlciAtIFRoZSB2YWx1ZSB0byBzZXQgZm9yIHRoaXMgdHVuaW5nIHBhcmFtZXRlci5cbiAqL1xubHVuci5CdWlsZGVyLnByb3RvdHlwZS5rMSA9IGZ1bmN0aW9uIChudW1iZXIpIHtcbiAgdGhpcy5fazEgPSBudW1iZXJcbn1cblxuLyoqXG4gKiBBZGRzIGEgZG9jdW1lbnQgdG8gdGhlIGluZGV4LlxuICpcbiAqIEJlZm9yZSBhZGRpbmcgZmllbGRzIHRvIHRoZSBpbmRleCB0aGUgaW5kZXggc2hvdWxkIGhhdmUgYmVlbiBmdWxseSBzZXR1cCwgd2l0aCB0aGUgZG9jdW1lbnRcbiAqIHJlZiBhbmQgYWxsIGZpZWxkcyB0byBpbmRleCBhbHJlYWR5IGhhdmluZyBiZWVuIHNwZWNpZmllZC5cbiAqXG4gKiBUaGUgZG9jdW1lbnQgbXVzdCBoYXZlIGEgZmllbGQgbmFtZSBhcyBzcGVjaWZpZWQgYnkgdGhlIHJlZiAoYnkgZGVmYXVsdCB0aGlzIGlzICdpZCcpIGFuZFxuICogaXQgc2hvdWxkIGhhdmUgYWxsIGZpZWxkcyBkZWZpbmVkIGZvciBpbmRleGluZywgdGhvdWdoIG51bGwgb3IgdW5kZWZpbmVkIHZhbHVlcyB3aWxsIG5vdFxuICogY2F1c2UgZXJyb3JzLlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBkb2MgLSBUaGUgZG9jdW1lbnQgdG8gYWRkIHRvIHRoZSBpbmRleC5cbiAqL1xubHVuci5CdWlsZGVyLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAoZG9jKSB7XG4gIHZhciBkb2NSZWYgPSBkb2NbdGhpcy5fcmVmXVxuXG4gIHRoaXMuZG9jdW1lbnRDb3VudCArPSAxXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9maWVsZHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgZmllbGROYW1lID0gdGhpcy5fZmllbGRzW2ldLFxuICAgICAgICBmaWVsZCA9IGRvY1tmaWVsZE5hbWVdLFxuICAgICAgICB0b2tlbnMgPSB0aGlzLnRva2VuaXplcihmaWVsZCksXG4gICAgICAgIHRlcm1zID0gdGhpcy5waXBlbGluZS5ydW4odG9rZW5zKSxcbiAgICAgICAgZmllbGRSZWYgPSBuZXcgbHVuci5GaWVsZFJlZiAoZG9jUmVmLCBmaWVsZE5hbWUpLFxuICAgICAgICBmaWVsZFRlcm1zID0gT2JqZWN0LmNyZWF0ZShudWxsKVxuXG4gICAgdGhpcy5maWVsZFRlcm1GcmVxdWVuY2llc1tmaWVsZFJlZl0gPSBmaWVsZFRlcm1zXG4gICAgdGhpcy5maWVsZExlbmd0aHNbZmllbGRSZWZdID0gMFxuXG4gICAgLy8gc3RvcmUgdGhlIGxlbmd0aCBvZiB0aGlzIGZpZWxkIGZvciB0aGlzIGRvY3VtZW50XG4gICAgdGhpcy5maWVsZExlbmd0aHNbZmllbGRSZWZdICs9IHRlcm1zLmxlbmd0aFxuXG4gICAgLy8gY2FsY3VsYXRlIHRlcm0gZnJlcXVlbmNpZXMgZm9yIHRoaXMgZmllbGRcbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRlcm1zLmxlbmd0aDsgaisrKSB7XG4gICAgICB2YXIgdGVybSA9IHRlcm1zW2pdXG5cbiAgICAgIGlmIChmaWVsZFRlcm1zW3Rlcm1dID09IHVuZGVmaW5lZCkge1xuICAgICAgICBmaWVsZFRlcm1zW3Rlcm1dID0gMFxuICAgICAgfVxuXG4gICAgICBmaWVsZFRlcm1zW3Rlcm1dICs9IDFcblxuICAgICAgLy8gYWRkIHRvIGludmVydGVkIGluZGV4XG4gICAgICAvLyBjcmVhdGUgYW4gaW5pdGlhbCBwb3N0aW5nIGlmIG9uZSBkb2Vzbid0IGV4aXN0XG4gICAgICBpZiAodGhpcy5pbnZlcnRlZEluZGV4W3Rlcm1dID09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YXIgcG9zdGluZyA9IE9iamVjdC5jcmVhdGUobnVsbClcbiAgICAgICAgcG9zdGluZ1tcIl9pbmRleFwiXSA9IHRoaXMudGVybUluZGV4XG4gICAgICAgIHRoaXMudGVybUluZGV4ICs9IDFcblxuICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IHRoaXMuX2ZpZWxkcy5sZW5ndGg7IGsrKykge1xuICAgICAgICAgIHBvc3RpbmdbdGhpcy5fZmllbGRzW2tdXSA9IE9iamVjdC5jcmVhdGUobnVsbClcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaW52ZXJ0ZWRJbmRleFt0ZXJtXSA9IHBvc3RpbmdcbiAgICAgIH1cblxuICAgICAgLy8gYWRkIGFuIGVudHJ5IGZvciB0aGlzIHRlcm0vZmllbGROYW1lL2RvY1JlZiB0byB0aGUgaW52ZXJ0ZWRJbmRleFxuICAgICAgaWYgKHRoaXMuaW52ZXJ0ZWRJbmRleFt0ZXJtXVtmaWVsZE5hbWVdW2RvY1JlZl0gPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuaW52ZXJ0ZWRJbmRleFt0ZXJtXVtmaWVsZE5hbWVdW2RvY1JlZl0gPSBPYmplY3QuY3JlYXRlKG51bGwpXG4gICAgICB9XG5cbiAgICAgIC8vIHN0b3JlIGFsbCB3aGl0ZWxpc3RlZCBtZXRhZGF0YSBhYm91dCB0aGlzIHRva2VuIGluIHRoZVxuICAgICAgLy8gaW52ZXJ0ZWQgaW5kZXhcbiAgICAgIGZvciAodmFyIGwgPSAwOyBsIDwgdGhpcy5tZXRhZGF0YVdoaXRlbGlzdC5sZW5ndGg7IGwrKykge1xuICAgICAgICB2YXIgbWV0YWRhdGFLZXkgPSB0aGlzLm1ldGFkYXRhV2hpdGVsaXN0W2xdLFxuICAgICAgICAgICAgbWV0YWRhdGEgPSB0ZXJtLm1ldGFkYXRhW21ldGFkYXRhS2V5XVxuXG4gICAgICAgIGlmICh0aGlzLmludmVydGVkSW5kZXhbdGVybV1bZmllbGROYW1lXVtkb2NSZWZdW21ldGFkYXRhS2V5XSA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB0aGlzLmludmVydGVkSW5kZXhbdGVybV1bZmllbGROYW1lXVtkb2NSZWZdW21ldGFkYXRhS2V5XSA9IFtdXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmludmVydGVkSW5kZXhbdGVybV1bZmllbGROYW1lXVtkb2NSZWZdW21ldGFkYXRhS2V5XS5wdXNoKG1ldGFkYXRhKVxuICAgICAgfVxuICAgIH1cblxuICB9XG59XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgYXZlcmFnZSBkb2N1bWVudCBsZW5ndGggZm9yIHRoaXMgaW5kZXhcbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5sdW5yLkJ1aWxkZXIucHJvdG90eXBlLmNhbGN1bGF0ZUF2ZXJhZ2VGaWVsZExlbmd0aHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgdmFyIGZpZWxkUmVmcyA9IE9iamVjdC5rZXlzKHRoaXMuZmllbGRMZW5ndGhzKSxcbiAgICAgIG51bWJlck9mRmllbGRzID0gZmllbGRSZWZzLmxlbmd0aCxcbiAgICAgIGFjY3VtdWxhdG9yID0ge30sXG4gICAgICBkb2N1bWVudHNXaXRoRmllbGQgPSB7fVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtYmVyT2ZGaWVsZHM7IGkrKykge1xuICAgIHZhciBmaWVsZFJlZiA9IGx1bnIuRmllbGRSZWYuZnJvbVN0cmluZyhmaWVsZFJlZnNbaV0pLFxuICAgICAgICBmaWVsZCA9IGZpZWxkUmVmLmZpZWxkTmFtZVxuXG4gICAgZG9jdW1lbnRzV2l0aEZpZWxkW2ZpZWxkXSB8fCAoZG9jdW1lbnRzV2l0aEZpZWxkW2ZpZWxkXSA9IDApXG4gICAgZG9jdW1lbnRzV2l0aEZpZWxkW2ZpZWxkXSArPSAxXG5cbiAgICBhY2N1bXVsYXRvcltmaWVsZF0gfHwgKGFjY3VtdWxhdG9yW2ZpZWxkXSA9IDApXG4gICAgYWNjdW11bGF0b3JbZmllbGRdICs9IHRoaXMuZmllbGRMZW5ndGhzW2ZpZWxkUmVmXVxuICB9XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9maWVsZHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgZmllbGQgPSB0aGlzLl9maWVsZHNbaV1cbiAgICBhY2N1bXVsYXRvcltmaWVsZF0gPSBhY2N1bXVsYXRvcltmaWVsZF0gLyBkb2N1bWVudHNXaXRoRmllbGRbZmllbGRdXG4gIH1cblxuICB0aGlzLmF2ZXJhZ2VGaWVsZExlbmd0aCA9IGFjY3VtdWxhdG9yXG59XG5cbi8qKlxuICogQnVpbGRzIGEgdmVjdG9yIHNwYWNlIG1vZGVsIG9mIGV2ZXJ5IGRvY3VtZW50IHVzaW5nIGx1bnIuVmVjdG9yXG4gKlxuICogQHByaXZhdGVcbiAqL1xubHVuci5CdWlsZGVyLnByb3RvdHlwZS5jcmVhdGVGaWVsZFZlY3RvcnMgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBmaWVsZFZlY3RvcnMgPSB7fSxcbiAgICAgIGZpZWxkUmVmcyA9IE9iamVjdC5rZXlzKHRoaXMuZmllbGRUZXJtRnJlcXVlbmNpZXMpLFxuICAgICAgZmllbGRSZWZzTGVuZ3RoID0gZmllbGRSZWZzLmxlbmd0aCxcbiAgICAgIHRlcm1JZGZDYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbClcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGZpZWxkUmVmc0xlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGZpZWxkUmVmID0gbHVuci5GaWVsZFJlZi5mcm9tU3RyaW5nKGZpZWxkUmVmc1tpXSksXG4gICAgICAgIGZpZWxkID0gZmllbGRSZWYuZmllbGROYW1lLFxuICAgICAgICBmaWVsZExlbmd0aCA9IHRoaXMuZmllbGRMZW5ndGhzW2ZpZWxkUmVmXSxcbiAgICAgICAgZmllbGRWZWN0b3IgPSBuZXcgbHVuci5WZWN0b3IsXG4gICAgICAgIHRlcm1GcmVxdWVuY2llcyA9IHRoaXMuZmllbGRUZXJtRnJlcXVlbmNpZXNbZmllbGRSZWZdLFxuICAgICAgICB0ZXJtcyA9IE9iamVjdC5rZXlzKHRlcm1GcmVxdWVuY2llcyksXG4gICAgICAgIHRlcm1zTGVuZ3RoID0gdGVybXMubGVuZ3RoXG5cbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRlcm1zTGVuZ3RoOyBqKyspIHtcbiAgICAgIHZhciB0ZXJtID0gdGVybXNbal0sXG4gICAgICAgICAgdGYgPSB0ZXJtRnJlcXVlbmNpZXNbdGVybV0sXG4gICAgICAgICAgdGVybUluZGV4ID0gdGhpcy5pbnZlcnRlZEluZGV4W3Rlcm1dLl9pbmRleCxcbiAgICAgICAgICBpZGYsIHNjb3JlLCBzY29yZVdpdGhQcmVjaXNpb25cblxuICAgICAgaWYgKHRlcm1JZGZDYWNoZVt0ZXJtXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlkZiA9IGx1bnIuaWRmKHRoaXMuaW52ZXJ0ZWRJbmRleFt0ZXJtXSwgdGhpcy5kb2N1bWVudENvdW50KVxuICAgICAgICB0ZXJtSWRmQ2FjaGVbdGVybV0gPSBpZGZcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlkZiA9IHRlcm1JZGZDYWNoZVt0ZXJtXVxuICAgICAgfVxuXG4gICAgICBzY29yZSA9IGlkZiAqICgodGhpcy5fazEgKyAxKSAqIHRmKSAvICh0aGlzLl9rMSAqICgxIC0gdGhpcy5fYiArIHRoaXMuX2IgKiAoZmllbGRMZW5ndGggLyB0aGlzLmF2ZXJhZ2VGaWVsZExlbmd0aFtmaWVsZF0pKSArIHRmKVxuICAgICAgc2NvcmVXaXRoUHJlY2lzaW9uID0gTWF0aC5yb3VuZChzY29yZSAqIDEwMDApIC8gMTAwMFxuICAgICAgLy8gQ29udmVydHMgMS4yMzQ1Njc4OSB0byAxLjIzNC5cbiAgICAgIC8vIFJlZHVjaW5nIHRoZSBwcmVjaXNpb24gc28gdGhhdCB0aGUgdmVjdG9ycyB0YWtlIHVwIGxlc3NcbiAgICAgIC8vIHNwYWNlIHdoZW4gc2VyaWFsaXNlZC4gRG9pbmcgaXQgbm93IHNvIHRoYXQgdGhleSBiZWhhdmVcbiAgICAgIC8vIHRoZSBzYW1lIGJlZm9yZSBhbmQgYWZ0ZXIgc2VyaWFsaXNhdGlvbi4gQWxzbywgdGhpcyBpc1xuICAgICAgLy8gdGhlIGZhc3Rlc3QgYXBwcm9hY2ggdG8gcmVkdWNpbmcgYSBudW1iZXIncyBwcmVjaXNpb24gaW5cbiAgICAgIC8vIEphdmFTY3JpcHQuXG5cbiAgICAgIGZpZWxkVmVjdG9yLmluc2VydCh0ZXJtSW5kZXgsIHNjb3JlV2l0aFByZWNpc2lvbilcbiAgICB9XG5cbiAgICBmaWVsZFZlY3RvcnNbZmllbGRSZWZdID0gZmllbGRWZWN0b3JcbiAgfVxuXG4gIHRoaXMuZmllbGRWZWN0b3JzID0gZmllbGRWZWN0b3JzXG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHRva2VuIHNldCBvZiBhbGwgdG9rZW5zIGluIHRoZSBpbmRleCB1c2luZyBsdW5yLlRva2VuU2V0XG4gKlxuICogQHByaXZhdGVcbiAqL1xubHVuci5CdWlsZGVyLnByb3RvdHlwZS5jcmVhdGVUb2tlblNldCA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy50b2tlblNldCA9IGx1bnIuVG9rZW5TZXQuZnJvbUFycmF5KFxuICAgIE9iamVjdC5rZXlzKHRoaXMuaW52ZXJ0ZWRJbmRleCkuc29ydCgpXG4gIClcbn1cblxuLyoqXG4gKiBCdWlsZHMgdGhlIGluZGV4LCBjcmVhdGluZyBhbiBpbnN0YW5jZSBvZiBsdW5yLkluZGV4LlxuICpcbiAqIFRoaXMgY29tcGxldGVzIHRoZSBpbmRleGluZyBwcm9jZXNzIGFuZCBzaG91bGQgb25seSBiZSBjYWxsZWRcbiAqIG9uY2UgYWxsIGRvY3VtZW50cyBoYXZlIGJlZW4gYWRkZWQgdG8gdGhlIGluZGV4LlxuICpcbiAqIEByZXR1cm5zIHtsdW5yLkluZGV4fVxuICovXG5sdW5yLkJ1aWxkZXIucHJvdG90eXBlLmJ1aWxkID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLmNhbGN1bGF0ZUF2ZXJhZ2VGaWVsZExlbmd0aHMoKVxuICB0aGlzLmNyZWF0ZUZpZWxkVmVjdG9ycygpXG4gIHRoaXMuY3JlYXRlVG9rZW5TZXQoKVxuXG4gIHJldHVybiBuZXcgbHVuci5JbmRleCh7XG4gICAgaW52ZXJ0ZWRJbmRleDogdGhpcy5pbnZlcnRlZEluZGV4LFxuICAgIGZpZWxkVmVjdG9yczogdGhpcy5maWVsZFZlY3RvcnMsXG4gICAgdG9rZW5TZXQ6IHRoaXMudG9rZW5TZXQsXG4gICAgZmllbGRzOiB0aGlzLl9maWVsZHMsXG4gICAgcGlwZWxpbmU6IHRoaXMuc2VhcmNoUGlwZWxpbmVcbiAgfSlcbn1cblxuLyoqXG4gKiBBcHBsaWVzIGEgcGx1Z2luIHRvIHRoZSBpbmRleCBidWlsZGVyLlxuICpcbiAqIEEgcGx1Z2luIGlzIGEgZnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgd2l0aCB0aGUgaW5kZXggYnVpbGRlciBhcyBpdHMgY29udGV4dC5cbiAqIFBsdWdpbnMgY2FuIGJlIHVzZWQgdG8gY3VzdG9taXNlIG9yIGV4dGVuZCB0aGUgYmVoYXZpb3VyIG9mIHRoZSBpbmRleFxuICogaW4gc29tZSB3YXkuIEEgcGx1Z2luIGlzIGp1c3QgYSBmdW5jdGlvbiwgdGhhdCBlbmNhcHN1bGF0ZWQgdGhlIGN1c3RvbVxuICogYmVoYXZpb3VyIHRoYXQgc2hvdWxkIGJlIGFwcGxpZWQgd2hlbiBidWlsZGluZyB0aGUgaW5kZXguXG4gKlxuICogVGhlIHBsdWdpbiBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCB3aXRoIHRoZSBpbmRleCBidWlsZGVyIGFzIGl0cyBhcmd1bWVudCwgYWRkaXRpb25hbFxuICogYXJndW1lbnRzIGNhbiBhbHNvIGJlIHBhc3NlZCB3aGVuIGNhbGxpbmcgdXNlLiBUaGUgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWRcbiAqIHdpdGggdGhlIGluZGV4IGJ1aWxkZXIgYXMgaXRzIGNvbnRleHQuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gcGx1Z2luIFRoZSBwbHVnaW4gdG8gYXBwbHkuXG4gKi9cbmx1bnIuQnVpbGRlci5wcm90b3R5cGUudXNlID0gZnVuY3Rpb24gKGZuKSB7XG4gIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKVxuICBhcmdzLnVuc2hpZnQodGhpcylcbiAgZm4uYXBwbHkodGhpcywgYXJncylcbn1cbi8qKlxuICogQ29udGFpbnMgYW5kIGNvbGxlY3RzIG1ldGFkYXRhIGFib3V0IGEgbWF0Y2hpbmcgZG9jdW1lbnQuXG4gKiBBIHNpbmdsZSBpbnN0YW5jZSBvZiBsdW5yLk1hdGNoRGF0YSBpcyByZXR1cm5lZCBhcyBwYXJ0IG9mIGV2ZXJ5XG4gKiBsdW5yLkluZGV4flJlc3VsdC5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXJtIC0gVGhlIHRlcm0gdGhpcyBtYXRjaCBkYXRhIGlzIGFzc29jaWF0ZWQgd2l0aFxuICogQHBhcmFtIHtzdHJpbmd9IGZpZWxkIC0gVGhlIGZpZWxkIGluIHdoaWNoIHRoZSB0ZXJtIHdhcyBmb3VuZFxuICogQHBhcmFtIHtvYmplY3R9IG1ldGFkYXRhIC0gVGhlIG1ldGFkYXRhIHJlY29yZGVkIGFib3V0IHRoaXMgdGVybSBpbiB0aGlzIGZpZWxkXG4gKiBAcHJvcGVydHkge29iamVjdH0gbWV0YWRhdGEgLSBBIGNsb25lZCBjb2xsZWN0aW9uIG9mIG1ldGFkYXRhIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGRvY3VtZW50LlxuICogQHNlZSB7QGxpbmsgbHVuci5JbmRleH5SZXN1bHR9XG4gKi9cbmx1bnIuTWF0Y2hEYXRhID0gZnVuY3Rpb24gKHRlcm0sIGZpZWxkLCBtZXRhZGF0YSkge1xuICB2YXIgY2xvbmVkTWV0YWRhdGEgPSBPYmplY3QuY3JlYXRlKG51bGwpLFxuICAgICAgbWV0YWRhdGFLZXlzID0gT2JqZWN0LmtleXMobWV0YWRhdGEpXG5cbiAgLy8gQ2xvbmluZyB0aGUgbWV0YWRhdGEgdG8gcHJldmVudCB0aGUgb3JpZ2luYWxcbiAgLy8gYmVpbmcgbXV0YXRlZCBkdXJpbmcgbWF0Y2ggZGF0YSBjb21iaW5hdGlvbi5cbiAgLy8gTWV0YWRhdGEgaXMga2VwdCBpbiBhbiBhcnJheSB3aXRoaW4gdGhlIGludmVydGVkXG4gIC8vIGluZGV4IHNvIGNsb25pbmcgdGhlIGRhdGEgY2FuIGJlIGRvbmUgd2l0aFxuICAvLyBBcnJheSNzbGljZVxuICBmb3IgKHZhciBpID0gMDsgaSA8IG1ldGFkYXRhS2V5cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBrZXkgPSBtZXRhZGF0YUtleXNbaV1cbiAgICBjbG9uZWRNZXRhZGF0YVtrZXldID0gbWV0YWRhdGFba2V5XS5zbGljZSgpXG4gIH1cblxuICB0aGlzLm1ldGFkYXRhID0gT2JqZWN0LmNyZWF0ZShudWxsKVxuICB0aGlzLm1ldGFkYXRhW3Rlcm1dID0gT2JqZWN0LmNyZWF0ZShudWxsKVxuICB0aGlzLm1ldGFkYXRhW3Rlcm1dW2ZpZWxkXSA9IGNsb25lZE1ldGFkYXRhXG59XG5cbi8qKlxuICogQW4gaW5zdGFuY2Ugb2YgbHVuci5NYXRjaERhdGEgd2lsbCBiZSBjcmVhdGVkIGZvciBldmVyeSB0ZXJtIHRoYXQgbWF0Y2hlcyBhXG4gKiBkb2N1bWVudC4gSG93ZXZlciBvbmx5IG9uZSBpbnN0YW5jZSBpcyByZXF1aXJlZCBpbiBhIGx1bnIuSW5kZXh+UmVzdWx0LiBUaGlzXG4gKiBtZXRob2QgY29tYmluZXMgbWV0YWRhdGEgZnJvbSBhbm90aGVyIGluc3RhbmNlIG9mIGx1bnIuTWF0Y2hEYXRhIHdpdGggdGhpc1xuICogb2JqZWN0cyBtZXRhZGF0YS5cbiAqXG4gKiBAcGFyYW0ge2x1bnIuTWF0Y2hEYXRhfSBvdGhlck1hdGNoRGF0YSAtIEFub3RoZXIgaW5zdGFuY2Ugb2YgbWF0Y2ggZGF0YSB0byBtZXJnZSB3aXRoIHRoaXMgb25lLlxuICogQHNlZSB7QGxpbmsgbHVuci5JbmRleH5SZXN1bHR9XG4gKi9cbmx1bnIuTWF0Y2hEYXRhLnByb3RvdHlwZS5jb21iaW5lID0gZnVuY3Rpb24gKG90aGVyTWF0Y2hEYXRhKSB7XG4gIHZhciB0ZXJtcyA9IE9iamVjdC5rZXlzKG90aGVyTWF0Y2hEYXRhLm1ldGFkYXRhKVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdGVybXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgdGVybSA9IHRlcm1zW2ldLFxuICAgICAgICBmaWVsZHMgPSBPYmplY3Qua2V5cyhvdGhlck1hdGNoRGF0YS5tZXRhZGF0YVt0ZXJtXSlcblxuICAgIGlmICh0aGlzLm1ldGFkYXRhW3Rlcm1dID09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5tZXRhZGF0YVt0ZXJtXSA9IE9iamVjdC5jcmVhdGUobnVsbClcbiAgICB9XG5cbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IGZpZWxkcy5sZW5ndGg7IGorKykge1xuICAgICAgdmFyIGZpZWxkID0gZmllbGRzW2pdLFxuICAgICAgICAgIGtleXMgPSBPYmplY3Qua2V5cyhvdGhlck1hdGNoRGF0YS5tZXRhZGF0YVt0ZXJtXVtmaWVsZF0pXG5cbiAgICAgIGlmICh0aGlzLm1ldGFkYXRhW3Rlcm1dW2ZpZWxkXSA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5tZXRhZGF0YVt0ZXJtXVtmaWVsZF0gPSBPYmplY3QuY3JlYXRlKG51bGwpXG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwga2V5cy5sZW5ndGg7IGsrKykge1xuICAgICAgICB2YXIga2V5ID0ga2V5c1trXVxuXG4gICAgICAgIGlmICh0aGlzLm1ldGFkYXRhW3Rlcm1dW2ZpZWxkXVtrZXldID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHRoaXMubWV0YWRhdGFbdGVybV1bZmllbGRdW2tleV0gPSBvdGhlck1hdGNoRGF0YS5tZXRhZGF0YVt0ZXJtXVtmaWVsZF1ba2V5XVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMubWV0YWRhdGFbdGVybV1bZmllbGRdW2tleV0gPSB0aGlzLm1ldGFkYXRhW3Rlcm1dW2ZpZWxkXVtrZXldLmNvbmNhdChvdGhlck1hdGNoRGF0YS5tZXRhZGF0YVt0ZXJtXVtmaWVsZF1ba2V5XSlcbiAgICAgICAgfVxuXG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQWRkIG1ldGFkYXRhIGZvciBhIHRlcm0vZmllbGQgcGFpciB0byB0aGlzIGluc3RhbmNlIG9mIG1hdGNoIGRhdGEuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHRlcm0gLSBUaGUgdGVybSB0aGlzIG1hdGNoIGRhdGEgaXMgYXNzb2NpYXRlZCB3aXRoXG4gKiBAcGFyYW0ge3N0cmluZ30gZmllbGQgLSBUaGUgZmllbGQgaW4gd2hpY2ggdGhlIHRlcm0gd2FzIGZvdW5kXG4gKiBAcGFyYW0ge29iamVjdH0gbWV0YWRhdGEgLSBUaGUgbWV0YWRhdGEgcmVjb3JkZWQgYWJvdXQgdGhpcyB0ZXJtIGluIHRoaXMgZmllbGRcbiAqL1xubHVuci5NYXRjaERhdGEucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uICh0ZXJtLCBmaWVsZCwgbWV0YWRhdGEpIHtcbiAgaWYgKCEodGVybSBpbiB0aGlzLm1ldGFkYXRhKSkge1xuICAgIHRoaXMubWV0YWRhdGFbdGVybV0gPSBPYmplY3QuY3JlYXRlKG51bGwpXG4gICAgdGhpcy5tZXRhZGF0YVt0ZXJtXVtmaWVsZF0gPSBtZXRhZGF0YVxuICAgIHJldHVyblxuICB9XG5cbiAgaWYgKCEoZmllbGQgaW4gdGhpcy5tZXRhZGF0YVt0ZXJtXSkpIHtcbiAgICB0aGlzLm1ldGFkYXRhW3Rlcm1dW2ZpZWxkXSA9IG1ldGFkYXRhXG4gICAgcmV0dXJuXG4gIH1cblxuICB2YXIgbWV0YWRhdGFLZXlzID0gT2JqZWN0LmtleXMobWV0YWRhdGEpXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXRhZGF0YUtleXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIga2V5ID0gbWV0YWRhdGFLZXlzW2ldXG5cbiAgICBpZiAoa2V5IGluIHRoaXMubWV0YWRhdGFbdGVybV1bZmllbGRdKSB7XG4gICAgICB0aGlzLm1ldGFkYXRhW3Rlcm1dW2ZpZWxkXVtrZXldID0gdGhpcy5tZXRhZGF0YVt0ZXJtXVtmaWVsZF1ba2V5XS5jb25jYXQobWV0YWRhdGFba2V5XSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tZXRhZGF0YVt0ZXJtXVtmaWVsZF1ba2V5XSA9IG1ldGFkYXRhW2tleV1cbiAgICB9XG4gIH1cbn1cbi8qKlxuICogQSBsdW5yLlF1ZXJ5IHByb3ZpZGVzIGEgcHJvZ3JhbW1hdGljIHdheSBvZiBkZWZpbmluZyBxdWVyaWVzIHRvIGJlIHBlcmZvcm1lZFxuICogYWdhaW5zdCBhIHtAbGluayBsdW5yLkluZGV4fS5cbiAqXG4gKiBQcmVmZXIgY29uc3RydWN0aW5nIGEgbHVuci5RdWVyeSB1c2luZyB0aGUge0BsaW5rIGx1bnIuSW5kZXgjcXVlcnl9IG1ldGhvZFxuICogc28gdGhlIHF1ZXJ5IG9iamVjdCBpcyBwcmUtaW5pdGlhbGl6ZWQgd2l0aCB0aGUgcmlnaHQgaW5kZXggZmllbGRzLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQHByb3BlcnR5IHtsdW5yLlF1ZXJ5fkNsYXVzZVtdfSBjbGF1c2VzIC0gQW4gYXJyYXkgb2YgcXVlcnkgY2xhdXNlcy5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nW119IGFsbEZpZWxkcyAtIEFuIGFycmF5IG9mIGFsbCBhdmFpbGFibGUgZmllbGRzIGluIGEgbHVuci5JbmRleC5cbiAqL1xubHVuci5RdWVyeSA9IGZ1bmN0aW9uIChhbGxGaWVsZHMpIHtcbiAgdGhpcy5jbGF1c2VzID0gW11cbiAgdGhpcy5hbGxGaWVsZHMgPSBhbGxGaWVsZHNcbn1cblxuLyoqXG4gKiBDb25zdGFudHMgZm9yIGluZGljYXRpbmcgd2hhdCBraW5kIG9mIGF1dG9tYXRpYyB3aWxkY2FyZCBpbnNlcnRpb24gd2lsbCBiZSB1c2VkIHdoZW4gY29uc3RydWN0aW5nIGEgcXVlcnkgY2xhdXNlLlxuICpcbiAqIFRoaXMgYWxsb3dzIHdpbGRjYXJkcyB0byBiZSBhZGRlZCB0byB0aGUgYmVnaW5uaW5nIGFuZCBlbmQgb2YgYSB0ZXJtIHdpdGhvdXQgaGF2aW5nIHRvIG1hbnVhbGx5IGRvIGFueSBzdHJpbmdcbiAqIGNvbmNhdGVuYXRpb24uXG4gKlxuICogVGhlIHdpbGRjYXJkIGNvbnN0YW50cyBjYW4gYmUgYml0d2lzZSBjb21iaW5lZCB0byBzZWxlY3QgYm90aCBsZWFkaW5nIGFuZCB0cmFpbGluZyB3aWxkY2FyZHMuXG4gKlxuICogQGNvbnN0YW50XG4gKiBAZGVmYXVsdFxuICogQHByb3BlcnR5IHtudW1iZXJ9IHdpbGRjYXJkLk5PTkUgLSBUaGUgdGVybSB3aWxsIGhhdmUgbm8gd2lsZGNhcmRzIGluc2VydGVkLCB0aGlzIGlzIHRoZSBkZWZhdWx0IGJlaGF2aW91clxuICogQHByb3BlcnR5IHtudW1iZXJ9IHdpbGRjYXJkLkxFQURJTkcgLSBQcmVwZW5kIHRoZSB0ZXJtIHdpdGggYSB3aWxkY2FyZCwgdW5sZXNzIGEgbGVhZGluZyB3aWxkY2FyZCBhbHJlYWR5IGV4aXN0c1xuICogQHByb3BlcnR5IHtudW1iZXJ9IHdpbGRjYXJkLlRSQUlMSU5HIC0gQXBwZW5kIGEgd2lsZGNhcmQgdG8gdGhlIHRlcm0sIHVubGVzcyBhIHRyYWlsaW5nIHdpbGRjYXJkIGFscmVhZHkgZXhpc3RzXG4gKiBAc2VlIGx1bnIuUXVlcnl+Q2xhdXNlXG4gKiBAc2VlIGx1bnIuUXVlcnkjY2xhdXNlXG4gKiBAc2VlIGx1bnIuUXVlcnkjdGVybVxuICogQGV4YW1wbGUgPGNhcHRpb24+cXVlcnkgdGVybSB3aXRoIHRyYWlsaW5nIHdpbGRjYXJkPC9jYXB0aW9uPlxuICogcXVlcnkudGVybSgnZm9vJywgeyB3aWxkY2FyZDogbHVuci5RdWVyeS53aWxkY2FyZC5UUkFJTElORyB9KVxuICogQGV4YW1wbGUgPGNhcHRpb24+cXVlcnkgdGVybSB3aXRoIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHdpbGRjYXJkPC9jYXB0aW9uPlxuICogcXVlcnkudGVybSgnZm9vJywge1xuICogICB3aWxkY2FyZDogbHVuci5RdWVyeS53aWxkY2FyZC5MRUFESU5HIHwgbHVuci5RdWVyeS53aWxkY2FyZC5UUkFJTElOR1xuICogfSlcbiAqL1xubHVuci5RdWVyeS53aWxkY2FyZCA9IG5ldyBTdHJpbmcgKFwiKlwiKVxubHVuci5RdWVyeS53aWxkY2FyZC5OT05FID0gMFxubHVuci5RdWVyeS53aWxkY2FyZC5MRUFESU5HID0gMVxubHVuci5RdWVyeS53aWxkY2FyZC5UUkFJTElORyA9IDJcblxuLyoqXG4gKiBBIHNpbmdsZSBjbGF1c2UgaW4gYSB7QGxpbmsgbHVuci5RdWVyeX0gY29udGFpbnMgYSB0ZXJtIGFuZCBkZXRhaWxzIG9uIGhvdyB0b1xuICogbWF0Y2ggdGhhdCB0ZXJtIGFnYWluc3QgYSB7QGxpbmsgbHVuci5JbmRleH0uXG4gKlxuICogQHR5cGVkZWYge09iamVjdH0gbHVuci5RdWVyeX5DbGF1c2VcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nW119IGZpZWxkcyAtIFRoZSBmaWVsZHMgaW4gYW4gaW5kZXggdGhpcyBjbGF1c2Ugc2hvdWxkIGJlIG1hdGNoZWQgYWdhaW5zdC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbYm9vc3Q9MV0gLSBBbnkgYm9vc3QgdGhhdCBzaG91bGQgYmUgYXBwbGllZCB3aGVuIG1hdGNoaW5nIHRoaXMgY2xhdXNlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtlZGl0RGlzdGFuY2VdIC0gV2hldGhlciB0aGUgdGVybSBzaG91bGQgaGF2ZSBmdXp6eSBtYXRjaGluZyBhcHBsaWVkLCBhbmQgaG93IGZ1enp5IHRoZSBtYXRjaCBzaG91bGQgYmUuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt1c2VQaXBlbGluZV0gLSBXaGV0aGVyIHRoZSB0ZXJtIHNob3VsZCBiZSBwYXNzZWQgdGhyb3VnaCB0aGUgc2VhcmNoIHBpcGVsaW5lLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt3aWxkY2FyZD0wXSAtIFdoZXRoZXIgdGhlIHRlcm0gc2hvdWxkIGhhdmUgd2lsZGNhcmRzIGFwcGVuZGVkIG9yIHByZXBlbmRlZC5cbiAqL1xuXG4vKipcbiAqIEFkZHMgYSB7QGxpbmsgbHVuci5RdWVyeX5DbGF1c2V9IHRvIHRoaXMgcXVlcnkuXG4gKlxuICogVW5sZXNzIHRoZSBjbGF1c2UgY29udGFpbnMgdGhlIGZpZWxkcyB0byBiZSBtYXRjaGVkIGFsbCBmaWVsZHMgd2lsbCBiZSBtYXRjaGVkLiBJbiBhZGRpdGlvblxuICogYSBkZWZhdWx0IGJvb3N0IG9mIDEgaXMgYXBwbGllZCB0byB0aGUgY2xhdXNlLlxuICpcbiAqIEBwYXJhbSB7bHVuci5RdWVyeX5DbGF1c2V9IGNsYXVzZSAtIFRoZSBjbGF1c2UgdG8gYWRkIHRvIHRoaXMgcXVlcnkuXG4gKiBAc2VlIGx1bnIuUXVlcnl+Q2xhdXNlXG4gKiBAcmV0dXJucyB7bHVuci5RdWVyeX1cbiAqL1xubHVuci5RdWVyeS5wcm90b3R5cGUuY2xhdXNlID0gZnVuY3Rpb24gKGNsYXVzZSkge1xuICBpZiAoISgnZmllbGRzJyBpbiBjbGF1c2UpKSB7XG4gICAgY2xhdXNlLmZpZWxkcyA9IHRoaXMuYWxsRmllbGRzXG4gIH1cblxuICBpZiAoISgnYm9vc3QnIGluIGNsYXVzZSkpIHtcbiAgICBjbGF1c2UuYm9vc3QgPSAxXG4gIH1cblxuICBpZiAoISgndXNlUGlwZWxpbmUnIGluIGNsYXVzZSkpIHtcbiAgICBjbGF1c2UudXNlUGlwZWxpbmUgPSB0cnVlXG4gIH1cblxuICBpZiAoISgnd2lsZGNhcmQnIGluIGNsYXVzZSkpIHtcbiAgICBjbGF1c2Uud2lsZGNhcmQgPSBsdW5yLlF1ZXJ5LndpbGRjYXJkLk5PTkVcbiAgfVxuXG4gIGlmICgoY2xhdXNlLndpbGRjYXJkICYgbHVuci5RdWVyeS53aWxkY2FyZC5MRUFESU5HKSAmJiAoY2xhdXNlLnRlcm0uY2hhckF0KDApICE9IGx1bnIuUXVlcnkud2lsZGNhcmQpKSB7XG4gICAgY2xhdXNlLnRlcm0gPSBcIipcIiArIGNsYXVzZS50ZXJtXG4gIH1cblxuICBpZiAoKGNsYXVzZS53aWxkY2FyZCAmIGx1bnIuUXVlcnkud2lsZGNhcmQuVFJBSUxJTkcpICYmIChjbGF1c2UudGVybS5zbGljZSgtMSkgIT0gbHVuci5RdWVyeS53aWxkY2FyZCkpIHtcbiAgICBjbGF1c2UudGVybSA9IFwiXCIgKyBjbGF1c2UudGVybSArIFwiKlwiXG4gIH1cblxuICB0aGlzLmNsYXVzZXMucHVzaChjbGF1c2UpXG5cbiAgcmV0dXJuIHRoaXNcbn1cblxuLyoqXG4gKiBBZGRzIGEgdGVybSB0byB0aGUgY3VycmVudCBxdWVyeSwgdW5kZXIgdGhlIGNvdmVycyB0aGlzIHdpbGwgY3JlYXRlIGEge0BsaW5rIGx1bnIuUXVlcnl+Q2xhdXNlfVxuICogdG8gdGhlIGxpc3Qgb2YgY2xhdXNlcyB0aGF0IG1ha2UgdXAgdGhpcyBxdWVyeS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdGVybSAtIFRoZSB0ZXJtIHRvIGFkZCB0byB0aGUgcXVlcnkuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gQW55IGFkZGl0aW9uYWwgcHJvcGVydGllcyB0byBhZGQgdG8gdGhlIHF1ZXJ5IGNsYXVzZS5cbiAqIEByZXR1cm5zIHtsdW5yLlF1ZXJ5fVxuICogQHNlZSBsdW5yLlF1ZXJ5I2NsYXVzZVxuICogQHNlZSBsdW5yLlF1ZXJ5fkNsYXVzZVxuICogQGV4YW1wbGUgPGNhcHRpb24+YWRkaW5nIGEgc2luZ2xlIHRlcm0gdG8gYSBxdWVyeTwvY2FwdGlvbj5cbiAqIHF1ZXJ5LnRlcm0oXCJmb29cIilcbiAqIEBleGFtcGxlIDxjYXB0aW9uPmFkZGluZyBhIHNpbmdsZSB0ZXJtIHRvIGEgcXVlcnkgYW5kIHNwZWNpZnlpbmcgc2VhcmNoIGZpZWxkcywgdGVybSBib29zdCBhbmQgYXV0b21hdGljIHRyYWlsaW5nIHdpbGRjYXJkPC9jYXB0aW9uPlxuICogcXVlcnkudGVybShcImZvb1wiLCB7XG4gKiAgIGZpZWxkczogW1widGl0bGVcIl0sXG4gKiAgIGJvb3N0OiAxMCxcbiAqICAgd2lsZGNhcmQ6IGx1bnIuUXVlcnkud2lsZGNhcmQuVFJBSUxJTkdcbiAqIH0pXG4gKi9cbmx1bnIuUXVlcnkucHJvdG90eXBlLnRlcm0gPSBmdW5jdGlvbiAodGVybSwgb3B0aW9ucykge1xuICB2YXIgY2xhdXNlID0gb3B0aW9ucyB8fCB7fVxuICBjbGF1c2UudGVybSA9IHRlcm1cblxuICB0aGlzLmNsYXVzZShjbGF1c2UpXG5cbiAgcmV0dXJuIHRoaXNcbn1cbmx1bnIuUXVlcnlQYXJzZUVycm9yID0gZnVuY3Rpb24gKG1lc3NhZ2UsIHN0YXJ0LCBlbmQpIHtcbiAgdGhpcy5uYW1lID0gXCJRdWVyeVBhcnNlRXJyb3JcIlxuICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlXG4gIHRoaXMuc3RhcnQgPSBzdGFydFxuICB0aGlzLmVuZCA9IGVuZFxufVxuXG5sdW5yLlF1ZXJ5UGFyc2VFcnJvci5wcm90b3R5cGUgPSBuZXcgRXJyb3Jcbmx1bnIuUXVlcnlMZXhlciA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgdGhpcy5sZXhlbWVzID0gW11cbiAgdGhpcy5zdHIgPSBzdHJcbiAgdGhpcy5sZW5ndGggPSBzdHIubGVuZ3RoXG4gIHRoaXMucG9zID0gMFxuICB0aGlzLnN0YXJ0ID0gMFxuICB0aGlzLmVzY2FwZUNoYXJQb3NpdGlvbnMgPSBbXVxufVxuXG5sdW5yLlF1ZXJ5TGV4ZXIucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHN0YXRlID0gbHVuci5RdWVyeUxleGVyLmxleFRleHRcblxuICB3aGlsZSAoc3RhdGUpIHtcbiAgICBzdGF0ZSA9IHN0YXRlKHRoaXMpXG4gIH1cbn1cblxubHVuci5RdWVyeUxleGVyLnByb3RvdHlwZS5zbGljZVN0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHN1YlNsaWNlcyA9IFtdLFxuICAgICAgc2xpY2VTdGFydCA9IHRoaXMuc3RhcnQsXG4gICAgICBzbGljZUVuZCA9IHRoaXMucG9zXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmVzY2FwZUNoYXJQb3NpdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICBzbGljZUVuZCA9IHRoaXMuZXNjYXBlQ2hhclBvc2l0aW9uc1tpXVxuICAgIHN1YlNsaWNlcy5wdXNoKHRoaXMuc3RyLnNsaWNlKHNsaWNlU3RhcnQsIHNsaWNlRW5kKSlcbiAgICBzbGljZVN0YXJ0ID0gc2xpY2VFbmQgKyAxXG4gIH1cblxuICBzdWJTbGljZXMucHVzaCh0aGlzLnN0ci5zbGljZShzbGljZVN0YXJ0LCB0aGlzLnBvcykpXG4gIHRoaXMuZXNjYXBlQ2hhclBvc2l0aW9ucy5sZW5ndGggPSAwXG5cbiAgcmV0dXJuIHN1YlNsaWNlcy5qb2luKCcnKVxufVxuXG5sdW5yLlF1ZXJ5TGV4ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbiAodHlwZSkge1xuICB0aGlzLmxleGVtZXMucHVzaCh7XG4gICAgdHlwZTogdHlwZSxcbiAgICBzdHI6IHRoaXMuc2xpY2VTdHJpbmcoKSxcbiAgICBzdGFydDogdGhpcy5zdGFydCxcbiAgICBlbmQ6IHRoaXMucG9zXG4gIH0pXG5cbiAgdGhpcy5zdGFydCA9IHRoaXMucG9zXG59XG5cbmx1bnIuUXVlcnlMZXhlci5wcm90b3R5cGUuZXNjYXBlQ2hhcmFjdGVyID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLmVzY2FwZUNoYXJQb3NpdGlvbnMucHVzaCh0aGlzLnBvcyAtIDEpXG4gIHRoaXMucG9zICs9IDFcbn1cblxubHVuci5RdWVyeUxleGVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy5wb3MgPj0gdGhpcy5sZW5ndGgpIHtcbiAgICByZXR1cm4gbHVuci5RdWVyeUxleGVyLkVPU1xuICB9XG5cbiAgdmFyIGNoYXIgPSB0aGlzLnN0ci5jaGFyQXQodGhpcy5wb3MpXG4gIHRoaXMucG9zICs9IDFcbiAgcmV0dXJuIGNoYXJcbn1cblxubHVuci5RdWVyeUxleGVyLnByb3RvdHlwZS53aWR0aCA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMucG9zIC0gdGhpcy5zdGFydFxufVxuXG5sdW5yLlF1ZXJ5TGV4ZXIucHJvdG90eXBlLmlnbm9yZSA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHRoaXMuc3RhcnQgPT0gdGhpcy5wb3MpIHtcbiAgICB0aGlzLnBvcyArPSAxXG4gIH1cblxuICB0aGlzLnN0YXJ0ID0gdGhpcy5wb3Ncbn1cblxubHVuci5RdWVyeUxleGVyLnByb3RvdHlwZS5iYWNrdXAgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMucG9zIC09IDFcbn1cblxubHVuci5RdWVyeUxleGVyLnByb3RvdHlwZS5hY2NlcHREaWdpdFJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGNoYXIsIGNoYXJDb2RlXG5cbiAgZG8ge1xuICAgIGNoYXIgPSB0aGlzLm5leHQoKVxuICAgIGNoYXJDb2RlID0gY2hhci5jaGFyQ29kZUF0KDApXG4gIH0gd2hpbGUgKGNoYXJDb2RlID4gNDcgJiYgY2hhckNvZGUgPCA1OClcblxuICBpZiAoY2hhciAhPSBsdW5yLlF1ZXJ5TGV4ZXIuRU9TKSB7XG4gICAgdGhpcy5iYWNrdXAoKVxuICB9XG59XG5cbmx1bnIuUXVlcnlMZXhlci5wcm90b3R5cGUubW9yZSA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMucG9zIDwgdGhpcy5sZW5ndGhcbn1cblxubHVuci5RdWVyeUxleGVyLkVPUyA9ICdFT1MnXG5sdW5yLlF1ZXJ5TGV4ZXIuRklFTEQgPSAnRklFTEQnXG5sdW5yLlF1ZXJ5TGV4ZXIuVEVSTSA9ICdURVJNJ1xubHVuci5RdWVyeUxleGVyLkVESVRfRElTVEFOQ0UgPSAnRURJVF9ESVNUQU5DRSdcbmx1bnIuUXVlcnlMZXhlci5CT09TVCA9ICdCT09TVCdcblxubHVuci5RdWVyeUxleGVyLmxleEZpZWxkID0gZnVuY3Rpb24gKGxleGVyKSB7XG4gIGxleGVyLmJhY2t1cCgpXG4gIGxleGVyLmVtaXQobHVuci5RdWVyeUxleGVyLkZJRUxEKVxuICBsZXhlci5pZ25vcmUoKVxuICByZXR1cm4gbHVuci5RdWVyeUxleGVyLmxleFRleHRcbn1cblxubHVuci5RdWVyeUxleGVyLmxleFRlcm0gPSBmdW5jdGlvbiAobGV4ZXIpIHtcbiAgaWYgKGxleGVyLndpZHRoKCkgPiAxKSB7XG4gICAgbGV4ZXIuYmFja3VwKClcbiAgICBsZXhlci5lbWl0KGx1bnIuUXVlcnlMZXhlci5URVJNKVxuICB9XG5cbiAgbGV4ZXIuaWdub3JlKClcblxuICBpZiAobGV4ZXIubW9yZSgpKSB7XG4gICAgcmV0dXJuIGx1bnIuUXVlcnlMZXhlci5sZXhUZXh0XG4gIH1cbn1cblxubHVuci5RdWVyeUxleGVyLmxleEVkaXREaXN0YW5jZSA9IGZ1bmN0aW9uIChsZXhlcikge1xuICBsZXhlci5pZ25vcmUoKVxuICBsZXhlci5hY2NlcHREaWdpdFJ1bigpXG4gIGxleGVyLmVtaXQobHVuci5RdWVyeUxleGVyLkVESVRfRElTVEFOQ0UpXG4gIHJldHVybiBsdW5yLlF1ZXJ5TGV4ZXIubGV4VGV4dFxufVxuXG5sdW5yLlF1ZXJ5TGV4ZXIubGV4Qm9vc3QgPSBmdW5jdGlvbiAobGV4ZXIpIHtcbiAgbGV4ZXIuaWdub3JlKClcbiAgbGV4ZXIuYWNjZXB0RGlnaXRSdW4oKVxuICBsZXhlci5lbWl0KGx1bnIuUXVlcnlMZXhlci5CT09TVClcbiAgcmV0dXJuIGx1bnIuUXVlcnlMZXhlci5sZXhUZXh0XG59XG5cbmx1bnIuUXVlcnlMZXhlci5sZXhFT1MgPSBmdW5jdGlvbiAobGV4ZXIpIHtcbiAgaWYgKGxleGVyLndpZHRoKCkgPiAwKSB7XG4gICAgbGV4ZXIuZW1pdChsdW5yLlF1ZXJ5TGV4ZXIuVEVSTSlcbiAgfVxufVxuXG4vLyBUaGlzIG1hdGNoZXMgdGhlIHNlcGFyYXRvciB1c2VkIHdoZW4gdG9rZW5pc2luZyBmaWVsZHNcbi8vIHdpdGhpbiBhIGRvY3VtZW50LiBUaGVzZSBzaG91bGQgbWF0Y2ggb3RoZXJ3aXNlIGl0IGlzXG4vLyBub3QgcG9zc2libGUgdG8gc2VhcmNoIGZvciBzb21lIHRva2VucyB3aXRoaW4gYSBkb2N1bWVudC5cbi8vXG4vLyBJdCBpcyBwb3NzaWJsZSBmb3IgdGhlIHVzZXIgdG8gY2hhbmdlIHRoZSBzZXBhcmF0b3Igb24gdGhlXG4vLyB0b2tlbml6ZXIgc28gaXQgX21pZ2h0XyBjbGFzaCB3aXRoIGFueSBvdGhlciBvZiB0aGUgc3BlY2lhbFxuLy8gY2hhcmFjdGVycyBhbHJlYWR5IHVzZWQgd2l0aGluIHRoZSBzZWFyY2ggc3RyaW5nLCBlLmcuIDouXG4vL1xuLy8gVGhpcyBtZWFucyB0aGF0IGl0IGlzIHBvc3NpYmxlIHRvIGNoYW5nZSB0aGUgc2VwYXJhdG9yIGluXG4vLyBzdWNoIGEgd2F5IHRoYXQgbWFrZXMgc29tZSB3b3JkcyB1bnNlYXJjaGFibGUgdXNpbmcgYSBzZWFyY2hcbi8vIHN0cmluZy5cbmx1bnIuUXVlcnlMZXhlci50ZXJtU2VwYXJhdG9yID0gbHVuci50b2tlbml6ZXIuc2VwYXJhdG9yXG5cbmx1bnIuUXVlcnlMZXhlci5sZXhUZXh0ID0gZnVuY3Rpb24gKGxleGVyKSB7XG4gIHdoaWxlICh0cnVlKSB7XG4gICAgdmFyIGNoYXIgPSBsZXhlci5uZXh0KClcblxuICAgIGlmIChjaGFyID09IGx1bnIuUXVlcnlMZXhlci5FT1MpIHtcbiAgICAgIHJldHVybiBsdW5yLlF1ZXJ5TGV4ZXIubGV4RU9TXG4gICAgfVxuXG4gICAgLy8gRXNjYXBlIGNoYXJhY3RlciBpcyAnXFwnXG4gICAgaWYgKGNoYXIuY2hhckNvZGVBdCgwKSA9PSA5Mikge1xuICAgICAgbGV4ZXIuZXNjYXBlQ2hhcmFjdGVyKClcbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuXG4gICAgaWYgKGNoYXIgPT0gXCI6XCIpIHtcbiAgICAgIHJldHVybiBsdW5yLlF1ZXJ5TGV4ZXIubGV4RmllbGRcbiAgICB9XG5cbiAgICBpZiAoY2hhciA9PSBcIn5cIikge1xuICAgICAgbGV4ZXIuYmFja3VwKClcbiAgICAgIGlmIChsZXhlci53aWR0aCgpID4gMCkge1xuICAgICAgICBsZXhlci5lbWl0KGx1bnIuUXVlcnlMZXhlci5URVJNKVxuICAgICAgfVxuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlMZXhlci5sZXhFZGl0RGlzdGFuY2VcbiAgICB9XG5cbiAgICBpZiAoY2hhciA9PSBcIl5cIikge1xuICAgICAgbGV4ZXIuYmFja3VwKClcbiAgICAgIGlmIChsZXhlci53aWR0aCgpID4gMCkge1xuICAgICAgICBsZXhlci5lbWl0KGx1bnIuUXVlcnlMZXhlci5URVJNKVxuICAgICAgfVxuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlMZXhlci5sZXhCb29zdFxuICAgIH1cblxuICAgIGlmIChjaGFyLm1hdGNoKGx1bnIuUXVlcnlMZXhlci50ZXJtU2VwYXJhdG9yKSkge1xuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlMZXhlci5sZXhUZXJtXG4gICAgfVxuICB9XG59XG5cbmx1bnIuUXVlcnlQYXJzZXIgPSBmdW5jdGlvbiAoc3RyLCBxdWVyeSkge1xuICB0aGlzLmxleGVyID0gbmV3IGx1bnIuUXVlcnlMZXhlciAoc3RyKVxuICB0aGlzLnF1ZXJ5ID0gcXVlcnlcbiAgdGhpcy5jdXJyZW50Q2xhdXNlID0ge31cbiAgdGhpcy5sZXhlbWVJZHggPSAwXG59XG5cbmx1bnIuUXVlcnlQYXJzZXIucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLmxleGVyLnJ1bigpXG4gIHRoaXMubGV4ZW1lcyA9IHRoaXMubGV4ZXIubGV4ZW1lc1xuXG4gIHZhciBzdGF0ZSA9IGx1bnIuUXVlcnlQYXJzZXIucGFyc2VGaWVsZE9yVGVybVxuXG4gIHdoaWxlIChzdGF0ZSkge1xuICAgIHN0YXRlID0gc3RhdGUodGhpcylcbiAgfVxuXG4gIHJldHVybiB0aGlzLnF1ZXJ5XG59XG5cbmx1bnIuUXVlcnlQYXJzZXIucHJvdG90eXBlLnBlZWtMZXhlbWUgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLmxleGVtZXNbdGhpcy5sZXhlbWVJZHhdXG59XG5cbmx1bnIuUXVlcnlQYXJzZXIucHJvdG90eXBlLmNvbnN1bWVMZXhlbWUgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBsZXhlbWUgPSB0aGlzLnBlZWtMZXhlbWUoKVxuICB0aGlzLmxleGVtZUlkeCArPSAxXG4gIHJldHVybiBsZXhlbWVcbn1cblxubHVuci5RdWVyeVBhcnNlci5wcm90b3R5cGUubmV4dENsYXVzZSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGNvbXBsZXRlZENsYXVzZSA9IHRoaXMuY3VycmVudENsYXVzZVxuICB0aGlzLnF1ZXJ5LmNsYXVzZShjb21wbGV0ZWRDbGF1c2UpXG4gIHRoaXMuY3VycmVudENsYXVzZSA9IHt9XG59XG5cbmx1bnIuUXVlcnlQYXJzZXIucGFyc2VGaWVsZE9yVGVybSA9IGZ1bmN0aW9uIChwYXJzZXIpIHtcbiAgdmFyIGxleGVtZSA9IHBhcnNlci5wZWVrTGV4ZW1lKClcblxuICBpZiAobGV4ZW1lID09IHVuZGVmaW5lZCkge1xuICAgIHJldHVyblxuICB9XG5cbiAgc3dpdGNoIChsZXhlbWUudHlwZSkge1xuICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLkZJRUxEOlxuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlQYXJzZXIucGFyc2VGaWVsZFxuICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLlRFUk06XG4gICAgICByZXR1cm4gbHVuci5RdWVyeVBhcnNlci5wYXJzZVRlcm1cbiAgICBkZWZhdWx0OlxuICAgICAgdmFyIGVycm9yTWVzc2FnZSA9IFwiZXhwZWN0ZWQgZWl0aGVyIGEgZmllbGQgb3IgYSB0ZXJtLCBmb3VuZCBcIiArIGxleGVtZS50eXBlXG5cbiAgICAgIGlmIChsZXhlbWUuc3RyLmxlbmd0aCA+PSAxKSB7XG4gICAgICAgIGVycm9yTWVzc2FnZSArPSBcIiB3aXRoIHZhbHVlICdcIiArIGxleGVtZS5zdHIgKyBcIidcIlxuICAgICAgfVxuXG4gICAgICB0aHJvdyBuZXcgbHVuci5RdWVyeVBhcnNlRXJyb3IgKGVycm9yTWVzc2FnZSwgbGV4ZW1lLnN0YXJ0LCBsZXhlbWUuZW5kKVxuICB9XG59XG5cbmx1bnIuUXVlcnlQYXJzZXIucGFyc2VGaWVsZCA9IGZ1bmN0aW9uIChwYXJzZXIpIHtcbiAgdmFyIGxleGVtZSA9IHBhcnNlci5jb25zdW1lTGV4ZW1lKClcblxuICBpZiAobGV4ZW1lID09IHVuZGVmaW5lZCkge1xuICAgIHJldHVyblxuICB9XG5cbiAgaWYgKHBhcnNlci5xdWVyeS5hbGxGaWVsZHMuaW5kZXhPZihsZXhlbWUuc3RyKSA9PSAtMSkge1xuICAgIHZhciBwb3NzaWJsZUZpZWxkcyA9IHBhcnNlci5xdWVyeS5hbGxGaWVsZHMubWFwKGZ1bmN0aW9uIChmKSB7IHJldHVybiBcIidcIiArIGYgKyBcIidcIiB9KS5qb2luKCcsICcpLFxuICAgICAgICBlcnJvck1lc3NhZ2UgPSBcInVucmVjb2duaXNlZCBmaWVsZCAnXCIgKyBsZXhlbWUuc3RyICsgXCInLCBwb3NzaWJsZSBmaWVsZHM6IFwiICsgcG9zc2libGVGaWVsZHNcblxuICAgIHRocm93IG5ldyBsdW5yLlF1ZXJ5UGFyc2VFcnJvciAoZXJyb3JNZXNzYWdlLCBsZXhlbWUuc3RhcnQsIGxleGVtZS5lbmQpXG4gIH1cblxuICBwYXJzZXIuY3VycmVudENsYXVzZS5maWVsZHMgPSBbbGV4ZW1lLnN0cl1cblxuICB2YXIgbmV4dExleGVtZSA9IHBhcnNlci5wZWVrTGV4ZW1lKClcblxuICBpZiAobmV4dExleGVtZSA9PSB1bmRlZmluZWQpIHtcbiAgICB2YXIgZXJyb3JNZXNzYWdlID0gXCJleHBlY3RpbmcgdGVybSwgZm91bmQgbm90aGluZ1wiXG4gICAgdGhyb3cgbmV3IGx1bnIuUXVlcnlQYXJzZUVycm9yIChlcnJvck1lc3NhZ2UsIGxleGVtZS5zdGFydCwgbGV4ZW1lLmVuZClcbiAgfVxuXG4gIHN3aXRjaCAobmV4dExleGVtZS50eXBlKSB7XG4gICAgY2FzZSBsdW5yLlF1ZXJ5TGV4ZXIuVEVSTTpcbiAgICAgIHJldHVybiBsdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlVGVybVxuICAgIGRlZmF1bHQ6XG4gICAgICB2YXIgZXJyb3JNZXNzYWdlID0gXCJleHBlY3RpbmcgdGVybSwgZm91bmQgJ1wiICsgbmV4dExleGVtZS50eXBlICsgXCInXCJcbiAgICAgIHRocm93IG5ldyBsdW5yLlF1ZXJ5UGFyc2VFcnJvciAoZXJyb3JNZXNzYWdlLCBuZXh0TGV4ZW1lLnN0YXJ0LCBuZXh0TGV4ZW1lLmVuZClcbiAgfVxufVxuXG5sdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlVGVybSA9IGZ1bmN0aW9uIChwYXJzZXIpIHtcbiAgdmFyIGxleGVtZSA9IHBhcnNlci5jb25zdW1lTGV4ZW1lKClcblxuICBpZiAobGV4ZW1lID09IHVuZGVmaW5lZCkge1xuICAgIHJldHVyblxuICB9XG5cbiAgcGFyc2VyLmN1cnJlbnRDbGF1c2UudGVybSA9IGxleGVtZS5zdHIudG9Mb3dlckNhc2UoKVxuXG4gIGlmIChsZXhlbWUuc3RyLmluZGV4T2YoXCIqXCIpICE9IC0xKSB7XG4gICAgcGFyc2VyLmN1cnJlbnRDbGF1c2UudXNlUGlwZWxpbmUgPSBmYWxzZVxuICB9XG5cbiAgdmFyIG5leHRMZXhlbWUgPSBwYXJzZXIucGVla0xleGVtZSgpXG5cbiAgaWYgKG5leHRMZXhlbWUgPT0gdW5kZWZpbmVkKSB7XG4gICAgcGFyc2VyLm5leHRDbGF1c2UoKVxuICAgIHJldHVyblxuICB9XG5cbiAgc3dpdGNoIChuZXh0TGV4ZW1lLnR5cGUpIHtcbiAgICBjYXNlIGx1bnIuUXVlcnlMZXhlci5URVJNOlxuICAgICAgcGFyc2VyLm5leHRDbGF1c2UoKVxuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlQYXJzZXIucGFyc2VUZXJtXG4gICAgY2FzZSBsdW5yLlF1ZXJ5TGV4ZXIuRklFTEQ6XG4gICAgICBwYXJzZXIubmV4dENsYXVzZSgpXG4gICAgICByZXR1cm4gbHVuci5RdWVyeVBhcnNlci5wYXJzZUZpZWxkXG4gICAgY2FzZSBsdW5yLlF1ZXJ5TGV4ZXIuRURJVF9ESVNUQU5DRTpcbiAgICAgIHJldHVybiBsdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlRWRpdERpc3RhbmNlXG4gICAgY2FzZSBsdW5yLlF1ZXJ5TGV4ZXIuQk9PU1Q6XG4gICAgICByZXR1cm4gbHVuci5RdWVyeVBhcnNlci5wYXJzZUJvb3N0XG4gICAgZGVmYXVsdDpcbiAgICAgIHZhciBlcnJvck1lc3NhZ2UgPSBcIlVuZXhwZWN0ZWQgbGV4ZW1lIHR5cGUgJ1wiICsgbmV4dExleGVtZS50eXBlICsgXCInXCJcbiAgICAgIHRocm93IG5ldyBsdW5yLlF1ZXJ5UGFyc2VFcnJvciAoZXJyb3JNZXNzYWdlLCBuZXh0TGV4ZW1lLnN0YXJ0LCBuZXh0TGV4ZW1lLmVuZClcbiAgfVxufVxuXG5sdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlRWRpdERpc3RhbmNlID0gZnVuY3Rpb24gKHBhcnNlcikge1xuICB2YXIgbGV4ZW1lID0gcGFyc2VyLmNvbnN1bWVMZXhlbWUoKVxuXG4gIGlmIChsZXhlbWUgPT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICB2YXIgZWRpdERpc3RhbmNlID0gcGFyc2VJbnQobGV4ZW1lLnN0ciwgMTApXG5cbiAgaWYgKGlzTmFOKGVkaXREaXN0YW5jZSkpIHtcbiAgICB2YXIgZXJyb3JNZXNzYWdlID0gXCJlZGl0IGRpc3RhbmNlIG11c3QgYmUgbnVtZXJpY1wiXG4gICAgdGhyb3cgbmV3IGx1bnIuUXVlcnlQYXJzZUVycm9yIChlcnJvck1lc3NhZ2UsIGxleGVtZS5zdGFydCwgbGV4ZW1lLmVuZClcbiAgfVxuXG4gIHBhcnNlci5jdXJyZW50Q2xhdXNlLmVkaXREaXN0YW5jZSA9IGVkaXREaXN0YW5jZVxuXG4gIHZhciBuZXh0TGV4ZW1lID0gcGFyc2VyLnBlZWtMZXhlbWUoKVxuXG4gIGlmIChuZXh0TGV4ZW1lID09IHVuZGVmaW5lZCkge1xuICAgIHBhcnNlci5uZXh0Q2xhdXNlKClcbiAgICByZXR1cm5cbiAgfVxuXG4gIHN3aXRjaCAobmV4dExleGVtZS50eXBlKSB7XG4gICAgY2FzZSBsdW5yLlF1ZXJ5TGV4ZXIuVEVSTTpcbiAgICAgIHBhcnNlci5uZXh0Q2xhdXNlKClcbiAgICAgIHJldHVybiBsdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlVGVybVxuICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLkZJRUxEOlxuICAgICAgcGFyc2VyLm5leHRDbGF1c2UoKVxuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlQYXJzZXIucGFyc2VGaWVsZFxuICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLkVESVRfRElTVEFOQ0U6XG4gICAgICByZXR1cm4gbHVuci5RdWVyeVBhcnNlci5wYXJzZUVkaXREaXN0YW5jZVxuICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLkJPT1NUOlxuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlQYXJzZXIucGFyc2VCb29zdFxuICAgIGRlZmF1bHQ6XG4gICAgICB2YXIgZXJyb3JNZXNzYWdlID0gXCJVbmV4cGVjdGVkIGxleGVtZSB0eXBlICdcIiArIG5leHRMZXhlbWUudHlwZSArIFwiJ1wiXG4gICAgICB0aHJvdyBuZXcgbHVuci5RdWVyeVBhcnNlRXJyb3IgKGVycm9yTWVzc2FnZSwgbmV4dExleGVtZS5zdGFydCwgbmV4dExleGVtZS5lbmQpXG4gIH1cbn1cblxubHVuci5RdWVyeVBhcnNlci5wYXJzZUJvb3N0ID0gZnVuY3Rpb24gKHBhcnNlcikge1xuICB2YXIgbGV4ZW1lID0gcGFyc2VyLmNvbnN1bWVMZXhlbWUoKVxuXG4gIGlmIChsZXhlbWUgPT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICB2YXIgYm9vc3QgPSBwYXJzZUludChsZXhlbWUuc3RyLCAxMClcblxuICBpZiAoaXNOYU4oYm9vc3QpKSB7XG4gICAgdmFyIGVycm9yTWVzc2FnZSA9IFwiYm9vc3QgbXVzdCBiZSBudW1lcmljXCJcbiAgICB0aHJvdyBuZXcgbHVuci5RdWVyeVBhcnNlRXJyb3IgKGVycm9yTWVzc2FnZSwgbGV4ZW1lLnN0YXJ0LCBsZXhlbWUuZW5kKVxuICB9XG5cbiAgcGFyc2VyLmN1cnJlbnRDbGF1c2UuYm9vc3QgPSBib29zdFxuXG4gIHZhciBuZXh0TGV4ZW1lID0gcGFyc2VyLnBlZWtMZXhlbWUoKVxuXG4gIGlmIChuZXh0TGV4ZW1lID09IHVuZGVmaW5lZCkge1xuICAgIHBhcnNlci5uZXh0Q2xhdXNlKClcbiAgICByZXR1cm5cbiAgfVxuXG4gIHN3aXRjaCAobmV4dExleGVtZS50eXBlKSB7XG4gICAgY2FzZSBsdW5yLlF1ZXJ5TGV4ZXIuVEVSTTpcbiAgICAgIHBhcnNlci5uZXh0Q2xhdXNlKClcbiAgICAgIHJldHVybiBsdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlVGVybVxuICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLkZJRUxEOlxuICAgICAgcGFyc2VyLm5leHRDbGF1c2UoKVxuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlQYXJzZXIucGFyc2VGaWVsZFxuICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLkVESVRfRElTVEFOQ0U6XG4gICAgICByZXR1cm4gbHVuci5RdWVyeVBhcnNlci5wYXJzZUVkaXREaXN0YW5jZVxuICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLkJPT1NUOlxuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlQYXJzZXIucGFyc2VCb29zdFxuICAgIGRlZmF1bHQ6XG4gICAgICB2YXIgZXJyb3JNZXNzYWdlID0gXCJVbmV4cGVjdGVkIGxleGVtZSB0eXBlICdcIiArIG5leHRMZXhlbWUudHlwZSArIFwiJ1wiXG4gICAgICB0aHJvdyBuZXcgbHVuci5RdWVyeVBhcnNlRXJyb3IgKGVycm9yTWVzc2FnZSwgbmV4dExleGVtZS5zdGFydCwgbmV4dExleGVtZS5lbmQpXG4gIH1cbn1cblxuICAvKipcbiAgICogZXhwb3J0IHRoZSBtb2R1bGUgdmlhIEFNRCwgQ29tbW9uSlMgb3IgYXMgYSBicm93c2VyIGdsb2JhbFxuICAgKiBFeHBvcnQgY29kZSBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS91bWRqcy91bWQvYmxvYi9tYXN0ZXIvcmV0dXJuRXhwb3J0cy5qc1xuICAgKi9cbiAgOyhmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkge1xuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cbiAgICAgIGRlZmluZShmYWN0b3J5KVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG4gICAgICAvKipcbiAgICAgICAqIE5vZGUuIERvZXMgbm90IHdvcmsgd2l0aCBzdHJpY3QgQ29tbW9uSlMsIGJ1dFxuICAgICAgICogb25seSBDb21tb25KUy1saWtlIGVudmlyb21lbnRzIHRoYXQgc3VwcG9ydCBtb2R1bGUuZXhwb3J0cyxcbiAgICAgICAqIGxpa2UgTm9kZS5cbiAgICAgICAqL1xuICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KClcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gQnJvd3NlciBnbG9iYWxzIChyb290IGlzIHdpbmRvdylcbiAgICAgIHJvb3QubHVuciA9IGZhY3RvcnkoKVxuICAgIH1cbiAgfSh0aGlzLCBmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogSnVzdCByZXR1cm4gYSB2YWx1ZSB0byBkZWZpbmUgdGhlIG1vZHVsZSBleHBvcnQuXG4gICAgICogVGhpcyBleGFtcGxlIHJldHVybnMgYW4gb2JqZWN0LCBidXQgdGhlIG1vZHVsZVxuICAgICAqIGNhbiByZXR1cm4gYSBmdW5jdGlvbiBhcyB0aGUgZXhwb3J0ZWQgdmFsdWUuXG4gICAgICovXG4gICAgcmV0dXJuIGx1bnJcbiAgfSkpXG59KSgpO1xuIiwiLy9HdW5qYW5cclxuaWYgKGdsb2JhbC5yaCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgZ2xvYmFsLnJoID0ge307XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZ2xvYmFsLnJoXHJcbiIsImNsYXNzIENvdW50aW5nU2VhbWFwaG9yZXtcclxuICBjb25zdHJ1Y3RvcihjYWxsYmFjayl7XHJcbiAgICB0aGlzLl9jYWxsYmFjayA9IGNhbGxiYWNrO1xyXG4gICAgdGhpcy5fY291bnQgPSAwO1xyXG4gIH1cclxuICBzaWduYWwoKXtcclxuICAgIHRoaXMuX2NvdW50Kys7XHJcbiAgICBpZih0aGlzLl9jb3VudCA+PSAwICYmIHRoaXMuX2NhbGxiYWNrKXtcclxuICAgICAgdGhpcy5fY2FsbGJhY2soKTtcclxuICAgIH1cclxuICB9XHJcbiAgd2FpdChjb3VudCl7XHJcbiAgICBsZXQgZGVjX2NvdW50ID0gY291bnQgfHwgMTtcclxuICAgIHRoaXMuX2NvdW50LT0gZGVjX2NvdW50O1xyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBDb3VudGluZ1NlYW1hcGhvcmU7IiwicmVxdWlyZShcIi4uL2xpYi9yaFwiKVxyXG5yZXF1aXJlKFwiLi4vLi4vbGVuaWVudF9zcmMvcm9ib2hlbHAvbGF5b3V0L3VybF91dGlsc1wiKVxyXG5yZXF1aXJlKFwiLi4vLi4vbGVuaWVudF9zcmMvcm9ib2hlbHAvbGF5b3V0L2luaXRcIilcclxucmVxdWlyZShcIi4uLy4uL2xlbmllbnRfc3JjL3JvYm9oZWxwL2xheW91dC9tcFwiKVxyXG5yZXF1aXJlKFwiLi4vLi4vbGVuaWVudF9zcmMvcm9ib2hlbHAvbGF5b3V0L2V4cHJlc3Npb25fYnVpbGRlclwiKVxyXG5yZXF1aXJlKFwiLi4vLi4vbGVuaWVudF9zcmMvcm9ib2hlbHAvbGF5b3V0L2Jyb3dzZXNlcXVlbmNlX2J1aWxkZXJcIilcclxucmVxdWlyZShcIi4uLy4uL2xlbmllbnRfc3JjL3JvYm9oZWxwL2xheW91dC9ldmVudF9oYW5kbGVyc1wiKVxyXG5yZXF1aXJlKFwiLi4vLi4vbGVuaWVudF9zcmMvcm9ib2hlbHAvbGF5b3V0L3NlYXJjaF9maWxlZFwiKVxyXG5yZXF1aXJlKFwiLi4vLi4vbGVuaWVudF9zcmMvcm9ib2hlbHAvbGF5b3V0L2xheW91dGZpeFwiKVxyXG5yZXF1aXJlKFwiLi4vLi4vbGVuaWVudF9zcmMvcm9ib2hlbHAvbGF5b3V0L2ZpbHRlcl9jb250cm9sbGVyXCIpXHJcbnJlcXVpcmUoXCIuLi8uLi9sZW5pZW50X3NyYy9yb2JvaGVscC9sYXlvdXQvbW9kZXJuX2xheW91dF9jb250cm9sbGVyXCIpXHJcbnJlcXVpcmUoXCIuLi8uLi9sZW5pZW50X3NyYy9yb2JvaGVscC9sYXlvdXQvanNfbG9hZGluZ19jb250cm9sbGVyXCIpXHJcbnJlcXVpcmUoXCIuLi8uLi9sZW5pZW50X3NyYy9yb2JvaGVscC9sYXlvdXQvaW5kZXhfY29udHJvbGxlclwiKVxyXG5yZXF1aXJlKFwiLi4vLi4vbGVuaWVudF9zcmMvcm9ib2hlbHAvbGF5b3V0L2dsb3NzYXJ5X2NvbnRyb2xsZXJcIilcclxucmVxdWlyZShcIi4uLy4uL2xlbmllbnRfc3JjL3JvYm9oZWxwL2xheW91dC9maWx0ZXJfaGFuZGxlclwiKVxyXG5yZXF1aXJlKFwiLi4vLi4vbGVuaWVudF9zcmMvcm9ib2hlbHAvbGF5b3V0L2xvYWRfcHJvamVjdHNcIilcclxucmVxdWlyZShcIi4vbGF5b3V0L3VpL2Nhcm91c2VsXCIpXHJcbnJlcXVpcmUoXCIuL2xheW91dC9ob21lX2NvbnRyb2xsZXJcIilcclxucmVxdWlyZShcIi4uLy4uL2xlbmllbnRfc3JjL2xheW91dC9zZWFyY2hfdXRpbFwiKVxyXG5yZXF1aXJlKFwiLi9sYXlvdXQvc2VhcmNoL3N1Z2dlc3Rpb24vc2VhcmNoX2NvbnRyb2xsZXJcIilcclxucmVxdWlyZShcIi4vbGF5b3V0L2Zhdm9yaXRlc19jb250cm9sbGVyXCIpXHJcbnJlcXVpcmUoXCIuL2xheW91dC90b2NfYnJlYWRjcnVtYnNfY29udHJvbGxlci5qc1wiKVxyXG5yZXF1aXJlKFwiLi4vLi4vbGVuaWVudF9zcmMvbGF5b3V0L3RvY19vcmRlclwiKVxyXG5yZXF1aXJlKFwiLi4vLi4vbGVuaWVudF9zcmMvbGF5b3V0L3RvY19jb250cm9sbGVyXCIpXHJcbnJlcXVpcmUoXCIuLi8uLi9sZW5pZW50X3NyYy9sYXlvdXQvaW5kZXhfY29udHJvbGxlclwiKVxyXG5yZXF1aXJlKFwiLi4vLi4vbGVuaWVudF9zcmMvbGF5b3V0L2dsb3NzYXJ5X2NvbnRyb2xsZXJcIilcclxucmVxdWlyZShcIi4uLy4uL2xlbmllbnRfc3JjL2xheW91dC9ldmVudF9oYW5kbGVyc1wiKVxyXG5yZXF1aXJlKFwiLi9sYXlvdXQvcmgyMDE3bGF5b3V0Y29udHJvbGxlclwiKVxyXG5yZXF1aXJlKFwiLi9sYXlvdXQvbW9kYWxfZGlhbG9nXCIpXHJcbnJlcXVpcmUoXCIuL2xheW91dC9zZWFyY2hfcmVzdWx0X2NvbnRyb2xsZXIuanNcIilcclxucmVxdWlyZShcIi4uLy4uL2xlbmllbnRfc3JjL3JvYm9oZWxwL2xheW91dC9maWx0ZXJfaGFuZGxlclwiKVxyXG5yZXF1aXJlKFwiLi9sYXlvdXQvY3VzdG9tX2J1dHRvbnNcIilcclxucmVxdWlyZShcIi4vbGF5b3V0L2V4cGFuZF9hbGxcIilcclxuIiwiY29uc3QgcmggPSByZXF1aXJlKFwiLi4vLi4vbGliL3JoXCIpLFxyXG4gIGNvbnN0cyA9IHJoLmNvbnN0cyxcclxuICBtb2RlbCA9IHJoLm1vZGVsLFxyXG4gIF8gPSByaC5fXHJcblxyXG5tb2RlbC5zdWJzY3JpYmUoY29uc3RzKCdLRVlfQ1VTVE9NX0JVVFRPTlNfQ09ORklHJyksIGNvbmZpZyA9PiB7XHJcbiAgbGV0IGJ1dHRvbnMgPSBfLm1hcChjb25maWcsIChpdGVtLCBpbmRleCkgPT4ge1xyXG4gICAgcmV0dXJuIF8uZXh0ZW5kKHtjbGFzczogYGN1c3RvbS1idXR0b24tJHtpbmRleH1gfSwgaXRlbSlcclxuICB9KVxyXG4gIG1vZGVsLnB1Ymxpc2goY29uc3RzKCdLRVlfQ1VTVE9NX0JVVFRPTlMnKSwgYnV0dG9ucylcclxufSlcclxuIiwibGV0IHJoID0gcmVxdWlyZShcIi4uLy4uL2xpYi9yaFwiKVxyXG5cclxucmgubW9kZWwuY3N1YnNjcmliZSgnRVZUX0VYUEFORF9DT0xMQVBTRV9BTEwnLCAoKSA9PiB7XHJcbiAgbGV0IGN1cnJlbnRTdGF0ZSA9IHJoLm1vZGVsLmNnZXQoJ0FMTF9BUkVfRVhQQU5ERUQnKVxyXG4gIGlmKGN1cnJlbnRTdGF0ZSkge1xyXG4gICAgcmgubW9kZWwuY3B1Ymxpc2goJ0VWVF9DT0xMQVBTRV9BTEwnKVxyXG4gIH0gZWxzZSB7XHJcbiAgICByaC5tb2RlbC5jcHVibGlzaCgnRVZUX0VYUEFORF9BTEwnKVxyXG4gIH1cclxufSlcclxuXHJcbnJoLm1vZGVsLmNzdWJzY3JpYmUoJ0VWVF9DT0xMQVBTRV9BTEwnLCAoKSA9PiB7XHJcbiAgcmgubW9kZWwuY3B1Ymxpc2goJ0FMTF9BUkVfRVhQQU5ERUQnLCBmYWxzZSlcclxufSlcclxuXHJcbnJoLm1vZGVsLmNzdWJzY3JpYmUoJ0VWVF9FWFBBTkRfQUxMJywgKCkgPT4ge1xyXG4gIHJoLm1vZGVsLmNwdWJsaXNoKCdBTExfQVJFX0VYUEFOREVEJywgdHJ1ZSlcclxufSlcclxuIiwiXHJcbmNvbnN0IHJoID0gcmVxdWlyZShcIi4uLy4uL2xpYi9yaFwiKVxyXG5jb25zdCBjb25zdHMgPSByaC5jb25zdHNcclxuXHJcbmNsYXNzIEZhdm9yaXRlc0NvbnRyb2xsZXJ7XHJcbiAgY29uc3RydWN0b3Iod2lkZ2V0KXtcclxuICAgIHRoaXMud2lkZ2V0ID0gd2lkZ2V0O1xyXG4gICAgdGhpcy5mYXZTdG9yYWdlID0gbmV3IHJoLlN0b3JhZ2UoKVxyXG4gICAgLyogSW50ZXJuYWwgZnVuY3Rpb25zIGFuZCB2YXJpYWJsZXMgKi9cclxuICAgIHRoaXMuX2xvYWRGcm9tU3RvcmFnZSA9IGZhbHNlOy8qIEZhdm9yaXRlcyBhbHJlYWR5IGxvYWRlZCBmcm9tIHN0b3JhZ2U/ICovXHJcblxyXG4gICAgdGhpcy5fZmF2TWVtb3J5U3RvcmUgPSB1bmRlZmluZWQ7LyogVmFyaWFibGUgdG8gaG9sZCBmYXZvcml0ZXMgb2JqZWN0ICovXHJcbiAgICByaC5tb2RlbC5zdWJzY3JpYmVPbmNlKGNvbnN0cygnRVZUX1BST0pFQ1RfTE9BREVEJyksICgpID0+e1xyXG4gICAgICB0aGlzLmluaXQoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBfZ2V0VW5pcXVlSWQoKSB7XHJcbiAgICBmdW5jdGlvbiBfcDgocykge1xyXG4gICAgICBjb25zdCBwID0gKGAke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMTYpfTAwMDAwMDAwMGApLnN1YnN0cigyLDgpO1xyXG4gICAgICByZXR1cm4gcyA/IGAtJHtwLnN1YnN0cigwLDQpfS0ke3Auc3Vic3RyKDQsNCl9YCA6IHAgO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9wOCgpICsgX3A4KHRydWUpICsgX3A4KHRydWUpICsgX3A4KCk7XHJcbiAgfVxyXG5cclxuICBudW1iZXJPZkl0ZW1zKEpTT04pIHsvKiBDb3VudCB0aGUgbnVtYmVyIG9mIGl0ZW1zIGluIGFuIG9iamVjdCAqL1xyXG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKEpTT04pLmxlbmd0aDtcclxuICB9XHJcbiAgX2dldEZhdkhUTUxFbGVtZW50cyh0eXBlKSB7XHJcbiAgICAgIC8qIEZpbmQgYWxsIGVsZW1lbnRzIGluIHRoZSBIVE1MIHRoYXQgY2FuIGhvbGQgYSBmYXZvcml0ZSB3aWRnZXQgKi9cclxuXHJcbiAgICBsZXQgYWxsRWxlbWVudHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImRpdlwiKTsvKiBPbmx5IGRpdnMgY2FuIGJlIGZhdm9yaXRlIGhvbGRlcnMgKi9cclxuICAgIGxldCBlbGVtZW50cyA9IFtdO1xyXG5cclxuICAgIGZvcihsZXQgaT0wOyBpPGFsbEVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGlmKGFsbEVsZW1lbnRzW2ldLmdldEF0dHJpYnV0ZShyaC5jb25zdHMoJ0ZBVkFUVFJJQlVURScpKSA9PT0gdHlwZSkge1xyXG4gICAgICAgIGVsZW1lbnRzLnB1c2goYWxsRWxlbWVudHNbaV0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGVsZW1lbnRzO1xyXG4gIH1cclxuXHJcbiAgZ2V0TGlua1RpdGxlKGlzRmF2b3JpdGUpe1xyXG4gICAgbGV0IGxuZyA9IHJoLm1vZGVsLmdldChjb25zdHMoJ0tFWV9MTkcnKSlcclxuICAgIGlmKGlzRmF2b3JpdGUpe1xyXG4gICAgICByZXR1cm4gKGxuZyAmJiBsbmcudW5zZXRBc0Zhdm9yaXRlKSB8fCAnJztcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgcmV0dXJuIChsbmcgJiYgbG5nLnNldEFzRmF2b3JpdGUpIHx8ICcnO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIF9sb2FkRmF2b3JpdGVzRnJvbVN0b3JhZ2UoKXtcclxuICAgICAgLyogTG9hZCBzZXR0aW5nIGZyb20gc3RvcmFnZSAqL1xyXG4gICAgbGV0IHN0b3JhZ2VPYmplY3Q7XHJcbiAgICBsZXQgbG9hZFN0cmluZyA9IHRoaXMuZmF2U3RvcmFnZS5mZXRjaChjb25zdHMoJ0ZBVlNUT1JBR0UnKSk7XHJcblxyXG4gICAgaWYodHlwZW9mKGxvYWRTdHJpbmcpID09PSBcInVuZGVmaW5lZFwiIHx8IGxvYWRTdHJpbmcgPT09IG51bGwpIHsvKiBObyBzZXR0aW5ncyB5ZXQsIGNyZWF0ZSBuZXcgb2JqZWN0LiAqL1xyXG4gICAgICBzdG9yYWdlT2JqZWN0ID0ge307XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzdG9yYWdlT2JqZWN0ID0gSlNPTi5wYXJzZShsb2FkU3RyaW5nKTsvKiBQYXJzZSBzdHJpbmcgdG8gb2JqZWN0ICovXHJcbiAgICB9XHJcbiAgICByZXR1cm4gc3RvcmFnZU9iamVjdDtcclxuICB9XHJcblxyXG4gIF9sb2FkRmF2b3JpdGVzKCl7XHJcbiAgICBpZih0aGlzLl9sb2FkRnJvbVN0b3JhZ2UgPT09IGZhbHNlKSB7LyogT25seSBsb2FkIG9uY2UsIHRoZW4gdXNlIG9iamVjdCBpbiBtZW1vcnkuIFNhdmVzIGEgZmV3IHBhcnNpbmdzLiAqL1xyXG4gICAgICB0aGlzLl9mYXZNZW1vcnlTdG9yZSA9IHRoaXMuX2xvYWRGYXZvcml0ZXNGcm9tU3RvcmFnZSgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuX2Zhdk1lbW9yeVN0b3JlO1xyXG4gIH1cclxuXHJcbiAgX3NhdmVGYXZvcml0ZXMoKXtcclxuICAgIGxldCBmYXZvcml0ZXNTdHJpbmc7XHJcbiAgICBmYXZvcml0ZXNTdHJpbmcgPSBKU09OLnN0cmluZ2lmeSh0aGlzLl9mYXZNZW1vcnlTdG9yZSk7XHJcbiAgICB0aGlzLmZhdlN0b3JhZ2UucGVyc2lzdChyaC5jb25zdHMoJ0ZBVlNUT1JBR0UnKSwgZmF2b3JpdGVzU3RyaW5nKTtcclxuICB9XHJcblxyXG4gIF91bkZhdm9yaXRlVG9waWModG9waWMpe1xyXG4gICAgZm9yKGNvbnN0IGkgaW4gdGhpcy5fZmF2TWVtb3J5U3RvcmUpIHtcclxuICAgICAgY29uc3QgY3VycmVudCA9IHRoaXMuX2Zhdk1lbW9yeVN0b3JlW2ldO1xyXG4gICAgICBpZihjdXJyZW50LnRvcGljID09PSAgdG9waWMpIHtcclxuICAgICAgICBkZWxldGUgdGhpcy5fZmF2TWVtb3J5U3RvcmVbaV07XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMuX3NhdmVGYXZvcml0ZXMoKTtcclxuICAgIHJoLm1vZGVsLnB1Ymxpc2gocmguY29uc3RzKCdFVkVOVEZBVkNIQU5HRScpLCBudWxsKTsvKiBQdWJsaXNoIHNvIGZhdm9yaXRlcyBzdWJzY3JpYmVycyBhcmUgbm90aWZpZWQgb2YgY2hhbmdlcyAqL1xyXG4gIH1cclxuXHJcbiAgX2Zhdm9yaXRlVG9waWModXJsLCB0aXRsZSl7XHJcbiAgICAvL2xldCBpZDtcclxuICAgIHRoaXMuX2Zhdk1lbW9yeVN0b3JlW3RoaXMuX2dldFVuaXF1ZUlkKCldID0ge1widG9waWNcIiA6IHVybCwgXCJ0aXRsZVwiIDogdGl0bGV9O1xyXG4gICAgdGhpcy5fc2F2ZUZhdm9yaXRlcygpO1xyXG4gICAgcmgubW9kZWwucHVibGlzaChyaC5jb25zdHMoJ0VWRU5URkFWQ0hBTkdFJyksIG51bGwpOy8qIFB1Ymxpc2ggc28gZmF2b3JpdGVzIHN1YnNjcmliZXJzIGFyZSBub3RpZmllZCBvZiBjaGFuZ2VzICovXHJcbiAgfVxyXG5cclxuICAvKiBQdWJsaWMgZnVuY3Rpb25zOiBmb3IgdXNlIGluIG90aGVyIHNjcmlwdHMgKi9cclxuICBnZXRTdG9yYWdlSWQgKCl7IHJldHVybiBgZmF2LSR7cmguXy5nZXRIb3N0Rm9sZGVyKCl9YCB9XHJcblxyXG4gIGdldFRvcGljVVJMKCl7IC8qIEdldCB0aGUgVVJMIG9mIHRoZSBjdXJyZW50IHRvcGljICovXHJcbiAgICByZXR1cm4gcmgubW9kZWwuZ2V0KHJoLmNvbnN0cygnS0VZX1RPUElDX1VSTCcpKTtcclxuICB9XHJcblxyXG4gIGdldFRvcGljVGl0bGUoKXsgLyogR2V0IHRpdGxlIG9mIGN1cnJlbnRseSBvcGVuZWQgdG9waWMgKi9cclxuICAgIHJldHVybiByaC5tb2RlbC5nZXQocmguY29uc3RzKCdLRVlfVE9QSUNfVElUTEUnKSk7XHJcbiAgfVxyXG5cclxuICBpc1RvcGljRmF2b3JpdGUodG9waWMpe1xyXG4gICAgICAvKiBJcyB0aGUgY3VycmVudCB0b3BpYyBhIGZhdm9yaXRlIHRvcGljPyAqL1xyXG4gICAgbGV0IGZhdm9yaXRlcztcclxuICAgIGxldCBpc0Zhdm9yaXRlO1xyXG4gICAgaWYoIXRvcGljKSB7XHJcbiAgICAgIHRvcGljID0gdGhpcy5nZXRUb3BpY1VSTCgpO1xyXG4gICAgfVxyXG4gICAgZmF2b3JpdGVzID0gdGhpcy5fbG9hZEZhdm9yaXRlcygpO1xyXG5cclxuICAgIGlzRmF2b3JpdGUgPSBmYWxzZTtcclxuICAgIGZvcihjb25zdCBpIGluIGZhdm9yaXRlcykge1xyXG4gICAgICBjb25zdCBjdXJyZW50ID0gZmF2b3JpdGVzW2ldO1xyXG4gICAgICBpZihjdXJyZW50LnRvcGljID09PSB0b3BpYykge1xyXG4gICAgICAgIGlzRmF2b3JpdGUgPSB0cnVlO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGlzRmF2b3JpdGU7XHJcbiAgfVxyXG4gIHNldGZhdm9yaXRlc1RpdGxlKGlzRmF2b3JpdGUpe1xyXG4gICAgbGV0IHRpdGxlID0gdGhpcy5nZXRMaW5rVGl0bGUoaXNGYXZvcml0ZSlcclxuICAgIHJoLm1vZGVsLnB1Ymxpc2goY29uc3RzKCdGQVZPUklURVNfQlVUVE9OX1RJVExFJyksIHRpdGxlKVxyXG4gIH1cclxuICBzZXRUb3BpY0Zhdm9yaXRlU3RhdGUoKXtcclxuICAgIHJoLm1vZGVsLnB1Ymxpc2goY29uc3RzKCdUT1BJQ19GQVZPUklURScpLCB0aGlzLmlzVG9waWNGYXZvcml0ZSgpKTtcclxuICB9XHJcblxyXG4gIHNldEZhdm9yaXRlc0xpc3QoKXsvKiBXcml0ZSB0aGUgZmF2b3JpdGVzIGxpc3QgKi9cclxuICAgIC8vbGV0IGZhdmhvbGRlcnM7XHJcbiAgICBsZXQgZmF2b3JpdGVzID0gW107XHJcbiAgICBsZXQgaWRcclxuICAgIGxldCBmYXZvcml0ZXNfbWFwID0gdGhpcy5fbG9hZEZhdm9yaXRlcygpO1xyXG4gICAgZm9yKGlkIGluIGZhdm9yaXRlc19tYXApe1xyXG4gICAgICBmYXZvcml0ZXMucHVzaChmYXZvcml0ZXNfbWFwW2lkXSk7XHJcbiAgICB9XHJcbiAgICByaC5tb2RlbC5wdWJsaXNoKGNvbnN0cygnS0VZX0ZBVk9SSVRFUycpLCBmYXZvcml0ZXMpXHJcbiAgfVxyXG5cclxuICB0b2dnbGVGYXZvcml0ZSh0b3BpY1VSTCl7LyogVG9nZ2xlIHdoZXRoZXIgdGhlIHBhZ2UgaXMgYSBmYXZvcml0ZSAqL1xyXG4gICAgaWYoIXRvcGljVVJMKSB7XHJcbiAgICAgIHRvcGljVVJMID0gdGhpcy5nZXRUb3BpY1VSTCgpO1xyXG4gICAgfVxyXG4gICAgaWYodGhpcy5pc1RvcGljRmF2b3JpdGUodG9waWNVUkwpKSB7XHJcbiAgICAgIHRoaXMuX3VuRmF2b3JpdGVUb3BpYyh0b3BpY1VSTCk7LyogQmVjYXVzZSB0aGUgZmF2b3JpdGVzIGxpc3QgY2FuIHJlbW92ZSB0b3BpY3MsIHJlbW92aW5nIGEgdG9waWMgY2FuIGJlIGEgZGlmZmVyZW50IFVSTCB0aGFuIHRoZSBjdXJyZW50IHRvcGljLiAqL1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fZmF2b3JpdGVUb3BpYyh0b3BpY1VSTCwgdGhpcy5nZXRUb3BpY1RpdGxlKCkpOy8qIFRoaXMgY2FuIG9ubHkgYmUgdGhlIGN1cnJlbnQgdG9waWMgKi9cclxuICAgIH1cclxuICAgIHRoaXMuc2V0VG9waWNGYXZvcml0ZVN0YXRlKCk7XHJcbiAgfVxyXG5cclxuICBpbml0KCl7LyogSW5pdGlhbGlzZSB0aGUgZmF2b3JpdGVzICovXHJcblxyXG4gICAgdGhpcy5mYXZTdG9yYWdlLmluaXQocmguXy5nZXRSb290VXJsKCkpXHJcblxyXG4gICAgLyogU3Vic2NyaWJlIHRvIHRvcGljIGV2ZW50cyAqL1xyXG4gICAgcmgubW9kZWwuc3Vic2NyaWJlKHJoLmNvbnN0cygnS0VZX1RPUElDX1VSTCcpLCB0aGlzLnNldFRvcGljRmF2b3JpdGVTdGF0ZS5iaW5kKHRoaXMpKTtcclxuICAgIHJoLm1vZGVsLnN1YnNjcmliZShyaC5jb25zdHMoJ0VWRU5URkFWQ0hBTkdFJyksIHRoaXMuc2V0RmF2b3JpdGVzTGlzdC5iaW5kKHRoaXMpKTtcclxuICAgIHJoLm1vZGVsLnN1YnNjcmliZShyaC5jb25zdHMoJ1RPUElDX0ZBVk9SSVRFJyksIHRoaXMuc2V0ZmF2b3JpdGVzVGl0bGUuYmluZCh0aGlzKSk7XHJcblxyXG4gICAgdGhpcy5zZXRGYXZvcml0ZXNMaXN0KCk7XHJcbiAgICByaC5tb2RlbC5wdWJsaXNoKGNvbnN0cygnVE9QSUNfRkFWT1JJVEUnKSwgdGhpcy5pc1RvcGljRmF2b3JpdGUoKSk7XHJcbiAgfVxyXG59XHJcblxyXG5yaC5jb250cm9sbGVyKCdGYXZvcml0ZXNDb250cm9sbGVyJywgRmF2b3JpdGVzQ29udHJvbGxlcilcclxuIiwibGV0IHJoID0gcmVxdWlyZShcIi4uLy4uL2xpYi9yaFwiKVxyXG5sZXQgXyA9IHJoLl9cclxuY2xhc3MgSG9tZUNvbnRyb2xsZXIge1xyXG5cclxuICBjb25zdHJ1Y3Rvcih3aWRnZXQpIHtcclxuICAgIHRoaXMud2lkZ2V0ID0gd2lkZ2V0XHJcbiAgfVxyXG5cclxuICBnb1RvSG9tZSh0b2NJZCkge1xyXG4gICAgaWYocmguY29uc3RzKCdIT01FX0ZJTEVQQVRIJykgPT09IHJoLl8uZ2V0RmlsZU5hbWUoKSkge1xyXG4gICAgICByZXR1cm4gdGhpcy5jaGFuZ2VUb0RlZmF1bHRUb3BpYyh0b2NJZClcclxuICAgIH1cclxuICAgIGxldCBoYXNoTWFwXHJcbiAgICBpZih0b2NJZCAhPT0gdW5kZWZpbmVkICYmIHRvY0lkICE9PScnKXtcclxuICAgICAgaGFzaE1hcCA9IHtyaHRvY2lkOnRvY0lkfVxyXG4gICAgfVxyXG4gICAgXy5nb1RvSG9tZShoYXNoTWFwKTtcclxuICAgIHJldHVybiB0cnVlXHJcbiAgfVxyXG5cclxuICBjaGFuZ2VUb0RlZmF1bHRUb3BpYyh0b2NJZCkge1xyXG4gICAgbGV0IGhhc2hNYXAgPSB7dDogd2luZG93LmdEZWZhdWx0VG9waWMuc3Vic3RyaW5nKDEpfVxyXG4gICAgaWYodG9jSWQgIT09IHVuZGVmaW5lZCAmJiB0b2NJZCAhPT0nJyl7XHJcbiAgICAgIGhhc2hNYXAucmh0b2NpZCA9IHRvY0lkXHJcbiAgICB9XHJcbiAgICBfLnF1ZXVlVXBkYXRlSGFzaE1hcChoYXNoTWFwLCB0cnVlKVxyXG4gICAgcmV0dXJuIHRydWVcclxuICB9XHJcbn1cclxuXHJcbnJoLmNvbnRyb2xsZXIoJ0hvbWVDb250cm9sbGVyJywgSG9tZUNvbnRyb2xsZXIpXHJcbiIsImxldCByaCA9IHJlcXVpcmUoXCIuLi8uLi9saWIvcmhcIilcclxubGV0IG5vZGVVdGlscyA9IHJlcXVpcmUoXCIuLi91dGlscy9ub2RlX3V0aWxzXCIpXHJcbmxldCAkID0gcmguJFxyXG5sZXQgXyA9IHJoLl87XHJcbmNsYXNzIE1vZGFsRGlhbG9nIHtcclxuXHJcbiAgY3JlYXRlQ2hpbGRXaWRnZXQoKSB7XHJcbiAgICB0aGlzLm5vZGUgPSAkLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHRoaXMudGVtcGxhdGUpXHJcbiAgICBub2RlVXRpbHMuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuYm9keSwgdGhpcy5ub2RlKTtcclxuICAgIHRoaXMud2lkZ2V0ID0gbmV3IHJoLldpZGdldCh7bm9kZTogdGhpcy5ub2RlfSlcclxuICAgIHRoaXMud2lkZ2V0LmluaXQoKVxyXG4gIH1cclxuXHJcblxyXG4gIGdldCB0ZW1wbGF0ZSgpIHtcclxuICAgIGxldCBpbml0aWFsU3R5bGUgPSB0aGlzLmluaXRpYWxTdHlsZSgpXHJcblxyXG4gICAgcmV0dXJuIGBcclxuICAgIDxkaXYgY2xhc3M9XCJyaC1tb2RhbFwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJyaC1tb2RhbC1jb250YWluZXJcIiAke2luaXRpYWxTdHlsZX0+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwicmgtbW9kYWwtY29udGVudFwiIGRhdGEtaHRtbD1cImNvbnRlbnRcIj48L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJyaC1tb2RhbC1jbG9zZVwiIGRhdGEtY2xpY2s9XCJAY2xvc2UodHJ1ZSlcIj4gPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5gO1xyXG4gIH1cclxuXHJcbiAgc2V0T25JbWFnZUxvYWQoKXtcclxuICAgIGxldCBtb2RhbENvbnRlbnQgPSAkLmZpbmQodGhpcy5ub2RlLCAnLnJoLW1vZGFsLWNvbnRlbnQnKVswXVxyXG4gICAgaWYoIW1vZGFsQ29udGVudCkge1xyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIHRoaXMubW9kYWxDb250ZW50ID0gbW9kYWxDb250ZW50XHJcbiAgICBsZXQgaW1nID0gJC5maW5kKG1vZGFsQ29udGVudCwgJ2ltZycpWzBdXHJcbiAgICBpZihpbWcpe1xyXG4gICAgICB0aGlzLmltZyA9IGltZ1xyXG4gICAgICBpbWcuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIHRoaXMuc2V0TW9kYWxTaXplLmJpbmQodGhpcykpXHJcbiAgICAgIGltZy5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIHRoaXMuc2V0TW9kYWxTaXplLmJpbmQodGhpcykpXHJcbiAgICB9XHJcbiAgfVxyXG4gIHNldE1vZGFsU2l6ZSgpe1xyXG4gICAgdGhpcy5pbWFnZVdpZHRoID0gdGhpcy5pbWcubmF0dXJhbFdpZHRoXHJcbiAgICB0aGlzLmltYWdlSGVpZ2h0ID0gdGhpcy5pbWcubmF0dXJhbEhlaWdodFxyXG4gICAgbGV0IHBvc2l0aW9uID0gdGhpcy5jYWxjdWxhdGVQb3NpdGlvbih0aGlzLmltYWdlV2lkdGgsIHRoaXMuaW1hZ2VIZWlnaHQpXHJcbiAgICBsZXQgbW9kYWxDb250YWluZXIgPSAkLmZpbmQodGhpcy5ub2RlLCAnLnJoLW1vZGFsLWNvbnRhaW5lcicpWzBdXHJcbiAgICBpZihtb2RhbENvbnRhaW5lcil7XHJcbiAgICAgIHRoaXMuc2V0Q29udGFpbmVyU3R5bGUobW9kYWxDb250YWluZXIsIHBvc2l0aW9uKVxyXG4gICAgfVxyXG4gIH1cclxuICBzZXRDb250YWluZXJTdHlsZShtb2RhbENvbnRhaW5lciwgcG9zaXRpb24pe1xyXG4gICAgbGV0IHRvcCA9IE1hdGgucm91bmQocG9zaXRpb24udG9wKVxyXG4gICAgbGV0IGxlZnQgPSBNYXRoLnJvdW5kKHBvc2l0aW9uLmxlZnQpXHJcblxyXG4gICAgJC5jc3MobW9kYWxDb250YWluZXIsICdsZWZ0JywgbGVmdC50b1N0cmluZygpICsgJ3B4JylcclxuICAgICQuY3NzKG1vZGFsQ29udGFpbmVyLCAndG9wJywgdG9wLnRvU3RyaW5nKCkgKyAncHgnKVxyXG5cclxuICAgIGlmKHRoaXMubW9kYWxDb250ZW50KSB7XHJcbiAgICAgIHRoaXMuc2V0SW1hZ2VTaXplKHBvc2l0aW9uLndpZHRoLCBwb3NpdGlvbi5oZWlnaHQpXHJcbiAgICB9XHJcbiAgICAkLmNzcyhtb2RhbENvbnRhaW5lciwgJ2Rpc3BsYXknLCBcImJsb2NrXCIpXHJcblxyXG4gIH1cclxuICBjYWxjdWxhdGVJbWFnZVNpemUoc2l6ZSl7XHJcbiAgICBsZXQgYXNwZWN0ID0gc2l6ZS5pbWFnZVdpZHRoL3NpemUuaW1hZ2VIZWlnaHRcclxuICAgIGlmKHNpemUuaW1hZ2VXaWR0aCA8IHNpemUucGFnZVdpZHRoICYmIHNpemUuaW1hZ2VIZWlnaHQgPCBzaXplLnBhZ2VIZWlnaHQpe1xyXG4gICAgICByZXR1cm4ge3dpZHRoOiBzaXplLmltYWdlV2lkdGgsIGhlaWdodDogc2l6ZS5pbWFnZUhlaWdodH1cclxuICAgIH1cclxuXHJcbiAgICBpZihzaXplLmltYWdlV2lkdGggPj0gc2l6ZS5wYWdlV2lkdGggJiYgc2l6ZS5pbWFnZUhlaWdodCA8PSBzaXplLnBhZ2VIZWlnaHQpe1xyXG4gICAgICByZXR1cm4ge2hlaWdodDogc2l6ZS5wYWdlV2lkdGgvYXNwZWN0LCB3aWR0aDogc2l6ZS5wYWdlV2lkdGh9XHJcbiAgICB9XHJcbiAgICBpZihzaXplLmltYWdlV2lkdGggPD0gc2l6ZS5wYWdlV2lkdGggJiYgc2l6ZS5pbWFnZUhlaWdodCA+PSBzaXplLnBhZ2VIZWlnaHQpe1xyXG4gICAgICByZXR1cm4ge2hlaWdodDogc2l6ZS5wYWdlSGVpZ2h0LCB3aWR0aDogc2l6ZS5wYWdlSGVpZ2h0KmFzcGVjdFxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZihzaXplLmltYWdlV2lkdGggPj0gc2l6ZS5wYWdlV2lkdGggJiYgc2l6ZS5pbWFnZUhlaWdodCA+PSBzaXplLnBhZ2VIZWlnaHQpe1xyXG4gICAgICByZXR1cm4gdGhpcy5fY2FsY3VsYXRlRnVsbHlFeGNlZWRTaXplKHNpemUsIGFzcGVjdClcclxuICAgIH1cclxuICB9XHJcbiAgX2NhbGN1bGF0ZUZ1bGx5RXhjZWVkU2l6ZShzaXplLCBhc3BlY3Qpe1xyXG4gICAgbGV0IHBhZ2VBc3BlY3QgPSBzaXplLnBhZ2VXaWR0aC9zaXplLnBhZ2VIZWlnaHRcclxuICAgIGlmKGFzcGVjdCA8IHBhZ2VBc3BlY3Qpe1xyXG4gICAgICByZXR1cm4ge2hlaWdodDogc2l6ZS5wYWdlSGVpZ2h0LCB3aWR0aDogc2l6ZS5wYWdlSGVpZ2h0KmFzcGVjdH1cclxuICAgIH1cclxuICAgIGVsc2V7XHJcbiAgICAgIHJldHVybnsgaGVpZ2h0OiBzaXplLnBhZ2VXaWR0aC9hc3BlY3QsIHdpZHRoOiBzaXplLnBhZ2VXaWR0aH1cclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuXHJcbiAgY2FsY3VsYXRlUG9zaXRpb24oaW1hZ2VXaWR0aCwgaW1hZ2VIZWlnaHQpe1xyXG4gICAgbGV0IHBhZ2VXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoIHx8IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGhcclxuICAgIGxldCBwYWdlSGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0IHx8IGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0XHJcbiAgICBwYWdlV2lkdGggLT0gNzBcclxuICAgIHBhZ2VIZWlnaHQgLT0gNzBcclxuICAgIHBhZ2VXaWR0aCA9IChwYWdlV2lkdGggPj0gMCk/ICBwYWdlV2lkdGg6IDBcclxuICAgIHBhZ2VIZWlnaHQgPSAocGFnZUhlaWdodCA+PSAwKT8gIHBhZ2VIZWlnaHQ6IDBcclxuXHJcbiAgICBsZXQgc2l6ZSA9IHtpbWFnZVdpZHRoOmltYWdlV2lkdGgsIGltYWdlSGVpZ2h0OmltYWdlSGVpZ2h0LCBwYWdlV2lkdGg6cGFnZVdpZHRoLCBwYWdlSGVpZ2h0OnBhZ2VIZWlnaHR9XHJcbiAgICBsZXQgaW1hZ2Vfc2l6ZSA9IHRoaXMuY2FsY3VsYXRlSW1hZ2VTaXplKHNpemUpXHJcbiAgICBpbWFnZVdpZHRoID0gaW1hZ2Vfc2l6ZS53aWR0aFxyXG4gICAgaW1hZ2VIZWlnaHQgPSBpbWFnZV9zaXplLmhlaWdodFxyXG4gICAgbGV0IGxlZnQgPSBNYXRoLm1heCg1LCAocGFnZVdpZHRoIC0gaW1hZ2VXaWR0aCkvMiApXHJcbiAgICBsZXQgdG9wID0gTWF0aC5tYXgoNSwgKHBhZ2VIZWlnaHQgLSBpbWFnZUhlaWdodCkvMiApXHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbGVmdDogbGVmdCxcclxuICAgICAgdG9wOiB0b3AsXHJcbiAgICAgIHdpZHRoOiBpbWFnZVdpZHRoLFxyXG4gICAgICBoZWlnaHQ6IGltYWdlSGVpZ2h0LFxyXG4gICAgICBwYWdlV2lkdGg6IHBhZ2VXaWR0aCxcclxuICAgICAgcGFnZUhlaWdodDogcGFnZUhlaWdodFxyXG4gICAgfVxyXG4gIH1cclxuICBpbml0aWFsU3R5bGUoKXtcclxuICAgIHJldHVybiAodGhpcy5pc0ltYWdlKT8gYHN0eWxlPVwiZGlzcGxheTpub25lXCJgIDogJydcclxuICB9XHJcblxyXG4gIFNob3dNb2RhbChjb25maWcpIHtcclxuICAgIHRoaXMuaXNJbWFnZSA9IGNvbmZpZy5pc0ltYWdlXHJcbiAgICB0aGlzLmNyZWF0ZUNoaWxkV2lkZ2V0KClcclxuICAgIHRoaXMud2lkZ2V0LnN1YnNjcmliZSgnY2xvc2UnLCB0aGlzLl9jbG9zZS5iaW5kKHRoaXMpKVxyXG4gICAgdGhpcy53aWRnZXQucHVibGlzaCgnY29udGVudCcsIGNvbmZpZy5jb250ZW50KVxyXG4gICAgXy5kZWZlcih0aGlzLnNldE9uSW1hZ2VMb2FkLmJpbmQodGhpcykpXHJcblxyXG4gIH1cclxuXHJcbiAgc2V0SW1hZ2VTaXplKG1heFdpZHRoLCBtYXhIZWlnaHQpe1xyXG4gICAgaWYodGhpcy5pbWFnZVdpZHRoID4gbWF4V2lkdGgpe1xyXG4gICAgICAkLmNzcyh0aGlzLmltZywgJ3dpZHRoJywgYCR7TWF0aC5yb3VuZChtYXhXaWR0aCl9cHhgKVxyXG4gICAgfVxyXG4gICAgaWYodGhpcy5pbWFnZUhlaWdodCA+IG1heEhlaWdodCl7XHJcbiAgICAgICQuY3NzKHRoaXMuaW1nLCAnaGVpZ2h0JywgYCR7TWF0aC5yb3VuZChtYXhIZWlnaHQpfXB4YClcclxuICAgIH1cclxuICB9XHJcbiAgX2Nsb3NlKCl7XHJcbiAgICB0aGlzLndpZGdldC5kZXN0cnVjdCgpO1xyXG4gICAgdGhpcy53aWRnZXQgPSB1bmRlZmluZWQ7XHJcbiAgICBub2RlVXRpbHMucmVtb3ZlQ2hpbGQodGhpcy5ub2RlKTtcclxuICAgIHRoaXMubm9kZSA9IHVuZGVmaW5lZDtcclxuICB9XHJcbn1cclxuXHJcbnJoLm1vZGVsLmNzdWJzY3JpYmUoJ1NIT1dfTU9EQUwnLCBjb25maWcgPT4ge1xyXG4gIGxldCBtb2RlbCA9IG5ldyBNb2RhbERpYWxvZygpXHJcbiAgbW9kZWwuU2hvd01vZGFsKGNvbmZpZylcclxufSk7XHJcbiIsImxldCByaCA9IHJlcXVpcmUoXCIuLi8uLi9saWIvcmhcIilcclxubGV0ICQgPSByaC4kO1xyXG5sZXQgXyA9IHJoLl87XHJcbmxldCBjb25zdHMgPSByaC5jb25zdHM7XHJcbmNsYXNzIFJIMjAxN0xheW91dENvbnRyb2xsZXIge1xyXG5cclxuICBjb25zdHJ1Y3Rvcih3aWRnZXQpIHtcclxuICAgIHRoaXMud2lkZ2V0ID0gd2lkZ2V0O1xyXG4gICAgdGhpcy50b3BpY0ZyYW1lID0gJy50b3BpYy1jb250YWluZXIgaWZyYW1lJztcclxuICAgIHRoaXMuaW5pdExheW91dCgpO1xyXG4gICAgdGhpcy5pbml0TW9kYWwoKTtcclxuICB9XHJcblxyXG4gIGlzTGF5b3V0TW9kZShoYXNoTWFwKSB7XHJcbiAgICBsZXQgaGFzaCA9IGhhc2hNYXAgfHwgXy5oYXNoUGFyYW1zKCk7XHJcbiAgICBsZXQgdG9waWNNb2RlID0gaGFzaFtyaC5jb25zdHMoJ0hBU0hfS0VZX1RPUElDJyldO1xyXG4gICAgcmV0dXJuIChoYXNoW3JoLmNvbnN0cygnSEFTSF9LRVlfVUlNT0RFJyldICE9PSBjb25zdHMoJ0hFTFBfU0VBUkNIX01PREUnKSAmJiAoIXRvcGljTW9kZSB8fFxyXG4gICAgICAgIChoYXNoW3JoLmNvbnN0cygnSEFTSF9IT01FUEFHRV9NT0RFJyldID09PSAndHJ1ZScpIHx8XHJcbiAgICAgICAgIGhhc2hbcmguY29uc3RzKCdIQVNIX0tFWV9SSF9UT0NJRCcpXSkpO1xyXG4gIH1cclxuXHJcbiAgaW5pdExheW91dCgpIHtcclxuICAgIHJoLm1vZGVsLnN1YnNjcmliZShjb25zdHMoJ0VWVF9IQVNIX0NIQU5HRScpLCAob2JqKSA9PiB7XHJcbiAgICAgIGxldCBoYXNoTWFwID0gb2JqLm5ld01hcCwgb2xkSGFzaE1hcCA9IG9iai5vbGRNYXA7XHJcbiAgICAgIGlmKHRoaXMuaXNMYXlvdXRNb2RlKCkpIHtcclxuICAgICAgICB0aGlzLndpZGdldC5wdWJsaXNoKHJoLmNvbnN0cygnS0VZX1ZJRVdfTU9ERScpLCByaC5jb25zdHMoJ0hFTFBfTEFZT1VUX01PREUnKSk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZihoYXNoTWFwW3JoLmNvbnN0cygnSEFTSF9LRVlfVUlNT0RFJyldID09PSAnc2VhcmNoJyl7XHJcbiAgICAgICAgdGhpcy53aWRnZXQucHVibGlzaChyaC5jb25zdHMoJ0tFWV9WSUVXX01PREUnKSwgcmguY29uc3RzKCdIRUxQX1NFQVJDSF9NT0RFJykpO1xyXG4gICAgICAgIF8ucXVldWVVcGRhdGVIYXNoTWFwKHtbY29uc3RzKCdIQVNIX0hPTUVQQUdFX01PREUnKV06IGZhbHNlfSwgZmFsc2UpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHRoaXMud2lkZ2V0LnB1Ymxpc2gocmguY29uc3RzKCdLRVlfVklFV19NT0RFJyksIHJoLmNvbnN0cygnSEVMUF9UT1BJQ19NT0RFJykpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB2YXIgZmVhdHVyZSA9IHJoLm1vZGVsLmdldChyaC5jb25zdHMoJ0tFWV9GRUFUVVJFJykpXHJcbiAgICAgIGlmKGZlYXR1cmUgJiYgZmVhdHVyZS5zaG93RGVmVG9waWMgPT09IGZhbHNlICYmXHJcbiAgICAgICAgIWhhc2hNYXBbcmguY29uc3RzKCdIQVNIX0tFWV9SSF9UT0NJRCcpXSAmJlxyXG4gICAgICAgICFvbGRIYXNoTWFwW3JoLmNvbnN0cygnSEFTSF9LRVlfVE9QSUMnKV0gJiZcclxuICAgICAgICBoYXNoTWFwW3JoLmNvbnN0cygnSEFTSF9LRVlfVE9QSUMnKV0pIHtcclxuICAgICAgICBfLnF1ZXVlVXBkYXRlSGFzaE1hcCh7W2NvbnN0cygnSEFTSF9IT01FUEFHRV9NT0RFJyldOiAnZmFsc2UnfSwgZmFsc2UpXHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZihvbGRIYXNoTWFwW3JoLmNvbnN0cygnSEFTSF9LRVlfVE9QSUMnKV0gJiZcclxuICAgICAgICAhaGFzaE1hcFtyaC5jb25zdHMoJ0hBU0hfS0VZX1JIX1RPQ0lEJyldICYmXHJcbiAgICAgICAgb2xkSGFzaE1hcFtyaC5jb25zdHMoJ0hBU0hfS0VZX1RPUElDJyldICE9PSBoYXNoTWFwW3JoLmNvbnN0cygnSEFTSF9LRVlfVE9QSUMnKV0gJiZcclxuICAgICAgICBoYXNoTWFwW3JoLmNvbnN0cygnSEFTSF9IT01FUEFHRV9NT0RFJyldID09PSAndHJ1ZScgJiZcclxuICAgICAgICBvbGRIYXNoTWFwW3JoLmNvbnN0cygnSEFTSF9IT01FUEFHRV9NT0RFJyldID09PSBoYXNoTWFwW3JoLmNvbnN0cygnSEFTSF9IT01FUEFHRV9NT0RFJyldKSB7XHJcbiAgICAgICAgXy5xdWV1ZVVwZGF0ZUhhc2hNYXAoe1tjb25zdHMoJ0hBU0hfSE9NRVBBR0VfTU9ERScpXTogJ2ZhbHNlJ30sIGZhbHNlKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgbGV0IGhhc2hNYXAgPSBfLmhhc2hQYXJhbXMoKTtcclxuICAgIGlmKHRoaXMuaXNMYXlvdXRNb2RlKCkgJiZcclxuICAgICAgICBoYXNoTWFwW3JoLmNvbnN0cygnSEFTSF9IT01FUEFHRV9NT0RFJyldICE9PSAndHJ1ZScpXHJcbiAgICB7XHJcbiAgICAgIF8ucXVldWVVcGRhdGVIYXNoTWFwKHtbY29uc3RzKCdIQVNIX0hPTUVQQUdFX01PREUnKV06IHRydWV9LCBmYWxzZSk7XHJcbiAgICB9XHJcbiAgICByaC5tb2RlbC5zdWJzY3JpYmUoJ0VWVF9UT0NfTE9BREVEZ290b3RhYicsIChib29rRGF0YSkgPT4ge1xyXG4gICAgICBpZihib29rRGF0YS5rZXkpIHtcclxuICAgICAgICByaC5tb2RlbC5zdWJzY3JpYmUoYm9va0RhdGEua2V5LCAoYm9va1RPQywga2V5LCB1bnN1YikgPT4ge1xyXG4gICAgICAgICAgdW5zdWIoKTtcclxuICAgICAgICAgIGlmKGJvb2tEYXRhLml0ZW0gJiYgYm9va0RhdGEuaXRlbS51cmwgJiYgIWJvb2tUT0NbMF0uYWRkZWQpIHtcclxuICAgICAgICAgICAgYm9va1RPQy51bnNoaWZ0KHsndHlwZSc6ICdpdGVtJywgJ3VybCc6IGJvb2tEYXRhLml0ZW0udXJsLFxyXG4gICAgICAgICAgICAgICduYW1lJzogYm9va0RhdGEuaXRlbS5uYW1lLCAnYWRkZWQnOiB0cnVlfSk7XHJcbiAgICAgICAgICAgIHJoLm1vZGVsLnB1Ymxpc2goYm9va0RhdGEua2V5LCBib29rVE9DKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICBpZihib29rRGF0YS5pdGVtLnVybCkge1xyXG4gICAgICAgIHRoaXMudmlld1RvcGljSW5MYXlvdXRNb2RlKGJvb2tEYXRhLml0ZW0udXJsKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB2aWV3VG9waWNJbkxheW91dE1vZGUodG9waWNVcmwpIHtcclxuICAgIGxldCBwYXJhbU1hcCA9IHsnaG9tZXBhZ2UnOiAndHJ1ZScsXHJcbiAgICAgIFtyaC5jb25zdHMoJ0hBU0hfS0VZX1JIX1RPQ0lEJyldOiB0cnVlfVxyXG4gICAgaWYodG9waWNVcmwgJiYgdG9waWNVcmwgIT09ICcjJykge1xyXG4gICAgICBwYXJhbU1hcC50ID0gdG9waWNVcmxcclxuICAgIH1cclxuICAgIF8ucXVldWVVcGRhdGVIYXNoTWFwKHBhcmFtTWFwLCBmYWxzZSlcclxuICB9XHJcblxyXG4gIGluaXRNb2RhbCgpIHtcclxuICAgIGxldCBiSGFuZGxlZCA9IGZhbHNlXHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBlID0+IHtcclxuICAgICAgaWYgKCBlLmtleUNvZGUgPT09IDI3ICkgeyAvLyBFU0NcclxuICAgICAgICByaC5fLmVhY2goJC5maW5kKCcubW9kYWwnKSwgaXRlbSA9PiB7XHJcbiAgICAgICAgICAkLmFkZENsYXNzKGl0ZW0sICdyaC1oaWRlJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0sIGZhbHNlKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICBpZighYkhhbmRsZWQpIHtcclxuICAgICAgICByaC5fLmVhY2goJC5maW5kKCcubW9kYWwnKSwgZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICQuYWRkQ2xhc3MoaXRlbSwgJ3JoLWhpZGUnKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICBiSGFuZGxlZCA9IGZhbHNlXHJcbiAgICB9KTtcclxuICAgIHJoLl8uZWFjaCgkLmZpbmQoJy5tb2RhbC1jb250ZW50JyksIGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgIF8uYWRkRXZlbnRMaXN0ZW5lcihpdGVtLCAnY2xpY2snLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBiSGFuZGxlZCA9IHRydWVcclxuICAgICAgfSlcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxucmguY29udHJvbGxlcignUkgyMDE3TGF5b3V0Q29udHJvbGxlcicsIFJIMjAxN0xheW91dENvbnRyb2xsZXIpXHJcbiIsImxldCByaCA9IHJlcXVpcmUoXCIuLi8uLi8uLi8uLi9saWIvcmhcIilcclxubGV0IF8gPSByaC5fO1xyXG5cclxuY2xhc3MgTWVyZ2Vye1xyXG4gIGNvbnN0cnVjdG9yKGl0ZW1zLCBtYXhfaXRlbXMgPSAyMCl7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zOyBcclxuICAgIHRoaXMuX21heF9pdGVtcyA9IG1heF9pdGVtcztcclxuICB9XHJcbiAgZ2V0IGl0ZW1zKCl7XHJcbiAgICByZXR1cm4gdGhpcy5faXRlbXNcclxuICB9XHJcbiAgbWVyZ2UobmV3SXRlbXMpe1xyXG4gICAgXy5lYWNoKG5ld0l0ZW1zLCAoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLm1lcmdlSXRlbShpdGVtKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fc29ydCgpO1xyXG4gICAgdGhpcy5fcHVyZ2UoKTtcclxuICB9XHJcbiAgY2xlYXIoKXtcclxuICAgIHRoaXMuX2l0ZW1zID0gW107XHJcbiAgfVxyXG4gIF9wdXJnZSgpe1xyXG4gICAgaWYodGhpcy5faXRlbXMubGVuZ3RoID4gdGhpcy5fbWF4X2l0ZW1zKXtcclxuICAgICAgdGhpcy5faXRlbXMuc3BsaWNlKHRoaXMuX21heF9pdGVtcyk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIG1lcmdlSXRlbShpdGVtKXtcclxuICAgIGxldCBleGlzdGluZ19pdGVtID0gdGhpcy5maW5kX2l0ZW0oaXRlbSk7XHJcbiAgICBpZihleGlzdGluZ19pdGVtKXtcclxuICAgICAgZXhpc3RpbmdfaXRlbS5tZXJnZShpdGVtKVxyXG4gICAgfVxyXG4gICAgZWxzZXtcclxuICAgICAgdGhpcy5faXRlbXMucHVzaChpdGVtKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZpbmRfaXRlbShtYXRjaF9pdGVtKSB7XHJcbiAgICByZXR1cm4gXy5maW5kKHRoaXMuX2l0ZW1zLCAoaXRlbSkgPT4ge1xyXG4gICAgICByZXR1cm4gaXRlbS5tYXRjaChtYXRjaF9pdGVtKVxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIFxyXG4gIG1lcmdlX2l0ZW0oZXhpc3RpbmdfaXRlbSwgbmV3X2l0ZW0pIHtcclxuICAgIGV4aXN0aW5nX2l0ZW0ucHJvYmFiaWxpdHkgKz0gbmV3X2l0ZW0ucHJvYmFiaWxpdHk7XHJcbiAgICBleGlzdGluZ19pdGVtLmNvdW50ID0gTWF0aC5tYXgoZXhpc3RpbmdfaXRlbS5jb3VudCwgbmV3X2l0ZW0uY291bnQpO1xyXG4gIH1cclxuXHJcbiAgX3NvcnQoKXtcclxuICAgIHRoaXMuaXRlbXMuc29ydCh0aGlzLmNvbXBhcmVfaXRlbXMpO1xyXG4gIH1cclxuICBjb21wYXJlX2l0ZW1zKHAxLCBwMil7XHJcbiAgICByZXR1cm4gcDEuY29tcGFyZShwMilcclxuICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gTWVyZ2VyO1xyXG4iLCJsZXQgcmggPSByZXF1aXJlKFwiLi4vLi4vLi4vLi4vbGliL3JoXCIpXHJcbmNvbnN0IGNvbnN0cyA9IHJoLmNvbnN0cztcclxuXHJcbmNsYXNzIFBhdGhze1xyXG4gIGNvbnN0cnVjdG9yKHBhdGgpe1xyXG4gICAgdGhpcy5fcGF0aCA9IHBhdGggfHwgXCJcIlxyXG4gICAgdGhpcy5pbml0UGF0aCgpXHJcbiAgfVxyXG4gIGluaXRQYXRoKCl7XHJcbiAgICBpZih0aGlzLl9wYXRoID09PSBcIi5cIil7XHJcbiAgICAgIHRoaXMuX3BhdGggPSBcIlwiXHJcbiAgICB9XHJcbiAgICBpZih0aGlzLl9wYXRoWzBdID09PSAnLicgJiYgdGhpcy5fcGF0aFsxXSA9PT0gJy8nKXtcclxuICAgICAgdGhpcy5fcGF0aCA9IHRoaXMuX3BhdGguc2xpY2UoMilcclxuICAgIH1cclxuICB9XHJcbiAgX2dldE1vZGVsRmlsZU5hbWUoZmlsZU5vKXtcclxuICAgIHJldHVybiAgY29uc3RzKFwiU0VBUkNIX01PREVMX0FERFJcIikgKyBmaWxlTm8udG9TdHJpbmcoKSArXCIuanNcIjtcclxuICB9XHJcbiAgZ2V0TW9kZWxGaWxlUGF0aChmaWxlbm8pe1xyXG4gICAgbGV0IGZpbGVOYW1lID0gdGhpcy5fZ2V0TW9kZWxGaWxlTmFtZShmaWxlbm8pXHJcbiAgICByZXR1cm4gdGhpcy5fZ2V0UmVsYXRpdmVQYXRoKGZpbGVOYW1lKVxyXG4gIH1cclxuICBfZ2V0UmVsYXRpdmVQYXRoKGZpbGVwYXRoKXtcclxuICAgIGxldCBwYXRoID0gKHRoaXMuX3BhdGggPT09IFwiXCIpPyBmaWxlcGF0aCA6ICB0aGlzLl9wYXRoICsgJy8nICsgZmlsZXBhdGhcclxuXHJcbiAgICByZXR1cm4gcGF0aFxyXG4gIH1cclxuICBfZ2V0UGF0aEtleSgpe1xyXG4gICAgcmV0dXJuICh0aGlzLl9wYXRoID09PSBcIlwiKT8gXCJcIiA6ICAnXycgKyB0aGlzLl9wYXRoICsgJ18nXHJcbiAgfVxyXG4gIGdldE1vZGVsS2V5IChmaWxlTm8pe1xyXG4gICAgcmV0dXJuIGNvbnN0cygnU0VBUkNIX01PREVMX0tFWScpICsgdGhpcy5fZ2V0UGF0aEtleSgpICsgZmlsZU5vLnRvU3RyaW5nKCk7XHJcbiAgfVxyXG5cclxuICBfZ2V0TWFwRmlsZU5hbWUoKXtcclxuICAgIHJldHVybiBjb25zdHMoXCJTRUFSQ0hfTUFQX0FERFJcIik7XHJcbiAgfVxyXG4gIGdldE1hcEZpbGVQYXRoKCl7XHJcbiAgICBsZXQgZmlsZU5hbWUgPSB0aGlzLl9nZXRNYXBGaWxlTmFtZSgpXHJcbiAgICByZXR1cm4gdGhpcy5fZ2V0UmVsYXRpdmVQYXRoKGZpbGVOYW1lKTtcclxuICB9XHJcbiAgZ2V0SW5kZXhGaWxlUGF0aCgpe1xyXG4gICAgbGV0IGZpbGVOYW1lID0gY29uc3RzKFwiU0VBUkNIX0lOREVYX0ZJTEVcIilcclxuICAgIHJldHVybiB0aGlzLl9nZXRSZWxhdGl2ZVBhdGgoZmlsZU5hbWUpO1xyXG4gIH1cclxuICBnZXRUb3BpY1VybCh1cmwpIHtcclxuICAgIHJldHVybiB0aGlzLl9nZXRSZWxhdGl2ZVBhdGgodXJsKVxyXG4gIH1cclxuICBnZXRTZWFyY2hEYkZpbGVQYXRoKCl7XHJcbiAgICBsZXQgZmlsZU5hbWUgPSBjb25zdHMoXCJTRUFSQ0hfREJfRklMRVwiKVxyXG4gICAgcmV0dXJuIHRoaXMuX2dldFJlbGF0aXZlUGF0aChmaWxlTmFtZSk7XHJcblxyXG4gIH1cclxuICBnZXRNZXRhZGF0YUZpbGVQYXRoKCl7XHJcbiAgICBsZXQgZmlsZU5hbWUgPSBjb25zdHMoXCJTRUFSQ0hfTUVUQURBVEFfRklMRVwiKVxyXG4gICAgcmV0dXJuIHRoaXMuX2dldFJlbGF0aXZlUGF0aChmaWxlTmFtZSk7XHJcbiAgfVxyXG5cclxuICBnZXRUZXh0RmlsZVBhdGgoaWQpIHtcclxuICAgIGxldCBmb2xkZXJQYXRoID0gY29uc3RzKFwiU0VBUkNIX1RFWFRfRklMRVwiKVxyXG4gICAgbGV0IHJlbEZvbGRlclBhdGggPSB0aGlzLl9nZXRSZWxhdGl2ZVBhdGgoZm9sZGVyUGF0aClcclxuICAgIHJldHVybiBgJHtyZWxGb2xkZXJQYXRofS8ke2lkfS5qc2BcclxuICB9XHJcbiAgXHJcbn1cclxubW9kdWxlLmV4cG9ydHMgPSBQYXRoc1xyXG4iLCJjb25zdCByaCA9IHJlcXVpcmUoXCIuLi8uLi8uLi8uLi9saWIvcmhcIilcclxuY29uc3QgXyA9IHJoLl9cclxubW9kdWxlLmV4cG9ydHMgPSBjbGFzcyBTeW5vbnltbnN7XHJcbiAgY29uc3RydWN0b3Ioc3lub255bW5zKSB7XHJcblxyXG4gICAgdGhpcy5zeW5vbnltbnMgPSBzeW5vbnltbnMgfHwgW11cclxuICAgIHRoaXMucm9vdFdvcmRzID0ge31cclxuICAgIHRoaXMubWVyZ2UoKVxyXG4gIH1cclxuICBtZXJnZSgpIHtcclxuICAgIHRoaXMucm9vdFdvcmRzID0ge31cclxuICAgIF8uZWFjaCh0aGlzLnN5bm9ueW1ucywgKGl0ZW0pID0+IHtcclxuICAgICAgbGV0IHN5bm9ueW1ucyA9IGl0ZW0ud29yZHNcclxuICAgICAgbGV0IHdvcmQgPSBpdGVtLm5hbWVcclxuICAgICAgXy5lYWNoKHN5bm9ueW1ucywgKHN5bikgPT4ge1xyXG4gICAgICAgIHRoaXMuX2FkZCh3b3JkLCBzeW4pXHJcbiAgICAgIH0pICAgICAgXHJcbiAgICB9KVxyXG4gIH1cclxuICBfYWRkKHdvcmQsIHN5bikge1xyXG4gICAgc3luID0gc3luLnRvTG93ZXJDYXNlKClcclxuICAgIHdvcmQgPSB3b3JkLnRvTG93ZXJDYXNlKClcclxuICAgIHRoaXMucm9vdFdvcmRzW3N5bl0gPSB0aGlzLnJvb3RXb3Jkc1t3b3JkXSB8fCB3b3JkXHJcbiAgfVxyXG5cclxuICBnZXRSb290KHdvcmQpIHtcclxuICAgIHJldHVybiB0aGlzLnJvb3RXb3Jkc1t3b3JkXSB8fCB3b3JkXHJcbiAgfVxyXG59IiwibGV0IF9leHBvcnRzID0ge1xyXG4gIG1pblByZXZpb3VzVGhyZXNob2xkOiAwLjIsXHJcbiAgcHJldmlvdXNuR3JhbTogMSxcclxuICBtYXhfcHJlZGljdGlvbnM6NSxcclxuICBQUkVESUNUT1JfU09VUkNFX0lEOntcclxuICAgIEhJU1RPUllfUFJFRElDVE9SOjAsXHJcbiAgICBOR1JBTV9QUkVESUNUT1I6MSxcclxuICAgIEdFTkVSQUxfUFJFRElDVE9SOjIsXHJcbiAgICBDT1JSRUNUT1I6IDNcclxuICB9XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IF9leHBvcnRzOyIsImNvbnN0IElOREVYID0gcmVxdWlyZSgnLi9pbmRpY2VzJyk7XHJcbmNvbnN0IHJoID0gcmVxdWlyZShcIi4uLy4uLy4uLy4uL2xpYi9yaFwiKVxyXG5jb25zdCBfID0gcmguXztcclxuY29uc3QgUHJlZGljdGlvbiA9IHJlcXVpcmUoJy4vcHJlZGljdGlvbicpO1xyXG5jb25zdCBzZWFyY2hfY29uc3RzID0gcmVxdWlyZSgnLi9jb25zdHMnKTtcclxuY29uc3Qgc2VhcmNoX3V0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xyXG5jb25zdCBQcmVkaWN0aW9uTGlzdCA9IHJlcXVpcmUoJy4vcHJlZGljdGlvbl9saXN0Jyk7XHJcblxyXG5cclxuY2xhc3MgQ29ycmVjdG9ye1xyXG4gIGNvbnN0cnVjdG9yKCBsb2FkZXIsIGNhbGxiYWNrLCBtYXhfcHJlZGljdGlvbnMgPSAyMCl7XHJcbiAgICB0aGlzLl9sb2FkZXIgPSBsb2FkZXJcclxuICAgIHRoaXMucHJlZGljdGlvbnMgPSBbXTtcclxuICAgIHRoaXMubWF4X3ByZWRpY3Rpb25zID0gbWF4X3ByZWRpY3Rpb25zO1xyXG4gICAgdGhpcy5fY2FsbGJhY2sgPSBjYWxsYmFjaztcclxuICB9XHJcbiAgZ2V0Q29ycmVjdGlvbnMocGFyc2VkX2lucHV0KXtcclxuICAgIHRoaXMuX3BhcnNlZF9pbnB1dCA9IHBhcnNlZF9pbnB1dDtcclxuICAgIHRoaXMucHJlZGljdGlvbnMgPSBbXTtcclxuICAgIHRoaXMuX2NvbXB1dGVQcmVkaWN0aW9ucygpO1xyXG4gICAgbGV0IGhhc2hlcyA9IHRoaXMuX2xvYWRlci5nZXRIYXNoZXModGhpcy5fcGFyc2VkX2lucHV0Ll9wYXJ0aWFsKVxyXG4gICAgaWYoaGFzaGVzKXtcclxuICAgICAgbGV0IGhhc2hfY291bnQgPSBoYXNoZXMubGVuZ3RoO1xyXG4gICAgICBmb3IobGV0IGkgPSAwOyBpIDwgaGFzaF9jb3VudCAmJiB0aGlzLnByZWRpY3Rpb25zLmxlbmd0aCA8IHRoaXMubWF4X3ByZWRpY3Rpb25zOyBpKyspe1xyXG4gICAgICAgIGxldCBoYXNoID0gaGFzaGVzW2ldO1xyXG4gICAgICAgIHRoaXMuX2FkZENvcnJlY3Rpb24oaGFzaCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMub25SZXN1bHRDYWxjdWxhdGVkKCk7XHJcbiAgfVxyXG4gIGNsZWFyKCl7XHJcbiAgICB0aGlzLnByZWRpY3Rpb25zID0gW11cclxuICB9XHJcbiAgX2NvbXB1dGVQcmVkaWN0aW9ucygpe1xyXG5cclxuICAgIGxldCB3b3JkX2hhc2hlcyA9IHRoaXMuX2xvYWRlci5nZXRIYXNoZXModGhpcy5fcGFyc2VkX2lucHV0Ll9wYXJ0aWFsKTtcclxuICAgIGlmKHdvcmRfaGFzaGVzKXtcclxuICAgICAgdGhpcy5fYWRkQ29ycmVjdGlvbih3b3JkX2hhc2hlcyk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIG9uUmVzdWx0Q2FsY3VsYXRlZCgpe1xyXG4gICAgaWYodGhpcy5fY2FsbGJhY2spIHtcclxuICAgICAgdGhpcy5fY2FsbGJhY2sobmV3IFByZWRpY3Rpb25MaXN0KHRoaXMucHJlZGljdGlvbnMsIHRoaXMuX3BhcnNlZF9pbnB1dCksIHRoaXMuX2xvYWRlcik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfbWF0Y2hDb3JyZWN0aW9uKHdvcmQpe1xyXG4gICAgdGhpcy5faGFtbWluZ19kaXN0ID0gdGhpcy5fZ2V0RGlzdGFuY2Uod29yZCk7XHJcbiAgICBpZih0aGlzLl9oYW1taW5nX2Rpc3QgPD0gMiAmJiAhdGhpcy5fbG9hZGVyLmlzU3RvcFdvcmQod29yZCkpe1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG4gIF9hZGRDb3JyZWN0aW9uKHdvcmRfaGFzaCl7XHJcbiAgICBpZighd29yZF9oYXNoKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGxldCB3b3JkID0gc2VhcmNoX3V0aWxzLmdldFNhZmVFbGVtZW50KHdvcmRfaGFzaCwgSU5ERVguTUFQLldPUkQpO1xyXG4gICAgaWYoIXdvcmQpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKHRoaXMuX21hdGNoQ29ycmVjdGlvbih3b3JkKSl7XHJcbiAgICAgIGxldCBjb21wbGV0ZV93b3JkID0gdGhpcy5fcGFyc2VkX2lucHV0LnJlcGxhY2VMYXN0V29yZCh3b3JkKVxyXG4gICAgICBsZXQgdGVybSA9IHRoaXMuX3BhcnNlZF9pbnB1dC5jb21wbGV0ZVN1Z2dlc3Rpb24oY29tcGxldGVfd29yZClcclxuICAgICAgbGV0IHByZWRpY3Rpb24gPSBuZXcgUHJlZGljdGlvbih0ZXJtLCAxL3RoaXMuX2hhbW1pbmdfZGlzdCwgMiwgc2VhcmNoX2NvbnN0cy5QUkVESUNUT1JfU09VUkNFX0lELkNPUlJFQ1RPUiApO1xyXG4gICAgICB0aGlzLnByZWRpY3Rpb25zLnB1c2gocHJlZGljdGlvbik7XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9nZXREaXN0YW5jZSh3b3JkKXtcclxuICAgIHJldHVybiBfLmZpbmRFZGl0RGlzdCh0aGlzLl9wYXJzZWRfaW5wdXQuX3BhcnRpYWwsIHdvcmQpO1xyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBDb3JyZWN0b3I7XHJcbiIsImNvbnN0IFByZWRpY3Rpb25MaXN0ID0gcmVxdWlyZSgnLi9wcmVkaWN0aW9uX2xpc3QnKTtcclxuY29uc3QgUHJlZGljdG9uQ3JlYXRvciA9IHJlcXVpcmUoJy4vcHJlZGljdGlvbl9jcmVhdG9yJyk7XHJcbmNvbnN0IHNlYXJjaF9jb25zdHMgPSByZXF1aXJlKCcuL2NvbnN0cycpO1xyXG5jb25zdCBJTkRFWCA9IHJlcXVpcmUoJy4vaW5kaWNlcycpO1xyXG5jb25zdCByaCA9IHJlcXVpcmUoXCIuLi8uLi8uLi8uLi9saWIvcmhcIilcclxuY29uc3QgXyA9IHJoLl87XHJcbmNvbnN0IFByZWRpY3Rvbk1lcmdlciA9IHJlcXVpcmUoJy4uL2NvbW1vbi9tZXJnZXInKTtcclxuXHJcbmNsYXNzIEdlbmVyYWxQcmVkaWN0b3J7XHJcbiAgY29uc3RydWN0b3IoY2FsbGJhY2ssIGxvYWRlciwgbWF4X3ByZWRpY3Rpb25zID0gMjApe1xyXG4gICAgdGhpcy5fbWF4X3ByZWRpY3Rpb25zID0gbWF4X3ByZWRpY3Rpb25zO1xyXG4gICAgdGhpcy5fbG9hZGVyID0gbG9hZGVyO1xyXG4gICAgdGhpcy50b3RhbF9jb3VudCA9IHRoaXMuX2xvYWRlci5nZXRUb3RhbENvdW50KCk7XHJcbiAgICB0aGlzLl9jYWxsYmFjayA9IGNhbGxiYWNrO1xyXG4gICAgdGhpcy5fc291cmNlID0gc2VhcmNoX2NvbnN0cy5QUkVESUNUT1JfU09VUkNFX0lELkdFTkVSQUxfUFJFRElDVE9SO1xyXG4gICAgdGhpcy5wcmVkaWN0aW9uX21lcmdlciA9IG5ldyBQcmVkaWN0b25NZXJnZXIoW10sIHRoaXMudG90YWxfY291bnQqNSk7XHJcbiAgfVxyXG4gIGNsZWFyKCl7XHJcbiAgICB0aGlzLnByZWRpY3Rpb25fbWVyZ2VyLmNsZWFyKCk7XHJcbiAgICB0aGlzLnBhcnNlZF9pbnB1dCA9IHVuZGVmaW5lZFxyXG4gIH1cclxuICBnZXRQcmVkaWN0aW9ucyhwYXJzZWRfaW5wdXQpe1xyXG5cclxuICAgIHRoaXMuX2luaXQocGFyc2VkX2lucHV0KTtcclxuICAgIHRoaXMuX2NvbXB1dGVQcmVkaWN0aW9ucygpXHJcblxyXG4gICAgdGhpcy5fb25SZXN1bHRDb21wdXRlZCgpO1xyXG4gIH1cclxuICBfY29tcHV0ZVByZWRpY3Rpb25zKCl7XHJcblxyXG4gICAgbGV0IHdvcmRfaGFzaGVzID0gdGhpcy5fZ2V0V29yZEhhc2hlcygpO1xyXG4gICAgaWYod29yZF9oYXNoZXMpe1xyXG4gICAgICB0aGlzLl9hZGRQcmVkaWN0aW9ucyh3b3JkX2hhc2hlcyk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9pc1dob2xlV29yZElucHV0KCl7XHJcbiAgICByZXR1cm4gdGhpcy5wYXJzZWRfaW5wdXQuaXNXaG9sZVdvcmQ7XHJcbiAgfVxyXG4gIF9nZXRXb3JkSGFzaGVzKCl7XHJcbiAgICByZXR1cm4gKHRoaXMucGFyc2VkX2lucHV0LmlzV2hvbGVXb3JkKT9cclxuICAgICAgICAgICAgIHRoaXMuX2xvYWRlci50b3Bfd29yZHNcclxuICAgICAgICAgICAgIDp0aGlzLl9sb2FkZXIuZ2V0SGFzaGVzKHRoaXMucGFyc2VkX2lucHV0Ll9wYXJ0aWFsKVxyXG4gIH1cclxuICBfaW5pdChwYXJzZWRfaW5wdXQpe1xyXG4gICAgdGhpcy5wcmVkaWN0aW9uX21lcmdlciA9IG5ldyBQcmVkaWN0b25NZXJnZXIoW10sIHRoaXMudG90YWxfY291bnQqNSk7XHJcbiAgICB0aGlzLnBhcnNlZF9pbnB1dCA9IHBhcnNlZF9pbnB1dDtcclxuICB9XHJcbiAgZ2V0IHByZWRpY3Rpb25zICgpe1xyXG4gICAgcmV0dXJuIHRoaXMucHJlZGljdGlvbl9tZXJnZXIuaXRlbXNcclxuICB9XHJcbiAgX29uUmVzdWx0Q29tcHV0ZWQoKXtcclxuICAgIGlmKHRoaXMuX2NhbGxiYWNrKXtcclxuICAgICAgdGhpcy5fY2FsbGJhY2sgKG5ldyBQcmVkaWN0aW9uTGlzdCh0aGlzLnByZWRpY3Rpb25zLCB0aGlzLnBhcnNlZF9pbnB1dCksIHRoaXMuX2xvYWRlcik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXQgbWF4X3ByZWRpY3Rpb25zKG5ld1ZhbHVlKXtcclxuICAgIHRoaXMuX21heF9wcmVkaWN0aW9ucyA9IG5ld1ZhbHVlO1xyXG4gIH1cclxuICBnZXQgbWF4X3ByZWRpY3Rpb25zKCl7XHJcbiAgICByZXR1cm4gdGhpcy5fbWF4X3ByZWRpY3Rpb25zO1xyXG4gIH1cclxuICBfYWRkUHJlZGljdGlvbnMoaGFzaGVzKXtcclxuICAgIGlmKCFoYXNoZXMpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBoYXNoX2NvdW50ID0gaGFzaGVzLmxlbmd0aDtcclxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBoYXNoX2NvdW50ICYmIHRoaXMucHJlZGljdGlvbnMubGVuZ3RoIDwgdGhpcy5tYXhfcHJlZGljdGlvbnM7IGkrKyl7XHJcbiAgICAgIGxldCBoYXNoID0gaGFzaGVzW2ldO1xyXG4gICAgICB0aGlzLl9hZGRXb3JkUHJlZGljdGlvbihoYXNoKTtcclxuICAgIH1cclxuICB9XHJcbiAgX2FkZFdvcmRQcmVkaWN0aW9uKHdvcmRfaGFzaCwgbWF0Y2hGbil7XHJcbiAgICBtYXRjaEZuID0gbWF0Y2hGbiB8fCB0aGlzLl9tYXRjaGVzX3BhcnRpYWxseS5iaW5kKHRoaXMpO1xyXG4gICAgbGV0IG1vZGVsX2RhdGEgPSB0aGlzLl9sb2FkZXIuZ2V0TW9kZWxEYXRhKHdvcmRfaGFzaCk7XHJcbiAgICBsZXQgdG90YWxfY291bnQgPSB0aGlzLl9sb2FkZXIudG90YWxfY291bnQ7XHJcbiAgICBpZihtYXRjaEZuKHdvcmRfaGFzaCkpe1xyXG4gICAgICBsZXQgd29yZCA9IHdvcmRfaGFzaFtJTkRFWC5NQVAuV09SRF07XHJcbiAgICAgIGlmKHRoaXMuX3Nob3VsZF9hZGRfcHJlZGljdGlvbih3b3JkKSl7XHJcbiAgICAgICAgdGhpcy5fY3JlYXRlX3ByZWRpY3Rpb25zKHdvcmRfaGFzaCwgdG90YWxfY291bnQsIG1vZGVsX2RhdGEpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfY29udGludWVGbigpe1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG4gIF9zaG91bGRfYWRkX3ByZWRpY3Rpb24od29yZCl7XHJcbiAgICByZXR1cm4gIXRoaXMuX2xvYWRlci5pc1N0b3BXb3JkKHdvcmQpICYmICF0aGlzLnBhcnNlZF9pbnB1dC5lcXVhbExhc3RXb3JkKHdvcmQpXHJcbiAgfVxyXG4gIF9tYXRjaGVzX3BhcnRpYWxseSh3b3JkX2hhc2gpe1xyXG4gICAgaWYodGhpcy5wYXJzZWRfaW5wdXQuaXNXaG9sZVdvcmQpe1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgd29yZCA9IHdvcmRfaGFzaFtJTkRFWC5NQVAuV09SRF07XHJcbiAgICByZXR1cm4gdGhpcy5wYXJzZWRfaW5wdXQuY29tcGFyZVBhcnRpYWwod29yZCk7XHJcbiAgfVxyXG4gIF9jcmVhdGVfcHJlZGljdGlvbnMod29yZF9oYXNoLCBtb2RlbF9jb3VudCwgbW9kZWxfaXRlbSl7XHJcbiAgICBsZXQgY3JlYXRvciA9IG5ldyBQcmVkaWN0b25DcmVhdG9yKHtsb2FkZXI6IHRoaXMuX2xvYWRlciwgbW9kZWxfaXRlbSwgdG90YWxfY291bnQ6bW9kZWxfY291bnQsIHBhcnNlZF9pbnB1dDp0aGlzLnBhcnNlZF9pbnB1dCwgY29udGludWVGbjogdGhpcy5fY29udGludWVGbn0pO1xyXG4gICAgbGV0IHByZWRpY3Rpb25zID0gY3JlYXRvci5nZXRNdWx0aVByZWRpY3Rpb25zKHdvcmRfaGFzaCwgdHJ1ZSwgdW5kZWZpbmVkLCB0aGlzLl9zb3VyY2UpO1xyXG4gICAgXy5lYWNoKHByZWRpY3Rpb25zLCAocHJlZGljdGlvbikgPT4ge1xyXG4gICAgICBpZihwcmVkaWN0aW9uICE9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgIHRoaXMucHJlZGljdGlvbl9tZXJnZXIubWVyZ2VJdGVtKHByZWRpY3Rpb24pXHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2NhbGN1bGF0ZV9wcm9iYWJpbGl0eShjb3VudCl7XHJcbiAgICByZXR1cm4gKGNvdW50L3RoaXMudG90YWxfY291bnQpO1xyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBHZW5lcmFsUHJlZGljdG9yO1xyXG4iLCJsZXQgcmggPSByZXF1aXJlKFwiLi4vLi4vLi4vLi4vbGliL3JoXCIpXHJcbmxldCBfID0gcmguXztcclxubGV0IFByZWRpY3Rpb24gPSByZXF1aXJlKCcuL3ByZWRpY3Rpb24nKTtcclxubGV0IFBhcnNlciA9IHJlcXVpcmUoJy4vaW5wdXRfcGFyc2VyJyk7XHJcbmxldCBQcmVkaWN0aW9uTGlzdCA9IHJlcXVpcmUoJy4vcHJlZGljdGlvbl9saXN0Jyk7XHJcbmNvbnN0IHNlYXJjaF9jb25zdHMgPSByZXF1aXJlKCcuL2NvbnN0cycpO1xyXG5cclxuY2xhc3MgSGlzdG9yeVByZWRpY3RvcntcclxuICBjb25zdHJ1Y3RvcihyZWFkZXIsIGNhbGxiYWNrKXtcclxuICAgIHRoaXMuX3JlYWRlciA9IHJlYWRlcjtcclxuICAgIHRoaXMuX3ByZWRpY3Rpb25zID0gW107XHJcbiAgICB0aGlzLl9jYWxsYmFjayA9IGNhbGxiYWNrO1xyXG4gICAgdGhpcy5fc291cmNlID0gc2VhcmNoX2NvbnN0cy5QUkVESUNUT1JfU09VUkNFX0lELkhJU1RPUllfUFJFRElDVE9SO1xyXG4gICAgdGhpcy5fbWF4X3ByZWRpY3Rpb25zID0gKHNlYXJjaF9jb25zdHMuX21heF9oaXN0b3J5X3ByZWRpY3Rpb25zID09PSB1bmRlZmluZWQpPyAyOiBzZWFyY2hfY29uc3RzLl9tYXhfaGlzdG9yeV9wcmVkaWN0aW9ucztcclxuICB9XHJcbiAgZ2V0UHJlZGljdGlvbnMocGFyc2VkX2lucHV0KSB7XHJcbiAgICB0aGlzLl9wcmVkaWN0aW9ucyA9IFtdO1xyXG4gICAgdGhpcy5fcGFyc2VkX2lucHV0ID0gcGFyc2VkX2lucHV0O1xyXG4gICAgdGhpcy5fY29tcHV0ZVByZWRpY3Rpb25zKCk7XHJcbiAgICBpZih0aGlzLl9jYWxsYmFjayl7XHJcbiAgICAgIHRoaXMuX2NhbGxiYWNrKG5ldyBQcmVkaWN0aW9uTGlzdCh0aGlzLl9wcmVkaWN0aW9ucywgdGhpcy5fcGFyc2VkX2lucHV0KSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5fcHJlZGljdGlvbnM7XHJcbiAgfVxyXG4gIGluaXQoKXtcclxuICB9XHJcbiAgY2xlYXIoKXtcclxuICAgIHRoaXMuX3ByZWRpY3Rpb25zID0gW107XHJcbiAgfVxyXG4gIF9jb21wdXRlUHJlZGljdGlvbnMoKXtcclxuICAgIGlmKHRoaXMuX3BhcnNlZF9pbnB1dC50cmltbWVkVGV4dCAhPT0gXCJcIil7XHJcbiAgICAgIF8uZWFjaCh0aGlzLl9yZWFkZXIuX2xpc3QsIChpdGVtKT0+e1xyXG4gICAgICAgIGlmKHRoaXMuX21hdGNoKGl0ZW0udGV4dCkpe1xyXG4gICAgICAgICAgdGhpcy5fcHJlZGljdGlvbnMucHVzaCh0aGlzLl9jcmVhdGVQcmVkaWN0aW9uKGl0ZW0pKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLl9wdXJnZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuICBfcHVyZ2UoKXtcclxuICAgIHRoaXMuX3ByZWRpY3Rpb25zLnNwbGljZSh0aGlzLl9tYXhfcHJlZGljdGlvbnMpO1xyXG4gIH1cclxuICBfY3JlYXRlUHJlZGljdGlvbihpdGVtKXtcclxuICAgIGxldCBuZXdQcmVkaWN0aW9uID0gbmV3IFByZWRpY3Rpb24oaXRlbS50ZXh0LCAxLCBpdGVtLmNvdW50LCB0aGlzLl9zb3VyY2UpO1xyXG4gICAgcmV0dXJuIG5ld1ByZWRpY3Rpb247XHJcbiAgfVxyXG4gIF9tYXRjaCh0ZXh0KXtcclxuICAgIGlmKHRoaXMuX3BhcnNlZF9pbnB1dC5vcmlnaW5hbF90ZXh0Lmxlbmd0aCA+IHRleHQubGVuZ3RoKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfVxyXG4gICAgbGV0IHBhcnNlZF90ZXh0ID0gbmV3IFBhcnNlcih0ZXh0LCB0cnVlKTtcclxuICAgIHJldHVybiB0aGlzLl9wYXJzZWRfaW5wdXQuY29tcGFyZShwYXJzZWRfdGV4dCk7XHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEhpc3RvcnlQcmVkaWN0b3I7XHJcbiIsImxldCByaCA9IHJlcXVpcmUoXCIuLi8uLi8uLi8uLi9saWIvcmhcIilcclxubGV0IF8gPSByaC5fO1xyXG5jb25zdCBzZWFyY2hfdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XHJcblxyXG5jbGFzcyBIaXN0b3J5UmVhZGVye1xyXG4gIGNvbnN0cnVjdG9yKCl7XHJcbiAgfVxyXG5cclxuXHJcbiAgaW5pdEhpc3RvcnkobGlzdCl7XHJcbiAgICBpZih0aGlzLl9saXN0ID09PSB1bmRlZmluZWQpe1xyXG4gICAgICB0aGlzLl9saXN0ID0gbGlzdCB8fCBbXTtcclxuICAgIH1cclxuICB9XHJcbiAgZ2V0SGlzdG9yeSgpe1xyXG4gICAgcmV0dXJuIHRoaXMuX2xpc3QgfHwgW107XHJcbiAgfVxyXG5cclxuICBfdXBkYXRlVGV4dCh0ZXh0LCBpbmRleCl7XHJcbiAgICB0aGlzLmdldEhpc3RvcnkoKS5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgdGhpcy5nZXRIaXN0b3J5KCkudW5zaGlmdCh0ZXh0KTtcclxuICB9XHJcblxyXG4gIF9hZGROZXdUZXh0KG5ld1RleHQpe1xyXG4gICAgdGhpcy5nZXRIaXN0b3J5KCkucHVzaChuZXdUZXh0KTtcclxuICB9XHJcblxyXG4gIGFkZChuZXdUZXh0KXtcclxuICAgIGxldCBuSW5kZXggPSBfLmZpbmRJbmRleCh0aGlzLmdldEhpc3RvcnkoKSwgKGl0ZW0pID0+IHtyZXR1cm4gc2VhcmNoX3V0aWxzLmNvbXBhcmVOb0Nhc2UobmV3VGV4dC50ZXh0LCBpdGVtLnRleHQpID09PSAwO30pO1xyXG4gICAgaWYobkluZGV4ID49MCl7XHJcbiAgICAgIHRoaXMuX3VwZGF0ZVRleHQobmV3VGV4dCwgbkluZGV4KTtcclxuICAgIH1cclxuICAgIGVsc2V7XHJcbiAgICAgIHRoaXMuX2FkZE5ld1RleHQobmV3VGV4dCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGRlbGV0ZShzZWFyY2hUZXh0KXtcclxuICAgIGxldCBuSW5kZXggPSBfLmZpbmRJbmRleCh0aGlzLmdldEhpc3RvcnkoKSwgKGl0ZW0pID0+IHtyZXR1cm4gc2VhcmNoX3V0aWxzLmNvbXBhcmVOb0Nhc2Uoc2VhcmNoVGV4dCwgaXRlbS50ZXh0KSA9PT0gMDt9KTtcclxuICAgIGlmKG5JbmRleCA+PTApe1xyXG4gICAgICB0aGlzLmdldEhpc3RvcnkoKS5zcGxpY2UobkluZGV4KTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gbmV3IEhpc3RvcnlSZWFkZXIoKTtcclxuIiwibGV0IF9leHBvcnRzID0ge1xyXG4gIE1BUDp7XHJcbiAgICBXT1JEOjAsXHJcbiAgICBIQVNIOjEsXHJcbiAgICBDT1VOVDoyLFxyXG4gICAgTU9ERUxfRklMRV9OTzozLFxyXG4gICAgTU9ERUxfSU5ERVg6NCxcclxuICAgIFRPUElDUzo1XHJcbiAgfSxcclxuXHJcbiAgTU9ERUwgOntcclxuICAgIFdPUkRfSEFTSDowLFxyXG4gICAgQ09VTlQ6IDEsXHJcbiAgICBORVhUX01PREVMOiAyXHJcbiAgfSxcclxuXHJcbiAgRklSU1RfUFJFRElDVElPTjp7XHJcbiAgICBORVhUOjAsXHJcbiAgICBQUkVWSU9VUzoxXHJcbiAgfVxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBfZXhwb3J0czsiLCJjb25zdCBzZWFyY2hfdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XHJcbmNvbnN0IHJoID0gcmVxdWlyZShcIi4uLy4uLy4uLy4uLy4uL3NyYy9saWIvcmhcIilcclxuY29uc3QgXyA9IHJoLl87XHJcblxyXG5jbGFzcyBJbnB1dFBhcnNlcntcclxuICBjb25zdHJ1Y3Rvcih0ZXh0LCBpc1dob2xlV29yZCwgc2VsZWN0aW9uLCBpc1ByZXZpb3VzKXtcclxuICAgIHRoaXMuaXNQcmV2aW91cyA9IGlzUHJldmlvdXM7XHJcbiAgICB0aGlzLnNlbGVjdGlvbiA9IChzZWxlY3Rpb24gPT09IHVuZGVmaW5lZCkgPyB0ZXh0Lmxlbmd0aCA6IHNlbGVjdGlvblxyXG4gICAgbGV0IHNlcGFyYXRvciA9IHRoaXMuX2NhbGN1bGF0ZVNlcGFyYXRvcih0ZXh0KTtcclxuICAgIGlmKCF0aGlzLmlzUHJldmlvdXMpe1xyXG4gICAgICB0aGlzLmlzV2hvbGVXb3JkID0gaXNXaG9sZVdvcmQgfHwgdGhpcy5faXNXaG9sZVdvcmQodGV4dCwgc2VwYXJhdG9yKTtcclxuICAgIH1cclxuICAgIHRoaXMuaW5pdFRleHQodGV4dCwgc2VwYXJhdG9yKTtcclxuICB9XHJcblxyXG4gIGluaXRUZXh0KHRleHQsIHNlcGFyYXRvcil7XHJcbiAgICB0aGlzLl9jb21wdXRlVGV4dCh0ZXh0LCBzZXBhcmF0b3IpO1xyXG4gICAgdGhpcy50cmltbWVkVGV4dCA9IHRoaXMub3JpZ2luYWxfdGV4dC50cmltKCk7XHJcbiAgICB0aGlzLndvcmRzID0gXy5jb21wYWN0KHRoaXMudHJpbW1lZFRleHQuc3BsaXQoXCIgXCIpIHx8IFtdKTtcclxuICAgIHRoaXMuX3JldmVyc2VJZlByZXZpb3VzKCk7XHJcbiAgICBpZighdGhpcy5pc1dob2xlV29yZCAmJiB0aGlzLndvcmRzLmxlbmd0aCA+IDApe1xyXG4gICAgICB0aGlzLl9wYXJ0aWFsID0gKHRoaXMud29yZHMuc3BsaWNlKC0xKSlbMF07XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9jb21wdXRlVGV4dCh0ZXh0LCBzZXBhcmF0b3Ipe1xyXG4gICAgdGhpcy5fcmlnaHRfdGV4dCA9IFwiXCI7XHJcbiAgICB0aGlzLl9sZWZ0X3RleHQgPSBcIlwiO1xyXG5cclxuICAgIGlmKHNlcGFyYXRvciA9PT0gdW5kZWZpbmVkKXtcclxuICAgICAgc2VwYXJhdG9yID0gdGV4dC5sZW5ndGg7XHJcbiAgICB9XHJcbiAgICB0aGlzLmlzU3BsaXRUZXh0ID0gIShzZXBhcmF0b3IgPT09IDAgfHwgc2VwYXJhdG9yID09PSB0ZXh0Lmxlbmd0aClcclxuICAgIGxldCBsZWZ0X3RleHQgPSB0ZXh0LnN1YnN0cmluZygwLCBzZXBhcmF0b3IpO1xyXG4gICAgbGV0IHJpZ2h0X3RleHQgPSB0ZXh0LnN1YnN0cmluZyhzZXBhcmF0b3IpO1xyXG5cclxuICAgIGlmKHRoaXMuaXNQcmV2aW91cyl7XHJcbiAgICAgIHRoaXMub3JpZ2luYWxfdGV4dCA9IHJpZ2h0X3RleHQ7XHJcbiAgICAgIHRoaXMuX2xlZnRfdGV4dCA9IGxlZnRfdGV4dC50cmltKCk7XHJcbiAgICB9XHJcbiAgICBlbHNle1xyXG4gICAgICB0aGlzLm9yaWdpbmFsX3RleHQgPSBsZWZ0X3RleHQ7XHJcbiAgICAgIHRoaXMuX3JpZ2h0X3RleHQgPSByaWdodF90ZXh0LnRyaW0oKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGVxdWFsUmVtYWluZ1dvcmQod29yZCl7XHJcbiAgICBpZih0aGlzLl9sZWZ0X3RleHQgIT09IFwiXCIgfHwgdGhpcy5fcmlnaHRfdGV4dCAhPT1cIlwiKXtcclxuICAgICAgbGV0IHJlbWFpbmluZ1dvcmQgPSB0aGlzLl9nZXRSZW1haW5pZ1dvcmQoKTtcclxuICAgICAgaWYocmVtYWluaW5nV29yZCl7XHJcbiAgICAgICAgcmV0dXJuIHNlYXJjaF91dGlscy5jb21wYXJlTm9DYXNlKHJlbWFpbmluZ1dvcmQsIHdvcmQpID09PSAwO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2VcclxuICB9XHJcblxyXG5cclxuICBfZ2V0UmVtYWluaWdXb3JkKCl7XHJcbiAgICBsZXQgd29yZHMgPSAodGhpcy5pc1ByZXZpb3VzKT8gdGhpcy5fbGVmdF90ZXh0LnNwbGl0KFwiIFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuX3JpZ2h0X3RleHQuc3BsaXQoXCIgXCIpO1xyXG5cclxuICAgIHdvcmRzID0gd29yZHMgfHwgW11cclxuICAgIHdvcmRzID0gXy5jb21wYWN0KHdvcmRzKTtcclxuICAgIGlmKHdvcmRzLmxlbmd0aCA+IDApe1xyXG4gICAgICByZXR1cm4gKHRoaXMuaXNQcmV2aW91cyk/IHdvcmRzW3dvcmRzLmxlbmd0aCAtMV0gOiB3b3Jkc1swXTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbXBsZXRlU3VnZ2VzdGlvbih0ZXh0KXtcclxuICAgIGlmKHRoaXMuaXNQcmV2aW91cyl7XHJcbiAgICAgIHJldHVybiAodGhpcy5fbGVmdF90ZXh0Lmxlbmd0aCA9PT0gMCk/IHRleHQgOiB0aGlzLl9sZWZ0X3RleHQgKyBcIiBcIiArIHRleHQ7XHJcbiAgICB9XHJcbiAgICBlbHNle1xyXG4gICAgICByZXR1cm4gKHRoaXMuX3JpZ2h0X3RleHQubGVuZ3RoID09PSAwKT8gdGV4dCA6IHRleHQgKyBcIiBcIiArIHRoaXMuX3JpZ2h0X3RleHQ7XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9jYWxjdWxhdGVTZXBhcmF0b3IodGV4dCl7XHJcblxyXG4gICAgaWYodGhpcy5pc1ByZXZpb3VzKXtcclxuICAgICAgaWYodGhpcy5zZWxlY3Rpb24gPT09IDApe1xyXG4gICAgICAgIHRoaXMuaXNXaG9sZVdvcmQgPSB0cnVlO1xyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgICB9XHJcbiAgICAgIGlmKCh0ZXh0Lmxlbmd0aCA+IHRoaXMuc2VsZWN0aW9uKSAmJiB0ZXh0W3RoaXMuc2VsZWN0aW9uLTFdICE9PSBcIiBcIil7XHJcbiAgICAgICAgbGV0IHByZXZpb3VzU3BhY2VJbmRleCA9IHRleHQubGFzdEluZGV4T2YoXCIgXCIsIHRoaXMuc2VsZWN0aW9uLTEpO1xyXG4gICAgICAgIHRoaXMuaXNXaG9sZVdvcmQgPSBmYWxzZTtcclxuICAgICAgICByZXR1cm4gKHByZXZpb3VzU3BhY2VJbmRleCA+PSAwKSA/IHByZXZpb3VzU3BhY2VJbmRleCsxIDogMDtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmlzV2hvbGVXb3JkID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLnNlbGVjdGlvbjtcclxuICB9XHJcbiAgX3JldmVyc2VJZlByZXZpb3VzKCl7XHJcbiAgICBpZih0aGlzLmlzUHJldmlvdXMpe1xyXG4gICAgICB0aGlzLndvcmRzLnJldmVyc2UoKTtcclxuICAgIH1cclxuICB9XHJcbiAgX2lzV2hvbGVXb3JkKHRleHQsIHNlcGFyYXRvcil7XHJcbiAgICBpZih0aGlzLmlzUHJldmlvdXMpe1xyXG4gICAgICBpZiAoc2VwYXJhdG9yID09PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuICh0ZXh0Lmxlbmd0aCA+IHNlcGFyYXRvcikgJiYgdGV4dFtzZXBhcmF0b3ItMV0gPT09IFwiIFwiO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBzZXBhcmF0b3IgPiAwICYmIHRleHRbc2VwYXJhdG9yIC0xXSA9PT0gXCIgXCI7XHJcbiAgfVxyXG4gIGNvbXBhcmUob3RoZXJfaW5wdXQsIHN0YXJ0ID0gMCwgZW5kID0gdW5kZWZpbmVkKXtcclxuICAgIGVuZCA9IChlbmQgPT09IHVuZGVmaW5lZCkgPyAgdGhpcy53b3Jkcy5sZW5ndGggLTEgOiBlbmQ7XHJcbiAgICBpZih0aGlzLndvcmRzLmxlbmd0aCA+IG90aGVyX2lucHV0LndvcmRzLmxlbmd0aCl7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGxldCBpID0gc3RhcnQ7XHJcbiAgICBmb3IoOyBpIDw9IGVuZDsgaSsrKXtcclxuICAgICAgbGV0IHdvcmQxID0gdGhpcy53b3Jkc1tpXTtcclxuICAgICAgbGV0IHdvcmQyID0gb3RoZXJfaW5wdXQud29yZHNbaV07XHJcbiAgICAgIGlmKHNlYXJjaF91dGlscy5jb21wYXJlTm9DYXNlKHdvcmQxLCB3b3JkMikgIT09IDApIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLm1hdGNoUGFydGlhbChvdGhlcl9pbnB1dCwgaSk7XHJcbiAgfVxyXG4gIG1hdGNoUGFydGlhbChvdGhlcl9pbnB1dCwgaW5kZXgpe1xyXG4gICAgaWYodGhpcy5fcGFydGlhbCA9PT0gdW5kZWZpbmVkKXtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICBpZihvdGhlcl9pbnB1dC53b3Jkcy5sZW5ndGggPD0gaW5kZXgpe1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBsZXQgb3RoZXJfd29yZCA9IG90aGVyX2lucHV0LndvcmRzW2luZGV4XTtcclxuICAgIHJldHVybiB0aGlzLmNvbXBhcmVQYXJ0aWFsKG90aGVyX3dvcmQpO1xyXG4gIH1cclxuICBjb21wYXJlUGFydGlhbCh3b3JkKXtcclxuICAgIHRoaXMuX21hdGNoRXhwID0gbmV3IFJlZ0V4cCgnXicgKyB0aGlzLl9wYXJ0aWFsLCAnaScpO1xyXG4gICAgcmV0dXJuIHRoaXMuX21hdGNoRXhwLnRlc3Qod29yZCk7XHJcbiAgfVxyXG4gIGNvbXBsZXRlV29yZChuZXh0X3dvcmQpe1xyXG4gICAgaWYodGhpcy5pc1dob2xlV29yZCB8fCB0aGlzLl9wYXJ0aWFsID09PSB1bmRlZmluZWQgfHwgdGhpcy5fcGFydGlhbC5sZW5ndGggPT09IDApe1xyXG4gICAgICByZXR1cm4gdGhpcy5nZXRUZXJtRm9yQ29tcGxldGVXb3JkKG5leHRfd29yZCwgdGhpcy50cmltbWVkVGV4dCk7XHJcbiAgICB9XHJcbiAgICBlbHNle1xyXG4gICAgICByZXR1cm4gdGhpcy5nZXRUZXJtRm9yUGFydGlhbFRleHQobmV4dF93b3JkKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldFRlcm1Gb3JQYXJ0aWFsVGV4dChuZXh0X3dvcmQpe1xyXG4gICAgbGV0IHBhcnRpYWxfbmV4dF93b3JkID0gbmV4dF93b3JkLnN1YnN0cmluZyh0aGlzLl9wYXJ0aWFsLmxlbmd0aCwgbmV4dF93b3JkLmxlbmd0aCk7XHJcbiAgICBpZih0aGlzLmlzUHJldmlvdXMpe1xyXG4gICAgICBsZXQgdHJpbW1lZFRleHQgPSBcIlwiO1xyXG4gICAgICBsZXQgZmlyc3RTcGFjZUluZGV4ID0gdGhpcy50cmltbWVkVGV4dC5pbmRleE9mKCcgJyk7XHJcbiAgICAgIGlmKGZpcnN0U3BhY2VJbmRleCA+PSAwKXtcclxuICAgICAgICB0cmltbWVkVGV4dCA9IHRoaXMudHJpbW1lZFRleHQuc3Vic3RyaW5nKGZpcnN0U3BhY2VJbmRleCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRoaXMuX3BhcnRpYWwgKyBwYXJ0aWFsX25leHRfd29yZCArIHRyaW1tZWRUZXh0O1xyXG4gICAgfVxyXG4gICAgZWxzZXtcclxuICAgICAgcmV0dXJuIHRoaXMudHJpbW1lZFRleHQgKyBwYXJ0aWFsX25leHRfd29yZDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldFRlcm1Gb3JDb21wbGV0ZVdvcmQobmV4dF93b3JkKXtcclxuICAgIGlmKHRoaXMuaXNQcmV2aW91cyl7XHJcbiAgICAgIHJldHVybiBuZXh0X3dvcmQgKyBcIiBcIiArIHRoaXMudHJpbW1lZFRleHQ7XHJcbiAgICB9XHJcbiAgICBlbHNle1xyXG4gICAgICByZXR1cm4gdGhpcy50cmltbWVkVGV4dCArIFwiIFwiICsgbmV4dF93b3JkO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVwbGFjZUxhc3RXb3JkKG5leHRfd29yZCl7XHJcbiAgICBsZXQgdGV4dCA9IHRoaXMudHJpbW1lZFRleHQ7XHJcbiAgICBpZih0aGlzLl9wYXJ0aWFsICE9PSB1bmRlZmluZWQgJiYgIXRoaXMuaXNXaG9sZVdvcmQpe1xyXG4gICAgICBsZXQgaW5kZXggPSB0aGlzLnRyaW1tZWRUZXh0Lmxlbmd0aCAtIHRoaXMuX3BhcnRpYWwubGVuZ3RoO1xyXG4gICAgICB0ZXh0ID0gdGhpcy50cmltbWVkVGV4dC5zdWJzdHJpbmcoMCwgaW5kZXgpO1xyXG4gICAgICB0ZXh0ID0gdGV4dC50cmltKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGV4dCArIFwiIFwiICsgbmV4dF93b3JkO1xyXG4gIH1cclxuICBlcXVhbExhc3RXb3JkKHdvcmQpe1xyXG4gICAgaWYodGhpcy53b3Jkcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgbGV0IGxhc3Rfd29yZCA9IHRoaXMud29yZHNbdGhpcy53b3Jkcy5sZW5ndGggLTFdO1xyXG4gICAgcmV0dXJuIHNlYXJjaF91dGlscy5jb21wYXJlTm9DYXNlKGxhc3Rfd29yZCwgd29yZCkgPT09IDA7XHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IElucHV0UGFyc2VyO1xyXG4iLCJjb25zdCByaCA9IHJlcXVpcmUoXCIuLi8uLi8uLi8uLi9saWIvcmhcIilcclxuY29uc3QgXyA9IHJoLl87XHJcbmNvbnN0IG1vZGVsID0gcmgubW9kZWw7XHJcbmNvbnN0IHNlYXJjaF91dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxuY29uc3QgSU5ERVggPSByZXF1aXJlKCcuL2luZGljZXMnKTtcclxuY29uc3QgU0VBUkNIX0NPTlNUUyA9IHJlcXVpcmUoJy4vY29uc3RzJyk7XHJcbmNvbnN0IFBhdGhzID0gcmVxdWlyZSgnLi4vY29tbW9uL3BhdGhzJylcclxuXHJcblxyXG5jbGFzcyBMb2FkZXIge1xyXG4gIGNvbnN0cnVjdG9yKHBhdGggPSBcIlwiKXtcclxuICAgIHRoaXMuX3BhdGhzID0gbmV3IFBhdGhzKHBhdGgpXHJcbiAgfVxyXG5cclxuICBpbml0KGNhbGxiYWNrRm4pe1xyXG4gICAgdGhpcy5sb2FkSW5kZXgoY2FsbGJhY2tGbik7XHJcbiAgICB0aGlzLmxvYWRNYXAoY2FsbGJhY2tGbik7XHJcbiAgfVxyXG5cclxuICBfaXNJbmRleExvYWRlZCgpe1xyXG4gICAgcmV0dXJuIHRoaXMuaW5kZXhfZGF0YSAhPT0gdW5kZWZpbmVkO1xyXG4gIH1cclxuXHJcbiAgZ2V0TW9kZWxDb3VudCgpe1xyXG4gICAgcmV0dXJuIHRoaXMuaW5kZXhfZGF0YS5Nb2RlbC5sZW5ndGg7XHJcbiAgfVxyXG4gIGdldE1hcEhhc2goaGFzaF9rZXkpe1xyXG4gICAgcmV0dXJuIHRoaXMuX2hhc2hfdG9fd29yZFtoYXNoX2tleV07XHJcbiAgfVxyXG4gIGdldEhhc2hlcyhpbnB1dCl7XHJcbiAgICBpZihpbnB1dCAhPT0gdW5kZWZpbmVkICYmIGlucHV0Lmxlbmd0aCA+IDApe1xyXG4gICAgICByZXR1cm4gdGhpcy5nZXRBcGxoYWJldEhhc2hlcyhpbnB1dFswXSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGdldEFwbGhhYmV0SGFzaGVzKGFscGhhYmV0KXtcclxuICAgIGlmKHRoaXMubWFwX2RhdGEgJiYgYWxwaGFiZXQubGVuZ3RoID09PSAxKXtcclxuICAgICAgbGV0IGxhbHBoYWJldCA9IGFscGhhYmV0LnRvTG93ZXJDYXNlKClcclxuICAgICAgcmV0dXJuIHRoaXMubWFwX2RhdGFbbGFscGhhYmV0XTtcclxuICAgIH1cclxuICB9XHJcbiAgZ2V0V29yZE1vZGVsKHdvcmQsIG1vZGVsX2RhdGEpe1xyXG4gICAgbGV0IHdvcmRfbW9kZWw7XHJcbiAgICBsZXQgd29yZF9oYXNoID0gdGhpcy5fZ2V0SGFzaEZvcldvcmQod29yZCk7XHJcbiAgICBpZih3b3JkX2hhc2ggJiYgbW9kZWxfZGF0YSl7XHJcbiAgICAgIHdvcmRfbW9kZWwgPSBtb2RlbF9kYXRhW3dvcmRfaGFzaFtJTkRFWC5NQVAuTU9ERUxfSU5ERVhdXTtcclxuICAgIH1cclxuICAgIHJldHVybiB3b3JkX21vZGVsO1xyXG4gIH1cclxuXHJcbiAgZ2V0Q291bnQod29yZCl7XHJcbiAgICBsZXQgd29yZF9oYXNoID0gdGhpcy5fZ2V0SGFzaEZvcldvcmQod29yZCk7XHJcbiAgICBpZih3b3JkX2hhc2gpe1xyXG4gICAgICByZXR1cm4gd29yZF9oYXNoW0lOREVYLk1BUC5DT1VOVF07XHJcbiAgICB9XHJcbiAgfVxyXG4gIGdldE1vZGVsRGF0YSh3b3JkX2hhc2gpeyAvLyBhc3luYyBjYWxsIGlmIG5vdCBsb2FkZWQgcmV0dXJuIGVtcHR5IGFycmF5XHJcbiAgICBsZXQgZmlsZW5vID0gd29yZF9oYXNoW0lOREVYLk1BUC5NT0RFTF9GSUxFX05PXTtcclxuICAgIGxldCBtb2RlbF9pbmRleCA9IHdvcmRfaGFzaFtJTkRFWC5NQVAuTU9ERUxfSU5ERVhdO1xyXG4gICAgbGV0IGRhdGEgPSBtb2RlbC5nZXQodGhpcy5fcGF0aHMuZ2V0TW9kZWxLZXkoZmlsZW5vKSk7XHJcbiAgICBpZighZGF0YSl7XHJcbiAgICAgIHRoaXMubG9hZE1vZGVsKGZpbGVubyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGF0YSAmJiBkYXRhW21vZGVsX2luZGV4XSA7XHJcbiAgfVxyXG4gIF9jb21wYXJlV29yZENvdW50KGhhc2hfaXRlbTEsIGhhc2hfaXRlbTIpe1xyXG4gICAgbGV0IGNvdW50MSA9IHNlYXJjaF91dGlscy5nZXRTYWZlRWxlbWVudChoYXNoX2l0ZW0xLCBJTkRFWC5NQVAuQ09VTlQpO1xyXG4gICAgbGV0IGNvdW50MiA9IHNlYXJjaF91dGlscy5nZXRTYWZlRWxlbWVudChoYXNoX2l0ZW0yLCBJTkRFWC5NQVAuQ09VTlQpO1xyXG4gICAgaWYoY291bnQxICYmIGNvdW50Mikge1xyXG4gICAgICByZXR1cm4gY291bnQyIC0gY291bnQxO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIDA7XHJcbiAgfVxyXG4gIF9idWlsZFRvcFdvcmRzKHdvcmRzKXtcclxuICAgIHdvcmRzLnNvcnQodGhpcy5fY29tcGFyZVdvcmRDb3VudCk7XHJcbiAgICB3b3Jkcy5zcGxpY2UoU0VBUkNIX0NPTlNUUy5tYXhfcHJlZGljdGlvbnMgKjEwMClcclxuICAgIHRoaXMuX3RvcF93b3JkcyA9IHdvcmRzO1xyXG4gIH1cclxuICBnZXQgdG9wX3dvcmRzKCl7XHJcbiAgICByZXR1cm4gdGhpcy5fdG9wX3dvcmRzO1xyXG4gIH1cclxuICBnZXRNb2RlbEZpbGVObyh3b3JkKXtcclxuICAgIGxldCB3b3JkX2hhc2ggPSB0aGlzLl9nZXRIYXNoRm9yV29yZCh3b3JkKTtcclxuICAgIGlmKHdvcmRfaGFzaCl7XHJcbiAgICAgIHJldHVybiB3b3JkX2hhc2hbSU5ERVguTUFQLk1PREVMX0ZJTEVfTk9dO1xyXG4gICAgfVxyXG4gIH1cclxuICBfZ2V0SGFzaEZvcldvcmQod29yZCl7XHJcbiAgICBsZXQgaGFzaDtcclxuICAgIGxldCB3b3JkX2tleSA9IHRoaXMuZ2V0SGFzaEtleSh3b3JkKTtcclxuICAgIGlmKHdvcmRfa2V5KXtcclxuICAgICAgaGFzaCA9IHRoaXMuX2hhc2hfdG9fd29yZFt3b3JkX2tleV07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaGFzaDtcclxuICB9XHJcbiAgZ2V0SGFzaEtleSh3b3JkKXtcclxuICAgIGlmKHdvcmQgJiYgd29yZC5sZW5ndGggPiAwKXtcclxuICAgICAgbGV0IGxXb3JkID0gd29yZC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICByZXR1cm4gdGhpcy5fd29yZF9oYXNoW2xXb3JkXTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGxvYWRJbmRleChjYWxsYmFja0ZuKSB7XHJcbiAgICBpZih0aGlzLl9pc0luZGV4TG9hZGVkKCkgPT09IGZhbHNlKXtcclxuICAgICAgXy5sb2FkU2NyaXB0KHRoaXMuX3BhdGhzLmdldEluZGV4RmlsZVBhdGgoKSwgdHJ1ZSwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuaW5kZXhfZGF0YSA9IF8uZXhwb3J0cygpO1xyXG4gICAgICAgIHRoaXMub25JbmRleExvYWRlZChjYWxsYmFja0ZuKTtcclxuICAgICAgfSwgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgICBlbHNle1xyXG4gICAgICB0aGlzLm9uSW5kZXhMb2FkZWQoY2FsbGJhY2tGbik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXQgbkdyYW0oKXtcclxuICAgIHJldHVybiB0aGlzLmluZGV4X2RhdGEubkdyYW07XHJcbiAgfVxyXG4gIGdldCBzZWFyY2hfbW9kZWwgKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuaW5kZXhfZGF0YS5Nb2RlbDtcclxuICB9XHJcbiAgZ2V0IHNlYXJjaF9tYXAoKXtcclxuICAgIHJldHVybiB0aGlzLmluZGV4X2RhdGEuTWFwO1xyXG4gIH1cclxuICBnZXQgdG90YWxfY291bnQoKXtcclxuICAgIHJldHVybiB0aGlzLmluZGV4X2RhdGEudG90YWxDb3VudDtcclxuICB9XHJcbiAgZ2V0IHN0b3Bfd29yZHMoKXtcclxuICAgIHJldHVybiB0aGlzLmluZGV4X2RhdGEuc3RvcFdvcmRzO1xyXG4gIH1cclxuXHJcbiAgbG9hZE1vZGVsKGZpbGVObywgY2FsbGJhY2tGbikge1xyXG4gICAgbGV0IGRhdGEgPSBbXTtcclxuICAgIGlmKGZpbGVObyE9PSB1bmRlZmluZWQpe1xyXG4gICAgICBsZXQga2V5ID0gdGhpcy5fcGF0aHMuZ2V0TW9kZWxLZXkoZmlsZU5vKVxyXG4gICAgICBsZXQgZGF0YSA9IG1vZGVsLmdldChrZXkpXHJcbiAgICAgIGlmKGRhdGEgPT09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgbW9kZWwucHVibGlzaChrZXksIG51bGwpXHJcblxyXG4gICAgICAgIGxldCBmaWxlcGF0aCA9IHRoaXMuX3BhdGhzLmdldE1vZGVsRmlsZVBhdGgoZmlsZU5vKVxyXG4gICAgICAgIF8ubG9hZFNjcmlwdChmaWxlcGF0aCwgdHJ1ZSwgdGhpcy5nZXRPbk1vZGVsTG9hZEZuKGZpbGVObywgY2FsbGJhY2tGbiksIHRydWUpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYoZGF0YSA9PT0gbnVsbCAmJiBjYWxsYmFja0ZuICE9PSB1bmRlZmluZWQpe1xyXG5cclxuICAgICAgICBtb2RlbC5zdWJzY3JpYmUoa2V5LCBjYWxsYmFja0ZuKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNle1xyXG4gICAgICAgIHRoaXMuZG9DYWxsYmFjayhjYWxsYmFja0ZuLCBkYXRhLCBmaWxlTm8pXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2V7XHJcbiAgICAgIHRoaXMuZG9DYWxsYmFjayhjYWxsYmFja0ZuLCBkYXRhLCBmaWxlTm8pXHJcbiAgICB9XHJcbiAgfVxyXG4gIGRvQ2FsbGJhY2soY2FsbGJhY2tGbiwgZGF0YSwgZmlsZW5vKXtcclxuICAgIGlmKGNhbGxiYWNrRm4pIHtcclxuICAgICAgY2FsbGJhY2tGbihkYXRhLCBmaWxlbm8pXHJcbiAgICB9XHJcbiAgfVxyXG4gIGdldE9uTW9kZWxMb2FkRm4oZmlsZU5vLCBjYWxsYmFja0ZuKXtcclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIGxldCBkYXRhID0gXy5leHBvcnRzKCk7XHJcbiAgICAgIG1vZGVsLnB1Ymxpc2godGhpcy5fcGF0aHMuZ2V0TW9kZWxLZXkoZmlsZU5vKSwgZGF0YSk7XHJcbiAgICAgIGlmKGNhbGxiYWNrRm4pe1xyXG4gICAgICAgIGNhbGxiYWNrRm4oZGF0YSwgZmlsZU5vKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICBvbk1hcExvYWRlZChjYWxsYmFja0ZuKXtcclxuICAgIHRoaXMucGFyc2VNYXAoKTtcclxuICAgIGlmKHRoaXMuaW5kZXhfZGF0YSAmJiBjYWxsYmFja0ZuKXtcclxuICAgICAgY2FsbGJhY2tGbih0aGlzKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uSW5kZXhMb2FkZWQoY2FsbGJhY2tGbil7XHJcbiAgICBpZih0aGlzLm1hcF9kYXRhICYmIGNhbGxiYWNrRm4pe1xyXG4gICAgICBjYWxsYmFja0ZuKHRoaXMpO1xyXG4gICAgfVxyXG4gIH1cclxuICBwYXJzZU1hcCgpe1xyXG4gICAgbGV0IGRhdGEgPSB0aGlzLm1hcF9kYXRhO1xyXG4gICAgdGhpcy5fd29yZF9oYXNoID0ge307XHJcbiAgICB0aGlzLl9oYXNoX3RvX3dvcmQgPXt9O1xyXG4gICAgbGV0IHdvcmRzID0gW107XHJcbiAgICBmb3IgKGNvbnN0IGxldHRlciBpbiBkYXRhKXtcclxuICAgICAgbGV0IHdvcmRzX2RhdGEgPSBkYXRhW2xldHRlcl07XHJcbiAgICAgIHRoaXMuX3BhcnNlV29yZHNEYXRhKHdvcmRzX2RhdGEpXHJcbiAgICAgIHdvcmRzID0gd29yZHMuY29uY2F0KHdvcmRzX2RhdGEpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fYnVpbGRUb3BXb3Jkcyh3b3Jkcyk7XHJcbiAgfVxyXG4gIF9wYXJzZVdvcmRzRGF0YSh3b3Jkc19kYXRhKXtcclxuICAgIF8uZWFjaCh3b3Jkc19kYXRhLCAod29yZF9kYXRhKSA9PntcclxuICAgICAgbGV0IGhhc2hfa2V5ID0gcGFyc2VJbnQod29yZF9kYXRhW0lOREVYLk1BUC5IQVNIXSk7XHJcbiAgICAgIGlmKHdvcmRfZGF0YVtJTkRFWC5NQVAuV09SRF0pIHtcclxuICAgICAgICBsZXQgd29yZCA9IHdvcmRfZGF0YVtJTkRFWC5NQVAuV09SRF0udG9TdHJpbmcoKTtcclxuICAgICAgICB0aGlzLl93b3JkX2hhc2hbd29yZF0gPSBoYXNoX2tleTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLl9oYXNoX3RvX3dvcmRbaGFzaF9rZXldID0gd29yZF9kYXRhO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGlzU3RvcFdvcmQod29yZCl7XHJcbiAgICBsZXQgaW5kZXggPSBfLmZpbmQodGhpcy5pbmRleF9kYXRhLnN0b3BXb3JkcywgKHN0b3Bfd29yZCkgPT57XHJcbiAgICAgIHJldHVybiBzZWFyY2hfdXRpbHMuY29tcGFyZU5vQ2FzZSh3b3JkLCBzdG9wX3dvcmQpID09PSAwXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBpbmRleCAhPT0gdW5kZWZpbmVkO1xyXG4gIH1cclxuXHJcbiAgZ2V0VG90YWxDb3VudCgpe1xyXG4gICAgcmV0dXJuIHRoaXMuaW5kZXhfZGF0YS50b3RhbENvdW50O1xyXG4gIH1cclxuICB3b3JkSGFzaGZyb21JbmRleEtleShpbmRleF9rZXksIGZpbGVubyl7XHJcbiAgICByZXR1cm4gXy5maW5kKHRoaXMuX2hhc2hfdG9fd29yZCwgKG1hcF9pdGVtKSA9PntcclxuICAgICAgcmV0dXJuIG1hcF9pdGVtW0lOREVYLk1BUC5NT0RFTF9JTkRFWF0gPT09IGluZGV4X2tleSAmJiBtYXBfaXRlbVtJTkRFWC5NQVAuTU9ERUxfRklMRV9OT10gPT09IGZpbGVubztcclxuICAgIH0pO1xyXG4gIH1cclxuICBsb2FkTWFwKGNhbGxiYWNrRm4pe1xyXG4gICAgaWYodGhpcy5tYXBfZGF0YSA9PT0gdW5kZWZpbmVkKXtcclxuICAgICAgXy5sb2FkU2NyaXB0KHRoaXMuX3BhdGhzLmdldE1hcEZpbGVQYXRoKCksIHRydWUsICgpID0+IHtcclxuICAgICAgICB0aGlzLm1hcF9kYXRhID0gXy5leHBvcnRzKCk7XHJcbiAgICAgICAgdGhpcy5vbk1hcExvYWRlZChjYWxsYmFja0ZuKTtcclxuICAgICAgfSwgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgICBlbHNle1xyXG4gICAgICB0aGlzLm9uTWFwTG9hZGVkKGNhbGxiYWNrRm4pO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBMb2FkZXI7XHJcbiIsImxldCByaCA9IHJlcXVpcmUoXCIuLi8uLi8uLi8uLi9saWIvcmhcIilcclxubGV0IF8gPSByaC5fO1xyXG5sZXQgUHJlZGljdG9uQ3JlYXRvciA9IHJlcXVpcmUoJy4vcHJlZGljdGlvbl9jcmVhdG9yJyk7XHJcbi8vbGV0IHNlYXJjaF91dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxuLy9sZXQgUHJlZGljdGlvbiA9IHJlcXVpcmUoJy4vcHJlZGljdGlvbicpO1xyXG5sZXQgUHJlZGljdGlvbkxpc3QgPSByZXF1aXJlKCcuL3ByZWRpY3Rpb25fbGlzdCcpO1xyXG5jb25zdCBzZWFyY2hfY29uc3RzID0gcmVxdWlyZSgnLi9jb25zdHMnKTtcclxuY29uc3QgSU5ERVggPSByZXF1aXJlKCcuL2luZGljZXMnKTtcclxuXHJcbmNsYXNzIE5HcmFtUHJlZGljdG9ye1xyXG4gIGNvbnN0cnVjdG9yKHtsb2FkZXIsIGxldmVsLCBjYWxsYmFjaywgcHJldmlvdXMsIG1heF9wcmVkaWN0aW9ucyA9IDIwfSl7XHJcbiAgICB0aGlzLmxldmVsID0gbGV2ZWw7XHJcbiAgICB0aGlzLnByZXZpb3VzID0gIHByZXZpb3VzO1xyXG4gICAgdGhpcy5fbWF4X3ByZWRpY3Rpb25zID0gbWF4X3ByZWRpY3Rpb25zO1xyXG4gICAgdGhpcy5wcmVkaWN0aW9ucyA9IFtdO1xyXG4gICAgdGhpcy5fY2FsbGJhY2sgPSBjYWxsYmFjaztcclxuICAgIHRoaXMuX2xvYWRlciA9IGxvYWRlclxyXG4gICAgdGhpcy5fc291cmNlID0gc2VhcmNoX2NvbnN0cy5QUkVESUNUT1JfU09VUkNFX0lELk5HUkFNX1BSRURJQ1RPUjtcclxuICB9XHJcblxyXG4gIGluaXQoKXtcclxuXHJcbiAgfVxyXG4gIGNsZWFyKCl7XHJcbiAgICB0aGlzLl93b3JkX21vZGVsID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5fcHJlZGljdGlvbl9hcnJheSA9IHVuZGVmaW5lZDtcclxuICAgIHRoaXMucGFyc2VkX2lucHV0ID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5wcmVkaWN0aW9ucyA9IFtdO1xyXG4gIH1cclxuXHJcbiAgZ2V0UHJlZGljdGlvbnMocGFyc2VkX2lucHV0KSB7XHJcbiAgICB0aGlzLnBhcnNlZF9pbnB1dCA9IHBhcnNlZF9pbnB1dFxyXG4gICAgdGhpcy5wcmVkaWN0aW9ucyA9IFtdO1xyXG4gICAgaWYocGFyc2VkX2lucHV0ICE9PSB1bmRlZmluZWQgJiYgKHBhcnNlZF9pbnB1dC53b3Jkcy5sZW5ndGggPj0gdGhpcy5sZXZlbCkpe1xyXG4gICAgICB0aGlzLndvcmRfaW5kZXggPSBwYXJzZWRfaW5wdXQud29yZHMubGVuZ3RoIC0gdGhpcy5sZXZlbDtcclxuICAgICAgdGhpcy5fd29yZCA9IHBhcnNlZF9pbnB1dC53b3Jkc1t0aGlzLndvcmRfaW5kZXhdO1xyXG4gICAgICB0aGlzLl9sb2FkSW5wdXRNb2RlbCh0aGlzLl93b3JkLCB0aGlzLl9jb21wdXRlX3dvcmRfcHJlZGljdGlvbnMuYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcbiAgICBlbHNle1xyXG4gICAgICB0aGlzLl9vblJlc3VsdHNDb21wdXRlZCgpO1xyXG4gICAgfVxyXG4gIH1cclxuICBzZXQgbWF4X3ByZWRpY3Rpb25zKG5ld1ZhbHVlKXtcclxuICAgIHRoaXMubWF4X3ByZWRpY3Rpb25zID0gbmV3VmFsdWU7XHJcbiAgfVxyXG4gIGdldCBtYXhfcHJlZGljdGlvbnMoKXtcclxuICAgIHJldHVybiB0aGlzLl9tYXhfcHJlZGljdGlvbnM7XHJcbiAgfVxyXG5cclxuICBfY29tcHV0ZV93b3JkX3ByZWRpY3Rpb25zKG1vZGVsX2RhdGEpe1xyXG4gICAgdGhpcy5wcmVkaWN0aW9ucyA9IFtdO1xyXG4gICAgbGV0IGxldmVsID0gdGhpcy5sZXZlbDtcclxuICAgIGxldCB3b3JkID0gdGhpcy5fd29yZDtcclxuICAgIGxldCB0b3RhbF9jb3VudCA9IHRoaXMuX2xvYWRlci5nZXRDb3VudCh3b3JkKTtcclxuICAgIHRoaXMuX3dvcmRfbW9kZWwgPSB0aGlzLl9sb2FkZXIuZ2V0V29yZE1vZGVsKHdvcmQsIG1vZGVsX2RhdGEpO1xyXG4gICAgaWYodGhpcy5fd29yZF9tb2RlbCl7XHJcbiAgICAgIHRoaXMuX3ByZWRpY3Rpb25fYXJyYXkgPSB0aGlzLl9nZXRfcHJlZGljdGlvbl9hcnJheSgpO1xyXG4gICAgICB0aGlzLl9jb21wdXRlX3ByZWRpY3Rpb25fZnJvbV9tb2RlbCh3b3JkLCBsZXZlbCwgdG90YWxfY291bnQpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fb25SZXN1bHRzQ29tcHV0ZWQoKTtcclxuICB9XHJcbiAgX29uUmVzdWx0c0NvbXB1dGVkKCl7XHJcbiAgICBpZih0aGlzLl9jYWxsYmFjayl7XHJcbiAgICAgIHRoaXMuX2NhbGxiYWNrKG5ldyBQcmVkaWN0aW9uTGlzdCh0aGlzLnByZWRpY3Rpb25zLCB0aGlzLnBhcnNlZF9pbnB1dCksIHRoaXMuX2xvYWRlcik7XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9jb21wdXRlX3ByZWRpY3Rpb25fZnJvbV9tb2RlbCh3b3JkLCBsZXZlbCwgdG90YWxfY291bnQpe1xyXG4gICAgaWYodGhpcy5fcHJlZGljdGlvbl9hcnJheSA9PT0gdW5kZWZpbmVkKXtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKHRoaXMuX2lzX215X2xldmVsKGxldmVsKSkge1xyXG4gICAgICB0aGlzLl9jb21wdXRlX25leHRfd29yZHModG90YWxfY291bnQpO1xyXG4gICAgfVxyXG4gICAgZWxzZXtcclxuICAgICAgbGV2ZWwtLTtcclxuICAgICAgbGV0IG5leHRfaW5kZXggPSB0aGlzLl9nZXRfd29yZF9pbmRleChsZXZlbCk7XHJcbiAgICAgIGxldCBuZXh0X3dvcmQgPSB0aGlzLnBhcnNlZF9pbnB1dC53b3Jkc1tuZXh0X2luZGV4XTtcclxuICAgICAgbGV0IG5leHRfd29yZF9rZXkgPSB0aGlzLl9sb2FkZXIuZ2V0SGFzaEtleShuZXh0X3dvcmQpO1xyXG4gICAgICBsZXQgbmV4dF93b3JkX21vZGVsID0gdGhpcy5fZ2V0X25leHRfbW9kZWwodGhpcy5fcHJlZGljdGlvbl9hcnJheSwgbmV4dF93b3JkX2tleSk7XHJcbiAgICAgIGlmKG5leHRfd29yZF9tb2RlbCl7XHJcbiAgICAgICAgdG90YWxfY291bnQgPSBuZXh0X3dvcmRfbW9kZWxbSU5ERVguTU9ERUwuQ09VTlRdO1xyXG4gICAgICAgIHRoaXMuX3ByZWRpY3Rpb25fYXJyYXkgPSBuZXh0X3dvcmRfbW9kZWxbSU5ERVguTU9ERUwuTkVYVF9NT0RFTF07XHJcbiAgICAgICAgdGhpcy5fY29tcHV0ZV9wcmVkaWN0aW9uX2Zyb21fbW9kZWwobmV4dF93b3JkLCBsZXZlbCwgdG90YWxfY291bnQpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9nZXRfbmV4dF9tb2RlbChtb2RlbF9kYXRhLCB3b3JkX2hhc2hfa2V5KXtcclxuICAgIGlmKCF3b3JkX2hhc2hfa2V5KXtcclxuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuICAgIGxldCBuZXh0X3dvcmRfcHJlZGljdGlvbiA9IF8uZmluZChtb2RlbF9kYXRhLCAoaXRlbSkgPT57XHJcbiAgICAgIHJldHVybiAoaXRlbS5sZW5ndGggPjEpICYmIChpdGVtW0lOREVYLk1PREVMLldPUkRfSEFTSF0gPT09IHdvcmRfaGFzaF9rZXkpO1xyXG4gICAgfSk7XHJcbiAgICBpZiggbmV4dF93b3JkX3ByZWRpY3Rpb24gJiYgbmV4dF93b3JkX3ByZWRpY3Rpb24ubGVuZ3RoID4gSU5ERVguTU9ERUwuTkVYVF9NT0RFTCAmJiBBcnJheS5pc0FycmF5KG5leHRfd29yZF9wcmVkaWN0aW9uKSl7XHJcbiAgICAgIHJldHVybiBuZXh0X3dvcmRfcHJlZGljdGlvbjsgIC8vIFRPRE8gbWF5IGJlIG5lZWRzIGEgZml4XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9nZXRfd29yZF9pbmRleChsZXZlbCl7XHJcbiAgICByZXR1cm4gdGhpcy5wYXJzZWRfaW5wdXQud29yZHMubGVuZ3RoIC0gbGV2ZWw7XHJcbiAgfVxyXG4gIF9pc19teV9sZXZlbChsZXZlbCl7XHJcbiAgICByZXR1cm4gbGV2ZWwgPT09IDE7XHJcbiAgfVxyXG4gIF9jb250aW51ZUZuKCl7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcbiAgX2NvbXB1dGVfbmV4dF93b3Jkcyh0b3RhbF9jb3VudCl7XHJcbiAgICBsZXQgcHJlZGljdGlvbl9hcnJheSA9IHRoaXMuX3ByZWRpY3Rpb25fYXJyYXk7XHJcbiAgICBpZighKHByZWRpY3Rpb25fYXJyYXkgJiYgcHJlZGljdGlvbl9hcnJheS5sZW5ndGggPiAwKSl7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBmb3IobGV0IGk9IDA7IHRoaXMucHJlZGljdGlvbnMubGVuZ3RoIDwgdGhpcy5tYXhfcHJlZGljdGlvbnMgJiYgaSA8IHByZWRpY3Rpb25fYXJyYXkubGVuZ3RoICYmIHByZWRpY3Rpb25fYXJyYXlbaV0ubGVuZ3RoID4gMTsgaSsrKXtcclxuICAgICAgaWYoIXRoaXMuX21hdGNoZXNfcGFydGlhbGx5KHByZWRpY3Rpb25fYXJyYXlbaV0pKSB7XHJcbiAgICAgICAgY29udGludWU7XHJcbiAgICAgIH1cclxuICAgICAgbGV0IHByZWRpY3Rpb25zID0gdGhpcy5fY3JlYXRlX3ByZWRpY3Rpb25zKHByZWRpY3Rpb25fYXJyYXlbaV0sIHRvdGFsX2NvdW50KTtcclxuICAgICAgdGhpcy5fY29tcHV0ZV9uZXh0X211bHRpX3dvcmRzKHByZWRpY3Rpb25zKTtcclxuICAgIH1cclxuICB9XHJcbiAgX2NvbXB1dGVfbmV4dF9tdWx0aV93b3JkcyhwcmVkaWN0aW9ucyl7XHJcbiAgICBfLmVhY2gocHJlZGljdGlvbnMsIChwcmVkaWN0aW9uKSA9PiB7XHJcbiAgICAgIGlmKHByZWRpY3Rpb24gIT09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgdGhpcy5wcmVkaWN0aW9ucy5wdXNoKHByZWRpY3Rpb24pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbiAgX2dldF93b3JkX2hhc2gobW9kZWxfaXRlbSl7XHJcbiAgICByZXR1cm4gdGhpcy5fbG9hZGVyLmdldE1hcEhhc2gobW9kZWxfaXRlbVtJTkRFWC5NT0RFTC5XT1JEX0hBU0hdKTtcclxuICB9XHJcblxyXG4gIF9tYXRjaGVzX3BhcnRpYWxseShwcmVkaWN0aW9uKXtcclxuICAgIGlmKHRoaXMucGFyc2VkX2lucHV0LmlzV2hvbGVXb3JkKXtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICBsZXQgd29yZF9oYXNoID0gdGhpcy5fbG9hZGVyLmdldE1hcEhhc2gocHJlZGljdGlvbltJTkRFWC5NT0RFTC5XT1JEX0hBU0hdKTtcclxuICAgIC8vIFRPRE8gd2hhdCBpZiBub3QgYSB3b3JkIGhhc2ggP1xyXG4gICAgaWYoIXdvcmRfaGFzaCkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBsZXQgd29yZCA9IHdvcmRfaGFzaFtJTkRFWC5NQVAuV09SRF07XHJcbiAgICByZXR1cm4gdGhpcy5wYXJzZWRfaW5wdXQuY29tcGFyZVBhcnRpYWwod29yZCk7XHJcbiAgfVxyXG4gIF9jcmVhdGVfcHJlZGljdGlvbnMobmV4dF9hcnJheSwgdG90YWxfY291bnQpe1xyXG4gICAgbGV0IGNyZWF0b3IgPSBuZXcgUHJlZGljdG9uQ3JlYXRvcih7bG9hZGVyOnRoaXMuX2xvYWRlciwgbW9kZWxfaXRlbTpuZXh0X2FycmF5LCB0b3RhbF9jb3VudCwgcGFyc2VkX2lucHV0OnRoaXMucGFyc2VkX2lucHV0LCBjb250aW51ZUZuOnRoaXMuX2NvbnRpbnVlRm59KTtcclxuICAgIHJldHVybiAgY3JlYXRvci5nZXRNdWx0aVByZWRpY3Rpb25zKHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHRoaXMuX3NvdXJjZSk7XHJcbiAgfVxyXG5cclxuICBfZ2V0X3ByZWRpY3Rpb25fYXJyYXkoKXsgLy8gcmV0dXJucyBhbiBhcnJheSBmcm9tIHdoaWNoIHByZWRpY3Rpb25zIGFyZSB0byBiZSBjYWxjdWxhdGVzXHJcbiAgICBpZih0aGlzLnBhcnNlZF9pbnB1dC5pc1ByZXZpb3VzICYmIHRoaXMuX3dvcmRfbW9kZWwubGVuZ3RoID4gMSl7XHJcbiAgICAgIHJldHVybiB0aGlzLl93b3JkX21vZGVsWzFdO1xyXG4gICAgfVxyXG4gICAgZWxzZXtcclxuICAgICAgcmV0dXJuIHRoaXMuX3dvcmRfbW9kZWxbMF07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfbG9hZElucHV0TW9kZWwod29yZCwgY2FsbGJhY2tGbil7XHJcbiAgICBsZXQgbkZpbGVJbmRleCA9IHRoaXMuX2ZpbmRGaWxlSW5kZXgod29yZCk7XHJcbiAgICB0aGlzLl9sb2FkZXIubG9hZE1vZGVsKG5GaWxlSW5kZXgsIGNhbGxiYWNrRm4pO1xyXG4gIH1cclxuXHJcbiAgX2ZpbmRGaWxlSW5kZXgod29yZCl7XHJcbiAgICByZXR1cm4gdGhpcy5fbG9hZGVyLmdldE1vZGVsRmlsZU5vKHdvcmQpO1xyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBOR3JhbVByZWRpY3RvcjtcclxuIiwiaW1wb3J0IHNlYXJjaF91dGlscyBmcm9tICcuL3V0aWxzJ1xyXG5jbGFzcyBQcmVkaWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih0ZXJtLCBwcm9iYWJpbGl0eSwgY291bnQsIHNvdXJjZSl7XHJcbiAgICB0aGlzLnByb2JhYmlsaXR5ID0gcHJvYmFiaWxpdHk7XHJcbiAgICB0aGlzLnRlcm0gPSB0ZXJtO1xyXG4gICAgdGhpcy5jb3VudCA9IGNvdW50O1xyXG4gICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XHJcbiAgfVxyXG4gIG1lcmdlKG5ld19pdGVtKSB7XHJcbiAgICB0aGlzLnByb2JhYmlsaXR5ICs9IG5ld19pdGVtLnByb2JhYmlsaXR5O1xyXG4gICAgdGhpcy5jb3VudCA9IE1hdGgubWF4KHRoaXMuY291bnQsIG5ld19pdGVtLmNvdW50KTtcclxuICB9XHJcbiAgY29tcGFyZShvdGhlcikge1xyXG4gICAgcmV0dXJuIG90aGVyLnByb2JhYmlsaXR5IC0gdGhpcy5wcm9iYWJpbGl0eVxyXG4gIH1cclxuICBtYXRjaChvdGhlcikge1xyXG4gICAgcmV0dXJuIHNlYXJjaF91dGlscy5jb21wYXJlTm9DYXNlKG90aGVyLnRlcm0sIHRoaXMudGVybSkgPT09IDA7XHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFByZWRpY3Rpb247IiwibGV0IFByZWRpY3Rpb24gPSByZXF1aXJlKCcuL3ByZWRpY3Rpb24nKTtcclxubGV0IHNlYXJjaF91dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxuY29uc3QgSU5ERVggPSByZXF1aXJlKCcuL2luZGljZXMnKTtcclxubGV0IElucHV0UGFyc2VyID0gcmVxdWlyZSgnLi9pbnB1dF9wYXJzZXInKTtcclxuY29uc3Qgc2VhcmNoX2NvbnN0cyA9IHJlcXVpcmUoJy4vY29uc3RzJyk7XHJcblxyXG5cclxuY2xhc3MgUHJlZGljdG9uQ3JlYXRvcntcclxuICBjb25zdHJ1Y3Rvcih7bG9hZGVyLCBtb2RlbF9pdGVtLCB0b3RhbF9jb3VudCwgcGFyc2VkX2lucHV0LCBjb250aW51ZUZufSl7XHJcbiAgICB0aGlzLl9tb2RlbF9pdGVtID0gbW9kZWxfaXRlbTtcclxuICAgIHRoaXMucGFyc2VkX2lucHV0ID0gcGFyc2VkX2lucHV0IHx8IG5ldyBJbnB1dFBhcnNlcihcIlwiKTtcclxuICAgIHRoaXMuX2luaXQoKTtcclxuICAgIHRoaXMuX3RvdGFsX2NvdW50ID0gdG90YWxfY291bnQ7XHJcbiAgICB0aGlzLl9jb250aW51ZUZuID0gY29udGludWVGbiB8fCB0aGlzLl9pc1N0b3BXb3JkO1xyXG4gICAgdGhpcy5fbmV4dE1vZGVsRm4gPSB0aGlzLl9uZXh0TW9kZWw7XHJcbiAgICB0aGlzLl9wcmVkaWN0aW9ucyA9IFtdO1xyXG4gICAgdGhpcy5fbXVsdGlfcHJlZGljdGlvbiA9IGZhbHNlO1xyXG4gICAgdGhpcy5fbG9hZGVyID0gbG9hZGVyO1xyXG4gIH1cclxuXHJcbiAgX2luaXQoKXtcclxuICAgIHRoaXMudGVybSA9IFwiXCI7XHJcbiAgICB0aGlzLnByb2JhYmlsaXR5ID0gMTtcclxuICAgIHRoaXMuX2ZpcnN0X3dvcmQgPSB0cnVlO1xyXG4gICAgdGhpcy5pc0ZpcnN0TGV2ZWwgPSBmYWxzZTtcclxuICAgIHRoaXMuX2xldmVsID0gMDtcclxuICB9XHJcblxyXG4gIGdldFByZWRpY3Rpb24od29yZF9oYXNoLCBpc0ZpcnN0TGV2ZWwsIHByZXZpb3VzLCBzb3VyY2Upe1xyXG4gICAgdGhpcy53b3JkX2hhc2ggPSB3b3JkX2hhc2g7XHJcbiAgICB0aGlzLmlzRmlyc3RMZXZlbCA9IGlzRmlyc3RMZXZlbDtcclxuICAgIHRoaXMucHJldmlvdXMgPSBwcmV2aW91cztcclxuICAgIHRoaXMuc291cmNlID0gc291cmNlO1xyXG4gICAgaWYodGhpcy5pc0ZpcnN0TGV2ZWwpe1xyXG4gICAgICB0aGlzLl9hcHBlbmRQcmV2aW91c1ByZWRpY3Rpb25zKHRoaXMuX21vZGVsX2l0ZW0pO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fYXBwZW5kUHJlZGljdGlvbih0aGlzLl9tb2RlbF9pdGVtLCB3b3JkX2hhc2gpO1xyXG4gICAgcmV0dXJuIHRoaXMuX2NyZWF0ZVByZWRpY3Rpb24oKTtcclxuICB9XHJcbiAgZ2V0TXVsdGlQcmVkaWN0aW9ucyh3b3JkX2hhc2gsIGlzRmlyc3RMZXZlbCwgcHJldmlvdXMsIHNvdXJjZSl7XHJcbiAgICB0aGlzLl9tdWx0aV9wcmVkaWN0aW9uID0gdHJ1ZTtcclxuICAgIHRoaXMud29yZF9oYXNoID0gd29yZF9oYXNoO1xyXG4gICAgdGhpcy5pc0ZpcnN0TGV2ZWwgPSBpc0ZpcnN0TGV2ZWw7XHJcbiAgICB0aGlzLnByZXZpb3VzID0gcHJldmlvdXM7XHJcbiAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcclxuICAgIGlmKHRoaXMuaXNGaXJzdExldmVsKXtcclxuICAgICAgdGhpcy5fYXBwZW5kUHJldmlvdXNQcmVkaWN0aW9ucyh0aGlzLl9tb2RlbF9pdGVtKTtcclxuICAgIH1cclxuICAgIHRoaXMuX2FwcGVuZFByZWRpY3Rpb24odGhpcy5fbW9kZWxfaXRlbSwgd29yZF9oYXNoKTtcclxuICAgIHJldHVybiB0aGlzLl9wcmVkaWN0aW9ucztcclxuICB9XHJcblxyXG4gIGVxdWFsUmVtYWluZ1dvcmQobW9kZWxfaXRlbSl7XHJcbiAgICBsZXQgd29yZCA9IHRoaXMuX2dldHdvcmQobW9kZWxfaXRlbSwgdGhpcy53b3JkX2hhc2gpO1xyXG4gICAgaWYod29yZCl7XHJcbiAgICAgIGlmKHRoaXMucGFyc2VkX2lucHV0LmVxdWFsUmVtYWluZ1dvcmQod29yZCkpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuICBfYXBwZW5kUHJldmlvdXNQcmVkaWN0aW9ucyhtb2RlbF9pdGVtKXtcclxuICAgIGxldCBwcmV2aW91c19pdGVtID0gdGhpcy5fZ2V0UHJldmlvdXNJdGVtKG1vZGVsX2l0ZW0pO1xyXG4gICAgaWYoIXByZXZpb3VzX2l0ZW0pIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgbGV0IHByZXZpb3VzX3Byb2JhaWxpdHkgPSB0aGlzLl9nZXRQcmV2aW91c1Byb2JhYmlsaXR5KHByZXZpb3VzX2l0ZW0pO1xyXG4gICAgaWYocHJldmlvdXNfcHJvYmFpbGl0eSA+IHNlYXJjaF9jb25zdHMubWluUHJldmlvdXNUaHJlc2hvbGQpe1xyXG4gICAgICB0aGlzLl9hcHBlbmRQcmV2aW91c1Rlcm0ocHJldmlvdXNfaXRlbSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9nZXRQcmV2aW91c0l0ZW0obW9kZWxfaXRlbSl7XHJcbiAgICBsZXQgcHJldmlvdXNfaXRlbXMgPSBzZWFyY2hfdXRpbHMuZ2V0Rmlyc3RMZXZlbE5leHRNb2RlbChtb2RlbF9pdGVtLCB0cnVlKTtcclxuICAgIGlmKHByZXZpb3VzX2l0ZW1zKXtcclxuICAgICAgbGV0IHByZXZpb3VzX2l0ZW0gPSBzZWFyY2hfdXRpbHMuZ2V0U2FmZUVsZW1lbnQocHJldmlvdXNfaXRlbXMsIDApO1xyXG4gICAgICByZXR1cm4gcHJldmlvdXNfaXRlbTtcclxuICAgIH1cclxuICB9XHJcbiAgX2FwcGVuZFByZXZpb3VzVGVybShtb2RlbF9pdGVtKXtcclxuICAgIGxldCB3b3JkID0gdGhpcy5fZ2V0d29yZChtb2RlbF9pdGVtKTtcclxuICAgIGlmKHdvcmQpe1xyXG4gICAgICBpZih0aGlzLnBhcnNlZF9pbnB1dC5lcXVhbExhc3RXb3JkKHdvcmQpKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMudGVybSA9IHRoaXMucGFyc2VkX2lucHV0LnJlcGxhY2VMYXN0V29yZCh3b3JkKTtcclxuICAgICAgdGhpcy5fZmlyc3Rfd29yZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuICBfY3JlYXRlUHJlZGljdGlvbigpe1xyXG4gICAgaWYodGhpcy50ZXJtICE9PSBcIlwiKXtcclxuICAgICAgbGV0IHN1Z2dlc3Rpb25fdGV4dCA9IHRoaXMucGFyc2VkX2lucHV0LmNvbXBsZXRlU3VnZ2VzdGlvbih0aGlzLnRlcm0pO1xyXG4gICAgICByZXR1cm4gbmV3IFByZWRpY3Rpb24oc3VnZ2VzdGlvbl90ZXh0LCB0aGlzLnByb2JhYmlsaXR5LCAxLCB0aGlzLnNvdXJjZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfYXBwZW5kUHJlZGljdGlvbihtb2RlbF9pdGVtKXtcclxuICAgIHRoaXMucHJvYmFiaWxpdHkgPSB0aGlzLnByb2JhYmlsaXR5ICogdGhpcy5fY2FsY3VsYXRlUHJvYmFiaWxpdHkobW9kZWxfaXRlbSk7XHJcbiAgICB0aGlzLl91cGRhdGVfdGVybShtb2RlbF9pdGVtKTtcclxuICAgIGlmKHRoaXMuX3Nob3VsZENyZWF0ZVByZWRpY3Rpb24obW9kZWxfaXRlbSkpe1xyXG4gICAgICB0aGlzLl9wcmVkaWN0aW9ucy5wdXNoKHRoaXMuX2NyZWF0ZVByZWRpY3Rpb24oKSlcclxuICAgIH1cclxuICAgIGlmKHRoaXMuX2NvbnRpbnVlRm4obW9kZWxfaXRlbSkpe1xyXG4gICAgICBsZXQgbmV4dF9tb2RlbCA9IHRoaXMuX25leHRNb2RlbChtb2RlbF9pdGVtKTtcclxuICAgICAgdGhpcy5fdG90YWxfY291bnQgPSB0aGlzLl9nZXRDb3VudChtb2RlbF9pdGVtKTtcclxuICAgICAgdGhpcy5fbGV2ZWwrKztcclxuICAgICAgdGhpcy5fZmlyc3Rfd29yZCA9IGZhbHNlO1xyXG4gICAgICB0aGlzLmlzRmlyc3RMZXZlbCA9IGZhbHNlO1xyXG4gICAgICB0aGlzLndvcmRfaGFzaCA9IHVuZGVmaW5lZDtcclxuICAgICAgaWYobmV4dF9tb2RlbCl7XHJcbiAgICAgICAgdGhpcy5fYXBwZW5kUHJlZGljdGlvbihuZXh0X21vZGVsKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICBfZ2V0UHJldmlvdXNQcm9iYWJpbGl0eShwcmV2aW91c19pdGVtKXtcclxuICAgIGxldCB0b3RhbF9jb3VudCA9ICB0aGlzLl9nZXRDb3VudCh0aGlzLm1vZGVsX2l0ZW0pO1xyXG4gICAgbGV0IGNvdW50ID0gc2VhcmNoX3V0aWxzLmdldENvdW50ZnJvbU1vZGVsKHByZXZpb3VzX2l0ZW0pO1xyXG4gICAgcmV0dXJuIGNvdW50L3RvdGFsX2NvdW50O1xyXG4gIH1cclxuICBfdXBkYXRlX3Rlcm0obW9kZWxfaXRlbSl7XHJcbiAgICBpZih0aGlzLnBhcnNlZF9pbnB1dC5pc1ByZXZpb3VzKXtcclxuICAgICAgdGhpcy50ZXJtID0gdGhpcy5fbmV4dFRlcm0obW9kZWxfaXRlbSkgKyB0aGlzLnRlcm07XHJcbiAgICB9XHJcbiAgICBlbHNle1xyXG4gICAgICB0aGlzLnRlcm0gPSB0aGlzLnRlcm0gKyB0aGlzLl9uZXh0VGVybShtb2RlbF9pdGVtKTtcclxuICAgIH1cclxuICB9XHJcbiAgX2dldHdvcmQobW9kZWxfaXRlbSwgd29yZF9oYXNoKXtcclxuICAgIHdvcmRfaGFzaCA9IHdvcmRfaGFzaCB8fCB0aGlzLl9nZXRfd29yZF9oYXNoKG1vZGVsX2l0ZW0pO1xyXG4gICAgcmV0dXJuIHNlYXJjaF91dGlscy5nZXRTYWZlRWxlbWVudCh3b3JkX2hhc2gsIElOREVYLk1BUC5XT1JEKTtcclxuICB9XHJcblxyXG4gIF9nZXRfd29yZF9oYXNoKG1vZGVsX2l0ZW0pe1xyXG4gICAgcmV0dXJuIHRoaXMuX2xvYWRlci5nZXRNYXBIYXNoKG1vZGVsX2l0ZW1bSU5ERVguTU9ERUwuV09SRF9IQVNIXSk7XHJcbiAgfVxyXG4gIF9uZXh0TW9kZWwobW9kZWxfaXRlbSl7XHJcbiAgICBsZXQgbmV4dF9tb2RlbDtcclxuICAgIGlmKHRoaXMuaXNGaXJzdExldmVsKXtcclxuICAgICAgbmV4dF9tb2RlbCA9IHNlYXJjaF91dGlscy5nZXRGaXJzdExldmVsTmV4dE1vZGVsKG1vZGVsX2l0ZW0sIHRoaXMucHJldmlvdXMpO1xyXG4gICAgfVxyXG4gICAgZWxzZXtcclxuICAgICAgbmV4dF9tb2RlbCA9IHNlYXJjaF91dGlscy5nZXROZXh0TW9kZWwobW9kZWxfaXRlbSk7XHJcbiAgICB9XHJcbiAgICBpZihuZXh0X21vZGVsICYmIG5leHRfbW9kZWwubGVuZ3RoID4gIDApe1xyXG4gICAgICByZXR1cm4gc2VhcmNoX3V0aWxzLmdldEZpcnN0UHJlZGljdGlvbihuZXh0X21vZGVsKTtcclxuICAgIH1cclxuICB9XHJcbiAgX25leHRUZXJtKG1vZGVsX2l0ZW0pe1xyXG4gICAgbGV0IHdvcmQgPSB0aGlzLl9nZXR3b3JkKG1vZGVsX2l0ZW0sIHRoaXMud29yZF9oYXNoKTtcclxuICAgIGlmKHdvcmQpe1xyXG4gICAgICByZXR1cm4gKHRoaXMuX2ZpcnN0X3dvcmQpID8gdGhpcy5wYXJzZWRfaW5wdXQuY29tcGxldGVXb3JkKHdvcmQpIDogXCIgXCIgKyB3b3JkO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFwiXCI7XHJcbiAgfVxyXG4gIF9jYWxjdWxhdGVQcm9iYWJpbGl0eShtb2RlbF9pdGVtKXtcclxuICAgIGxldCBjb3VudCA9IHRoaXMuX2dldENvdW50KG1vZGVsX2l0ZW0pO1xyXG4gICAgcmV0dXJuIChjb3VudCAvIHRoaXMuX3RvdGFsX2NvdW50KTtcclxuICB9XHJcbiAgX2dldENvdW50KG1vZGVsX2l0ZW0pe1xyXG4gICAgaWYodGhpcy53b3JkX2hhc2gpe1xyXG4gICAgICByZXR1cm4gc2VhcmNoX3V0aWxzLmdldENvdW50ZnJvbVdvcmRIYXNoKHRoaXMud29yZF9oYXNoKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICByZXR1cm4gc2VhcmNoX3V0aWxzLmdldENvdW50ZnJvbU1vZGVsKG1vZGVsX2l0ZW0pO1xyXG4gICAgfVxyXG4gIH1cclxuICBfc2hvdWxkQ3JlYXRlUHJlZGljdGlvbihtb2RlbF9pdGVtKXtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fbXVsdGlfcHJlZGljdGlvbiAmJlxyXG4gICAgICAgICAgICAhdGhpcy5faXNTdG9wV29yZChtb2RlbF9pdGVtKSAmJlxyXG4gICAgICAgICAgICAhdGhpcy5lcXVhbFJlbWFpbmdXb3JkKG1vZGVsX2l0ZW0pO1xyXG4gIH1cclxuICBfaXNTdG9wV29yZChtb2RlbF9pdGVtKXtcclxuICAgIGxldCB3b3JkID0gdGhpcy5fZ2V0d29yZChtb2RlbF9pdGVtLCB0aGlzLndvcmRfaGFzaCk7XHJcbiAgICBpZighd29yZCl7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLl9sb2FkZXIuaXNTdG9wV29yZCh3b3JkKTtcclxuICB9XHJcbn1cclxubW9kdWxlLmV4cG9ydHMgPSBQcmVkaWN0b25DcmVhdG9yO1xyXG4iLCJjbGFzcyBQcmVkaWN0aW9uTGlzdCB7XHJcbiAgY29uc3RydWN0b3IobGlzdCAsIHBhcnNlZF9pbnB1dCl7XHJcbiAgICB0aGlzLnBhcnNlZF9pbnB1dCA9IHBhcnNlZF9pbnB1dDtcclxuICAgIHRoaXMuX2xpc3QgPSBsaXN0IHx8IFtdO1xyXG4gIH1cclxuICBnZXQgcHJlZGljdGlvbnMgKCl7XHJcbiAgICByZXR1cm4gdGhpcy5fbGlzdDtcclxuICB9XHJcbiAgaXNGb3JJbnB1dChpbnB1dCwgcHJldmlvdXNfaW5wdXQpe1xyXG4gICAgaWYodGhpcy5wYXJzZWRfaW5wdXQuaXNQcmV2aW91cyl7XHJcbiAgICAgIHJldHVybiAocHJldmlvdXNfaW5wdXQgIT09IHVuZGVmaW5lZCkgJiYgKHRoaXMucGFyc2VkX2lucHV0Lm9yaWdpbmFsX3RleHQgPT09IHByZXZpb3VzX2lucHV0Lm9yaWdpbmFsX3RleHQpO1xyXG4gICAgfVxyXG4gICAgZWxzZXtcclxuICAgICAgcmV0dXJuIHRoaXMucGFyc2VkX2lucHV0Lm9yaWdpbmFsX3RleHQgPT09IGlucHV0Lm9yaWdpbmFsX3RleHQ7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGlzRW1wdHkoKXtcclxuICAgIHJldHVybiB0aGlzLl9saXN0Lmxlbmd0aCA9PT0gMDtcclxuICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gUHJlZGljdGlvbkxpc3Q7IiwiY29uc3QgTG9hZGVyID0gcmVxdWlyZSgnLi9sb2FkZXInKTtcclxuY29uc3QgcmggPSByZXF1aXJlKFwiLi4vLi4vLi4vLi4vbGliL3JoXCIpXHJcbmNvbnN0IF8gPSByaC5fXHJcbmNvbnN0IEhpc3RvcnlQcmVkaWN0b3IgPSByZXF1aXJlKCcuL2hpc3RvcnlfcHJlZGljdG9yJyk7XHJcbmNvbnN0IE5ncmFtUHJlZGljdG9yID0gcmVxdWlyZSgnLi9uZ3JhbV9wcmVkaWN0b3InKTtcclxuY29uc3QgR2VuZXJhbFByZWRpY3RvciA9IHJlcXVpcmUgKCcuL2dlbmVyYWxfcHJlZGljdG9yJyk7XHJcbmNvbnN0IENvcnJlY3RvciA9IHJlcXVpcmUoJy4vY29ycmVjdG9yJyk7XHJcbmNvbnN0IHNlYXJjaF9jb25zdHMgPSByZXF1aXJlKCcuL2NvbnN0cycpO1xyXG5cclxuLy90aGlzLnByb2Nlc3NSZXN1bHQuYmluZCh0aGlzKVxyXG5jbGFzcyBQcmVkaWN0b3JzQ3JlYXRvcntcclxuICBjb25zdHJ1Y3RvcihoaXN0b3J5X3JlYWRlciwgcHJvY2Vzc1Jlc3VsdEZuKXtcclxuICAgIHRoaXMuX2hpc3RvcnlfcmVhZGVyID0gaGlzdG9yeV9yZWFkZXJcclxuICAgIHRoaXMuX3Byb2Nlc3NSZXN1bHRGbiA9IHByb2Nlc3NSZXN1bHRGblxyXG4gIH1cclxuXHJcbiAgZ2V0IHByb2plY3RQYXRocygpe1xyXG4gICAgcmV0dXJuIHJoLm1vZGVsLmdldChyaC5jb25zdHMoJ0tFWV9QUk9KRUNUX0xJU1QnKSlcclxuICB9XHJcbiAgXHJcbiAgX2NyZWF0ZUxvYWRlcnMoKSB7XHJcbiAgICByZXR1cm4gXy5tYXAodGhpcy5wcm9qZWN0UGF0aHMsIChwYXRoKSA9PiB7XHJcbiAgICAgIHJldHVybiBuZXcgTG9hZGVyKHBhdGgpXHJcbiAgICB9KVxyXG4gIH1cclxuICBjcmVhdGVQcmVkaWN0b3JzKGFkZEZuLCBwcmV2QWRkRm4sIGFkZENvcnJlY3RvckZuKXtcclxuICAgIHRoaXMuX2FkZEZuID0gYWRkRm5cclxuICAgIHRoaXMuX3ByZXZhZGRGbiA9IHByZXZBZGRGblxyXG4gICAgdGhpcy5fYWRkQ29ycmVjdG9yRm4gPSBhZGRDb3JyZWN0b3JGblxyXG4gICAgbGV0IGhpc3RvcnlfcHJlZGljdG9yID0gbmV3IEhpc3RvcnlQcmVkaWN0b3IodGhpcy5faGlzdG9yeV9yZWFkZXIsIHRoaXMuX3Byb2Nlc3NSZXN1bHRGbik7XHJcbiAgICB0aGlzLl9hZGRGbihoaXN0b3J5X3ByZWRpY3Rvcik7XHJcblxyXG4gICAgbGV0IGxvYWRlcnMgPSB0aGlzLl9jcmVhdGVMb2FkZXJzKClcclxuICAgIF8uZWFjaChsb2FkZXJzLCAobG9hZGVyKSA9PiB7XHJcbiAgICAgIGxvYWRlci5pbml0KHRoaXMuYWRkUHJlZGljdG9ycy5iaW5kKHRoaXMpKVxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGFkZFByZWRpY3RvcnMobG9hZGVyKXtcclxuICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IGxvYWRlci5uR3JhbTsgaSsrKXtcclxuXHJcbiAgICAgIGxldCBuZ3AgPSBuZXcgTmdyYW1QcmVkaWN0b3Ioe2xvYWRlciwgbGV2ZWw6aSwgY2FsbGJhY2s6dGhpcy5fcHJvY2Vzc1Jlc3VsdEZufSk7XHJcbiAgICAgIG5ncC5pbml0KCk7XHJcbiAgICAgIHRoaXMuX2FkZEZuKG5ncClcclxuICAgIH1cclxuICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IHNlYXJjaF9jb25zdHMucHJldmlvdXNuR3JhbTsgaSsrKXtcclxuICAgICAgbGV0IG5ncCA9IG5ldyBOZ3JhbVByZWRpY3Rvcih7bG9hZGVyLCBsZXZlbDppLCBjYWxsYmFjazp0aGlzLl9wcm9jZXNzUmVzdWx0Rm4sIHByZXZpb3VzOnRydWV9KTtcclxuICAgICAgbmdwLmluaXQoKTtcclxuICAgICAgdGhpcy5fcHJldmFkZEZuKG5ncCk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGdlbmVyYWxfcHJlZGljdG9yID0gbmV3IEdlbmVyYWxQcmVkaWN0b3IodGhpcy5fcHJvY2Vzc1Jlc3VsdEZuLCBsb2FkZXIpXHJcbiAgICB0aGlzLl9hZGRGbihnZW5lcmFsX3ByZWRpY3Rvcik7XHJcblxyXG4gICAgbGV0IGNvcnJlY3RvciA9IG5ldyBDb3JyZWN0b3IobG9hZGVyLCB0aGlzLl9wcm9jZXNzUmVzdWx0Rm4pXHJcbiAgICB0aGlzLl9hZGRDb3JyZWN0b3JGbihjb3JyZWN0b3IpO1xyXG5cclxuICB9XHJcbn1cclxubW9kdWxlLmV4cG9ydHMgPSBQcmVkaWN0b3JzQ3JlYXRvclxyXG4iLCJjb25zdCByaCA9IHJlcXVpcmUoXCIuLi8uLi8uLi8uLi9saWIvcmhcIilcclxuY29uc3QgXyA9IHJoLl9cclxuY29uc3QgY29uc3RzID0gcmguY29uc3RzO1xyXG5jb25zdCBoaXN0b3J5X3JlYWRlciA9IHJlcXVpcmUoJy4vaGlzdG9yeV9yZWFkZXInKTtcclxuY29uc3QgSW5wdXRQYXJzZXIgPSByZXF1aXJlKCcuL2lucHV0X3BhcnNlcicpO1xyXG5jb25zdCBQcmVkaWN0b25NZXJnZXIgPSByZXF1aXJlKCcuLi9jb21tb24vbWVyZ2VyJyk7XHJcbmNvbnN0IFRvcGljQ291bnRlciA9IHJlcXVpcmUoJy4vdG9waWNfY291bnRlcicpO1xyXG5jb25zdCBzZWFyY2hfdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XHJcbmNvbnN0IHNlYXJjaF9jb25zdHMgPSByZXF1aXJlKCcuL2NvbnN0cycpO1xyXG5jb25zdCBTZWFtYXBob3JlID0gcmVxdWlyZSgnLi8uLi8uLi8uLi9jb21tb24vY291bnRpbmdfc2VhbWFwaG9yZScpO1xyXG5jb25zdCBQcmVkaWN0b3JDcmVhdG9yID0gcmVxdWlyZSgnLi9wcmVkaWN0b3JzX2NyZWF0b3InKTtcclxuY29uc3QgU2VhcmNoSGFuZGxlciA9IHJlcXVpcmUoJy4uL3RvcGljL2hhbmRsZXInKTtcclxuXHJcbmNvbnN0IG1heF9wcmVkaWN0aW9ucyA9IDU7XHJcblxyXG5jbGFzcyBTZWFyY2hDb250cm9sbGVyIHtcclxuICBjb25zdHJ1Y3Rvcih3aWRnZXQpIHtcclxuICAgIHRoaXMud2lkZ2V0ID0gd2lkZ2V0O1xyXG4gICAgdGhpcy5fcHJlZGljdG9ycyA9IFtdO1xyXG4gICAgdGhpcy5fY29ycmVjdG9ycyA9IFtdO1xyXG4gICAgdGhpcy5fcHJldmlvdXNfcHJlZGljdG9ycyA9IFtdO1xyXG4gICAgdGhpcy5pbml0SGFuZGxlS2V5SGFzaCgpO1xyXG4gICAgdGhpcy5tYXhfcHJlZGljdGlvbnMgPSBtYXhfcHJlZGljdGlvbnM7XHJcbiAgICB0aGlzLnByZWRpY3Rvbl9tZXJnZXIgPSBuZXcgUHJlZGljdG9uTWVyZ2VyKFtdKVxyXG4gICAgd2lkZ2V0Lm1vZGVsLnN1YnNjcmliZShjb25zdHMoJ0tFWV9QUk9KRUNUX0xJU1QnKSwgKCkgPT4ge1xyXG4gICAgICB0aGlzLmluaXQoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5zZWFyY2hfaGFuZGxlciA9IG5ldyBTZWFyY2hIYW5kbGVyKHdpZGdldClcclxuICB9XHJcbiAgaW5pdCgpIHtcclxuICAgIGxldCBoaXN0b3J5X2xpc3QgPSByaC5zdG9yYWdlLmZldGNoKGNvbnN0cygnUFJFVl9TRUFSQ0hfS0VZJykpO1xyXG4gICAgaGlzdG9yeV9yZWFkZXIuaW5pdEhpc3RvcnkoaGlzdG9yeV9saXN0KTtcclxuICAgIHRoaXMuY3JlYXRlX3ByZWRpY3RvcnMoKVxyXG4gICAgdGhpcy53aWRnZXQubW9kZWwuY3N1YnNjcmliZSgnRVZUX0NMT1NFX1NFQVJDSF9TVUdHRVNUSU9OJywgdGhpcy5jbG9zZVN1Z2dlc3Rpb25zLmJpbmQodGhpcykpXHJcbiAgICB0aGlzLndpZGdldC5tb2RlbC5jc3Vic2NyaWJlKCdFVlRfU0VBUkNIX1RFUk0nLCB0aGlzLnNlYXJjaC5iaW5kKHRoaXMpKVxyXG5cclxuXHJcbiAgfVxyXG4gIHNlYXJjaCgpIHtcclxuICAgIGxldCB0ZXh0ID0gdGhpcy53aWRnZXQuZ2V0KGNvbnN0cygnS0VZX1NFQVJDSF9URVJNJykpXHJcbiAgICB0aGlzLnNlYXJjaF9oYW5kbGVyLnNob3dTZWFyY2hSZXN1bHRzKHRleHQpXHJcbiAgfVxyXG4gIGNyZWF0ZV9wcmVkaWN0b3JzKCkge1xyXG4gICAgdGhpcy5fcHJlZGljdG9ycyA9IFtdXHJcbiAgICBsZXQgcHJlZGljdG9yX2NyZWF0b3IgPSBuZXcgUHJlZGljdG9yQ3JlYXRvcihoaXN0b3J5X3JlYWRlciwgdGhpcy5wcm9jZXNzUmVzdWx0LmJpbmQodGhpcykpXHJcbiAgICBwcmVkaWN0b3JfY3JlYXRvci5jcmVhdGVQcmVkaWN0b3JzKHRoaXMuYWRkUHJlZGljdG9yLmJpbmQodGhpcyksXHJcbiAgICAgIHRoaXMuYWRkUHJldlByZWRpY3Rvci5iaW5kKHRoaXMpLFxyXG4gICAgICB0aGlzLmFkZENvcnJlY3Rvci5iaW5kKHRoaXMpKVxyXG4gIH1cclxuICBhZGRQcmVkaWN0b3IocHJlZGljdG9yKSB7XHJcbiAgICB0aGlzLl9wcmVkaWN0b3JzLnB1c2gocHJlZGljdG9yKVxyXG4gIH1cclxuICBhZGRQcmV2UHJlZGljdG9yKHByZWRpY3Rvcikge1xyXG4gICAgdGhpcy5fcHJldmlvdXNfcHJlZGljdG9ycy5wdXNoKHByZWRpY3RvcilcclxuICB9XHJcbiAgYWRkQ29ycmVjdG9yKGNvcnJlY3Rvcikge1xyXG4gICAgdGhpcy5fY29ycmVjdG9ycy5wdXNoKGNvcnJlY3RvcilcclxuICB9XHJcbiAgc2hvd1N1Z2dlc3Rpb25zKGtleUV2dCkge1xyXG4gICAgdGhpcy5faW5pdFN1Z2dlc3Rpb25zKGtleUV2dCk7XHJcbiAgICB0aGlzLl9jYWxjdWxhdGVTdWdndWVzdGlvbnMoKTtcclxuICB9XHJcblxyXG4gIF9pbml0U3VnZ2VzdGlvbnMoa2V5RXZ0KSB7XHJcbiAgICB0aGlzLl9pbml0UmVzdWx0KCk7XHJcbiAgICB0aGlzLl9pbml0SW5wdXRzKGtleUV2dCk7XHJcbiAgICB0aGlzLl9yZXN1dFNlYW1hcGhvcmUgPSBuZXcgU2VhbWFwaG9yZSh0aGlzLm9uUmVzdWx0Q29tcGxldGUuYmluZCh0aGlzKSk7XHJcbiAgfVxyXG4gIF9pbml0SW5wdXRzKGtleUV2dCkge1xyXG4gICAgdGhpcy5wYXJzZWRfaW5wdXQgPSBuZXcgSW5wdXRQYXJzZXIoa2V5RXZ0LnRleHQsIGZhbHNlLCBrZXlFdnQuc2VsU3RhcnQsIGZhbHNlKTtcclxuICAgIGlmIChzZWFyY2hfdXRpbHMuaXNQcmV2aW91cyhrZXlFdnQpKSB7XHJcbiAgICAgIHRoaXMuX3ByZXZpb3VzX2lucHV0ID0gbmV3IElucHV0UGFyc2VyKGtleUV2dC50ZXh0LCBmYWxzZSwga2V5RXZ0LnNlbFN0YXJ0LCB0cnVlKTtcclxuICAgIH1cclxuICB9XHJcbiAgX2NhbGN1bGF0ZVN1Z2d1ZXN0aW9ucygpIHtcclxuICAgIHRoaXMuX3Jlc3V0U2VhbWFwaG9yZS53YWl0KHRoaXMuX3ByZWRpY3RvckNvdW50KCkpO1xyXG4gICAgXy5lYWNoKHRoaXMuX3ByZWRpY3RvcnMsIChwcmVkaWN0b3IpID0+IHtcclxuICAgICAgcHJlZGljdG9yLmdldFByZWRpY3Rpb25zKHRoaXMucGFyc2VkX2lucHV0KTtcclxuICAgIH0pO1xyXG4gICAgaWYgKHRoaXMuX3ByZXZpb3VzX2lucHV0KSB7XHJcbiAgICAgIF8uZWFjaCh0aGlzLl9wcmV2aW91c19wcmVkaWN0b3JzLCAocHJlZGljdG9yKSA9PiB7XHJcbiAgICAgICAgcHJlZGljdG9yLmdldFByZWRpY3Rpb25zKHRoaXMuX3ByZXZpb3VzX2lucHV0KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9jbGVhclByZWRpY3RvcnMoKSB7XHJcbiAgICBfLmVhY2godGhpcy5fcHJlZGljdG9ycywgKHByZWRpY3RvcikgPT4ge1xyXG4gICAgICBwcmVkaWN0b3IuY2xlYXIoKTtcclxuICAgIH0pO1xyXG4gICAgXy5lYWNoKHRoaXMuX3ByZXZpb3VzX3ByZWRpY3RvcnMsIChwcmVkaWN0b3IpID0+IHtcclxuICAgICAgcHJlZGljdG9yLmNsZWFyKCk7XHJcbiAgICB9KTtcclxuICAgIF8uZWFjaCh0aGlzLl9jb3JyZWN0b3JzLCAoY29ycmVjdG9yKSA9PiB7XHJcbiAgICAgIGNvcnJlY3Rvci5jbGVhcigpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIF9wcmVkaWN0b3JDb3VudCgpIHtcclxuICAgIGxldCBjb3VudCA9IHRoaXMuX3ByZWRpY3RvcnMubGVuZ3RoO1xyXG4gICAgaWYgKHRoaXMuX3ByZXZpb3VzX2lucHV0KSB7XHJcbiAgICAgIGNvdW50ICs9IHRoaXMuX3ByZXZpb3VzX3ByZWRpY3RvcnMubGVuZ3RoO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNvdW50O1xyXG4gIH1cclxuICBfaW5pdFJlc3VsdCgpIHtcclxuICAgIGlmICh0aGlzLnByZWRpY3Rvbl9tZXJnZXIpIHtcclxuICAgICAgdGhpcy5wcmVkaWN0b25fbWVyZ2VyLmNsZWFyKCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLndpZGdldC5wdWJsaXNoKFwic2VsZWN0ZWRcIiwgdW5kZWZpbmVkKTtcclxuICAgIHRoaXMuX3ByZXZpb3VzX2lucHV0ID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5fY29tcHV0aW5nX2NvcnJlY3Rpb24gPSBmYWxzZTtcclxuICB9XHJcbiAgX2NsZWFyUmVzdWx0KCkge1xyXG4gICAgdGhpcy5fcmVzZXRNb3ZlbWVudCgpO1xyXG4gICAgdGhpcy5fcHJldmlvdXNfaW5wdXQgPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLnBhcnNlZF9pbnB1dCA9IHVuZGVmaW5lZDtcclxuICAgIHRoaXMuX3Jlc3V0U2VhbWFwaG9yZSA9IHVuZGVmaW5lZDtcclxuICAgIHRoaXMuX2NsZWFyUHJlZGljdG9ycygpXHJcbiAgfVxyXG5cclxuICBpc1N1Z2dlc3Rpb25zT3BlbigpIHtcclxuICAgIGxldCBwcmVkaWN0aW9ucyA9IHRoaXMud2lkZ2V0LmdldChjb25zdHMoXCJTRUFSQ0hfUkVTVUxUU19LRVlcIikpXHJcbiAgICByZXR1cm4gcHJlZGljdGlvbnMgJiYgcHJlZGljdGlvbnMubGVuZ3RoID4gMFxyXG4gIH1cclxuICBwcm9jZXNzUmVzdWx0KHByZWRpY3Rpb25MaXN0LCBsb2FkZXIpIHtcclxuICAgIGlmICghcHJlZGljdGlvbkxpc3QuaXNGb3JJbnB1dCh0aGlzLnBhcnNlZF9pbnB1dCwgdGhpcy5fcHJldmlvdXNfaW5wdXQpKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICghcHJlZGljdGlvbkxpc3QuaXNFbXB0eSgpKSB7XHJcbiAgICAgIHRoaXMucHJlZGljdG9uX21lcmdlci5tZXJnZShwcmVkaWN0aW9uTGlzdC5wcmVkaWN0aW9ucyk7XHJcbiAgICAgIGxldCBjb3VudGVyID0gbmV3IFRvcGljQ291bnRlcihsb2FkZXIpO1xyXG4gICAgICB0aGlzLnByZWRpY3Rpb25zID0gY291bnRlci5jb21wdXRlQ291bnRzKHRoaXMucHJlZGljdGlvbnMsIHRoaXMucGFyc2VkX2lucHV0KTtcclxuICAgIH1cclxuICAgIHRoaXMuX3Jlc3V0U2VhbWFwaG9yZS5zaWduYWwoKTtcclxuICB9XHJcbiAgb25SZXN1bHRDb21wbGV0ZSgpIHtcclxuICAgIGlmICh0aGlzLm5lZWRDb3JyZWN0aW9uKCkpIHtcclxuICAgICAgdGhpcy5kb0NvcnJlY3Rpb24oKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMucHJlZGljdGlvbnMuc3BsaWNlKHRoaXMubWF4X3ByZWRpY3Rpb25zKTtcclxuICAgICAgdGhpcy53aWRnZXQucHVibGlzaChjb25zdHMoXCJTRUFSQ0hfUkVTVUxUU19LRVlcIiksIHRoaXMucHJlZGljdGlvbnMpO1xyXG4gICAgICB0aGlzLl9jbGVhclJlc3VsdCgpO1xyXG4gICAgfVxyXG4gIH1cclxuICBuZWVkQ29ycmVjdGlvbigpIHtcclxuICAgIHJldHVybiAhdGhpcy5fY29tcHV0aW5nX2NvcnJlY3Rpb24gJiZcclxuICAgICAgdGhpcy5wcmVkaWN0aW9ucy5sZW5ndGggPT09IDAgJiZcclxuICAgICAgdGhpcy5wYXJzZWRfaW5wdXQudHJpbW1lZFRleHQgIT09IFwiXCI7XHJcbiAgfVxyXG4gIGRvQ29ycmVjdGlvbigpIHtcclxuICAgIHRoaXMuX2NvbXB1dGluZ19jb3JyZWN0aW9uID0gdHJ1ZTtcclxuICAgIHRoaXMuX3Jlc3V0U2VhbWFwaG9yZSA9IG5ldyBTZWFtYXBob3JlKHRoaXMub25SZXN1bHRDb21wbGV0ZS5iaW5kKHRoaXMpKTtcclxuICAgIHRoaXMuX3Jlc3V0U2VhbWFwaG9yZS53YWl0KHRoaXMuX2NvcnJlY3RvcnMubGVuZ3RoKVxyXG4gICAgXy5lYWNoKHRoaXMuX2NvcnJlY3RvcnMsIChjb3JyZWN0b3IpID0+IHtcclxuICAgICAgY29ycmVjdG9yLmdldENvcnJlY3Rpb25zKHRoaXMucGFyc2VkX2lucHV0KTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBjYW5EZWxldGUoaWQpIHtcclxuICAgIGxldCBwcmVkaWN0aW9uID0gdGhpcy5wcmVkaWN0aW9uc1tpZF07XHJcbiAgICBpZiAocHJlZGljdGlvbiA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHJldHVybiBwcmVkaWN0aW9uLnNvdXJjZSA9PT0gc2VhcmNoX2NvbnN0cy5QUkVESUNUT1JfU09VUkNFX0lELkhJU1RPUllfUFJFRElDVE9SO1xyXG4gIH1cclxuICBoYW5kbGVEZWxldGUoaWQpIHtcclxuICAgIGxldCBwcmVkaWN0aW9uID0gdGhpcy5wcmVkaWN0aW9uc1tpZF07XHJcbiAgICB0aGlzLl9kZWxldGVGcm9tSGlzdG9yeShwcmVkaWN0aW9uLnRlcm0pO1xyXG4gICAgdGhpcy5fcmVtb3ZlUHJlZGljdGlvbihpZCk7XHJcbiAgICB0aGlzLndpZGdldC5wdWJsaXNoKFwiaGlzdG9yeV9kZWxldGVkXCIsIHRydWUpO1xyXG4gIH1cclxuXHJcbiAgX3JlbW92ZVByZWRpY3Rpb24oaWQpIHtcclxuICAgIHRoaXMucHJlZGljdGlvbnMuc3BsaWNlKGlkLCAxKTtcclxuICAgIHRoaXMud2lkZ2V0LnB1Ymxpc2goY29uc3RzKFwiU0VBUkNIX1JFU1VMVFNfS0VZXCIpLCB0aGlzLnByZWRpY3Rpb25zKTtcclxuICB9XHJcbiAgaGFuZGxlQ2xpY2soaWQpIHtcclxuICAgIGxldCBoaXN0b3J5X2RlbGV0ZWQgPSB0aGlzLndpZGdldC5nZXQoXCJoaXN0b3J5X2RlbGV0ZWRcIik7XHJcbiAgICBpZiAoaGlzdG9yeV9kZWxldGVkKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGxldCBwcmVkaWN0aW9uID0gdGhpcy5wcmVkaWN0aW9uc1tpZF07XHJcbiAgICBpZiAocHJlZGljdGlvbiA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgbmV3X3RleHQgPSBwcmVkaWN0aW9uLnRlcm07XHJcbiAgICB0aGlzLl9hZGRUb0hpc3RvcnkobmV3X3RleHQpO1xyXG4gICAgdGhpcy53aWRnZXQucHVibGlzaChjb25zdHMoJ0tFWV9TRUFSQ0hfVEVSTScpLCBuZXdfdGV4dCk7XHJcbiAgICB0aGlzLndpZGdldC5wdWJsaXNoKHJoLmNvbnN0cygnRVZUX1NFQVJDSF9URVJNJyksIHRydWUpO1xyXG5cclxuICB9XHJcbiAgaGFuZGxlRm9jdXNPdXQoa2V5LCBmb2N1c19rZXkpIHtcclxuICAgIGxldCBoaXN0b3J5X2RlbGV0ZWQgPSB0aGlzLndpZGdldC5nZXQoXCJoaXN0b3J5X2RlbGV0ZWRcIik7XHJcbiAgICBpZiAoIWhpc3RvcnlfZGVsZXRlZCkge1xyXG4gICAgICB0aGlzLndpZGdldC5wdWJsaXNoKGtleSwgZmFsc2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy53aWRnZXQucHVibGlzaChcImhpc3RvcnlfZGVsZXRlZFwiLCBmYWxzZSk7XHJcbiAgICAgIHRoaXMud2lkZ2V0LnB1Ymxpc2goZm9jdXNfa2V5LCB0cnVlKTtcclxuICAgIH1cclxuICB9XHJcbiAgZ2V0Rmlyc3RTdWdnZXN0aW9uSW5kZXgobGVuZ3RoLCBkb3duKSB7XHJcbiAgICByZXR1cm4gZG93biA/IDAgOiBsZW5ndGggLSAxO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHByZWRpY3Rpb25zKCkge1xyXG4gICAgcmV0dXJuIHRoaXMucHJlZGljdG9uX21lcmdlci5pdGVtcztcclxuICB9XHJcbiAgc2V0IHByZWRpY3Rpb25zKHByZWRpY3Rpb25zKSB7XHJcbiAgICB0aGlzLnByZWRpY3Rvbl9tZXJnZXIgPSBuZXcgUHJlZGljdG9uTWVyZ2VyKHByZWRpY3Rpb25zKTtcclxuICB9XHJcblxyXG4gIGdldE5leHRTdWdnZXN0aW9uSW5kZXgoY3Vycl9zZWxlY3RlZCwgbGVuZ3RoLCBkb3duKSB7XHJcbiAgICBsZXQgbW92ZSA9IGRvd24gPyAxIDogbGVuZ3RoIC0gMTtcclxuICAgIGN1cnJfc2VsZWN0ZWQgPSAoY3Vycl9zZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSA/IDAgOiBjdXJyX3NlbGVjdGVkO1xyXG4gICAgY3Vycl9zZWxlY3RlZCA9IChjdXJyX3NlbGVjdGVkICsgbW92ZSkgJSBsZW5ndGg7XHJcbiAgICByZXR1cm4gY3Vycl9zZWxlY3RlZDtcclxuICB9XHJcblxyXG4gIGhhbmRsZUFycm93S2V5KGtleUV2dCkge1xyXG4gICAgbGV0IGN1cnJfc2VsZWN0ZWQgPSB0aGlzLndpZGdldC5nZXQoXCJzZWxlY3RlZFwiKTtcclxuICAgIGxldCBkb3duID0ga2V5RXZ0LmtleUNvZGUgPT09IDQwO1xyXG4gICAgbGV0IGxlbmd0aCA9IHRoaXMuZ2V0UHJlZGljdGlvbnNMZW5ndGgoKTtcclxuICAgIGlmIChsZW5ndGggPiAwKSB7XHJcbiAgICAgIGlmIChjdXJyX3NlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBjdXJyX3NlbGVjdGVkID0gdGhpcy5nZXRGaXJzdFN1Z2dlc3Rpb25JbmRleChsZW5ndGgsIGRvd24pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGN1cnJfc2VsZWN0ZWQgPSB0aGlzLmdldE5leHRTdWdnZXN0aW9uSW5kZXgoY3Vycl9zZWxlY3RlZCwgbGVuZ3RoLCBkb3duKTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLndpZGdldC5wdWJsaXNoKFwic2VsZWN0ZWRcIiwgY3Vycl9zZWxlY3RlZCk7XHJcbiAgICAgIGxldCBuZXdfdGV4dCA9IHRoaXMuZ2V0TmV3SW5wdXRUZXh0KHRoaXMucmVzdWx0c1tjdXJyX3NlbGVjdGVkXSk7XHJcbiAgICAgIHRoaXMud2lkZ2V0LnB1Ymxpc2goY29uc3RzKCdLRVlfU0VBUkNIX1RFUk0nKSwgbmV3X3RleHQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0TmV3SW5wdXRUZXh0KHByZWRpY3Rpb24pIHtcclxuICAgIHJldHVybiBwcmVkaWN0aW9uLnRlcm07XHJcbiAgfVxyXG5cclxuICBnZXRQcmVkaWN0aW9uc0xlbmd0aCgpIHtcclxuICAgIGxldCBsZW5ndGg7XHJcbiAgICB0aGlzLnJlc3VsdHMgPSB0aGlzLndpZGdldC5nZXQoY29uc3RzKFwiU0VBUkNIX1JFU1VMVFNfS0VZXCIpKTtcclxuICAgIGlmICh0aGlzLnJlc3VsdHMpIHtcclxuICAgICAgbGVuZ3RoID0gdGhpcy5yZXN1bHRzLmxlbmd0aDtcclxuICAgIH1cclxuICAgIHJldHVybiBsZW5ndGg7XHJcbiAgfVxyXG5cclxuICBjbG9zZVN1Z2dlc3Rpb25zKCkge1xyXG4gICAgdGhpcy5fY2xlYXJSZXN1bHQoKTtcclxuICAgIHRoaXMud2lkZ2V0LnB1Ymxpc2goXCJzZWxlY3RlZFwiLCB1bmRlZmluZWQpO1xyXG4gICAgdGhpcy5vcmlnaW5hbF9wYXJzZWRfaW5wdXQgPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLndpZGdldC5wdWJsaXNoKGNvbnN0cyhcIlNFQVJDSF9SRVNVTFRTX0tFWVwiKSwgW10pO1xyXG4gIH1cclxuICBfZGVsZXRlRnJvbUhpc3RvcnkodGV4dCkge1xyXG4gICAgaGlzdG9yeV9yZWFkZXIuZGVsZXRlKHRleHQpO1xyXG4gICAgdGhpcy5fc2F2ZUhpc3RvcnkoKTtcclxuICB9XHJcbiAgX2FkZFRvSGlzdG9yeSh0ZXh0KSB7XHJcbiAgICBpZiAodGV4dCAmJiB0ZXh0ICE9PSBcIlwiKSB7XHJcbiAgICAgIGhpc3RvcnlfcmVhZGVyLmFkZCh7XHJcbiAgICAgICAgdGV4dDogdGV4dC50cmltKCksXHJcbiAgICAgICAgY291bnQ6IDEwXHJcbiAgICAgIH0pOyAvLyBUT0RPIGNoYW5nZVxyXG4gICAgICB0aGlzLl9zYXZlSGlzdG9yeSgpO1xyXG4gICAgfVxyXG4gIH1cclxuICBfc2F2ZUhpc3RvcnkoKSB7XHJcbiAgICByaC5zdG9yYWdlLnBlcnNpc3QoY29uc3RzKCdQUkVWX1NFQVJDSF9LRVknKSwgaGlzdG9yeV9yZWFkZXIuZ2V0SGlzdG9yeSgpKTtcclxuICB9XHJcbiAgaGFuZGxlU2hvd1N1Z2dlc3Rpb24oa2V5RXZ0KSB7XHJcbiAgICBpZiAoa2V5RXZ0LnRleHQgPT09IFwiXCIgfHwgc2VhcmNoX3V0aWxzLnNob3VsZFNob3dTdWdnZXN0aW9uKGtleUV2dCkgPT09IGZhbHNlKSB7XHJcbiAgICAgIHRoaXMuY2xvc2VTdWdnZXN0aW9ucygpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5zaG93U3VnZ2VzdGlvbnMoa2V5RXZ0KTtcclxuICAgIH1cclxuICB9XHJcbiAgaGFuZGxlUmV0dXJuKGtleUV2dCkge1xyXG4gICAgaWYgKGtleUV2dC50ZXh0ICE9PSBcIlwiKSB7XHJcbiAgICAgIHRoaXMuX2FkZFRvSGlzdG9yeShrZXlFdnQudGV4dCk7XHJcbiAgICAgIHRoaXMuY2xvc2VTdWdnZXN0aW9ucygpO1xyXG4gICAgICB0aGlzLndpZGdldC5wdWJsaXNoKGNvbnN0cygnS0VZX1NFQVJDSF9URVJNJyksIGtleUV2dC50ZXh0KVxyXG4gICAgICB0aGlzLndpZGdldC5wdWJsaXNoKGNvbnN0cygnRVZUX1NFQVJDSF9URVJNJyksIHRydWUpXHJcbiAgICB9XHJcbiAgfVxyXG4gIF9pc01vdmVtZW50S2V5KGtleUNvZGUpIHtcclxuICAgIHJldHVybiBbMzgsIDM5LCA0MF0uaW5kZXhPZihrZXlDb2RlKSA+PSAwO1xyXG4gIH1cclxuICBfcmVzZXRNb3ZlbWVudCgpIHtcclxuICAgIHRoaXMub3JpZ2luYWxfcGFyc2VkX2lucHV0ID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy53aWRnZXQucHVibGlzaChcInNlbGVjdGVkXCIsIHVuZGVmaW5lZCk7XHJcbiAgfVxyXG4gIF9pc0hhbmRsaW5nQ3Vyc29yTW92ZSgpIHtcclxuICAgIGxldCBjdXJyX3NlbGVjdGVkID0gdGhpcy53aWRnZXQuZ2V0KFwic2VsZWN0ZWRcIik7XHJcbiAgICByZXR1cm4gY3Vycl9zZWxlY3RlZCAhPT0gdW5kZWZpbmVkO1xyXG4gIH1cclxuICBpbml0SGFuZGxlS2V5SGFzaCgpIHtcclxuICAgIHRoaXMuaGFuZGxlX2tleV9oYXNoID0ge1xyXG4gICAgICB1cDogdGhpcy5oYW5kbGVBcnJvd0tleS5iaW5kKHRoaXMpLFxyXG4gICAgICBkb3duOiB0aGlzLmhhbmRsZUFycm93S2V5LmJpbmQodGhpcyksXHJcbiAgICAgIGJhY2tzcGFjZTogdGhpcy5oYW5kbGVCYWNrU3BhY2UuYmluZCh0aGlzKSxcclxuICAgICAgcmV0dXJuOiB0aGlzLmhhbmRsZVJldHVybi5iaW5kKHRoaXMpLFxyXG4gICAgICBkZWZhdWx0OiB0aGlzLmhhbmRsZVNob3dTdWdnZXN0aW9uLmJpbmQodGhpcyksXHJcbiAgICAgIGVzY2FwZTogdGhpcy5oYW5kbGVFc2NhcGUuYmluZCh0aGlzKSxcclxuICAgICAgcmlnaHQ6IHRoaXMuaGFuZGxlUmlnaHQuYmluZCh0aGlzKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlUmlnaHQoa2V5RXZ0KSB7XHJcbiAgICBpZiAoIXRoaXMuX2lzSGFuZGxpbmdDdXJzb3JNb3ZlKCkpIHtcclxuICAgICAgdGhpcy5fcmVzZXRNb3ZlbWVudCgpXHJcbiAgICAgIHJldHVybiB0aGlzLmhhbmRsZVNob3dTdWdnZXN0aW9uKGtleUV2dClcclxuICAgIH1cclxuICAgIGlmIChzZWFyY2hfdXRpbHMuc2hvdWxkQXBwZW5kU3BhY2Uoa2V5RXZ0KSkge1xyXG4gICAgICBrZXlFdnQudGV4dCArPSBcIiBcIjtcclxuICAgICAga2V5RXZ0LnNlbFN0YXJ0ICs9IDFcclxuICAgICAgdGhpcy53aWRnZXQucHVibGlzaChjb25zdHMoJ0tFWV9TRUFSQ0hfVEVSTScpLCBrZXlFdnQudGV4dCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9yZXNldE1vdmVtZW50KCk7XHJcbiAgICB0aGlzLmhhbmRsZVNob3dTdWdnZXN0aW9uKGtleUV2dClcclxuICAgIHJldHVybiBmYWxzZVxyXG4gIH1cclxuICBoYW5kbGVCYWNrU3BhY2Uoa2V5RXZ0KSB7XHJcbiAgICByZXR1cm4gdGhpcy5oYW5kbGVTaG93U3VnZ2VzdGlvbihrZXlFdnQpO1xyXG4gIH1cclxuICBoYW5kbGVFc2NhcGUoKSB7XHJcbiAgICB0aGlzLmNsb3NlU3VnZ2VzdGlvbnMoKTtcclxuICB9XHJcbiAgaGFuZGxlS2V5KGV2ZW50KSB7XHJcblxyXG4gICAgbGV0IGtleUNvZGUgPSBldmVudC5rZXlDb2RlO1xyXG4gICAgbGV0IGtleUV2dCA9IHtcclxuICAgICAga2V5Q29kZToga2V5Q29kZSxcclxuICAgICAgc2VsU3RhcnQ6IGV2ZW50LnRhcmdldC5zZWxlY3Rpb25TdGFydCxcclxuICAgICAgdGV4dDogZXZlbnQudGFyZ2V0LnZhbHVlXHJcbiAgICB9XHJcbiAgICBpZiAoIXRoaXMuX2lzTW92ZW1lbnRLZXkoa2V5Q29kZSkpIHtcclxuICAgICAgdGhpcy5fcmVzZXRNb3ZlbWVudCgpO1xyXG4gICAgfVxyXG4gICAgbGV0IGluZGV4ID0gXy5nZXRLZXlJbmRleChrZXlDb2RlKTtcclxuXHJcbiAgICBpZiAoaW5kZXggPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIGxldCBoYW5kbGVGbiA9IHRoaXMuaGFuZGxlX2tleV9oYXNoW2luZGV4XTtcclxuICAgIGlmIChoYW5kbGVGbikge1xyXG4gICAgICByZXR1cm4gaGFuZGxlRm4oa2V5RXZ0KTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbnJoLmNvbnRyb2xsZXIoJ1NlYXJjaENvbnRyb2xsZXInLCBTZWFyY2hDb250cm9sbGVyKSIsImNsYXNzIFNvcnRlZFNldHtcclxuICBjb25zdHJ1Y3RvcihzZXQpe1xyXG4gICAgdGhpcy5fc2V0ID0gc2V0IHx8IFtdO1xyXG4gICAgdGhpcy5faW5pdGlhbGlzZWQgPSBmYWxzZTtcclxuICB9XHJcbiAgaW50ZXJzZWN0KG90aGVyKXtcclxuICAgIGlmKCFBcnJheS5pc0FycmF5KG90aGVyKSl7XHJcbiAgICAgIG90aGVyID0gb3RoZXIuc2V0O1xyXG4gICAgfVxyXG4gICAgbGV0IG5ld19zZXQgPSAgW107XHJcbiAgICBsZXQgY291bnQgPTAgO1xyXG4gICAgbGV0IGkgPSAwOyBsZXQgaj0gMDtcclxuICAgIGZvcig7IGkgPCB0aGlzLl9zZXQubGVuZ3RoICYmIGogPCBvdGhlci5sZW5ndGg7KXtcclxuICAgICAgaWYodGhpcy5fc2V0W2ldIDwgb3RoZXJbal0pIHtcclxuICAgICAgICBpKys7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAodGhpcy5fc2V0W2ldID4gb3RoZXJbal0pIHtcclxuICAgICAgICBqKys7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgbmV3X3NldFtjb3VudCsrXSA9IHRoaXMuX3NldFtpXTtcclxuICAgICAgICBpKys7IGorKztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy5fc2V0ID0gbmV3X3NldDtcclxuICB9XHJcbiAgaW50ZXJzZWN0T3JTZXQob3RoZXIpe1xyXG4gICAgaWYodGhpcy5faW5pdGlhbGlzZWQpe1xyXG4gICAgICB0aGlzLmludGVyc2VjdChvdGhlcilcclxuICAgIH1cclxuICAgIGVsc2V7XHJcbiAgICAgIGlmKCFBcnJheS5pc0FycmF5KG90aGVyKSl7XHJcbiAgICAgICAgb3RoZXIgPSBvdGhlci5zZXQ7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5zZXQgPSBvdGhlclxyXG4gICAgICB0aGlzLl9pbml0aWFsaXNlZCA9IHRydWVcclxuICAgIH1cclxuICB9XHJcbiAgaW50ZXJzZWN0Q291bnQob3RoZXIpe1xyXG4gICAgaWYoIUFycmF5LmlzQXJyYXkob3RoZXIpKXtcclxuICAgICAgb3RoZXIgPSBvdGhlci5zZXQ7XHJcbiAgICB9XHJcbiAgICBsZXQgY291bnQgPSAwO1xyXG4gICAgbGV0IGkgPSAwO1xyXG4gICAgbGV0IGogPSAwO1xyXG4gICAgZm9yKDsgaSA8IHRoaXMuX3NldC5sZW5ndGggJiYgaiA8IG90aGVyLmxlbmd0aDspe1xyXG4gICAgICBpZih0aGlzLl9zZXRbaV0gPCBvdGhlcltqXSkge1xyXG4gICAgICAgIGkrKztcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmICh0aGlzLl9zZXRbaV0gPiBvdGhlcltqXSkge1xyXG4gICAgICAgIGorKztcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBjb3VudCsrO1xyXG4gICAgICAgIGkrKzsgaisrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY291bnQ7XHJcbiAgfVxyXG4gIHNldCBzZXQoc2V0KXtcclxuICAgIHRoaXMuX3NldCA9IHNldCB8fCBbXTtcclxuICB9XHJcbiAgZ2V0IHNldCgpe1xyXG4gICAgcmV0dXJuIHRoaXMuX3NldDtcclxuICB9XHJcbiAgZ2V0IGxlbmd0aCgpe1xyXG4gICAgcmV0dXJuIHRoaXMuX3NldC5sZW5ndGg7XHJcbiAgfVxyXG5cclxufVxyXG5tb2R1bGUuZXhwb3J0cyA9IFNvcnRlZFNldDtcclxuIiwiY29uc3QgU29ydGVkU2V0ID0gcmVxdWlyZSgnLi9zb3J0ZWRfc2V0Jyk7XHJcbmNvbnN0IFBhcnNlciA9IHJlcXVpcmUoJy4vaW5wdXRfcGFyc2VyJyk7XHJcbmNvbnN0IFByZWRpY3Rpb24gPSByZXF1aXJlKCcuL3ByZWRpY3Rpb24nKTtcclxuY29uc3QgcmggPSByZXF1aXJlKFwiLi4vLi4vLi4vLi4vbGliL3JoXCIpXHJcbmNvbnN0IF8gPSByaC5fO1xyXG5jb25zdCBJTkRFWCA9IHJlcXVpcmUoXCIuL2luZGljZXNcIilcclxuXHJcblxyXG5jbGFzcyBUb3BpY0NvdW50ZXJ7XHJcbiAgY29uc3RydWN0b3IobG9hZGVyKXtcclxuICAgIHRoaXMubmV3UHJlZGljdGlvbnMgPSBbXTtcclxuICAgIHRoaXMucHJlZGljdGlvblNldCA9IG5ldyBTb3J0ZWRTZXQoKTtcclxuICAgIHRoaXMuaW5wdXRTZXQgPSBuZXcgU29ydGVkU2V0KCk7XHJcbiAgICB0aGlzLl9sb2FkZXIgPSBsb2FkZXI7XHJcbiAgfVxyXG4gIGNvbXB1dGVDb3VudHMocHJlZGljdGlvbnMsIHBhcnNlZF9pbnB1dCl7XHJcbiAgICB0aGlzLm5ld1ByZWRpY3Rpb24gPSBbXTtcclxuICAgIHRoaXMucGFyc2VkX2lucHV0ID0gcGFyc2VkX2lucHV0O1xyXG4gICAgXy5lYWNoKHByZWRpY3Rpb25zLCAocHJlZGljdGlvbikgPT4ge1xyXG4gICAgICB0aGlzLmFkZFVwZGF0ZWRQcmVkaWN0aW9uKHByZWRpY3Rpb24pO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdGhpcy5uZXdQcmVkaWN0aW9ucztcclxuICB9XHJcblxyXG4gIGFkZFVwZGF0ZWRQcmVkaWN0aW9uKHByZWRpY3Rpb24pe1xyXG4gICAgbGV0IGNvdW50ID0gMTtcclxuICAgIGlmKHRoaXMuX2xvYWRlciAhPT0gdW5kZWZpbmVkKXtcclxuICAgICAgdGhpcy5jcmVhdGVQcmVkaWN0aW9uU2V0KHByZWRpY3Rpb24pO1xyXG4gICAgICBjb3VudCA9IHRoaXMuY29tcHV0ZVRvcGljQ291bnQoKTtcclxuICAgIH1cclxuICAgIGlmKGNvdW50ID4gMCl7XHJcbiAgICAgIGxldCBuZXdQcmRpY3Rpb24gPSBuZXcgUHJlZGljdGlvbihwcmVkaWN0aW9uLnRlcm0sIHByZWRpY3Rpb24ucHJvYmFiaWxpdHksIGNvdW50LCBwcmVkaWN0aW9uLnNvdXJjZSk7XHJcbiAgICAgIHRoaXMubmV3UHJlZGljdGlvbnMucHVzaChuZXdQcmRpY3Rpb24pO1xyXG4gICAgfVxyXG4gIH1cclxuICBjb21wdXRlVG9waWNDb3VudCgpe1xyXG4gICAgcmV0dXJuIHRoaXMucHJlZGljdGlvblNldC5zZXQubGVuZ3RoO1xyXG4gIH1cclxuXHJcbiAgY3JlYXRlUHJlZGljdGlvblNldChwcmVkaWN0aW9uKXtcclxuICAgIHRoaXMucHJlZGljdGlvblNldCA9IG5ldyBTb3J0ZWRTZXQoKTtcclxuICAgIGxldCBwYXJzZWRfcHJlZGljdGlvbiA9IG5ldyBQYXJzZXIocHJlZGljdGlvbi50ZXJtLCB0cnVlKTtcclxuICAgIF8uZWFjaChwYXJzZWRfcHJlZGljdGlvbi53b3JkcywgKHdvcmQsIGluZGV4KSA9PntcclxuICAgICAgdGhpcy5fYWRkV29yZFRvU2V0KHdvcmQsIHRoaXMucHJlZGljdGlvblNldCwgaW5kZXgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBpbml0SW5wdXQocGFyc2VkX2lucHV0KXtcclxuICAgIHRoaXMuaW5wdXRTZXQgPSBuZXcgU29ydGVkU2V0KCk7XHJcbiAgICBfLmVhY2gocGFyc2VkX2lucHV0LndvcmRzLCAod29yZCkgPT57XHJcbiAgICAgIHRoaXMuX2FkZFdvcmRUb1NldCh3b3JkLCB0aGlzLmlucHV0U2V0KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2FkZFdvcmRUb1NldCh3b3JkLCBzZXQpe1xyXG4gICAgaWYodGhpcy5fbG9hZGVyLmlzU3RvcFdvcmQod29yZCkpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgbGV0IHdvcmRIYXNoID0gdGhpcy5fbG9hZGVyLl9nZXRIYXNoRm9yV29yZCh3b3JkKTtcclxuICAgIGlmKHdvcmRIYXNoICYmIHdvcmRIYXNoLmxlbmd0aCA+IElOREVYLk1BUC5UT1BJQ1Mpe1xyXG4gICAgICBzZXQuaW50ZXJzZWN0T3JTZXQod29yZEhhc2hbSU5ERVguTUFQLlRPUElDU10pO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBUb3BpY0NvdW50ZXI7XHJcbiIsIlxyXG5cclxuY29uc3QgSU5ERVggPSByZXF1aXJlKCcuL2luZGljZXMnKTtcclxuXHJcbmxldCBfZXhwb3J0cyA9IHtcclxuICBnZXROZXh0TW9kZWw6IChtb2RlbF9pdGVtKSA9PntcclxuXHJcbiAgICBpZiggbW9kZWxfaXRlbSAgJiYgQXJyYXkuaXNBcnJheShtb2RlbF9pdGVtKSAmJiBtb2RlbF9pdGVtLmxlbmd0aCA+IElOREVYLk1PREVMLk5FWFRfTU9ERUwpe1xyXG4gICAgICByZXR1cm4gbW9kZWxfaXRlbVtJTkRFWC5NT0RFTC5ORVhUX01PREVMXTtcclxuICAgIH1cclxuICB9LFxyXG4gIGdldEZpcnN0TGV2ZWxOZXh0TW9kZWw6IChtb2RlbF9pdGVtLCBicHJldmlvdXMpID0+IHtcclxuICAgIGlmKG1vZGVsX2l0ZW0gJiYgQXJyYXkuaXNBcnJheShtb2RlbF9pdGVtKSl7XHJcbiAgICAgIGlmKCAhYnByZXZpb3VzICYmIG1vZGVsX2l0ZW0ubGVuZ3RoID4gSU5ERVguRklSU1RfUFJFRElDVElPTi5ORVhUKXtcclxuICAgICAgICByZXR1cm4gbW9kZWxfaXRlbVtJTkRFWC5GSVJTVF9QUkVESUNUSU9OLk5FWFRdO1xyXG4gICAgICB9XHJcbiAgICAgIGlmKCBicHJldmlvdXMgJiYgbW9kZWxfaXRlbS5sZW5ndGggPiBJTkRFWC5GSVJTVF9QUkVESUNUSU9OLlBSRVZJT1VTICl7XHJcbiAgICAgICAgcmV0dXJuIG1vZGVsX2l0ZW1bSU5ERVguRklSU1RfUFJFRElDVElPTi5QUkVWSU9VU107XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LFxyXG5cclxuICBnZXRGaXJzdFByZWRpY3Rpb246IChtb2RlbF9pdGVtKT0+IHtcclxuICAgIGlmKG1vZGVsX2l0ZW0gJiYgQXJyYXkuaXNBcnJheShtb2RlbF9pdGVtKSAmJiBtb2RlbF9pdGVtLmxlbmd0aCA+IDAgJiYgQXJyYXkuaXNBcnJheShtb2RlbF9pdGVtWzBdKSl7XHJcbiAgICAgIHJldHVybiBtb2RlbF9pdGVtWzBdO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgY29tcGFyZU5vQ2FzZSh3b3JkMSwgd29yZDIpe1xyXG4gICAgaWYoZ2xvYmFsLmNvbXBhcmUgIT09IHVuZGVmaW5lZCl7XHJcbiAgICAgIHJldHVybiBnbG9iYWwuY29tcGFyZSh3b3JkMSwgd29yZDIpO1xyXG4gICAgfVxyXG4gICAgZWxzZXtcclxuICAgICAgcmV0dXJuICh3b3JkMSA9PT0gd29yZDIpID8gMCA6IC0xO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgaGFtbWluZ0Rpc3RhbmNlKHdvcmQxLCB3b3JkMil7XHJcbiAgICBsZXQgbWluTGVuZ3RoID0gTWF0aC5taW4od29yZDEubGVuZ3RoLCB3b3JkMi5sZW5ndGgpO1xyXG4gICAgbGV0IGhhbW1pbmdEaXN0YW5jZSA9IDA7XHJcbiAgICBmb3IobGV0IGk9MDsgaTxtaW5MZW5ndGg7IGkrKyl7XHJcbiAgICAgIGlmKHdvcmQxW2ldICE9PSB3b3JkMltpXSkge1xyXG4gICAgICAgIGhhbW1pbmdEaXN0YW5jZSsrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZih3b3JkMS5sZW5ndGggPiBtaW5MZW5ndGgpIHtcclxuICAgICAgaGFtbWluZ0Rpc3RhbmNlKz0gd29yZDEubGVuZ3RoIC0gbWluTGVuZ3RoO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGhhbW1pbmdEaXN0YW5jZTtcclxuICB9LFxyXG4gIGlzUHJldmlvdXMoa2V5RXZ0KXtcclxuICAgIHJldHVybiAoa2V5RXZ0LnNlbFN0YXJ0IDwga2V5RXZ0LnRleHQubGVuZ3RoKVxyXG4gIH0sXHJcbiAgc2hvdWxkU2hvd1N1Z2dlc3Rpb24oa2V5RXZ0KXtcclxuICAgIGxldCB0ZXh0ID0ga2V5RXZ0LnRleHRcclxuICAgIGxldCBzZWxTdGFydCA9IGtleUV2dC5zZWxTdGFydFxyXG4gICAgaWYoc2VsU3RhcnQgPT09IDAgfHwgc2VsU3RhcnQgPT09IHRleHQubGVuZ3RoKXtcclxuICAgICAgcmV0dXJuIHRydWVcclxuICAgIH1cclxuICAgIGlmKHRleHQubGVuZ3RoID4gMCApeyAvLyBpZiBjdXJzb3IgaXMgYmVmb3JlIHRoZSBlbmRcclxuICAgICAgcmV0dXJuIHRleHRbc2VsU3RhcnRdID09PSAnICcgfHwgdGV4dFtzZWxTdGFydC0xXSA9PT0gJyAnXHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfSxcclxuICBzaG91bGRBcHBlbmRTcGFjZShrZXlFdnQpe1xyXG4gICAgbGV0IHRleHQgPSBrZXlFdnQudGV4dFxyXG4gICAgbGV0IHNlbFN0YXJ0ID0ga2V5RXZ0LnNlbFN0YXJ0XHJcbiAgICBpZiAodGV4dC5sZW5ndGggPiAwICYmIHNlbFN0YXJ0ID09PSB0ZXh0Lmxlbmd0aCl7Ly9jdXNyb3IgYXQgbGFzdFxyXG4gICAgICByZXR1cm4gdGV4dFt0ZXh0Lmxlbmd0aCAtMV0gIT09IFwiIFwiO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH0sXHJcblxyXG4gIGdldFNhZmVFbGVtZW50KGFyciwgaW5kZXgpe1xyXG4gICAgaWYoYXJyICYmIEFycmF5LmlzQXJyYXkoYXJyKSAmJiBhcnIubGVuZ3RoID4gaW5kZXgpIHtcclxuICAgICAgcmV0dXJuIGFycltpbmRleF07XHJcbiAgICB9XHJcbiAgfSxcclxuICBnZXRDb3VudGZyb21Nb2RlbChtb2RlbF9pdGVtKXtcclxuICAgIGlmKEFycmF5LmlzQXJyYXkobW9kZWxfaXRlbSkgJiYgbW9kZWxfaXRlbS5sZW5ndGggPiBJTkRFWC5NT0RFTC5DT1VOVCkge1xyXG4gICAgICByZXR1cm4gbW9kZWxfaXRlbVtJTkRFWC5NT0RFTC5DT1VOVF07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gMDtcclxuICB9LFxyXG4gIGdldENvdW50ZnJvbVdvcmRIYXNoKHdvcmRfaGFzaCl7XHJcbiAgICBpZihBcnJheS5pc0FycmF5KHdvcmRfaGFzaCkgJiYgd29yZF9oYXNoLmxlbmd0aCA+IElOREVYLk1BUC5DT1VOVCkge1xyXG4gICAgICByZXR1cm4gd29yZF9oYXNoW0lOREVYLk1BUC5DT1VOVF07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gMDtcclxuICB9XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IF9leHBvcnRzO1xyXG4iLCJjb25zdCBRdWVyeVByb2Nlc3NvciA9IHJlcXVpcmUoJy4vcXVlcnkvcHJvY2Vzc29yJylcclxuY29uc3QgcmggPSByZXF1aXJlKFwiLi4vLi4vLi4vLi4vbGliL3JoXCIpXHJcbmNvbnN0IF8gPSByaC5fXHJcbmNvbnN0IGNvbnN0cyA9IHJoLmNvbnN0c1xyXG5jb25zdCBMb2FkZXIgPSByZXF1aXJlKCcuL3F1ZXJ5L2xvYWRlcicpXHJcbmNvbnN0IFJlc3VsdE1lcmdlciA9IHJlcXVpcmUoJy4uL2NvbW1vbi9tZXJnZXInKVxyXG5jb25zdCBTZWFtYXBob3JlID0gcmVxdWlyZSgnLi4vLi4vLi4vY29tbW9uL2NvdW50aW5nX3NlYW1hcGhvcmUnKVxyXG5jb25zdCBTZWFyY2hSZXN1bHQgPSByZXF1aXJlKCcuL3Jlc3VsdCcpXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIFNlYXJjaEhhbmRsZXJ7XHJcbiAgY29uc3RydWN0b3Iod2lkZ2V0LCBtYXhfcmVzdWx0cyA9MjApIHtcclxuICAgIHRoaXMud2lkZ2V0ID0gd2lkZ2V0XHJcbiAgICB0aGlzLmluaXREb25lID0gZmFsc2VcclxuICAgIHRoaXMubWF4X3Jlc3VsdHMgPSBtYXhfcmVzdWx0cztcclxuICAgIHRoaXMucXVlcnlQcm9jZXNzb3JzID0gW11cclxuICAgIHRoaXMubWVyZ2VyID0gbmV3IFJlc3VsdE1lcmdlcihbXSlcclxuICAgIHRoaXMuX3Jlc3V0U2VhbWFwaG9yZSA9IG5ldyBTZWFtYXBob3JlKHRoaXMub25SZXN1bHRDb21wbGV0ZS5iaW5kKHRoaXMpKTtcclxuICAgIHRoaXMud2lkZ2V0Lm1vZGVsLnN1YnNjcmliZShjb25zdHMoJ0tFWV9QUk9KRUNUX0xJU1QnKSwgKCkgPT4ge1xyXG4gICAgICB0aGlzLmluaXQoKVxyXG4gICAgfSlcclxuICB9XHJcbiAgXHJcbiAgaW5pdCgpIHtcclxuICAgIGlmICghdGhpcy5pbml0RG9uZSkge1xyXG4gICAgICBsZXQgbG9hZGVycyA9IHRoaXMuX2NyZWF0ZUxvYWRlcnMoKVxyXG4gICAgICBfLmVhY2gobG9hZGVycywgKGxvYWRlciwgaWQpID0+IHtcclxuICAgICAgICBsb2FkZXIuaW5pdChpZCwgdGhpcy5hZGRQcm9jZXNzb3JzLmJpbmQodGhpcykpXHJcbiAgICAgIH0pXHJcbiAgICAgIHRoaXMuaW5pdERvbmUgPSB0cnVlXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhZGRQcm9jZXNzb3JzKGxvYWRlcikge1xyXG4gICAgdGhpcy5xdWVyeVByb2Nlc3NvcnMucHVzaChuZXcgUXVlcnlQcm9jZXNzb3IobG9hZGVyKSlcclxuICB9XHJcbiAgZ2V0IHByb2plY3RQYXRocygpIHtcclxuICAgIHJldHVybiByaC5tb2RlbC5nZXQocmguY29uc3RzKCdLRVlfUFJPSkVDVF9MSVNUJykpXHJcbiAgfVxyXG5cclxuICBfY3JlYXRlTG9hZGVycygpIHtcclxuICAgIHJldHVybiBfLm1hcCh0aGlzLnByb2plY3RQYXRocywgKHBhdGgpID0+IHtcclxuICAgICAgcmV0dXJuIG5ldyBMb2FkZXIocGF0aClcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBzaG93U2VhcmNoUmVzdWx0cyh0ZXh0KSB7XHJcbiAgICBsZXQgaXNOZXdRdWVyeSA9IF8uZmluZCh0aGlzLnF1ZXJ5UHJvY2Vzc29ycywgcHJvY2Vzc29yID0+IHByb2Nlc3Nvci5pc05ld1F1ZXJ5KHRleHQsIHRoaXMuc2VhcmNoT3B0cykpXHJcbiAgICBpZihpc05ld1F1ZXJ5KXtcclxuICAgICAgdGhpcy5tZXJnZXIgPSBuZXcgUmVzdWx0TWVyZ2VyKFtdKVxyXG4gICAgICB0aGlzLl9yZXN1dFNlYW1hcGhvcmUgPSBuZXcgU2VhbWFwaG9yZSh0aGlzLm9uUmVzdWx0Q29tcGxldGUuYmluZCh0aGlzKSk7XHJcbiAgICAgIHRoaXMuX3Jlc3V0U2VhbWFwaG9yZS53YWl0KHRoaXMucHJvY2Vzc29yQ291bnQpXHJcbiAgICAgIC8vcmgubW9kZWwucHVibGlzaChyaC5jb25zdHMoJ0VWVF9TRUFSQ0hfSU5fUFJPR1JFU1MnKSwgdHJ1ZSwge3N5bmM6IHRydWV9KTtcclxuICAgICAgLy9yaC5tb2RlbC5wdWJsaXNoKHJoLmNvbnN0cygnS0VZX1NFQVJDSF9QUk9HUkVTUycpLCAwLCB7c3luYzogdHJ1ZX0pO1xyXG4gICAgICBfLmVhY2godGhpcy5xdWVyeVByb2Nlc3NvcnMsIHByb2Nlc3NvciA9PntcclxuICAgICAgICBwcm9jZXNzb3Iuc2VhcmNoKHRleHQsIHRoaXMuc2VhcmNoT3B0cywgdGhpcy50b3BpY0NhbGxiYWNrLmJpbmQodGhpcyksIHRoaXMub25TZWFyY2hSZXN1bHRzLmJpbmQodGhpcykpXHJcbiAgICAgICAgbGV0IGdsb3NzYXJ5UmVzdWx0ID0gcHJvY2Vzc29yLnNlYXJjaEdsb3NzYXJ5KHRleHQpXHJcbiAgICAgICAgdGhpcy5wcm9jZXNzR2xvc3NhcnlSZXN1bHRzKHRleHQsIGdsb3NzYXJ5UmVzdWx0KVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICAgIFxyXG4gIFxyXG4gIGdldCBwcm9jZXNzb3JDb3VudCgpIHtcclxuICAgIHJldHVybiB0aGlzLnF1ZXJ5UHJvY2Vzc29ycy5sZW5ndGhcclxuICB9XHJcbiAgb25TZWFyY2hSZXN1bHRzKHRleHQsIHNlYXJjaFJlc3VsdCkge1xyXG4gICAgdGhpcy5wcm9jZXNzVG9waWNzUmVzdWx0cyh0ZXh0LCBzZWFyY2hSZXN1bHQpXHJcbiAgICB0aGlzLl9yZXN1dFNlYW1hcGhvcmUuc2lnbmFsKClcclxuICB9XHJcblxyXG4gIG9uUmVzdWx0Q29tcGxldGUoKSB7XHJcbiAgICB0aGlzLndpZGdldC5wdWJsaXNoKHJoLmNvbnN0cygnRVZUX1NFQVJDSF9JTl9QUk9HUkVTUycpLCBmYWxzZSwge1xyXG4gICAgICBzeW5jOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIGxldCByZXN1bHRzUGFyYW1zID0gXy5tYXBUb0VuY29kZWRTdHJpbmcoXy5leHRlbmQoe1xyXG4gICAgICByaHNlYXJjaDogdGhpcy50ZXh0XHJcbiAgICB9IC8qLCB7IHJoc3luczogc2VhcmNoUmVzdWx0cy5zeW5zIH0qLykpXHJcbiAgICB0aGlzLndpZGdldC5wdWJsaXNoKGNvbnN0cygnS0VZX1NFQVJDSF9SRVNVTFRfUEFSQU1TJyksIHJlc3VsdHNQYXJhbXMpXHJcbiAgICB0aGlzLndpZGdldC5wdWJsaXNoKCcucC5zZWFyY2hyZXN1bHRzJywgdGhpcy5tZXJnZXIuaXRlbXMpXHJcbiAgfVxyXG4gIGdldCBzZWFyY2hPcHRzKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgYW5kU2VhcmNoOiByaC5tb2RlbC5nZXQocmguY29uc3RzKCdLRVlfQU5EX1NFQVJDSCcpKSA9PT0gJzEnLFxyXG4gICAgICBjYnQ6IHJoLm1vZGVsLmNnZXQoJ0tFWV9UQUdfRVhQUkVTU0lPTicpLFxyXG4gICAgICBvcmlnaW46IHJoLm1vZGVsLmNnZXQoJ0tFWV9UT1BJQ19PUklHSU4nKVxyXG4gICAgfVxyXG4gIH1cclxuICB0b3BpY0NhbGxiYWNrKGlkLCBzdW1tYXJ5LCB1cmwpIHtcclxuICAgIHRoaXMud2lkZ2V0LnB1Ymxpc2goYC5wLnNlYXJjaHN1bW1hcnkke2lkfWAsIHN1bW1hcnkpXHJcbiAgICB0aGlzLndpZGdldC5wdWJsaXNoKGAucC5zZWFyY2h1cmwke2lkfWAsIHVybClcclxuICB9XHJcbiAgcHJvY2Vzc0dsb3NzYXJ5UmVzdWx0cyh0ZXh0LCBnbG9zc2FyeV9yZXN1bHQpIHtcclxuICAgIGxldCB0ZXJtID0gZ2xvc3NhcnlfcmVzdWx0ICYmIE9iamVjdC5rZXlzKGdsb3NzYXJ5X3Jlc3VsdClbMF1cclxuICAgIHRoaXMud2lkZ2V0LnB1Ymxpc2goY29uc3RzKCdLRVlfR0xPU1NBUllfUkVTVUxUX1RFUk0nKSwgdGVybSlcclxuICAgIHRoaXMud2lkZ2V0LnB1Ymxpc2goY29uc3RzKCdLRVlfR0xPU1NBUllfUkVTVUxUJyksIGdsb3NzYXJ5X3Jlc3VsdFt0ZXJtXSlcclxuICB9XHJcblxyXG4gIHByb2Nlc3NUb3BpY3NSZXN1bHRzKHRleHQsIHRvcGljUmVzdWx0cykge1xyXG4gICAgdGhpcy50ZXh0ID0gdGV4dFxyXG4gICAgbGV0IHByb2Nlc3NlZFJlc3VsdCA9IF8ubWFwKHRvcGljUmVzdWx0cywgcmVzdWx0ID0+IG5ldyBTZWFyY2hSZXN1bHQocmVzdWx0KSlcclxuICAgIHRoaXMubWVyZ2VyLm1lcmdlKHByb2Nlc3NlZFJlc3VsdClcclxuICB9XHJcbiAgXHJcbn0iLCJtb2R1bGUuZXhwb3J0cyA9IGNsYXNzIFNlYXJjaE1ldGFkYXRhIHtcclxuICBjb25zdHJ1Y3RvcihkYXRhKSB7XHJcbiAgICB0aGlzLmRhdGEgPSBKU09OLnBhcnNlKGRhdGEpXHJcbiAgfVxyXG4gIGdldCBzZXR0aW5ncygpIHtcclxuICAgIHJldHVybiB0aGlzLmRhdGEuc2V0dGluZ3NcclxuICB9XHJcbiAgZ2V0IHRvcGljRGF0YSgpIHtcclxuICAgIHJldHVybiB0aGlzLmRhdGEubWV0YWRhdGEgXHJcbiAgfVxyXG4gIGdldFRvcGljRGF0YShpZCkge1xyXG4gICAgcmV0dXJuIHRoaXMudG9waWNEYXRhW2lkXSAgICBcclxuICB9XHJcblxyXG4gIGdldFRvcGljU3VtbWFyeShpZCkge1xyXG4gICAgcmV0dXJuIHRoaXMudG9waWNEYXRhW2lkXSAmJiB0aGlzLnRvcGljRGF0YVtpZF0uc3VtbWFyeVxyXG4gIH1cclxuXHJcbiAgZ2V0VG9waWNOZXh0SWQoaWQpIHtcclxuICAgIHJldHVybiB0aGlzLnRvcGljRGF0YVtpZF0gJiYgdGhpcy50b3BpY0RhdGFbaWRdLm5leHRcclxuICB9XHJcblxyXG4gIGdldCBjb250ZXh0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuc2V0dGluZ3MuY29udGV4dFxyXG4gIH1cclxuICBcclxuICBnZXQgZmllbGRzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuc2V0dGluZ3MuZmllbGRzXHJcbiAgfVxyXG59IiwiY29uc3QgcmggPSByZXF1aXJlKFwiLi4vLi4vLi4vLi4vLi4vbGliL3JoXCIpXHJcbmNvbnN0IF8gPSByaC5fXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIENidEZpbHRlciB7XHJcbiAgY29uc3RydWN0b3IoZmllbGRzLCBvcmlnaW4sIHRhZ0V4cHJzKSB7XHJcbiAgICB0aGlzLmZpbGVkcyA9IGZpZWxkc1xyXG4gICAgdGhpcy5vcmlnaW4gPSBvcmlnaW5cclxuICAgIHRoaXMudGFnRXhwcnMgPSB0YWdFeHByc1xyXG4gIH1cclxuICBmaWx0ZXIoaXRlbUxpc3QpIHtcclxuICAgIHJldHVybiBfLnJlZHVjZShpdGVtTGlzdCwgKGZpbHRlcmVkLCBpdGVtKSA9PiBmaWx0ZXJlZCB8fCB0aGlzLl9pc0ZpbHRlcmQoaXRlbSksIGZhbHNlKVxyXG4gIH1cclxuICBfaXNGaWx0ZXJkKGl0ZW0pIHtcclxuICAgIGxldCBjYnQgPSB0aGlzLmdldENidChpdGVtKVxyXG4gICAgcmV0dXJuIGNidCAmJiB0aGlzLl9pc0ZpbHRlcmVkQ2J0KGNidClcclxuXHJcbiAgfVxyXG4gIF9pc0ZpbHRlcmVkQ2J0KGNidCkge1xyXG4gICAgbGV0IGlkcyA9IGNidC5zcGxpdCgnOycpXHJcbiAgICByZXR1cm4gIV8uYW55KGlkcywgKGlkKSAgPT4ge1xyXG4gICAgICByZXR1cm4gXy5ldmFsVGFnRXhwcmVzc2lvbihpZCwgdGhpcy50YWdFeHBycywgdGhpcy5vcmlnaW4pXHJcbiAgICB9KVxyXG4gICAgXHJcbiAgICBcclxuICB9XHJcbiAgZ2V0Q2J0KGl0ZW0pIHtcclxuICAgIHJldHVybiBpdGVtICYmIGl0ZW0uYXR0cmlidXRlc1xyXG4gICAgICAmJiBpdGVtLmF0dHJpYnV0ZXMubGVuZ3RoID4gMCAmJiBfLm1hcChpdGVtLmF0dHJpYnV0ZXMsIGF0dHIgPT4ge1xyXG4gICAgICAgIHJldHVybiBhdHRyLnZhbHVlXHJcbiAgICAgIH0pLmpvaW4oXCI7XCIpXHJcbiAgfVxyXG59IiwibGV0IGx1bnIgPSByZXF1aXJlICgnbHVucicpXHJcbmxldCBTeW5vbnltbnMgPSByZXF1aXJlKCcuLi8uLi9jb21tb24vc3lub255bW5zJylcclxuY29uc3QgcmggPSByZXF1aXJlKFwiLi4vLi4vLi4vLi4vLi4vbGliL3JoXCIpXHJcbmNvbnN0IF8gPSByaC5fXHJcblxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBjbGFzcyBTZWFyY2hEYntcclxuICBjb25zdHJ1Y3Rvcihjb250ZW50LCBzZXR0aW5ncyl7XHJcbiAgICB0aGlzLmluaXQoY29udGVudCwgc2V0dGluZ3MpXHJcbiAgfVxyXG4gIGluaXQoY29udGVudCwgc2V0dGluZ3MgPSB7fSkge1xyXG4gICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzXHJcbiAgICB0aGlzLnByb2Nlc3NTeW4oKVxyXG4gICAgdGhpcy5yZWdpc3RlckZ1bmN0aW9ucygpXHJcbiAgICB0aGlzLnNldFRva2VuaXplcigpXHJcbiAgICB0aGlzLmRiID0gbHVuci5JbmRleC5sb2FkKGNvbnRlbnQpIFxyXG4gIH1cclxuICByZWdpc3RlckZ1bmN0aW9ucygpIHtcclxuICAgIGxldCBwaXBlbGluZUZ1bmN0aW9uID0gdGhpcy5yZXBsYWNlU3lub255bW4uYmluZCh0aGlzKVxyXG4gICAgbGV0IGFkZFF1ZXJ5RnVuY3Rpb24gPSB0aGlzLmFkZFF1ZXJ5LmJpbmQodGhpcylcclxuXHJcbiAgICBsdW5yLlBpcGVsaW5lLnJlZ2lzdGVyRnVuY3Rpb24ocGlwZWxpbmVGdW5jdGlvbiwgJ3JlcGxhY2VTeW5vbnltbicpXHJcbiAgICBsdW5yLlBpcGVsaW5lLnJlZ2lzdGVyRnVuY3Rpb24oYWRkUXVlcnlGdW5jdGlvbiwgJ2FkZFF1ZXJ5JylcclxuICB9XHJcbiAgc2V0VG9rZW5pemVyKCkge1xyXG4gICAgbHVuci50b2tlbml6ZXIuc2VwYXJhdG9yID0gL1tcXHNcXC5cXC1cXCdcXCxcXG47XFw6XFxcXFxcL1xcXCJdKy9cclxuICB9XHJcbiAgcHJvY2Vzc1N5bigpIHtcclxuICAgIGxldCBzeW5vbnltbnNfd29yZHMgPSAodGhpcy5zZXR0aW5ncyAmJiB0aGlzLnNldHRpbmdzLnN5bm9ueW1zKSB8fCB7fVxyXG4gICAgbGV0IHN5bm9ueW1zID0gbmV3IFN5bm9ueW1ucyhzeW5vbnltbnNfd29yZHMpXHJcbiAgICB0aGlzLnNldHRpbmdzLnJvb3RXb3JkcyA9IHN5bm9ueW1zLnJvb3RXb3Jkc1xyXG4gIH1cclxuICBhZGRRdWVyeSh0b2tlbikge1xyXG4gICAgbGV0IHdvcmQgPSB0b2tlbi50b1N0cmluZygpXHJcbiAgICB0aGlzLnF1ZXJ5V29yZHMucHVzaCh3b3JkKVxyXG4gICAgdGhpcy5xdWVyeVdvcmRzID0gXy51bmlxdWUodGhpcy5xdWVyeVdvcmRzKVxyXG4gICAgcmV0dXJuIHRva2VuXHJcbiAgfVxyXG4gIHJlcGxhY2VTeW5vbnltbih0b2tlbikge1xyXG4gICAgbGV0IHdvcmQgPSB0b2tlbi50b1N0cmluZygpXHJcbiAgICBsZXQgcm9vdCA9IHRoaXMuc2V0dGluZ3MgJiYgdGhpcy5zZXR0aW5ncy5yb290V29yZHMgJiYgdGhpcy5zZXR0aW5ncy5yb290V29yZHNbd29yZF1cclxuICAgIGlmIChyb290ICYmIHJvb3QgIT09IHdvcmQpIHtcclxuICAgICAgcmV0dXJuIHRva2VuLnVwZGF0ZSgoKSA9PiB7IHJldHVybiB0aGlzLnNldHRpbmdzLnJvb3RXb3Jkc1t3b3JkXSB9KVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHJldHVybiB0b2tlblxyXG4gICAgfVxyXG4gIH1cclxuICBhZGRTdG9wV29yZHMoaW5kZXgsIHN0b3BXb3Jkcykge1xyXG4gICAgaWYgKHN0b3BXb3Jkcykge1xyXG4gICAgICBsZXQgc3RvcFdvcmRGaWx0ZXIgPSBsdW5yLmdlbmVyYXRlU3RvcFdvcmRGaWx0ZXIoc3RvcFdvcmRzKVxyXG4gICAgICBpbmRleC5waXBlbGluZS5iZWZvcmUobHVuci5zdG9wV29yZEZpbHRlciwgc3RvcFdvcmRGaWx0ZXIpXHJcbiAgICAgIGluZGV4LnBpcGVsaW5lLnJlbW92ZShsdW5yLnN0b3BXb3JkRmlsdGVyKVxyXG4gICAgfVxyXG4gIH1cclxuICBzZWFyY2gocXVlcnkpIHtcclxuICAgIHRoaXMucXVlcnlXb3JkcyA9IFtdXHJcbiAgICBsZXQgcGFyYW1zID0gcXVlcnkuZ2V0UGFyYW1zKHRoaXMuaXNTdG9wV29yZC5iaW5kKHRoaXMpKS50cmltKClcclxuICAgIGxldCBzZWFyY2hfcmVzdWx0cyA9IHJoLl8uaXNFbXB0eVN0cmluZyhwYXJhbXMpPyBbXSA6IHRoaXMuZGIuc2VhcmNoKHBhcmFtcylcclxuICAgIHJldHVybiAocXVlcnkub3B0cyk/IFxyXG4gICAgICBfLmZpbHRlcihzZWFyY2hfcmVzdWx0cywgKHJlc3VsdCkgPT4gdGhpcy5tYXRjaChyZXN1bHQsIHF1ZXJ5Lm9wdHMpKVxyXG4gICAgICA6IHNlYXJjaF9yZXN1bHRzXHJcbiAgfVxyXG5cclxuICBtYXRjaChyZXN1bHQsIG9wdHMpIHtcclxuICAgIGxldCByZXRWYWwgPSB0cnVlXHJcbiAgICBpZiAob3B0cy5hbmRTZWFyY2gpIHtcclxuICAgICAgbGV0IG1hdGNoaW5nV29yZHMgPSByZXN1bHQgJiYgcmVzdWx0Lm1hdGNoRGF0YS5tZXRhZGF0YSB8fCBbXVxyXG4gICAgICBfLmVhY2godGhpcy5xdWVyeVdvcmRzLCAod29yZCkgPT4ge1xyXG4gICAgICAgIGlmICghbWF0Y2hpbmdXb3Jkc1t3b3JkXSAmJiAhdGhpcy5pc1N0b3BXb3JkKHdvcmQpKSB7XHJcbiAgICAgICAgICByZXRWYWwgPSBmYWxzZVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgIH1cclxuICAgIHJldHVybiByZXRWYWxcclxuICB9XHJcbiAgXHJcbiAgaXNTdG9wV29yZCh3b3JkKXtcclxuICAgIHJldHVybiB0aGlzLnNldHRpbmdzLnN0b3BXb3Jkcy5pbmRleE9mKHdvcmQudG9Mb3dlckNhc2UoKSkgIT09IC0xXHJcbiAgfVxyXG4gIFxyXG4gIHNlYXJjaEdsb3NzYXJ5KHF1ZXJ5KSB7XHJcbiAgICBsZXQgZ2xvc3NhcnkgPSAodGhpcy5zZXR0aW5ncyAmJiB0aGlzLnNldHRpbmdzLmdsb3NzYXJ5KSB8fCB7fVxyXG4gICAgbGV0IHF1ZXJ5VG9rZW5zID0gdGhpcy5nZXRSb290VG9rZW5zKHF1ZXJ5KVxyXG4gICAgbGV0IGdvc3NhcnlSZXN1bHRzID0gXy5yZWR1Y2UoZ2xvc3NhcnksIChyZXN1bHQsIGRlZmluaXRpb24sIHRlcm0pID0+e1xyXG4gICAgICBsZXQgZ2xvVG9rZW5zID0gdGhpcy5nZXRSb290VG9rZW5zKHRlcm0pXHJcbiAgICAgIGlmIChxdWVyeVRva2Vucy5sZW5ndGggPT09IGdsb1Rva2Vucy5sZW5ndGggJiYgdGhpcy5tYXRjaFRva2VucyhxdWVyeVRva2VucywgZ2xvVG9rZW5zKSkge1xyXG4gICAgICAgIHJlc3VsdFt0ZXJtXSA9IGRlZmluaXRpb25cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICB9LCB7fSlcclxuICAgIHJldHVybiBnb3NzYXJ5UmVzdWx0c1xyXG4gIH1cclxuXHJcbiAgbWF0Y2hUb2tlbnMoc2V0MSwgc2V0Mikge1xyXG4gICAgbGV0IG1hdGNoZWQgPSB0cnVlICBcclxuICAgIF8uZWFjaChzZXQxLCAodGVybTEsIGluZGV4KSA9PiB7XHJcbiAgICAgIGlmICh0ZXJtMSAhPT0gc2V0MltpbmRleF0pIHtcclxuICAgICAgICBtYXRjaGVkID0gZmFsc2VcclxuICAgICAgfVxyXG4gICAgfSlcclxuICAgIHJldHVybiBtYXRjaGVkXHJcbiAgfVxyXG5cclxuICBnZXRSb290VG9rZW5zKHRleHQpIHtcclxuICAgIGxldCB0b2tlbnMgPSBsdW5yLnRva2VuaXplcih0ZXh0KVxyXG4gICAgcmV0dXJuIF8ubWFwKHRva2VucywgKHRva2VuKSA9PiB7XHJcbiAgICAgIGxldCB3b3JkID0gdG9rZW4udG9TdHJpbmcoKVxyXG4gICAgICByZXR1cm4gdGhpcy5zZXR0aW5ncy5yb290V29yZHNbd29yZF0gfHwgd29yZFxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGV4cG9ydCgpe1xyXG4gICAgcmV0dXJuIHRoaXMuZGIudG9KU09OKClcclxuICB9XHJcbn1cclxuIiwiXHJcbmNvbnN0IHJoID0gcmVxdWlyZShcIi4uLy4uLy4uLy4uLy4uL2xpYi9yaFwiKVxyXG5jb25zdCBfID0gcmguX1xyXG5jb25zdCBQYXRocyA9IHJlcXVpcmUoJy4uLy4uL2NvbW1vbi9wYXRocycpXHJcbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgU2VhcmNoTG9hZGVye1xyXG4gIGNvbnN0cnVjdG9yKHBhdGggPSBcIlwiKXtcclxuICAgIHRoaXMuX3BhdGhzID0gbmV3IFBhdGhzKHBhdGgpXHJcbiAgfVxyXG4gIGluaXQoaWQsIGNhbGxiYWNrRm4pIHtcclxuICAgIHRoaXMuaWQgPSBpZFxyXG4gICAgY2FsbGJhY2tGbih0aGlzKVxyXG4gIH1cclxuICBsb2FkREIoY2FsbGJhY2tGbil7XHJcbiAgICBsZXQgcGF0aCA9IHRoaXMuX3BhdGhzLmdldFNlYXJjaERiRmlsZVBhdGgoKVxyXG4gICAgXy5sb2FkU2NyaXB0KHBhdGgsIHRydWUsICgpID0+IHtcclxuICAgICAgbGV0IGRhdGEgPSBfLmV4cG9ydHMoKVxyXG4gICAgICBpZihjYWxsYmFja0ZuKXtcclxuICAgICAgICBjYWxsYmFja0ZuKGRhdGEpXHJcbiAgICAgIH1cclxuICAgIH0sIHRydWUpO1xyXG4gIH1cclxuXHJcbiAgZ2V0SWQoaWQpIHtcclxuICAgIHJldHVybiBgJHt0aGlzLmlkfV8ke2lkfWBcclxuICB9XHJcbiAgZ2V0VXJsKHVybCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3BhdGhzLl9nZXRSZWxhdGl2ZVBhdGgodXJsKVxyXG4gIH1cclxuICBsb2FkTWV0YURhdGEoY2FsbGJhY2tGbil7XHJcbiAgICBsZXQgcGF0aCA9IHRoaXMuX3BhdGhzLmdldE1ldGFkYXRhRmlsZVBhdGgoKVxyXG4gICAgXy5sb2FkU2NyaXB0KHBhdGgsIHRydWUsICgpID0+IHtcclxuICAgICAgbGV0IGRhdGEgPSBfLmV4cG9ydHMoKVxyXG4gICAgICBpZihjYWxsYmFja0ZuKXtcclxuICAgICAgICBjYWxsYmFja0ZuKGRhdGEpXHJcbiAgICAgIH1cclxuICAgIH0sIHRydWUpO1xyXG4gIH1cclxuICBcclxuICBsb2FkVGV4dERhdGEocXVlcnksIGlkLCBjYWxsYmFja0ZuKSB7XHJcbiAgICBsZXQgcGF0aCA9IHRoaXMuX3BhdGhzLmdldFRleHRGaWxlUGF0aChpZClcclxuICAgIF8ubG9hZFNjcmlwdChwYXRoLCB0cnVlLCAoKSA9PiB7XHJcbiAgICAgIGxldCBkYXRhID0gXy5leHBvcnRzKClcclxuICAgICAgaWYgKGNhbGxiYWNrRm4pIHtcclxuICAgICAgICBjYWxsYmFja0ZuKHF1ZXJ5LCBpZCwgZGF0YSlcclxuICAgICAgfVxyXG4gICAgfSwgdHJ1ZSk7XHJcbiAgfVxyXG59XHJcbiIsImNvbnN0IFNlYXJjaERiID0gcmVxdWlyZSAoJy4vZGInKVxyXG5jb25zdCBRdWVyeSA9IHJlcXVpcmUoJy4vcXVlcnknKVxyXG5jb25zdCBTdW1tYXJ5ID0gcmVxdWlyZSgnLi9zdW1tYXJ5JylcclxuY29uc3QgcmggPSByZXF1aXJlKFwiLi4vLi4vLi4vLi4vLi4vbGliL3JoXCIpXHJcbmNvbnN0IF8gPSByaC5fXHJcbmNvbnN0IFNlYW1hcGhvcmUgPSByZXF1aXJlKCcuLi8uLi8uLi8uLi9jb21tb24vY291bnRpbmdfc2VhbWFwaG9yZScpXHJcbmNvbnN0IFRleHRNZXJnZXIgPSByZXF1aXJlKCcuLi90ZXh0X21lcmdlcicpXHJcbmNvbnN0IFNlYXJjaE1ldGFkYXRhID0gcmVxdWlyZSgnLi4vbWV0YWRhdGEnKVxyXG5jb25zdCBDYnRGaWx0ZXIgPSByZXF1aXJlKFwiLi9jYnRcIilcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgU2VhcmNoUHJvY2Vzc29ye1xyXG4gIGNvbnN0cnVjdG9yKGxvYWRlcil7XHJcbiAgICB0aGlzLmxvYWRlciA9IGxvYWRlclxyXG4gICAgdGhpcy5tZXRhZGF0YUxvYWRlZCA9IHRoaXMuZGJMb2FkZWQgPSBmYWxzZTtcclxuICAgIHRoaXMubG9hZGVyLmxvYWREQigoZGJDb250ZW50KT0+e1xyXG4gICAgICB0aGlzLmluaXREQihkYkNvbnRlbnQpXHJcbiAgICB9KVxyXG4gICAgdGhpcy5sb2FkZXIubG9hZE1ldGFEYXRhKChtZXRhZGF0YSk9PntcclxuICAgICAgdGhpcy5pbml0TWV0YWRhdGEobWV0YWRhdGEpXHJcbiAgICB9KVxyXG4gIH1cclxuICBcclxuICBpbml0TWV0YWRhdGEobWV0YWRhdGEpIHtcclxuICAgIHRoaXMubWV0YWRhdGFMb2FkZWQgPSB0cnVlIFxyXG4gICAgdGhpcy5tZXRhZGF0YSA9IG5ldyBTZWFyY2hNZXRhZGF0YShtZXRhZGF0YSlcclxuICAgIFxyXG4gICAgaWYgKCF0aGlzLmluaXQgJiYgdGhpcy5kYkNvbnRlbnQpIHtcclxuICAgICAgdGhpcy5pbml0REIodGhpcy5kYkNvbnRlbnQpXHJcbiAgICAgIHRoaXMuZGJDb250ZW50ID0gbnVsbFxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaW5pdERCKGRiQ29udGVudCkge1xyXG4gICAgaWYodGhpcy5tZXRhZGF0YUxvYWRlZCl7XHJcbiAgICAgIHRoaXMuZGIgPSBuZXcgU2VhcmNoRGIoZGJDb250ZW50LCB0aGlzLm1ldGFkYXRhLnNldHRpbmdzKVxyXG4gICAgICB0aGlzLmluaXQgPSB0cnVlXHJcbiAgICAgIGlmICh0aGlzLndhaXRpbmcpIHtcclxuICAgICAgICB0aGlzLndhaXRpbmcgPSBmYWxzZVxyXG4gICAgICAgIHRoaXMuZ2V0UmVzdWx0cygpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICB0aGlzLmRiQ29udGVudCA9IGRiQ29udGVudFxyXG4gICAgfVxyXG4gIH1cclxuICB0b3BpY3NMb2FkZWQoKSB7XHJcbiAgICBpZiAodGhpcy5leGFjdFNlYXJjaCkge1xyXG4gICAgICB0aGlzLmZpbHRlcigpXHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIGlzTmV3UXVlcnkodGV4dCwgb3B0cyl7XHJcbiAgICBsZXQgcXVlcnkgPSB0aGlzLmJ1aWxkUXVlcnkodGV4dCwgb3B0cylcclxuICAgIHJldHVybiAhdGhpcy5xdWVyeSB8fCAhdGhpcy5xdWVyeS5pc0VxdWFsKHF1ZXJ5KVxyXG4gIH1cclxuICAgIFxyXG4gIHNlYXJjaCh0ZXh0LCBvcHRzLCBjYWxsYmFjaywgcmVzdWx0c0NhbGxiYWNrKSB7XHJcbiAgICBsZXQgcXVlcnkgPSB0aGlzLmJ1aWxkUXVlcnkodGV4dCwgb3B0cylcclxuICAgIGlmKHRoaXMuaXNOZXdRdWVyeSh0ZXh0LCBvcHRzKSkge1xyXG4gICAgICB0aGlzLnRleHQgPSB0ZXh0XHJcbiAgICAgIHRoaXMuc2VhbWFwaG9yZSA9IG5ldyBTZWFtYXBob3JlKHRoaXMudG9waWNzTG9hZGVkLmJpbmQodGhpcykpXHJcbiAgICAgIHRoaXMucXVlcnkgPSBxdWVyeVxyXG4gICAgICB0aGlzLnRvcGljQ2FsbGJhY2sgPSBjYWxsYmFja1xyXG4gICAgICB0aGlzLm9wdHMgPSBvcHRzXHJcbiAgICAgIHRoaXMuc3VtbWFyaWVzID0ge31cclxuICAgICAgdGhpcy5yZXN1bHRzQ2FsbGJhY2sgPSByZXN1bHRzQ2FsbGJhY2tcclxuICAgICAgdGhpcy5leGFjdFNlYXJjaCA9IHRoaXMucXVlcnkuZXhhY3RNYXRjaFxyXG4gICAgICB0aGlzLmdldFJlc3VsdHMoKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZmlsdGVyKCkge1xyXG4gICAgbGV0IHRlcm1zID0gdGhpcy5xdWVyeS5leGF4Y3RUZXJtc1xyXG4gICAgdGhpcy5yZXN1bHRzID0gXy5maWx0ZXIodGhpcy5yZXN1bHRzLCAocmVzdWx0KSA9PiB7XHJcbiAgICAgIGxldCB0b3BpY1RleHQgPSB0aGlzLnJlc3VsdHNNZXRhZGF0YVtyZXN1bHQuaWRdLnRvcGljVGV4dFxyXG4gICAgICByZXR1cm4gdGhpcy5tYXRjaGVzRXhhY3QodGVybXMsIHRvcGljVGV4dCwgcmVzdWx0LmlkKVxyXG4gICAgfSlcclxuICAgIHRoaXMucmVzdWx0c0NhbGxiYWNrKHRoaXMucXVlcnkudGV4dCwgdGhpcy5yZXN1bHRzKVxyXG4gICAgdGhpcy5wcm9jZXNzU3VtbWFyeSgpXHJcbiAgfVxyXG5cclxuICBwcm9jZXNzU3VtbWFyeSgpe1xyXG4gICAgXy5lYWNoKHRoaXMucmVzdWx0cywgcmVzdWx0ID0+IHtcclxuICAgICAgbGV0IGlkID0gcmVzdWx0LmlkXHJcbiAgICAgIHRoaXMudG9waWNDYWxsYmFjayh0aGlzLmxvYWRlci5nZXRJZChpZCksIHRoaXMuc3VtbWFyaWVzW2lkXSwgdGhpcy5jcmVhdGVVcmwoaWQsIHRoaXMucXVlcnkuZXhheGN0VGVybXMpKSBcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBtYXRjaGVzRXhhY3QodGVybXMsIHRleHQsIGlkKSB7XHJcbiAgICBsZXQgZm91bmQgPSBmYWxzZVxyXG4gICAgXy5lYWNoKHRlcm1zLCB0ZXJtID0+IHtcclxuICAgICAgbGV0IGlkeCA9IHRleHQudG9Mb3dlckNhc2UoKS5pbmRleE9mKHRlcm0pXHJcbiAgICAgIGlmIChpZHggIT09IC0xKSB7XHJcbiAgICAgICAgdGhpcy5hZGRTdW1tYXJ5KGlkLCB0ZXh0LCBpZHgsIHRlcm0pXHJcbiAgICAgICAgZm91bmQgPSB0cnVlXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICByZXR1cm4gZm91bmRcclxuICB9XHJcbiAgXHJcbiAgYWRkU3VtbWFyeShpZCwgdGV4dCwgaWR4LCB0ZXJtKSB7XHJcbiAgICBsZXQgc3VtbWFyeSA9ICB0aGlzLm1ldGFkYXRhLmdldFRvcGljU3VtbWFyeShpZClcclxuICAgIGlmICh0aGlzLm1ldGFkYXRhLmNvbnRleHQgJiYgc3VtbWFyeSkge1xyXG4gICAgICB0aGlzLnN1bW1hcmllc1tpZF0gPSBzdW1tYXJ5XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgbGV0IHN1bW1hcnlFeHRyYWN0b3IgPSBuZXcgU3VtbWFyeSh0aGlzLm1ldGFkYXRhLnRvcGljRGF0YSwgIHRoaXMubWV0YWRhdGEuY29udGV4dClcclxuICAgICAgdGhpcy5zdW1tYXJpZXNbaWRdID0gc3VtbWFyeUV4dHJhY3Rvci5nZXRTdW1tYXJ5VGV4dCh0ZXh0LCBpZHgsIHRlcm0ubGVuZ3RoLCB0ZXJtKVxyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICBnZXRSZXN1bHRzKCkge1xyXG4gICAgaWYgKCF0aGlzLmluaXQpIHtcclxuICAgICAgdGhpcy53YWl0aW5nID0gdHJ1ZVxyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIHRoaXMucmVzdWx0cyA9IHRoaXMucHJvY2VzcygpXHJcbiAgICBpZiAodGhpcy5uZWVkc0NvcnJlY3Rpb24pIHtcclxuICAgICAgdGhpcy5kb0NvcnJlY3Rpb24oKSAgICBcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIXRoaXMuZXhhY3RTZWFyY2gpIHtcclxuICAgICAgdGhpcy5yZXN1bHRzQ2FsbGJhY2sodGhpcy5xdWVyeS50ZXh0LCB0aGlzLnJlc3VsdHMpXHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5leGFjdFNlYXJjaCAmJiB0aGlzLnJlc3VsdHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHRoaXMucmVzdWx0c0NhbGxiYWNrKHRoaXMucXVlcnkudGV4dCwgdGhpcy5yZXN1bHRzKVxyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICBnZXQgbmVlZHNDb3JyZWN0aW9uICgpIHtcclxuICAgIHJldHVybiB0aGlzLnJlc3VsdHMubGVuZ3RoID09PSAwXHJcbiAgICAgICYmICB0aGlzLm1ldGFkYXRhLnNldHRpbmdzLmZ1enp5XHJcbiAgICAgICYmICF0aGlzLnF1ZXJ5LmV4YWN0TWF0Y2hcclxuICB9XHJcblxyXG4gIGRvQ29ycmVjdGlvbigpe1xyXG4gICAgdGhpcy5xdWVyeSA9IHRoaXMuYnVpbGRRdWVyeSh0aGlzLnF1ZXJ5LnRleHQsIF8uZXh0ZW5kKHRoaXMub3B0cywgeyBmdXp6eTogdHJ1ZSB9KSlcclxuICAgIHRoaXMucmVzdWx0cyA9IHRoaXMucHJvY2VzcygpXHJcbiAgfVxyXG4gIFxyXG4gIHNlYXJjaEdsb3NzYXJ5KHRleHQpIHtcclxuICAgIGxldCBxdWVyeSA9IHRoaXMuYnVpbGRRdWVyeSh0ZXh0KVxyXG4gICAgcmV0dXJuIHRoaXMucHJvY2Vzc0dsb3NzYXJ5KHF1ZXJ5KVxyXG4gIH1cclxuXHJcbiAgYnVpbGRRdWVyeSh0ZXh0LCBvcHRzKXtcclxuICAgIHJldHVybiBuZXcgUXVlcnkodGV4dCwgIHRoaXMubWV0YWRhdGEuc2V0dGluZ3MsIG9wdHMsIHRoaXMuZmlsdGVySXRlbS5iaW5kKHRoaXMpKVxyXG4gIH1cclxuICBcclxuICBwcm9jZXNzKCkge1xyXG4gICAgdGhpcy5yZXN1bHRzTWV0YWRhdGEgPSB7fVxyXG4gICAgbGV0IHNlYXJjaFJlc3VsdHMgPSB0aGlzLmRiLnNlYXJjaCh0aGlzLnF1ZXJ5KVxyXG4gICAgdGhpcy5zZWFtYXBob3JlLndhaXQoc2VhcmNoUmVzdWx0cy5sZW5ndGgpXHJcbiAgICBfLmVhY2goKHNlYXJjaFJlc3VsdHMpLCAocmVzdWx0KSA9PiB7XHJcbiAgICAgIGxldCB0b3BpY0RhdGEgPSB0aGlzLm1ldGFkYXRhLmdldFRvcGljRGF0YShyZXN1bHQucmVmKVxyXG4gICAgICB0aGlzLnJlc3VsdHNNZXRhZGF0YVtyZXN1bHQucmVmXSA9IHJlc3VsdC5tYXRjaERhdGEubWV0YWRhdGFcclxuICAgICAgdGhpcy5sb2FkZXIubG9hZFRleHREYXRhKHRoaXMucXVlcnksIHJlc3VsdC5yZWYsIHRoaXMucHJvY2Vzc1RvcGljRGF0YS5iaW5kKHRoaXMpKVxyXG4gICAgICBfLmV4dGVuZChyZXN1bHQsIHRvcGljRGF0YSlcclxuICAgICAgcmVzdWx0LmlkID0gcmVzdWx0LnJlZlxyXG4gICAgICByZXN1bHQucmVmID0gdGhpcy5sb2FkZXIuZ2V0SWQocmVzdWx0LnJlZilcclxuICAgIH0pXHJcbiAgICByZXR1cm4gc2VhcmNoUmVzdWx0c1xyXG4gIH1cclxuICBwcm9jZXNzR2xvc3NhcnkocXVlcnkpIHtcclxuICAgIHJldHVybiB0aGlzLmRiLnNlYXJjaEdsb3NzYXJ5KHF1ZXJ5LnRleHQpXHJcbiAgfVxyXG5cclxuICBwcm9jZXNzVG9waWNEYXRhKHF1ZXJ5LCBpZCwgZGF0YSkge1xyXG4gICAgaWYgKCF0aGlzLnF1ZXJ5LmlzRXF1YWwocXVlcnkpKSB7XHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgbGV0IG1hdGNoUmVzdWx0ID0gdGhpcy5yZXN1bHRzTWV0YWRhdGFbaWRdXHJcbiAgICBpZiAobWF0Y2hSZXN1bHQpIHtcclxuICAgICAgbGV0IHdvcmRsaXN0ID0gW11cclxuICAgICAgbGV0IHN1bW1hcnlFeHRyYWN0b3IgPSBuZXcgU3VtbWFyeSh0aGlzLm1ldGFkYXRhLnRvcGljRGF0YSwgdGhpcy5tZXRhZGF0YS5jb250ZXh0KVxyXG4gICAgICBsZXQgc3VtbWFyeSA9IHN1bW1hcnlFeHRyYWN0b3IuZ2V0U3VtbWFyeShpZCwgbWF0Y2hSZXN1bHQsIHdvcmRsaXN0LCBkYXRhKVxyXG4gICAgICBzdW1tYXJ5ID0gc3VtbWFyeS5yZXBsYWNlKC9cXHQrL2dpLCAnICcpLnRyaW0oKVxyXG4gICAgICB0aGlzLnJlc3VsdHNNZXRhZGF0YVtpZF0udG9waWNUZXh0ID0gdGhpcy5jcmVhdGVUZXh0KGlkLCBkYXRhKVxyXG4gICAgICBpZighdGhpcy5leGFjdFNlYXJjaCkge1xyXG4gICAgICAgIHRoaXMudG9waWNDYWxsYmFjayh0aGlzLmdldElkKGlkKSwgc3VtbWFyeSwgdGhpcy5jcmVhdGVVcmwoaWQsIHdvcmRsaXN0KSlcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy5zZWFtYXBob3JlLnNpZ25hbCgpXHJcbiAgfVxyXG5cclxuICBjcmVhdGVUZXh0KHRvcGljSWQsIHRleHRzKSB7XHJcbiAgICBsZXQgbmV4dFRleHRzID0gdGhpcy5tZXRhZGF0YS5nZXRUb3BpY05leHRJZCh0b3BpY0lkKVxyXG4gICAgbGV0IG1lcmdlciA9IG5ldyBUZXh0TWVyZ2VyKG5leHRUZXh0cywgdGV4dHMsIHRoaXMuZmlsdGVySWQuYmluZCh0aGlzKSlcclxuICAgIHJldHVybiBtZXJnZXIuZ2V0VGV4dCgpXHJcbiAgfVxyXG5cclxuICBmaWx0ZXJJZChpZCl7XHJcbiAgICBsZXQgZmllbGRzID0gdGhpcy5tZXRhZGF0YS5maWVsZHNcclxuICAgIGxldCBmaWVsZEl0ZW0gPSBmaWVsZHNbaWRdXHJcbiAgICByZXR1cm4gdGhpcy5maWx0ZXJJdGVtKGZpZWxkSXRlbSkgIFxyXG4gIH1cclxuICBcclxuICBmaWx0ZXJJdGVtKGZpZWxkSXRlbSkge1xyXG4gICAgbGV0IGZpZWxkcyA9IHRoaXMubWV0YWRhdGEuZmllbGRzXHJcbiAgICBsZXQgZmlsdGVyID0gbmV3IENidEZpbHRlcihmaWVsZHMsIHRoaXMub3B0cy5vcmlnaW4sIHRoaXMub3B0cy5jYnQpXHJcbiAgICByZXR1cm4gZmllbGRJdGVtICYmIGZpbHRlci5maWx0ZXIoZmllbGRJdGVtKVxyXG4gIH1cclxuICBcclxuICBnZXRJZChpZCkge1xyXG4gICAgcmV0dXJuIHRoaXMubG9hZGVyLmdldElkKGlkKVxyXG4gIH1cclxuXHJcbiAgY3JlYXRlVXJsKGlkLCB3b3JkbGlzdCkge1xyXG4gICAgbGV0IGRhdGEgPSB0aGlzLm1ldGFkYXRhLmdldFRvcGljRGF0YShpZClcclxuICAgIGxldCBobFRlcm0gPSB0aGlzLmV4YWN0U2VhcmNoID8gYFwiJHt3b3JkbGlzdFswXX1cImAgOiB3b3JkbGlzdFxyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgbGV0IHJlc3VsdHNQYXJhbXMgPSAnPycgKyBfLm1hcFRvRW5jb2RlZFN0cmluZyh7XHJcbiAgICAgICAgcmhzZWFyY2g6IHRoaXMucXVlcnkub3JpZ2luYWxUZXh0LFxyXG4gICAgICAgIHJoaGx0ZXJtOiBobFRlcm1cclxuICAgICAgfSlcclxuICAgICAgcmV0dXJuIGAke3RoaXMubG9hZGVyLmdldFVybChkYXRhLnJlbFVybCl9JHtyZXN1bHRzUGFyYW1zfWBcclxuICAgIH1cclxuICB9XHJcblxyXG59XHJcbiIsImNvbnN0IHJoID0gcmVxdWlyZShcIi4uLy4uLy4uLy4uLy4uL2xpYi9yaFwiKVxyXG5jb25zdCBfID0gcmguX1xyXG5jb25zdCBDYnRGaWx0ZXIgPSByZXF1aXJlKFwiLi9jYnRcIilcclxuY29uc3QgbHVuciA9IHJlcXVpcmUoXCJsdW5yXCIpXHJcbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgU2VhcmNoUXVlcnkge1xyXG4gIGNvbnN0cnVjdG9yKHRleHQsIHNldHRpbmdzLCBvcHRzKSB7XHJcbiAgICB0aGlzLm9yaWdpbmFsVGV4dCA9IHRleHQudHJpbSgpXHJcbiAgICB0aGlzLnRleHQgPSB0aGlzLm9yaWdpbmFsVGV4dC50b0xvd2VyQ2FzZSgpXHJcbiAgICB0aGlzLnNldHRpbmdzID0gc2V0dGluZ3MgfHwge31cclxuICAgIHRoaXMub3B0cyA9IG9wdHMgfHwge31cclxuICAgIHRoaXMuY2hlY2tFeGFjdE1hdGNoKClcclxuICB9XHJcbiAgZmlsdGVyKGl0ZW1MaXN0KSB7XHJcbiAgICBsZXQgZmlsdGVyID0gbmV3IENidEZpbHRlcih0aGlzLnNldHRpbmdzLmZpZWxkcywgdGhpcy5vcHRzLm9yaWdpbiwgdGhpcy5vcHRzLmNidClcclxuICAgIHJldHVybiAgZmlsdGVyLmZpbHRlcihpdGVtTGlzdClcclxuICB9XHJcbiAgZ2V0UGFyYW1zKGlzU3RvcFdvcmRGbikge1xyXG4gICAgdGhpcy5pc1N0b3BXb3JkID0gaXNTdG9wV29yZEZuICBcclxuICAgIHJldHVybiBgJHt0aGlzLmZpZWxkc1BhcmFtfWAgXHJcbiAgfVxyXG4gIFxyXG4gIGlzRXF1YWwob3RoZXIpIHtcclxuICAgIGlmKHRoaXMudGV4dCAhPT0gb3RoZXIudGV4dCB8fCB0aGlzLl9iRXhhY3RNYXRjaCAhPT0gb3RoZXIuX2JFeGFjdE1hdGNoKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIF8uaXNFcXVhbCh0aGlzLm9wdHMsIG90aGVyLm9wdHMpXHJcbiAgfVxyXG4gIFxyXG4gIGdldEZ1enp5VGV4dChpZCwgdG9rZW4sIGJvb3N0KSB7XHJcbiAgICBpZiAodGhpcy5pc1N0b3BXb3JkKHRva2VuKSkge1xyXG4gICAgICByZXR1cm4gJydcclxuICAgIH1cclxuICAgIHJldHVybiAodGhpcy5vcHRzLmZ1enp5KT8gYCR7aWR9OiR7dG9rZW59fjFeJHtib29zdH1gOiBgJHtpZH06JHt0b2tlbn1eJHtib29zdH1gXHJcbiAgfVxyXG5cclxuICBjaGVja0V4YWN0TWF0Y2goKSB7XHJcbiAgICBpZiAodGhpcy5faXNFeGFjdE1hdGNoKSB7XHJcbiAgICAgIHRoaXMuX2JFeGFjdE1hdGNoID0gdHJ1ZVxyXG4gICAgICB0aGlzLnRleHQgPSB0aGlzLnRleHQuc3Vic3RyaW5nKDEsIHRoaXMudGV4dC5sZW5ndGgtMSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldCBfaXNFeGFjdE1hdGNoKCkge1xyXG4gICAgcmV0dXJuICh0aGlzLnRleHQubGVuZ3RoID4gMilcclxuICAgICAgJiYgdGhpcy5xdW90ZXNDaGFyLmluZGV4T2YodGhpcy50ZXh0WzBdKSAhPT0gLTFcclxuICAgICAgJiYgdGhpcy5xdW90ZXNDaGFyLmluZGV4T2YodGhpcy50ZXh0W3RoaXMudGV4dC5sZW5ndGggLTEgXSkgIT09IC0xXHJcbiAgfVxyXG5cclxuICBnZXQgZXhhY3RNYXRjaCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9iRXhhY3RNYXRjaFxyXG4gIH1cclxuXHJcbiAgZ2V0IGV4YXhjdFRlcm1zKCkge1xyXG4gICAgcmV0dXJuIFt0aGlzLnRleHRdXHJcbiAgfVxyXG4gIFxyXG4gIGdldCBxdW90ZXNDaGFyKCkge1xyXG4gICAgcmV0dXJuIFtcIlxcXCJcIiwgXCJcXCdcIl1cclxuICB9XHJcbiAgZ2V0RmllbGRCb29zdChmaWVsZCkge1xyXG4gICAgcmV0dXJuIF8ucmVkdWNlKGZpZWxkLCAobWF4LCBydWxlKSA9PiB7XHJcbiAgICAgIHJldHVybiAocnVsZSAmJiBydWxlLmJvb3N0ICYmIHJ1bGUuYm9vc3QgPiBtYXggKT8gcnVsZS5ib29zdCA6IG1heFxyXG4gICAgfSwgMSlcclxuICB9XHJcblxyXG4gIGdldCBmaWVsZHNQYXJhbSgpIHtcclxuICAgIGxldCBmaWVsZHF1ZXJ5ID0gJydcclxuICAgIF8uZWFjaCh0aGlzLnNldHRpbmdzLmZpZWxkcywgKGl0ZW0sIGlkKSA9PiB7XHJcbiAgICAgIGlmICghdGhpcy5maWx0ZXIoaXRlbSkpIHtcclxuICAgICAgICBsZXQgdG9rZW5zID0gXy5tYXAobHVuci50b2tlbml6ZXIodGhpcy50ZXh0KSwgdG9rZW4gPT4gdG9rZW4uc3RyKSAgXHJcbiAgICAgICAgbGV0IGJvb3N0ID0gdGhpcy5nZXRGaWVsZEJvb3N0KGl0ZW0pXHJcbiAgICAgICAgXy5lYWNoKHRva2VucywgdG9rZW4gPT4ge1xyXG4gICAgICAgICAgZmllbGRxdWVyeSA9IGAke2ZpZWxkcXVlcnl9ICR7dGhpcy5nZXRGdXp6eVRleHQoaWQsIHRva2VuLCBib29zdCl9YFxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICByZXR1cm4gZmllbGRxdWVyeVxyXG4gIH1cclxufVxyXG4iLCJjb25zdCByaCA9IHJlcXVpcmUoXCIuLi8uLi8uLi8uLi8uLi9saWIvcmhcIilcclxuY29uc3QgVGV4dE1lcmdlciA9IHJlcXVpcmUoJy4uL3RleHRfbWVyZ2VyJylcclxuY29uc3QgXyA9IHJoLl9cclxubW9kdWxlLmV4cG9ydHMgPSBjbGFzcyBTZWFyY2hTdW1tYXJ5IHtcclxuICBjb25zdHJ1Y3Rvcih0b3BpY0RhdGEsIGNvbnRleHQpIHtcclxuICAgIHRoaXMudG9waWNEYXRhID0gdG9waWNEYXRhXHJcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0XHJcbiAgfVxyXG4gIG1pbkRpc3RhbmNlKCkge1xyXG4gICAgLy9fLmVhY2goKVxyXG4gIH1cclxuXHJcbiAgZ2V0U3VtbWFyeShpZCwgbWF0Y2hSZXN1bHQsIHdvcmRsaXN0LCBkYXRhKSB7XHJcbiAgICBpZiAodGhpcy5jb250ZXh0KSB7XHJcbiAgICAgIGxldCBzdW1tYXJ5ID0gdGhpcy50b3BpY0RhdGFbaWRdICYmIHRoaXMudG9waWNEYXRhW2lkXS5zdW1tYXJ5XHJcbiAgICAgIGlmIChzdW1tYXJ5KSB7XHJcbiAgICAgICAgcmV0dXJuIHN1bW1hcnlcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgbGV0IHN1bW1hcmllcyA9IF8ubWFwKG1hdGNoUmVzdWx0LCAobWV0YWRhdGEpID0+IHtcclxuICAgICAgcmV0dXJuIF8udW5pb24obWV0YWRhdGEsIChwb3NEYXRhLCBmaWVsZElkKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIF8udW5pb24ocG9zRGF0YS5wb3NpdGlvbiwgKGZpc3RyUG9zKSA9PiB7XHJcbiAgICAgICAgICBsZXQgdGV4dHMgPSBkYXRhW2ZpZWxkSWRdXHJcbiAgICAgICAgICBsZXQgbWVyZ2VyID0gbmV3IFRleHRNZXJnZXIoKVxyXG4gICAgICAgICAgbGV0IHRleHQgPSBtZXJnZXIuZ2V0SW5kZXhUZXh0KHRleHRzKVxyXG4gICAgICAgICAgbGV0IHdvcmQgPSB0ZXh0LnN1YnN0cmluZyhmaXN0clBvc1swXSwgZmlzdHJQb3NbMF0gKyBmaXN0clBvc1sxXSlcclxuICAgICAgICAgIHdvcmQgPSB3b3JkLnRvTG93ZXJDYXNlKClcclxuICAgICAgICAgIGlmICh3b3JkbGlzdC5pbmRleE9mKHdvcmQpID09PSAtMSkge1xyXG4gICAgICAgICAgICB3b3JkbGlzdC5wdXNoKHdvcmQpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5nZXRTdW1tYXJ5VGV4dCh0ZXh0LCBmaXN0clBvc1swXSwgZmlzdHJQb3NbMV0sIHdvcmQpXHJcbiAgICAgICAgfSlcclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgICBsZXQgc3VtbWFyeSA9ICcnXHJcbiAgICBfLmVhY2goc3VtbWFyaWVzWzBdIHx8IFtdLCBzID0+IHtcclxuICAgICAgaWYgKHMubGVuZ3RoID4gc3VtbWFyeS5sZW5ndGgpIHtcclxuICAgICAgICBzdW1tYXJ5ID0gc1xyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gICAgcmV0dXJuIHN1bW1hcnlcclxuICB9XHJcblxyXG5cclxuXHJcbiAgZ2V0U3VtbWFyeVRleHQodGV4dCwgaWR4LCBsZW5ndGgsIHdvcmQpe1xyXG4gICAgbGV0IGxlZnRUZXh0ID0gdGV4dC5zdWJzdHJpbmcoMCwgaWR4KVxyXG4gICAgbGV0IHJpZ2h0VGV4dCA9IHRleHQuc3Vic3RyaW5nKGlkeCArIGxlbmd0aClcclxuXHJcbiAgICByZXR1cm4gYCR7dGhpcy50cmltTGVmdChsZWZ0VGV4dCl9PGI+JHt3b3JkfTwvYj5cclxuICAgICAgICAgICAgICAke3RoaXMudHJpbVJpZ2h0KHJpZ2h0VGV4dCl9YFxyXG4gIH1cclxuICB0cmltTGVmdChsZWZ0VGV4dCkge1xyXG4gICAgbGV0IGxlZnRJZHggPSBsZWZ0VGV4dC5pbmRleE9mKFwiIFwiLCBsZWZ0VGV4dC5sZW5ndGggLSAzMClcclxuICAgIGxlZnRUZXh0ID0gbGVmdFRleHQuc3Vic3RyaW5nKGxlZnRJZHgsIGxlZnRUZXh0Lmxlbmd0aClcclxuICAgIHJldHVybiBsZWZ0VGV4dC50cmltU3RhcnQoKVxyXG4gIH1cclxuICB0cmltUmlnaHQocmlnaHRUZXh0KSB7XHJcbiAgICBsZXQgcmlnaHRJZHggPSByaWdodFRleHQuaW5kZXhPZihcIiBcIiwgNzApXHJcbiAgICByaWdodElkeCA9IChyaWdodElkeCA9PT0gLTEpID8gcmlnaHRUZXh0Lmxlbmd0aCA6IHJpZ2h0SWR4IFxyXG4gICAgcmlnaHRUZXh0ID0gcmlnaHRUZXh0LnN1YnN0cmluZygwLCByaWdodElkeClcclxuICAgIHJldHVybiByaWdodFRleHQudHJpbUVuZCgpXHJcbiAgfVxyXG59IiwiaW1wb3J0IHNlYXJjaF91dGlscyBmcm9tICcuLi9zdWdnZXN0aW9uL3V0aWxzJ1xyXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIFNlYXJjaFJlc3VsdHtcclxuICBjb25zdHJ1Y3RvcihyZXN1bHQpIHtcclxuICAgIHRoaXMuZlJhbmtpbmcgPSByZXN1bHQuc2NvcmVcclxuICAgIHRoaXMubkluZGV4ID0gMVxyXG4gICAgdGhpcy5zdHJTdW1tYXJ5ID0gYC5wLnNlYXJjaHN1bW1hcnkke3Jlc3VsdC5yZWZ9YFxyXG4gICAgdGhpcy5zdHJUaXRsZSA9IHJlc3VsdC50aXRsZVxyXG4gICAgdGhpcy5zdHJVcmwgPSBgLnAuc2VhcmNodXJsJHtyZXN1bHQucmVmfWBcclxuICAgIHRoaXMuc3RyQnJlYWRjcnVtYnMgPSByZXN1bHQucmVsVXJsXHJcbiAgfVxyXG4gIG1lcmdlKG5ld19pdGVtKSB7XHJcbiAgICB0aGlzLmZSYW5raW5nICs9IG5ld19pdGVtLmZSYW5raW5nO1xyXG4gIH1cclxuICBjb21wYXJlKG90aGVyKSB7XHJcbiAgICByZXR1cm4gb3RoZXIuZlJhbmtpbmcgLSB0aGlzLmZSYW5raW5nXHJcbiAgfVxyXG4gIG1hdGNoKG90aGVyKSB7XHJcbiAgICByZXR1cm4gc2VhcmNoX3V0aWxzLmNvbXBhcmVOb0Nhc2Uob3RoZXIuc3RyVXJsLCB0aGlzLnN0clVybCkgPT09IDA7XHJcbiAgfVxyXG59IiwiY29uc3QgcmggPSByZXF1aXJlKFwiLi4vLi4vLi4vLi4vbGliL3JoXCIpXHJcbmNvbnN0IF8gPSByaC5fXHJcbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgU2VhcmNoVGV4dE1lcmdlciB7XHJcbiAgY29uc3RydWN0b3IobmV4dFRleHRzLCB0ZXh0cywgZmlsdGVyKSB7XHJcbiAgICB0aGlzLm5leHRUZXh0cyA9IG5leHRUZXh0c1xyXG4gICAgdGhpcy50ZXh0cyA9IHRleHRzXHJcbiAgICB0aGlzLnNlcGFyYXRvciA9IFwiIFwiXHJcbiAgICB0aGlzLmZpbHRlciA9IGZpbHRlciB8fCB0aGlzLmRlZmF1bHRGaWx0ZXJcclxuICB9XHJcbiAgam9pbihpZCwgc3RhcnQsIGVuZCkge1xyXG4gICAgbGV0IHRleHRzID0gW11cclxuICAgIGZvciAobGV0IGkgPSBzdGFydDsgaSA8PSBlbmQ7IGkrKyl7XHJcbiAgICAgIGlmICh0aGlzLnRleHRzW2lkXVtpXSkge1xyXG4gICAgICAgIHRleHRzLnB1c2godGhpcy50ZXh0c1tpZF1baV0pXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0ZXh0cy5qb2luKHRoaXMuc2VwYXJhdG9yKVxyXG4gIH1cclxuICBkZWZhdWx0RmlsdGVyKCkge1xyXG4gICAgcmV0dXJuIGZhbHNlXHJcbiAgfVxyXG4gIGdldEluZGV4VGV4dCh0ZXh0cykge1xyXG4gICAgcmV0dXJuIHRleHRzLmpvaW4odGhpcy5zZXBhcmF0b3IpLnJlcGxhY2UoL1xcbi9naSwgdGhpcy5zZXBhcmF0b3IpLnRyaW0oKVxyXG4gIH1cclxuICBnZXRUZXh0KCkge1xyXG4gICAgbGV0IHRleHRzID0gW11cclxuICAgIF8uZWFjaCh0aGlzLm5leHRUZXh0cywgaXRlbSA9PiB7XHJcbiAgICAgIGlmICghdGhpcy5maWx0ZXIoaXRlbVswXSkpIHtcclxuICAgICAgICB0ZXh0cy5wdXNoKHRoaXMuam9pbihpdGVtWzBdLCBpdGVtWzFdLCBpdGVtWzJdKSlcclxuICAgICAgfVxyXG4gICAgfSlcclxuICAgIHJldHVybiB0ZXh0cy5qb2luKHRoaXMuc2VwYXJhdG9yKVxyXG4gIH1cclxufSIsImxldCByaCA9IHJlcXVpcmUoXCIuLi8uLi9saWIvcmhcIilcclxubGV0IF8gPSByaC5fXHJcbmxldCBjb25zdHMgPSByaC5jb25zdHNcclxuY2xhc3MgU2VhcmNoUmVzdWx0Q29udHJvbGxlciB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHdpZGdldCkge1xyXG4gICAgdGhpcy53aWRnZXQgPSB3aWRnZXRcclxuICB9XHJcblxyXG4gIGdldExpbmsodXJsKSB7XHJcbiAgICBsZXQgc2VhcmNoVXJsID0gdXJsIFxyXG4gICAgbGV0IGhpZ2hsaWdodFBhcmFtID0gdGhpcy53aWRnZXQuZ2V0KGNvbnN0cygnS0VZX1NFQVJDSF9SRVNVTFRfUEFSQU1TJykpXHJcbiAgICBsZXQgc2VhcmNoVGVybSA9IHRoaXMud2lkZ2V0LmdldChjb25zdHMoJ0tFWV9TRUFSQ0hfVEVSTScpKSBcclxuICAgIGxldCBzZWFyY2hUZXJtUGFyYW0gPSAnJ1xyXG4gICAgaWYoc2VhcmNoVGVybSAmJiAgc2VhcmNoVGVybSAhPT0gJycpIHtcclxuICAgICAgbGV0IGtleSA9IGNvbnN0cygnSEFTSF9LRVlfUkhfU0VBUkNIJylcclxuICAgICAgbGV0IHNlYXJjaFRlcm1NYXAgPSB7fTtcclxuICAgICAgc2VhcmNoVGVybU1hcFtrZXldID0gc2VhcmNoVGVybVxyXG4gICAgICBzZWFyY2hUZXJtUGFyYW0gPSBfLm1hcFRvRW5jb2RlZFN0cmluZyhzZWFyY2hUZXJtTWFwKVxyXG4gICAgfVxyXG4gICAgaWYoaGlnaGxpZ2h0UGFyYW0gIT09IHVuZGVmaW5lZCAmJiBoaWdobGlnaHRQYXJhbSAhPT0gJycpe1xyXG4gICAgICBzZWFyY2hVcmwgPSBzZWFyY2hVcmwgKyBoaWdobGlnaHRQYXJhbSArICcmJyArIHNlYXJjaFRlcm1QYXJhbSBcclxuICAgIH1cclxuICAgIGVsc2UgaWYoc2VhcmNoVGVybVBhcmFtICE9PSAnJyl7XHJcbiAgICAgIHNlYXJjaFVybCA9IHNlYXJjaFVybCArICc/JyArIHNlYXJjaFRlcm1QYXJhbVxyXG4gICAgfSBcclxuICAgIHJldHVybiBzZWFyY2hVcmxcclxuICB9XHJcbn1cclxuXHJcbnJoLmNvbnRyb2xsZXIoJ1NlYXJjaFJlc3VsdENvbnRyb2xsZXInLCBTZWFyY2hSZXN1bHRDb250cm9sbGVyKSIsImxldCByaCA9IHJlcXVpcmUoXCIuLi8uLi9saWIvcmhcIilcclxubGV0IF8gPSByaC5fXHJcbmxldCBjb25zdHMgPSByaC5jb25zdHNcclxuLy9jb25zdCBLRVlfQUNUSVZFX0JPT0tJRCA9ICdhY3RpdmVfYm9va2lkJztcclxuXHJcbmNsYXNzIFRvY0JyZWFkY3J1bWJzQ29udHJvbGxlciB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHdpZGdldCkge1xyXG4gICAgdGhpcy53aWRnZXQgPSB3aWRnZXQ7XHJcbiAgICAvL3RoaXMud2lkZ2V0Lm1vZGVsLnN1YnNjcmliZShLRVlfQUNUSVZFX0JPT0tJRCwgdGhpcy51cGRhdGVCcmVhZGNydW1icylcclxuICB9XHJcbiAgc2VsZWN0KGlkLCB1cmwpe1xyXG4gICAgdGhpcy53aWRnZXQucHVibGlzaChjb25zdHMoJ0tFWV9UT0NfU0VMRUNUX0lURU0nKSxcclxuICAgICAgeydpZCc6IGlkICwgJ3VybCc6IHVybH0pO1xyXG4gIH1cclxuICBnZXRMaW5rKGlkKXtcclxuICAgIGlmKGlkKXtcclxuICAgICAgbGV0IGJyZWFkY3J1bWJzID0gdGhpcy53aWRnZXQuZ2V0KGNvbnN0cygnS0VZX1RPQ19CUkVBRENSVU1CUycpKVxyXG4gICAgICBsZXQgaXRlbSA9IGJyZWFkY3J1bWJzW2lkXVxyXG4gICAgICBpZihpdGVtICYmIGl0ZW0uaGFzVXJsKXtcclxuICAgICAgICByZXR1cm4gaXRlbS51cmxcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICBnb1RvSG9tZShpbmRleCl7XHJcbiAgICBpZihpbmRleCl7XHJcbiAgICAgIGxldCBicmVhZGNydW1icyA9IHRoaXMud2lkZ2V0LmdldChjb25zdHMoJ0tFWV9UT0NfQlJFQURDUlVNQlMnKSlcclxuICAgICAgbGV0IGl0ZW0gPSBicmVhZGNydW1ic1tpbmRleF1cclxuICAgICAgaWYoaXRlbSAmJiAhaXRlbS5oYXNVcmwpe1xyXG4gICAgICAgIF8uZ29Ub0hvbWUoe3JodG9jaWQ6IGl0ZW0uaWR9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxucmguY29udHJvbGxlcignVG9jQnJlYWRjcnVtYnNDb250cm9sbGVyJywgVG9jQnJlYWRjcnVtYnNDb250cm9sbGVyKSIsImxldCByaCA9IHJlcXVpcmUoXCIuLi8uLi8uLi9saWIvcmhcIilcclxubGV0ICQgPSByaC4kO1xyXG5sZXQgQ0FST1VTRUxfQ0hBTkdFID0gJ2NoYW5nZSc7XHJcbmxldCBDQVJPVVNFTF9JVEVNID0gJy5jYXJvdXNlbC1pdGVtOm5vdCguaGlkZSk6bm90KC5yaC1oaWRlKSc7XHJcblxyXG5jbGFzcyBDYXJvdXNlbCB7XHJcbiAgY29uc3RydWN0b3Iod2lkZ2V0LCBvcHRzKSB7XHJcbiAgICB0aGlzLndpZGdldCA9IHdpZGdldDtcclxuICAgIHRoaXMubm9kZSA9IHRoaXMud2lkZ2V0Lm5vZGU7XHJcbiAgICB0aGlzLnRhYiA9IDA7XHJcbiAgICByaC5tb2RlbC5zdWJzY3JpYmVPbmNlKHJoLmNvbnN0cyhvcHRzLmtleSksICgpID0+IHtcclxuICAgICAgdGhpcy53aWRnZXQucHVibGlzaChDQVJPVVNFTF9DSEFOR0UsIHRydWUpO1xyXG4gICAgfSk7XHJcbiAgICByaC5tb2RlbC5zdWJzY3JpYmUocmguY29uc3RzKCdLRVlfU0NSRUVOJyksICgpID0+IHtcclxuICAgICAgdGhpcy5nb3RvKHRoaXMudGFiLCAwKTtcclxuICAgIH0pO1xyXG4gICAgcmgubW9kZWwuc3Vic2NyaWJlKG9wdHMua2V5Kydnb3RvdGFiJywgKGJvb2tEYXRhKSA9PiB7XHJcbiAgICAgIHRoaXMuZ290byh0aGlzLnBhZ2Vjb3VudCgpLCBib29rRGF0YS50YWIpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnb3RvKGZyb20sIHRvKSB7XHJcbiAgICB0aGlzLnRhYiA9IHRvO1xyXG4gICAgdGhpcy5jYXJvdXNlbG5vZGUgPSAkLmZpbmQodGhpcy5ub2RlLCAnLmNhcm91c2VsJylbMF07XHJcbiAgICB0aGlzLmFuaW1hdGVMZWZ0KGZyb20pO1xyXG4gICAgcmguXy5kZWxheSgoKSA9PiB7XHJcbiAgICAgIHRoaXMud2lkZ2V0LnB1Ymxpc2goQ0FST1VTRUxfQ0hBTkdFLCB0cnVlKTtcclxuICAgIH0sIDEwMDApO1xyXG4gIH1cclxuXHJcbiAgaGFzTmV4dCgpIHtcclxuICAgIHRoaXMuY2Fyb3VzZWxub2RlID0gJC5maW5kKHRoaXMubm9kZSwgJy5jYXJvdXNlbCcpWzBdO1xyXG4gICAgbGV0IGxhc3RJdGVtID0gJC5maW5kKCQuZmluZCh0aGlzLm5vZGUsICcuY2Fyb3VzZWwnKVswXSwgQ0FST1VTRUxfSVRFTSk7XHJcbiAgICBsYXN0SXRlbSA9IChsYXN0SXRlbSAmJiBsYXN0SXRlbS5sZW5ndGggPiAwKT8gbGFzdEl0ZW1bbGFzdEl0ZW0ubGVuZ3RoIC0gMV0gOiBudWxsO1xyXG4gICAgcmV0dXJuIGxhc3RJdGVtLm9mZnNldExlZnQgKyB0aGlzLmNhcm91c2Vsbm9kZS5vZmZzZXRMZWZ0ID4gdGhpcy5jYXJvdXNlbG5vZGUub2Zmc2V0V2lkdGg7XHJcbiAgfVxyXG5cclxuICBhbmltYXRlTGVmdCgpIHtcclxuICAgIGxldCBsZWZ0VmFsID0gJ2NhbGMoLScgKyB0aGlzLnRhYioxNCArICdweCAtICcgKyB0aGlzLnRhYioxMDAgKyAnJSknXHJcbiAgICAkLmNzcyh0aGlzLmNhcm91c2Vsbm9kZSwgJ2xlZnQnLCBsZWZ0VmFsKVxyXG4gIH1cclxuXHJcbiAgbmV4dCgpIHtcclxuICAgIHRoaXMuZ290byh0aGlzLnRhYiwgdGhpcy50YWIrMSk7XHJcbiAgfVxyXG5cclxuICBwYWdlY291bnQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy50YWI7XHJcbiAgfVxyXG5cclxuICBwcmV2aW91cygpIHtcclxuICAgIHRoaXMuZ290byh0aGlzLnRhYiwgdGhpcy50YWItMSk7XHJcbiAgfVxyXG5cclxuICBlbnN1cmVWaXNpYmxlKCkge1xyXG5cclxuICB9XHJcbn1cclxuXHJcbnJoLmNvbnRyb2xsZXIoJ0Nhcm91c2VsJywgQ2Fyb3VzZWwpO1xyXG4iLCJsZXQgcmggPSByZXF1aXJlKFwiLi4vLi4vbGliL3JoXCIpXHJcbmxldCAkID0gcmguJFxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuXHJcbiAgbm9kZVR5cGU6IHtcclxuICAgIEVMRU1FTlRfTk9ERTogMSxcclxuICAgIEFUVFJJQlVURV9OT0RFOiAyLFxyXG4gICAgVEVYVF9OT0RFOiAzLFxyXG4gICAgQ0RBVEFfU0VDVElPTl9OT0RFOiA0LFxyXG4gICAgRU5USVRZX1JFRkVSRU5DRV9OT0RFOiA1LFxyXG4gICAgRU5USVRZX05PREU6IDYsXHJcbiAgICBQUk9DRVNTSU5HX0lOU1RSVUNUSU9OX05PREU6IDcsXHJcbiAgICBDT01NRU5UX05PREU6IDgsXHJcbiAgICBET0NVTUVOVF9OT0RFOiA5LFxyXG4gICAgRE9DVU1FTlRfVFlQRV9OT0RFOiAxMCxcclxuICAgIERPQ1VNRU5UX0ZSQUdNRU5UX05PREU6IDExLFxyXG4gICAgTk9UQVRJT05fTk9ERTogMTJcclxuICB9LFxyXG5cclxuICByZW1vdmVDaGlsZChub2RlLCBwYXJlbnQgPSB0aGlzLnBhcmVudE5vZGUobm9kZSkpIHtcclxuICAgIHJldHVybiBwYXJlbnQgJiYgcGFyZW50LnJlbW92ZUNoaWxkICYmIHBhcmVudC5yZW1vdmVDaGlsZChub2RlKVxyXG4gIH0sXHJcbiAgYXBwZW5kQ2hpbGQocGFyZW50LCBuZXdOb2RlKSB7XHJcbiAgICByZXR1cm4gcGFyZW50ICYmIHBhcmVudC5hcHBlbmRDaGlsZCAmJiBwYXJlbnQuYXBwZW5kQ2hpbGQobmV3Tm9kZSlcclxuICB9LFxyXG4gIHBhcmVudE5vZGUobm9kZSkge1xyXG4gICAgcmV0dXJuIG5vZGUgJiYgbm9kZS5wYXJlbnROb2RlXHJcbiAgfSxcclxuICBjaGlsZE5vZGVzKG5vZGUpIHtcclxuICAgIHJldHVybiBub2RlICYmIG5vZGUuY2hpbGROb2RlcyB8fCBbXVxyXG4gIH0sXHJcbiAgdG9IdG1sTm9kZShodG1sKSB7XHJcbiAgICByZXR1cm4gdGhpcy5jaGlsZE5vZGVzKCQuY3JlYXRlRWxlbWVudCgnZGl2JywgaHRtbCkpXHJcbiAgfSxcclxuICBvdXRlckhUTUwobm9kZSkge1xyXG4gICAgcmV0dXJuIG5vZGUgJiYgbm9kZS5vdXRlckhUTUwgfHwgJydcclxuICB9LFxyXG4gIGluc2VydEFmdGVyKG5vZGUsIG5ld05vZGUpe1xyXG4gICAgcmV0dXJuIG5vZGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobmV3Tm9kZSwgbm9kZS5uZXh0U2libGluZylcclxuICB9LFxyXG4gIHZhbHVlKG5vZGUpIHtcclxuICAgIHJldHVybiBub2RlICYmIG5vZGUubm9kZVZhbHVlXHJcbiAgfSxcclxuICBuYW1lKG5vZGUpIHtcclxuICAgIHJldHVybiBub2RlICYmIG5vZGUubm9kZU5hbWVcclxuICB9LFxyXG4gIHR5cGUobm9kZSkge1xyXG4gICAgcmV0dXJuIG5vZGUgJiYgbm9kZS5ub2RlVHlwZVxyXG4gIH0sXHJcbiAgaXNFbGVtZW50Tm9kZShub2RlKSB7XHJcbiAgICByZXR1cm4gdGhpcy50eXBlKG5vZGUpID09PSB0aGlzLm5vZGVUeXBlLkVMRU1FTlRfTk9ERVxyXG4gIH0sXHJcbiAgaXNUZXh0Tm9kZShub2RlKSB7XHJcbiAgICByZXR1cm4gdGhpcy50eXBlKG5vZGUpID09PSB0aGlzLm5vZGVUeXBlLlRFWFRfTk9ERVxyXG4gIH1cclxufSJdfQ==
